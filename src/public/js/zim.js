// ZIM Cat - Interactive Media framework at https://zimjs.com - code creativity!
// Also see https://zimjs.com/distill to minify only the functions in your app
// (c) 2020 Dan Zen - free to use - donations welcome! https://zimjs.com/donate

"undefined"==typeof window&&(window={});var zon,zns,zimDefaultFrame=window.zimDefaultFrame,zdf=window.zdf,createjs=window.createjs,OPTIMIZE=window.OPTIMIZE,ACTIONEVENT=window.ACTIONEVENT,KEYFOCUS=window.KEYFOCUS,TIMECHECK=window.TIMECHECK,TIME=window.TIME,STYLE=window.STYLE,MOBILE=window.MOBILE,LOCALSTORAGE=window.LOCALSTORAGE,GET=window.GET,POST=window.POST,SOCKET=window.SOCKET,zimContactListener=window.zimContactListener,zimDefaultPhysics=window.zimDefaultPhysics,b2ContactListener=window.b2ContactListener,b2Vec2=window.b2Vec2;void 0===zon&&(zon=!0),void 0===zns&&(zns=!1);var zog=zon?console.log.bind(console):function(){},zogStyle=" border:thin solid black; color: black",zogg=zon?console.log.bind(console,"%c Z ","background: #acd241;"+zogStyle):function(){},zogp=zon?console.log.bind(console,"%c Z ","background: #e472c4;"+zogStyle):function(){},zogb=zon?console.log.bind(console,"%c Z ","background: #50c4b7;"+zogStyle):function(){},zogr=zon?console.log.bind(console,"%c Z ","background: #fb4758;"+zogStyle):function(){},zogy=zon?console.log.bind(console,"%c Z ","background: #ebcb35;"+zogStyle):function(){},zogo=zon?console.log.bind(console,"%c Z ","background: #f58e25;"+zogStyle):function(){},zogl=zon?console.log.bind(console,"%c Z ","background: #eeeeee;"+zogStyle):function(){},zogd=zon?console.log.bind(console,"%c Z ","background: #444444; border:thin solid black; color: white"):function(){};function zid(e){return z_d("1"),document.getElementById(e)}function zss(e){if(z_d("2"),document.getElementById(e))return document.getElementById(e).style;zon&&zogy("zss(): id not found")}function zgo(e,t,o,n,r,i){if(z_d("3"),!(zot(t)&&""!=t||"_self"==t)){var a="";return o&&(a+="width="+o+","),n&&(a+="height="+n+","),r&&(a+="fullscreen=yes,"),i&&(a+="modal=yes,alwaysRaised=yes"),window.open(e,t,a)}window.location.href=e}function zum(e){if(z_d("4"),!zot(e))return Number(String(e).replace(/[^\d\.\-]/g,""))}function zot(e){return null==e}function zop(e){z_d("5"),zot(e)||(e.stopImmediatePropagation&&e.stopImmediatePropagation(),window.event&&(window.event.cancelBubble=!0))}function zil(){z_d("6");function e(e){(e=e||event).keyCode&&32<=e.keyCode&&e.keyCode<=40&&e.preventDefault()}function t(e){(e=e||event).preventDefault()}var o=t;return window.addEventListener("keydown",e,{passive:!1}),window.addEventListener("wheel",t,{passive:!1}),window.addEventListener("DOMMouseScroll",o,{passive:!1}),[e,t,o]}function zet(r){return z_d("6.1"),new function(){var a=this;this.on=function(e,t){if(!(zot(r)||zot(e)||zot(t)))for(var o=a.tags,n=0;n<o.length;n++)o[n].addEventListener(e,t)},this.off=function(e,t){if(!(zot(r)||zot(e)||zot(t)))for(var o=a.tags,n=0;n<o.length;n++)o[n].removeEventListener(e,t)},Object.defineProperty(a,"tags",{get:function(){return zot(r)?[]:"string"==typeof r||r instanceof String?document.querySelectorAll(r):"string"==typeof r.innerHTML?[r]:[]},set:function(){}}),this.css=function(e,t){for(var o=a.tags,n=0;n<o.length;n++)if(1==arguments.length&&e.constructor==={}.constructor)for(var r in e)o[n].style[r]=e[r];else{if(1==arguments.length)return a.tags[0].style[e];o[n].style[e]=t}},this.prop=function(e,t){if(!zot(e)){for(var o=a.tags,n=[],r=0;r<o.length;r++)if(zot(t))if(e.constructor==={}.constructor)for(var i in e)o[r][i]=e[i];else n.push(o[r][e]);else o[r][e]=t;return zot(t)?n:void 0}}}}function isDUO(e){return 1==e.length&&null!=e[0]&&e[0].constructor==={}.constructor}function zob(e,t,o,n){var r=zim&&(zim.ZIMONON||ZIMONON);if(isDUO(t)){z_d("7");for(var i,a,l=t[0],s=zot(o)?e.toString().split(/\n/,1)[0].match(/\((.*)\)/)[1].replace(/\s+/g,"").split(","):o.replace(/\s+/g,"").split(","),c=[],u=0;u<s.length;u++)i=s[u].split("=")[0],s[u]=i,c.push(l[i]);for(u in l)s.indexOf(u)<0&&zon&&zogy(e,"bad argument "+u);return!(a=e.prototype.isPrototypeOf(n)?new(e.bind.apply(e,[null].concat(c))):e.apply(null,c))||(r&&!a.arguments&&(a.arguments=[l]),a)}r&&n&&t&&zot(n.arguments)&&(n.arguments=Array.prototype.slice.call(t))}function zik(e){if(z_d("7.5"),z_d("17.6"),!zot(e))return zim.Pick.choose(e)}var ignore,zta=console.table&&zon?console.table.bind(console):function(){},zor=function(){for(var e=0;e<arguments.length;e++)if(!zot(arguments[e]))return arguments[e]};function z_d(e){zim&&(zim.DISTILL||window.DISTILL)&&zim.distillery.push(e)}function zimify(n,e){if(z_d("83.3"),n&&n.noDrag)return n;var t={drag:function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f){return isDUO(arguments)?(e.obj=this,zim.drag(e)):zim.drag(this,e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f)},noDrag:function(e){return zim.noDrag(this,e)},mouse:function(){return zim.mouse(this)},noMouse:function(){return zim.noMouse(this)},wire:function(e,t,o,n,r,i,a){return isDUO(arguments)?(e.source=this,zim.wire(e)):zim.wire(this,e,t,o,n,r,i,a)},noWire:function(e,t,o){return isDUO(arguments)?(e.source=this,zim.noWire(e)):zim.noWire(this,e,t,o)},wired:function(e,t,o,n,r,i,a){return isDUO(arguments)?(e.target=this,zim.wired(e)):zim.wired(this,e,t,o,n,r,i,a)},noWired:function(e,t,o){return isDUO(arguments)?(e.target=this,zim.noWired(e)):zim.noWired(this,e,t,o)},bind:function(e,t,o,n,r){return isDUO(arguments)?(e.obj=this,zim.bind(e)):zim.bind(this,e,t,o,n,r)},noBind:function(e,t,o,n){return isDUO(arguments)?(e.obj=this,zim.noBind(e)):zim.noBind(this,e,t,o,n)},dragBoundary:function(e){return zim.dragBoundary(this,e)},dragRect:function(e){return zim.dragBoundary(this,e)},transform:function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P){return isDUO(arguments)?(e.obj=this,zim.transform(e)):zim.transform(this,e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P)},setSwipe:function(e){return zim.setSwipe(this,e)},gesture:function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p){return isDUO(arguments)?(e.obj=this,zim.gesture(e)):zim.gesture(this,e,t,o,n,r,i,a,l,s,c,u,d,h,g,p)},noGesture:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.noGesture(e)):zim.noGesture(this,e,t,o)},gestureBoundary:function(e,t){return zim.gestureBoundary(this,e,t)},gestureRect:function(e,t){return zim.gestureBoundary(this,e,t)},addPhysics:function(e,t,o,n,r,i,a,l,s,c,u){return isDUO(arguments)?(e.obj=this,zim.addPhysics(e)):zim.addPhysics(this,e,t,o,n,r,i,a,l,s,c,u)},removePhysics:function(){return zim.removePhysics(this)},hitTestPoint:function(e,t,o){return zim.hitTestPoint(this,e,t,o)},hitTestReg:function(e,t){return zim.hitTestReg(this,e,t)},hitTestRect:function(e,t,o){return zim.hitTestRect(this,e,t,o)},hitTestCircle:function(e,t,o){return zim.hitTestCircle(this,e,t,o)},hitTestCircleRect:function(e,t){return zim.hitTestCircleRect(this,e,t)},hitTestCircles:function(e,t){return zim.hitTestCircles(this,e,t)},hitTestBounds:function(e,t,o){return zim.hitTestBounds(this,e,t,o)},boundsToGlobal:function(e,t,o){return zim.boundsToGlobal(this,e,t,o)},resetBounds:function(e,t,o,n){return zim.resetBounds(this,e,t,o,n)},hitTestPath:function(e,t,o){return zim.hitTestPath(this,e,t,o)},hitTestGrid:function(e,t,o,n,r,i,a,l,s,c,u,d){return zim.hitTestGrid(this,e,t,o,n,r,i,a,l,s,c,u,d)},animate:function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,I,E,O,M,j,L,Y,_,D,X,R,W,H,F,V,N,G,q,Q,U,K,Z){return e&&(e.props||e.obj)&&isDUO(arguments)?(e.target=this,zim.animate(e)):zim.animate(this,e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,I,E,O,M,j,L,Y,_,D,X,R,W,H,F,V,N,G,q,Q,U,K,Z)},pauseAnimate:function(){return this},stopAnimate:function(){return this},wiggle:function(e,t,o,n,r,i,a,l,s,c,u,d,h,g){return isDUO(arguments)?(e.target=this,zim.wiggle(e)):zim.wiggle(this,e,t,o,n,r,i,a,l,s,c,u,d,h,g)},loop:function(e,t,o,n,r){return zim.loop(this,e,t,o,n,r)},copyMatrix:function(e){return zim.copyMatrix(this,e)},duplicate:function(e){return zim.duplicate(this,e)},cur:function(e){return zim.cur(this,e)},sha:function(e,t,o,n){return zim.sha(this,e,t,o,n)},pos:function(e,t,o,n,r,i,a,l,s,c){return isDUO(arguments)?(e.obj=this,zim.pos(e)):zim.pos(this,e,t,o,n,r,i,a,l,s,c)},loc:function(e,t,o,n,r,i,a){return isDUO(arguments)?(e.obj=this,zim.loc(e)):zim.loc(this,e,t,o,n,r,i,a)},mov:function(e,t){return isDUO(arguments)?(e.obj=this,zim.mov(e)):zim.mov(this,e,t)},top:function(){return zim.top(this)},bot:function(){return zim.bot(this)},ord:function(e){return zim.ord(this,e)},dep:function(e){return zim.dep(this,e)},nam:function(e){return zim.nam(this,e)},alp:function(e){return zim.alp(this,e)},ble:function(e){return zim.ble(this,e)},hov:function(e,t){return zim.hov(this,e,t)},rot:function(e,t,o){return zim.rot(this,e,t,o)},siz:function(e,t,o){return zim.siz(this,e,t,o)},ske:function(e,t){return zim.ske(this,e,t)},reg:function(e,t,o){return zim.reg(this,e,t,o)},sca:function(e,t){return zim.sca(this,e,t)},scaleTo:function(e,t,o,n,r){return isDUO(arguments)?(e.obj=this,zim.scaleTo(e)):zim.scaleTo(this,e,t,o,n,r)},fit:function(e,t,o,n,r){return isDUO(arguments)?(e.obj=this,zim.fit(e)):zim.fit(this,e,t,o,n,r)},outline:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.outline(e)):zim.outline(this,e,t,o)},addTo:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.addTo(e)):zim.addTo(this,e,t,o)},removeFrom:function(e){return zim.removeFrom(this,e)},added:function(e,t,o){return zim.added(this,e,t,o)},movement:function(e,t){return zim.movement(this,e,t)},noMovement:function(){return zim.noMovement(this)},tap:function(e,t,o,n){return zim.tap(this,e,t,o,n)},noTap:function(){return zim.noTap(this)},hold:function(e,t,o,n){return zim.hold(this,e,t,o,n)},noHold:function(){return zim.noHold(this)},change:function(e,t){return zim.change(this,e,t)},noChange:function(){return zim.noChange(this)},centerReg:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.centerReg(e)):zim.centerReg(this,e,t,o)},center:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.center(e)):zim.center(this,e,t,o)},place:function(e){return zim.place(this,e)},placeReg:function(e){return zim.placeReg(this,e)},expand:function(e,t,o,n){return isDUO(arguments)?(e.obj=this,zim.expand(e)):zim.expand(this,e,t,o,n)},setMask:function(e,t){return zim.setMask(this,e,t)},cloneProps:function(e){return e.type=this.type,e.group=this.group,e.style=this.style,e.alpha=this.alpha,e.rotation=this.rotation,e.mouseEnabled=this.mouseEnabled,e.mouseChildren=this.mouseChildren,e.tickEnabled=this.tickEnabled,e.x=this.x,e.y=this.y,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.skewX=this.skewX,e.skewY=this.skewY,e.name&&(e.name=this.name),e.regX=this.regX*e.width/(this.width||1),e.regY=this.regY*e.height/(this.height||1),e.visible=this.visible,e.shadow=this.shadow,this.type&&"Shape"!=this.type||zim.copyMatrix(e,this),e.compositeOperation=this.compositeOperation,e.snapToPixel=this.snapToPixel,e.filters=null==this.filters?null:this.filters.slice(0),e.mask=this.mask,e.hitArea=this.hitArea,this.type&&"Shape"!=this.type||!this._bounds||e.setBounds(this._bounds.x,this._bounds.y,this._bounds.width,this._bounds.height),e},cloneChildren:function(e,t){e.children.length&&e.removeAllChildren();for(var o=e.children,n=0,r=this.children.length;n<r;n++){var i=this.children[n].clone(t);i.parent=e,o.push(i)}return e}};if(!zot(e)){e=[];for(var o in t)e.push(o);return e}for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return zim&&(n.cjsLocalToGlobal=n.localToGlobal,n.cjsGlobalToLocal=n.globalToLocal,n.cjsLocalToLocal=n.localToLocal,n.localToGlobal=function(e,t){return zim.localToGlobal(e,t,n,n.cjsLocalToGlobal)},n.globalToLocal=function(e,t){return zim.globalToLocal(e,t,n,n.cjsGlobalToLocal)},n.localToLocal=function(e,t,o){return zim.localToLocal(e,t,o,n)}),Object.defineProperty(n,"width",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.width*this.scaleX)},set:function(e){var t,o=this.getBounds();zot(o)||0==o.width?zon&&zogy("DisplayObject() - width needs bounds set with setBounds()"):(t=e/o.width,this.scaleX=this.scaleY=t)}}),Object.defineProperty(n,"height",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.height*this.scaleY)},set:function(e){var t,o=this.getBounds();zot(o)||0==o.height?zon&&zogy("DisplayObject() - height needs bounds set with setBounds()"):(t=e/o.height,this.scaleX=this.scaleY=t)}}),Object.defineProperty(n,"widthOnly",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.width*this.scaleX)},set:function(e){var t,o=this.getBounds();!zot(o)&&0!=o.width||!zon?(t=e/o.width,this.scaleX=t):zogy("DisplayObject() - widthOnly needs bounds set with setBounds()")}}),Object.defineProperty(n,"heightOnly",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.height*this.scaleY)},set:function(e){var t,o=this.getBounds();!zot(o)&&0!=o.height||!zon?(t=e/o.height,this.scaleY=t):zogy("DisplayObject() - heightOnly needs bounds set with setBounds()")}}),Object.defineProperty(n,"level",{enumerable:!0,get:function(){return this.parent?this.parent.getChildIndex(this):null},set:function(e){this.parent&&this.parent.setChildIndex(this,Math.max(0,Math.min(e,this.parent.numChildren-1)))}}),Object.defineProperty(n,"depth",{enumerable:!0,get:function(){return this._depth},set:function(e){var t;this._depth=e,zot(this.vrChannel)||(t=this.vrParallaxDistance?e*this.vrParallax*this.vrParallaxDistance:0,"left"==this.vrChannel?this.x=this.vrStartX+e+t:"right"==this.vrChannel&&(this.x=this.vrStartX-e+t))}}),Object.defineProperty(n,"blendMode",{enumerable:!0,get:function(){return this.compositeOperation},set:function(e){this.compositeOperation=e}}),n}function zimplify(e){z_d("83.35"),document.Window=Window,document.Blob=Blob,ignore="ignore",zot(e)&&(e=[]),Array.isArray(e)||(e=[e]);var t=zimify(null,!0),o=["loop","stopAnimate","pauseAnimate","animate","wiggle","wire","wired"];for(var n in zim)(-1==t.indexOf(n)||0<=o.indexOf(n))&&-1==e.indexOf(n)&&(window[n]=zim[n])}(zim=function(So){function Bo(e,t,o,n,r){So.timeCheck||(z_d("9.99"),So.timeCheck=!0);var i=zot(TIME)?zot(So.TIME)?"seconds":So.TIME:TIME;return i&&i.toLowerCase&&(i=i.toLowerCase()),"milliseconds"!=i&&"ms"!=i&&(i="seconds"),t&&t.toLowerCase&&(t=t.toLowerCase()),"ms"!=t&&"milliseconds"!=t&&"seconds"!=t&&"s"!=t||(i=t),zot(e)?i.charAt(0):("ms"==i&&(i="milliseconds"),"s"==i&&(i="seconds"),i=i.charAt(0),r||Io(e,i,o,n),i)}function Io(e,t,o,n){zot(o)&&(o=10),zot(n)&&(n=9),(So.TIMECHECK||TIMECHECK)&&("m"!=t&&o<e||"m"==t&&e<n)&&zon&&zogy("TIME - warning: time is in "+("m"==t?"milliseconds":"seconds")+" ("+e+")")}if(So.chop=function(o,e,t,n){if(z_d("7.8"),!zot(o)){zot(e)&&(e=3),zot(t)&&(t=3),zot(n)&&(n=!0);var r=o.width/e,i=o.height/t,a=[];return loop(t,function(t){loop(e,function(e){a.push(new Bitmap(o,r,i,e*r,t*i))})}),n?new Tile(a,e,t,0,0,!0):a}},So.shuffle=function(e){if(z_d("8"),!zot(e)){var t,o,n=e.length;if(0==n)return e;for(;--n;)t=Math.floor(Math.random()*(n+1)),o=e[n],e[n]=e[t],e[t]=o;return e}},So.rand=function(e,t,o,n){return z_d("9"),zot(e)&&zot(t)?Math.random():((zot(e)||isNaN(e))&&(e=0),(zot(t)||isNaN(t))&&(t=0),e%1==0&&t%1==0||(o=!1),zot(o)&&(o=!0),n&&.5<Math.random()&&(e*=-1,t*=-1),o&&(t<e?e++:e<t&&t++),0==e&&0==t?0:(r=0==t?Math.random()*e:Math.min(e,t)+Math.random()*(Math.max(e,t)-Math.min(e,t)),o?Math.floor(r):r));var r},So.series=function(){var o,t;if(z_d("13.61"),0==arguments.length)return function(){};1==arguments.length&&Array.isArray(arguments[0])?o=arguments[0]:1==arguments.length&&arguments[0].constructor=={}.constructor?(zot((t=arguments[0]).min)&&(t.min=0),zot(t.max)&&(t.max=1),zot(t.step)&&(t.step=1),o=[],So.loop(Math.floor(Math.abs(t.max-t.min)+t.step),function(e){o.push(e+t.min)},null,t.step),t=null):o=Array.prototype.slice.call(arguments);function n(){if(s&&c%s!=0)return c++,r;c++;var e=o.length,t=o[(10*e+i)%e];return u?0<a&&e<=i+a*l?(a=-1,i=e-1-(i+l-(e-1))):a<0&&i+a*l<0?(a=1,i=l-i):i+=a*l:d?0<a&&e<=i+a*l?i=e-1:a<0&&i+a*l<0?i=0:i+=a*l:i+=a*l,r=t}var r,i=0,a=1,l=1,s=0,c=0,u=!1,d=!1;return n.array=o,n.type="series",Object.defineProperty(n,"index",{get:function(){var e=o.length;return(10*e+i)%e},set:function(e){i=e}}),n.jump=function(e){return i=e,n},n.reverse=function(e){return zot(e)&&(e=!0),a=e?-1:1,i=o.length-1,n},n.bounce=function(e){zot(e)&&(e=!0);var t=o.length;return i=(10*t+i)%t,u=e,n},n.step=function(e){return zot(e)&&(e=1),l=Math.floor(e),n},n.every=function(e){return zot(e)&&(e=1),s=Math.abs(e),c=0,n},n.constrain=function(e){return zot(e)&&(e=!0),d=e,n},n},So.makeSeries=function(e){if(z_d("13.6"),zot(e))return function(){};function t(){return e[o++%e.length]}var o=0;return t.array=e,t},So.loop=function(e,t,o,n,r,i){var a;if(a=zob(So.loop,arguments,"obj, call, reverse, step, start, end"))return a;if(z_d("9.5"),!zot(e)&&!zot(t)){zot(o)&&(o=!1),(zot(n)||n<=0)&&(n=1);var l="number"==typeof e?"number":e.constructor===Array?"array":e.constructor==={}.constructor?"object":"string"==typeof e?"string":e instanceof NodeList?"nodelist":e instanceof HTMLCollection?"htmlcollection":"invalid";if("invalid"!=l){if("number"==l||"string"==l||"array"==l||"nodelist"==l||"htmlcollection"==l){if(0==(c=g((u="number"==l?e:e.length)-1)))return!0;if(o)for(var s=r;i<=s;s-=n){if(void 0!==(h="number"==l?t(s,c,r,i,e):t("array"==l||"string"==l?e[s]:e.item(s),s,c,r,i,e)))return h}else for(s=r;s<=i;s+=n){if(void 0!==(h="number"==l?t(s,c,r,i,e):t("array"==l||"string"==l?e[s]:e.item(s),s,c,r,i,e)))return h}return!0}if("object"==l){var c,u=0,d=[];for(var s in e)u++,d.push(s);if(0==(c=g(u-1)))return;if(o)for(s=r;i<=s;s-=n){if(void 0!==(h=t(d[s],e[d[s]],s,c,r,i,e)))return h}else for(var h,s=r;s<=i;s+=n){if(void 0!==(h=t(d[s],e[d[s]],s,c,r,i,e)))return h}return!0}}}function g(e){return zot(r)&&(r=o?e:0),zot(i)&&(i=o?0:e),o&&r<i||!o&&i<r||(r<0&&i)<0||e<r&&e<i?0:(r=Math.max(0,Math.min(r,e)),i=Math.max(0,Math.min(i,e)),Math.floor((o?r-i:i-r)/n)+1)}},So.timeout=function(t,o,e,n){if(z_d("9.7"),!zot(o)&&"function"==typeof o){var r=Bo(t,n);zot(t)&&(t="s"==r?1:1e3),t=So.Pick.choose(t);var i={startTime:Date.now(),time:0,paused:!1,done:!1,timeUnit:n};e&&(zot(So.blurCheck)&&So.setBlurDetect(),So.pauseOnBlur.push(i));var a=i.startTime;return i.pause=function(e,t,o){zot(e)&&(e=!0),e?cancelAnimationFrame(i.rid):(t?a=0:o?(a=Date.now(),i.time=0):a=Date.now(),l()),i.paused=e},i.clear=function(){for(var e in i&&cancelAnimationFrame(i.rid),i)delete i[e];i.pause=function(){},i.clear=function(){}},l(),i}function l(){var e=Date.now();if(i.time+=(e-a)/("s"==r?1e3:1),a=e,i.time>=t)return i.done=!0,o(i),void i.clear();i.rid=requestAnimationFrame(l)}},So.interval=function(e,n,t,o,r,i){if(z_d("9.8"),!zot(n)&&"function"==typeof n){var a=Bo(e,i);if(zot(e)&&(e="s"==a?1:1e3),zot(o)&&(o=!1),zot(t)||!(isNaN(t)||t<=0)){zot(t)&&(t=-1);var l,s={count:0,total:t,paused:!1,time:e,active:!0,timeUnit:i};return r&&(zot(So.blurCheck)&&So.setBlurDetect(),So.pauseOnBlur.push(s)),o&&setTimeout(function(){n(s),u()},10),s.pause=function(e,t,o){zot(e)&&(e=!0),e?(clearTimeout(l),clearTimeout(s.id),cancelAnimationFrame(s.rid),s.pauseTimeLeft=s.interval-(Date.now()-s.startTime)/("s"==a?1e3:1)):(s.paused||s.pause(!0),l=setTimeout(function(){s.count++,n(s),c(),u()},t?0:(o?s.interval:s.pauseTimeLeft)*("s"==a?1e3:1)),s.pauseTimeLeft=null),s.paused=e},s.clear=function(){s.active=!1,clearTimeout(l),cancelAnimationFrame(s.rid),clearTimeout(s.id);var e=s.count;for(var t in s)delete s[t];s.active=!1,s.count=e,s.pause=function(){},s.clear=function(){}},c(),s}}function c(){s.startTime=Date.now(),s.interval=So.Pick.choose(s.time),s.id=setTimeout(function(){s.paused||s.active&&(s.count++,n(s),c(),u())},s.interval*("s"==a?1e3:1))}function u(){-1!=t&&s.count>=(o?s.total-1:s.total)&&s.clear()}},So.async=function(e,t,o,n,r){var i,a,l,s,c,u;z_d("29"),zot(e)||(i=document.createElement("script"),a=Bo(n),zot(n)&&(n="s"==a?2:2e3),t?(l=o||t.toString().split(/\n/,1)[0].match(/^function\s?([^\s(]*)/)[1],So.asyncList||(So.asyncList={}),So.asyncList[l]||(So.asyncList[l]=[]),So.asyncList[l].push(t),So.async[l]=(s=i,c=!1,u=setTimeout(function(){c=r,"function"==typeof t&&t("asyncError",r?"cancelled":"timeout")},n*("s"==a?1e3:1)),function(e){clearTimeout(u),So.asyncList[l]&&(t=So.asyncList[l].shift()),"function"!=typeof t||c||t(e),s&&s.parentNode.removeChild(s),s=null})):(So.async.z_s&&So.async.z_s.parentNode&&So.async.z_s.parentNode.removeChild(So.async.z_s),So.async.z_s=i),e.match(/\?/)||(e+="?"),i.setAttribute("src",e+"&r="+Math.random()),document.getElementsByTagName("head")[0].appendChild(i))},So.couple=function(e){if(z_d("29.2"),!So.isJSON(e))return e;var t=JSON.parse(e),o={};for(var n in t){var r=t[n];for(var i in r)o[n+"_"+i]=r[i]}return JSON.stringify(o)},So.decouple=function(e){if(z_d("29.3"),!So.isJSON(e))return e;var t=JSON.parse(e),o={};for(var n in t){var r=n.split("_",2);if(2!=r.length)return e;o[r[0]]||(o[r[0]]={}),o[r[0]][r[1]]=t[n]}return JSON.stringify(o)},So.convertColor=function(e,o,n){if(So.convertColorCheck||(z_d("27.5"),So.convertColorCheck=!0),zot(o)&&(o="hex"),!zot(e)){e=zik(e);var t,r,i=["black","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],a=["000000","f0f8ff","faebd7","00ffff","7fffd4","f0ffff","f5f5dc","ffe4c4","ffebcd","0000ff","8a2be2","a52a2a","deb887","5f9ea0","7fff00","d2691e","ff7f50","6495ed","fff8dc","dc143c","00ffff","00008b","008b8b","b8860b","a9a9a9","a9a9a9","006400","bdb76b","8b008b","556b2f","ff8c00","9932cc","8b0000","e9967a","8fbc8f","483d8b","2f4f4f","2f4f4f","00ced1","9400d3","ff1493","00bfff","696969","696969","1e90ff","b22222","fffaf0","228b22","ff00ff","dcdcdc","f8f8ff","ffd700","daa520","808080","808080","008000","adff2f","f0fff0","ff69b4","cd5c5c","4b0082","fffff0","f0e68c","e6e6fa","fff0f5","7cfc00","fffacd","add8e6","f08080","e0ffff","fafad2","d3d3d3","d3d3d3","90ee90","ffb6c1","ffa07a","20b2aa","87cefa","778899","778899","b0c4de","ffffe0","00ff00","32cd32","faf0e6","ff00ff","800000","66cdaa","0000cd","ba55d3","9370db","3cb371","7b68ee","00fa9a","48d1cc","c71585","191970","f5fffa","ffe4e1","ffe4b5","ffdead","000080","fdf5e6","808000","6b8e23","ffa500","ff4500","da70d6","eee8aa","98fb98","afeeee","db7093","ffefd5","ffdab9","cd853f","ffc0cb","dda0dd","b0e0e6","800080","663399","ff0000","bc8f8f","4169e1","8b4513","fa8072","f4a460","2e8b57","fff5ee","a0522d","c0c0c0","87ceeb","6a5acd","708090","708090","fffafa","00ff7f","4682b4","d2b48c","008080","d8bfd8","ff6347","40e0d0","ee82ee","f5deb3","ffffff","f5f5f5","ffff00","9acd32"];if("zim"==o.toLowerCase())return So.colorsHex.indexOf(e)<0?e:So.colors[So.colorsHex.indexOf(e)];if(t=e.match(/rgba\((.*)\)/)){if(!zot(n))return(r=e.split(","))[3]=n+")",r.join(",");e="rgb("+t[1]+")"}if(zot(n),t=e.match(/rgb\((.*)\)/)){if("rgba"==o)return(r=e.split(")"))[0]+","+n+r[1];if("hex"==o)return"#"+(i=u(t[1]))[0]+i[1]+i[2];if("string"!=o)return e;var l,e=u(t[1]).join("").toLowerCase();return-1==(l=a.indexOf(e))?"#"+e:i[l]}if("rgb"==o||"rgba"==o){function s(e){var t;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(e)?(3==(t=e.substring(1).split("")).length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),t="0x"+t.join(""),"rgb"==o?"rgb("+[t>>16&255,t>>8&255,255&t]+")":"rgba("+[t>>16&255,t>>8&255,255&t].join(",")+","+n+")"):"rgb"==o?"rgb(0,0,0)":"rgba(0,0,0,1)"}return"#"==e.charAt(0)?s(e):s(So.convertColor(e))}if("hex"==o){if("#"==e.charAt(0))return e}else"#"==e.charAt(0)&&3==(e=e.replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2));return"string"!=o?"#"+a[-1!=i.indexOf(e.toLowerCase())?i.indexOf(e):0]:-1==(l=a.indexOf(e))?"#"+e:i[l]}function c(e){var t=Number(e).toString(16);return t.length<2&&(t="0"+t),t}function u(e){var t=e.split(",");return[c(t[0]),c(t[1]),c(t[2])]}},So.colorRange=function(e,t,o){So.colorRangeCheck||(z_d("27.6"),So.colorRangeCheck=!0),zot(o)&&(o=.5),o=Math.max(0,Math.min(1,o)),zot(e)&&(e="white"),zot(t)&&(t="black");for(var n,r,i=So.convertColor(e,"rgb"),a=So.convertColor(t,"rgb"),e=i.substring(4,i.length-1).split(","),t=a.substring(4,a.length-1).split(","),l="#",s=0;s<e.length;s++)n=t[s]-e[s],(r=Math.floor(parseInt(e[s],10)+n*o).toString(16)).length<2&&(r="0"+r),l+=r;return l},So.lighten=function(e,t){return So.lightenCheck||(z_d("27.65"),So.lightenCheck=!0),zot(t)&&(t=.5),0<=t?So.colorRange(String(e),"#FFFFFF",t):So.colorRange(String(e),"#000000",-t)},So.darken=function(e,t){return zot(t)&&(t=.5),So.darkenCheck||(z_d("27.66"),So.darkenCheck=!0),0<=t?So.colorRange(String(e),"#000000",t):So.colorRange(String(e),"#ffffff",-t)},So.toColor=function(e,t,o){return So.toColorCheck||(z_d("27.67"),So.toColorCheck=!0),zot(o)&&(o=.5),So.colorRange(String(e),t,o)},So.toAlpha=function(e,t){return So.toAlphaCheck||(z_d("27.68"),So.toAlphaCheck=!0),zot(t)&&(t=.5),So.convertColor(String(e),"rgba",t)},So.pointAlongCurve=function(e,t,o,n){if(z_d("27.7"),e&&e[0]&&e[1]&&e[2]&&e[3]){zot(n)&&(n=!1);var r,i,a=new So.Bezier(e[0],e[1],e[2],e[3]);if(i=n?(r=a.mx(t),a.my(t)):(r=a.x(t),a.y(t)),o){var l,s,c,u,d=t-.05,h=t+.05;return d<0&&(d=0),1<h&&(h=1),u=n?(l=a.mx(d),s=a.my(d),c=a.mx(h),a.my(h)):(l=a.x(d),s=a.y(d),c=a.x(h),a.y(h)),{x:r,y:i,angle:So.angle(l,s,c,u)}}return{x:r,y:i}}},So.distanceAlongCurve=function(e){return z_d("27.8"),(So.dist(e[0],e[3])+(So.dist(e[0],e[1])+So.dist(e[1],e[2])+So.dist(e[2],e[3])))/2},So.closestPointAlongCurve=function(a,e,o,t,n){z_d("27.9");var l,s=1e7,c=0,u=0;return zot(o)&&(o=10),So.loop(e,function(e,r,t){var i=new So.Bezier(e[0],e[1],e[2],e[3]);So.loop(o,function(e,t){var o={x:i.x(e/t),y:i.y(e/t)},n=So.dist(a,o);n<s&&(s=n,l=o,c=r,u=e)})}),n?(c*o+u)/(e.length*o)*100:t?l:c},So.transformPoints=function(e,t,o,n,r){if(z_d("27.95"),!zot(e)&&Array.isArray(e)){zot(n)&&(n=0),zot(r)&&(r=0);var e=So.copy(e),i=n,a=r;"rotation"==t&&(0!=n&&(e=So.transformPoints(e,"x",-i)),0!=r&&(e=So.transformPoints(e,"y",-a)));for(var l=0;l<e.length;l++){var s,c,u,d=e[l];Array.isArray(d)&&("x"==t?d[0]+=o:"y"==t?d[1]+=o:"scaleX"==t?(d[0]=(d[0]-n)*o+n,d[4]=d[4]*o,d[6]=d[6]*o):"scaleY"==t?(d[1]=(d[1]-r)*o+r,d[5]=d[5]*o,d[7]=d[7]*o):"scale"==t?(d[0]=(d[0]-n)*o+n,d[4]=d[4]*o,d[6]=d[6]*o,d[1]=(d[1]-r)*o+r,d[5]=d[5]*o,d[7]=d[7]*o):"rotation"==t&&(s=o*Math.PI/180,c=d[0],u=d[1],d[0]=c*Math.cos(s)-u*Math.sin(s),d[1]=u*Math.cos(s)+c*Math.sin(s),c=d[4],u=d[5],d[4]=c*Math.cos(s)-u*Math.sin(s),d[5]=u*Math.cos(s)+c*Math.sin(s),c=d[6],u=d[7],d[6]=c*Math.cos(s)-u*Math.sin(s),d[7]=u*Math.cos(s)+c*Math.sin(s)))}return"rotation"==t&&(0!=n&&(e=So.transformPoints(e,"x",i)),0!=r&&(e=So.transformPoints(e,"y",a))),e}},So.makeID=function(e,t,o){z_d("13.5"),zot(e)&&(e="mixed"),zot(t)&&(t=5),zot(o)&&(o="uppercase");for(var n,r,i=[2,3,4,5,6,7,8,9],a="abcdefghjkmnpqrstuvwxyz".split(""),l=e.constructor===Array?e:"numbers"==e?i:"letters"==e?a:i.concat(a),s="",c=0;c<t;c++)n=l[Math.floor(Math.random()*l.length)],r=Math.random(),"uppercase"==o||"mixed"==o&&.5<r?n.toUpperCase&&(n=n.toUpperCase()):n.toLowerCase&&(n=n.toLowerCase()),s+=String(n);return s},So.swapProperties=function(e,t,o){if(z_d("17.1"),zot(t)||zot(o)||zot(t[e])||zot(o[e]))return!1;var n=o[e];return o[e]=t[e],t[e]=n,!0},So.mobile=function(e){return z_d("28"),void 0!==MOBILE&&"default"!=MOBILE?MOBILE:zot(So.MOBILE)||"default"==So.MOBILE?(zot(e)&&(e=!0),/ip(hone|od|ad)/i.test(navigator.userAgent)?"ios":/android|nexus/i.test(navigator.userAgent)?"android":/blackberry/i.test(navigator.userAgent)?"blackberry":/nokia|phone|mobile/i.test(navigator.userAgent)?"windows":/opera mini|webos/i.test(navigator.userAgent)?"other":!(!e||void 0===window.orientation)&&(!/safari/i.test(navigator.userAgent)||"ios")):So.MOBILE},So.vee=function(e){return z_d("28.5"),!zot(e)&&("Pick"==e.type||Array.isArray(e)||e.constructor=={}.constructor&&(!zot(e.max)||!zot(e.noPick))||"function"==typeof e)},So.extend=function(e,t,o,n,r){var i;if(i=zob(So.extend,arguments,"subclass, superclass, override, prefix, prototype"))return i;if(!zot(e)&&!zot(t)){zot(n)&&(n="super"),zot(o)&&(o=[]),Array.isArray(o)||(o=[o]),zot(r)&&(r=!0);var a={};for(var l in e.prototype)Object.defineProperty(a,l,Object.getOwnPropertyDescriptor(e.prototype,l));for(l in h.prototype=t.prototype,e.prototype=new h,a)Object.defineProperty(e.prototype,l,Object.getOwnPropertyDescriptor(a,l));var s,c=e.prototype,u=Object.getPrototypeOf&&Object.getPrototypeOf(c)||c.__proto__;if(u){c[(n+="_")+"constructor"]=u.constructor;for(var d=0;d<o.length;d++)"function"==typeof u[s=o[d]]&&(c[n+s]=u[s]);if(r)for(s in u)c.hasOwnProperty(s)&&"function"==typeof u[s]&&(c[n+s]=u[s])}return e}function h(){this.constructor=e}zon&&e!=So.StageGL&&zog("zim.extend() - please supply a class and its superclass")},So.copy=function(e,t,o){if(So.copyCheck||(z_d("10"),So.copyCheck=!0),zot(t)&&(t=!1),zot(o)&&(o=!0),null==e||!(e instanceof Array||e.constructor=={}.constructor))return t&&null!=e&&e.clone&&e.type&&("Container"!=e.type&&"Stage"!=e.type&&"StageGL"!=e.type||o)?e.clone():e;if(e instanceof Array){for(var n=[],r=0;r<e.length;r++)n[r]=So.copy(e[r],t,o);return n}if(e.constructor=={}.constructor){var i={};for(var a in e){var l=So.copy(e[a],t,o);e.hasOwnProperty(a)&&(i[a]=l)}return i}},So.merge=function(){So.mergeCheck||(z_d("12"),So.mergeCheck=!0);for(var e,t={},o=0;o<arguments.length;o++)for(e in arguments[o])arguments[o].hasOwnProperty(e)&&(t[e]=arguments[o][e]);return t},So.arraysEqual=function(e,t,o){if(z_d("11"),zot(e)||zot(t))return!1;if(zot(o)&&(o=!0),e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]instanceof Array&&t[n]instanceof Array){if(!So.arraysEqual(e[n],t[n],o))return!1}else{if(o&&e[n]!=t[n])return!1;if(!o)return So.arraysEqual(e.sort(),t.sort(),!0)}return!0},So.isEmpty=function(e){if(z_d("11.5"),!zot(e)){var t=0;for(var o in e){t++;break}return 0==t}},So.isJSON=function(e){if(z_d("11.6"),"string"!=typeof e)return!1;try{return JSON.parse(e),!0}catch(e){return!1}},So.isPick=function(e){if(z_d("11.7"),!zot(e))return Array.isArray(e)||e.constructor=={}.constructor&&null!=e.min&&null!=e.max||e.constructor===Function&&(null!=e.array||null!=e())},So.zut=function(e){if(zot(e)||"object"==typeof e)return!0},So.decimals=function(e,t,o,n,r,i,a){if(So.zimDecimalCheck||(z_d("13"),So.zimDecimalCheck=!0),zot(e))return 0;zot(t)&&(t=1),zot(o)&&(o=0),zot(n)&&(n=0),zot(n)&&(n=0),zot(r)&&(r=!0),zot(i)&&(i=!1);var l,s=Math.round(e*Math.pow(10,t))/Math.pow(10,t);i&&(l=s-Math.floor(s),s=So.decimals(Math.floor(s)+60*l/100,2));var c=So.sign(s);if(0<o){var u=String(s).indexOf("."),d=String(s).length;u<0&&(u=d++,s+=".");for(var h=0;h<o-(d-u-1);h++)s+="0"}if(0<n){-1==c&&(s=s.substr(1,s.length-1));for(var u=String(s).indexOf("."),d=String(s).length,g=u<0?d:u,h=0;h<n-g;h++)s="0"+s;-1==c&&(s="-"+s)}return 0<o+n&&!r&&0==Number(s)&&(s=0),i&&(s=String(s).replace(".",":")),So.zut(a)?s:null},So.sign=function(e){return So.zimSignCheck||(z_d("13.1"),So.zimSignCheck=!0),e?e<0?-1:1:0},So.constrain=function(e,t,o,n){if(z_d("13.2"),!zot(e))return zot(t)&&(t=0),zot(o)&&(o=Number.MAX_VALUE),o<t&&(t=o=t),zot(n)&&(n=!1),n&&e<0?Math.max(-o,Math.min(e,-t)):Math.max(t,Math.min(e,o))},So.dist=function(e,t,o,n){if(So.zimDistCheck||(z_d("13.3"),So.zimDistCheck=!0),!zot(e)&&!zot(t))return zot(e.x)||zot(t.x)?(zot(o)&&(o=0),zot(n)&&(n=0)):(n=t.y,o=t.x,t=e.y,e=e.x),Math.sqrt(Math.pow(o-e,2)+Math.pow(n-t,2))},So.rectIntersect=function(e,t,o){return So.zimRectIntersectCheck||(z_d("13.32"),So.zimRectIntersectCheck=!0),zot(o)&&(o=0),!(e.x>=t.x+t.width+o||e.x+e.width+o<=t.x||e.y>=t.y+t.height+o||e.y+e.height+o<=t.y)},So.boundsAroundPoints=function(e){So.zimBoundsAroundPointsCheck||(z_d("13.34"),So.zimBoundsAroundPointsCheck=!0);for(var t=1e4,o=1e4,n=-1e4,r=-1e4,i=0;i<e.length;i++){var a=e[i];a.x<t&&(t=a.x),a.x>n&&(n=a.x),a.y<o&&(o=a.y),a.y>r&&(r=a.y)}return{x:t,y:o,width:n-t,height:r-o}},So.angle=function(e,t,o,n){if(So.angleCheck||(z_d("13.4"),So.angleCheck=!0),!zot(e)&&!zot(t))return zot(o)&&(o=e,e=0),zot(n)&&(n=t,t=0),(180*Math.atan2(n-t,o-e)/Math.PI+360)%360},So.TAU=2*Math.PI,So.DEG=180/Math.PI,So.RAD=Math.PI/180,So.smoothStep=function(e,t,o){z_d("13.7");var n=So.constrain((e-t)/(o-t),0,1);return n*n*n*(n*(6*n-15)+10)},So.Ajax=function(u,e,d,t){z_d("13.8");var h=new XMLHttpRequest;this.master=u,this.couple=e,this.lock=d,this.unique=t;var g=this;this.get=function(e,t){var o=zot(g.master)?"":"&master="+encodeURI(u),n=zot(g.lock)?"":"&lock="+encodeURI(d),r=g.unique?"&unique=true":"";h.open("GET",e+o+n+r,!0),h.onload=function(){200==h.status?t(So.isJSON(h.responseText)?JSON.parse(h.responseText):h.responseText):t(null,"Error: "+h.status)},h.send()},this.post=function(e,t,o,n,r){var i,a,l,s,c;if(i=zob(g.post,arguments,"url, data, command, extra, callback"))return i;zot(e)||(h.open("POST",e,!0),h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.onload=function(){var e=h.responseText;So.isJSON(e)&&(g.couple&&(e=So.decouple(e)),e=JSON.parse(e)),r(e)},So.isJSON(t)||(t=JSON.stringify(t)),g.couple&&(t=So.couple(t)),a=zot(g.master)?"":"&master="+encodeURI(u),l=zot(g.lock)?"":"&lock="+encodeURI(d),s=zot(o)?"":"&command="+encodeURI(o),c=zot(n)?"":"&extra="+encodeURI(n),h.send("data="+t+a+l+s+c))},this.put=function(e,t,o){h.open("PUT",e,!0),h.setRequestHeader("Content-type","application/json"),h.onload=function(){o(So.isJSON(h.responseText)?JSON.parse(h.responseText):g.http.responseText)},h.send(JSON.stringify(t))}},So.Noise=function(e){"use strict";z_d("13.9"),zot(e)&&(e=1e6*Math.random());var t=e;this.seed=e;var H=this,F={};function o(e){var t=new Uint32Array(1);return t[0]=1664525*e[0]+1013904223,t}function n(e,t,o){this.dx=-t-e*F.SQUISH_2D,this.dy=-o-e*F.SQUISH_2D,this.xsb=t,this.ysb=o}function r(e,t,o,n){this.dx=-t-e*F.SQUISH_3D,this.dy=-o-e*F.SQUISH_3D,this.dz=-n-e*F.SQUISH_3D,this.xsb=t,this.ysb=o,this.zsb=n}function i(e,t,o,n,r){this.dx=-t-e*F.SQUISH_4D,this.dy=-o-e*F.SQUISH_4D,this.dz=-n-e*F.SQUISH_4D,this.dw=-r-e*F.SQUISH_4D,this.xsb=t,this.ysb=o,this.zsb=n,this.wsb=r}F.NORM_2D=1/47,F.NORM_3D=1/103,F.NORM_4D=1/30,F.SQUISH_2D=(Math.sqrt(3)-1)/2,F.SQUISH_3D=(Math.sqrt(4)-1)/3,F.SQUISH_4D=(Math.sqrt(5)-1)/4,F.STRETCH_2D=(1/Math.sqrt(3)-1)/2,F.STRETCH_3D=(1/Math.sqrt(4)-1)/3,F.STRETCH_4D=(1/Math.sqrt(5)-1)/4,F.base2D=[[1,1,0,1,0,1,0,0,0],[1,1,0,1,0,1,2,1,1]],F.base3D=[[0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1],[2,1,1,0,2,1,0,1,2,0,1,1,3,1,1,1],[1,1,0,0,1,0,1,0,1,0,0,1,2,1,1,0,2,1,0,1,2,0,1,1]],F.base4D=[[0,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,4,1,1,1,1],[1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1]],F.gradients2D=[5,2,2,5,-5,2,-2,5,5,-2,2,-5,-5,-2,-2,-5],F.gradients3D=[-11,4,4,-4,11,4,-4,4,11,11,4,4,4,11,4,4,4,11,-11,-4,4,-4,-11,4,-4,-4,11,11,-4,4,4,-11,4,4,-4,11,-11,4,-4,-4,11,-4,-4,4,-11,11,4,-4,4,11,-4,4,4,-11,-11,-4,-4,-4,-11,-4,-4,-4,-11,11,-4,-4,4,-11,-4,4,-4,-11],F.gradients4D=[3,1,1,1,1,3,1,1,1,1,3,1,1,1,1,3,-3,1,1,1,-1,3,1,1,-1,1,3,1,-1,1,1,3,3,-1,1,1,1,-3,1,1,1,-1,3,1,1,-1,1,3,-3,-1,1,1,-1,-3,1,1,-1,-1,3,1,-1,-1,1,3,3,1,-1,1,1,3,-1,1,1,1,-3,1,1,1,-1,3,-3,1,-1,1,-1,3,-1,1,-1,1,-3,1,-1,1,-1,3,3,-1,-1,1,1,-3,-1,1,1,-1,-3,1,1,-1,-1,3,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,3,1,1,-1,1,3,1,-1,1,1,3,-1,1,1,1,-3,-3,1,1,-1,-1,3,1,-1,-1,1,3,-1,-1,1,1,-3,3,-1,1,-1,1,-3,1,-1,1,-1,3,-1,1,-1,1,-3,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,3,1,-1,-1,1,3,-1,-1,1,1,-3,-1,1,1,-1,-3,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3],F.lookupPairs2D=[0,1,1,0,4,1,17,0,20,2,21,2,22,5,23,5,26,4,39,3,42,4,43,3],F.lookupPairs3D=[0,2,1,1,2,2,5,1,6,0,7,0,32,2,34,2,129,1,133,1,160,5,161,5,518,0,519,0,546,4,550,4,645,3,647,3,672,5,673,5,674,4,677,3,678,4,679,3,680,13,681,13,682,12,685,14,686,12,687,14,712,20,714,18,809,21,813,23,840,20,841,21,1198,19,1199,22,1226,18,1230,19,1325,23,1327,22,1352,15,1353,17,1354,15,1357,17,1358,16,1359,16,1360,11,1361,10,1362,11,1365,10,1366,9,1367,9,1392,11,1394,11,1489,10,1493,10,1520,8,1521,8,1878,9,1879,9,1906,7,1910,7,2005,6,2007,6,2032,8,2033,8,2034,7,2037,6,2038,7,2039,6],F.lookupPairs4D=[0,3,1,2,2,3,5,2,6,1,7,1,8,3,9,2,10,3,13,2,16,3,18,3,22,1,23,1,24,3,26,3,33,2,37,2,38,1,39,1,41,2,45,2,54,1,55,1,56,0,57,0,58,0,59,0,60,0,61,0,62,0,63,0,256,3,258,3,264,3,266,3,272,3,274,3,280,3,282,3,2049,2,2053,2,2057,2,2061,2,2081,2,2085,2,2089,2,2093,2,2304,9,2305,9,2312,9,2313,9,16390,1,16391,1,16406,1,16407,1,16422,1,16423,1,16438,1,16439,1,16642,8,16646,8,16658,8,16662,8,18437,6,18439,6,18469,6,18471,6,18688,9,18689,9,18690,8,18693,6,18694,8,18695,6,18696,9,18697,9,18706,8,18710,8,18725,6,18727,6,131128,0,131129,0,131130,0,131131,0,131132,0,131133,0,131134,0,131135,0,131352,7,131354,7,131384,7,131386,7,133161,5,133165,5,133177,5,133181,5,133376,9,133377,9,133384,9,133385,9,133400,7,133402,7,133417,5,133421,5,133432,7,133433,5,133434,7,133437,5,147510,4,147511,4,147518,4,147519,4,147714,8,147718,8,147730,8,147734,8,147736,7,147738,7,147766,4,147767,4,147768,7,147770,7,147774,4,147775,4,149509,6,149511,6,149541,6,149543,6,149545,5,149549,5,149558,4,149559,4,149561,5,149565,5,149566,4,149567,4,149760,9,149761,9,149762,8,149765,6,149766,8,149767,6,149768,9,149769,9,149778,8,149782,8,149784,7,149786,7,149797,6,149799,6,149801,5,149805,5,149814,4,149815,4,149816,7,149817,5,149818,7,149821,5,149822,4,149823,4,149824,37,149825,37,149826,36,149829,34,149830,36,149831,34,149832,37,149833,37,149842,36,149846,36,149848,35,149850,35,149861,34,149863,34,149865,33,149869,33,149878,32,149879,32,149880,35,149881,33,149882,35,149885,33,149886,32,149887,32,150080,49,150082,48,150088,49,150098,48,150104,47,150106,47,151873,46,151877,45,151881,46,151909,45,151913,44,151917,44,152128,49,152129,46,152136,49,152137,46,166214,43,166215,42,166230,43,166247,42,166262,41,166263,41,166466,48,166470,43,166482,48,166486,43,168261,45,168263,42,168293,45,168295,42,168512,31,168513,28,168514,31,168517,28,168518,25,168519,25,280952,40,280953,39,280954,40,280957,39,280958,38,280959,38,281176,47,281178,47,281208,40,281210,40,282985,44,282989,44,283001,39,283005,39,283208,30,283209,27,283224,30,283241,27,283256,22,283257,22,297334,41,297335,41,297342,38,297343,38,297554,29,297558,24,297562,29,297590,24,297594,21,297598,21,299365,26,299367,23,299373,26,299383,23,299389,20,299391,20,299584,31,299585,28,299586,31,299589,28,299590,25,299591,25,299592,30,299593,27,299602,29,299606,24,299608,30,299610,29,299621,26,299623,23,299625,27,299629,26,299638,24,299639,23,299640,22,299641,22,299642,21,299645,20,299646,21,299647,20,299648,61,299649,60,299650,61,299653,60,299654,59,299655,59,299656,58,299657,57,299666,55,299670,54,299672,58,299674,55,299685,52,299687,51,299689,57,299693,52,299702,54,299703,51,299704,56,299705,56,299706,53,299709,50,299710,53,299711,50,299904,61,299906,61,299912,58,299922,55,299928,58,299930,55,301697,60,301701,60,301705,57,301733,52,301737,57,301741,52,301952,79,301953,79,301960,76,301961,76,316038,59,316039,59,316054,54,316071,51,316086,54,316087,51,316290,78,316294,78,316306,73,316310,73,318085,77,318087,77,318117,70,318119,70,318336,79,318337,79,318338,78,318341,77,318342,78,318343,77,430776,56,430777,56,430778,53,430781,50,430782,53,430783,50,431e3,75,431002,72,431032,75,431034,72,432809,74,432813,69,432825,74,432829,69,433032,76,433033,76,433048,75,433065,74,433080,75,433081,74,447158,71,447159,68,447166,71,447167,68,447378,73,447382,73,447386,72,447414,71,447418,72,447422,71,449189,70,449191,70,449197,69,449207,68,449213,69,449215,68,449408,67,449409,67,449410,66,449413,64,449414,66,449415,64,449416,67,449417,67,449426,66,449430,66,449432,65,449434,65,449445,64,449447,64,449449,63,449453,63,449462,62,449463,62,449464,65,449465,63,449466,65,449469,63,449470,62,449471,62,449472,19,449473,19,449474,18,449477,16,449478,18,449479,16,449480,19,449481,19,449490,18,449494,18,449496,17,449498,17,449509,16,449511,16,449513,15,449517,15,449526,14,449527,14,449528,17,449529,15,449530,17,449533,15,449534,14,449535,14,449728,19,449729,19,449730,18,449734,18,449736,19,449737,19,449746,18,449750,18,449752,17,449754,17,449784,17,449786,17,451520,19,451521,19,451525,16,451527,16,451528,19,451529,19,451557,16,451559,16,451561,15,451565,15,451577,15,451581,15,451776,19,451777,19,451784,19,451785,19,465858,18,465861,16,465862,18,465863,16,465874,18,465878,18,465893,16,465895,16,465910,14,465911,14,465918,14,465919,14,466114,18,466118,18,466130,18,466134,18,467909,16,467911,16,467941,16,467943,16,468160,13,468161,13,468162,13,468163,13,468164,13,468165,13,468166,13,468167,13,580568,17,580570,17,580585,15,580589,15,580598,14,580599,14,580600,17,580601,15,580602,17,580605,15,580606,14,580607,14,580824,17,580826,17,580856,17,580858,17,582633,15,582637,15,582649,15,582653,15,582856,12,582857,12,582872,12,582873,12,582888,12,582889,12,582904,12,582905,12,596982,14,596983,14,596990,14,596991,14,597202,11,597206,11,597210,11,597214,11,597234,11,597238,11,597242,11,597246,11,599013,10,599015,10,599021,10,599023,10,599029,10,599031,10,599037,10,599039,10,599232,13,599233,13,599234,13,599235,13,599236,13,599237,13,599238,13,599239,13,599240,12,599241,12,599250,11,599254,11,599256,12,599257,12,599258,11,599262,11,599269,10,599271,10,599272,12,599273,12,599277,10,599279,10,599282,11,599285,10,599286,11,599287,10,599288,12,599289,12,599290,11,599293,10,599294,11,599295,10],F.p2D=[0,0,1,-1,0,0,-1,1,0,2,1,1,1,2,2,0,1,2,0,2,1,0,0,0],F.p3D=[0,0,1,-1,0,0,1,0,-1,0,0,-1,1,0,0,0,1,-1,0,0,-1,0,1,0,0,-1,1,0,2,1,1,0,1,1,1,-1,0,2,1,0,1,1,1,-1,1,0,2,0,1,1,1,-1,1,1,1,3,2,1,0,3,1,2,0,1,3,2,0,1,3,1,0,2,1,3,0,2,1,3,0,1,2,1,1,1,0,0,2,2,0,0,1,1,0,1,0,2,0,2,0,1,1,0,0,1,2,0,0,2,2,0,0,0,0,1,1,-1,1,2,0,0,0,0,1,-1,1,1,2,0,0,0,0,1,1,1,-1,2,3,1,1,1,2,0,0,2,2,3,1,1,1,2,2,0,0,2,3,1,1,1,2,0,2,0,2,1,1,-1,1,2,0,0,2,2,1,1,-1,1,2,2,0,0,2,1,-1,1,1,2,0,0,2,2,1,-1,1,1,2,0,2,0,2,1,1,1,-1,2,2,0,0,2,1,1,1,-1,2,0,2,0],F.p4D=[0,0,1,-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,0,-1,1,0,0,0,0,1,-1,0,0,0,1,0,-1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,-1,0,0,-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,2,1,1,0,0,1,1,1,-1,0,1,1,1,0,-1,0,2,1,0,1,0,1,1,-1,1,0,1,1,0,1,-1,0,2,0,1,1,0,1,-1,1,1,0,1,0,1,1,-1,0,2,1,0,0,1,1,1,-1,0,1,1,1,0,-1,1,0,2,0,1,0,1,1,-1,1,0,1,1,0,1,-1,1,0,2,0,0,1,1,1,-1,0,1,1,1,0,-1,1,1,1,4,2,1,1,0,4,1,2,1,0,4,1,1,2,0,1,4,2,1,0,1,4,1,2,0,1,4,1,1,0,2,1,4,2,0,1,1,4,1,0,2,1,4,1,0,1,2,1,4,0,2,1,1,4,0,1,2,1,4,0,1,1,2,1,2,1,1,0,0,3,2,1,0,0,3,1,2,0,0,1,2,1,0,1,0,3,2,0,1,0,3,1,0,2,0,1,2,0,1,1,0,3,0,2,1,0,3,0,1,2,0,1,2,1,0,0,1,3,2,0,0,1,3,1,0,0,2,1,2,0,1,0,1,3,0,2,0,1,3,0,1,0,2,1,2,0,0,1,1,3,0,0,2,1,3,0,0,1,2,2,3,1,1,1,0,2,1,1,1,-1,2,2,0,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,2,0,0,0,2,3,1,0,1,1,2,1,-1,1,1,2,2,0,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,2,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,2,0,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,2,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,0,2,0,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,2,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,2,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,0,0,2,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,0,2,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,0,2,2,1,1,1,-1,0,1,1,1,0,-1,0,0,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,0,0,0,0,0,2,1,-1,1,1,0,1,0,1,1,-1,0,0,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,0,0,0,0,0,2,1,-1,1,0,1,1,0,1,-1,1,0,0,0,0,0,2,1,-1,0,1,1,1,0,-1,1,1,0,0,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,2,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,2,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,2,2,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,0,2,0,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,2,0,0,2,1,-1,1,0,1,1,0,1,-1,1,2,0,2,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,0,0,2,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,0,2,0,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,2,0,2,1,1,-1,0,1,1,1,0,-1,1,2,0,0,0,2,2,1,-1,1,0,1,1,0,1,-1,1,2,0,0,0,2,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,0,2,3,1,1,0,0,0,2,2,0,0,0,2,1,1,1,-1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,1,-1,3,1,0,0,1,0,2,0,0,2,0,2,1,1,1,-1,3,1,1,0,0,0,2,2,0,0,0,2,1,1,-1,1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,-1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,1,-1,1,3,1,1,0,0,0,2,2,0,0,0,2,1,-1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,1,-1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,-1,1,1,3,1,0,1,0,0,2,0,2,0,0,2,-1,1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,-1,1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,-1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,4,1,1,1,1,3,3,2,0,1,0,3,1,0,2,0,4,1,1,1,1,3,3,0,2,1,0,3,0,1,2,0,4,1,1,1,1,3,3,2,0,0,1,3,1,0,0,2,4,1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,4,1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,4,1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,1,-1,3,3,2,0,1,0,3,1,0,2,0,2,1,1,1,-1,3,3,0,2,1,0,3,0,1,2,0,2,1,1,1,-1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,-1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,1,-1,1,3,3,0,2,0,1,3,0,1,0,2,2,1,1,-1,1,3,3,2,0,1,0,3,1,0,2,0,2,1,-1,1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,-1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,1,-1,1,1,3,3,0,2,1,0,3,0,1,2,0,2,-1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,2,-1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,-1,1,1,1];for(var a=[],l=0;l<F.p2D.length;l+=4){for(var s=F.base2D[F.p2D[l]],c=null,u=null,d=0;d<s.length;d+=3)u=new n(s[d],s[d+1],s[d+2]),null===c?a[l/4]=u:c.next=u,c=u;u.next=new n(F.p2D[l+1],F.p2D[l+2],F.p2D[l+3])}this.lookup2D=[];for(l=0;l<F.lookupPairs2D.length;l+=2)this.lookup2D[F.lookupPairs2D[l]]=a[F.lookupPairs2D[l+1]];for(var h=[],l=0;l<F.p3D.length;l+=9){for(s=F.base3D[F.p3D[l]],c=null,u=null,d=0;d<s.length;d+=4)u=new r(s[d],s[d+1],s[d+2],s[d+3]),null===c?h[l/9]=u:c.next=u,c=u;u.next=new r(F.p3D[l+1],F.p3D[l+2],F.p3D[l+3],F.p3D[l+4]),u.next.next=new r(F.p3D[l+5],F.p3D[l+6],F.p3D[l+7],F.p3D[l+8])}this.lookup3D=[];for(l=0;l<F.lookupPairs3D.length;l+=2)this.lookup3D[F.lookupPairs3D[l]]=h[F.lookupPairs3D[l+1]];for(var g=[],l=0;l<F.p4D.length;l+=16){for(s=F.base4D[F.p4D[l]],c=null,u=null,d=0;d<s.length;d+=5)u=new i(s[d],s[d+1],s[d+2],s[d+3],s[d+4]),null===c?g[l/16]=u:c.next=u,c=u;u.next=new i(F.p4D[l+1],F.p4D[l+2],F.p4D[l+3],F.p4D[l+4],F.p4D[l+5]),u.next.next=new i(F.p4D[l+6],F.p4D[l+7],F.p4D[l+8],F.p4D[l+9],F.p4D[l+10]),u.next.next.next=new i(F.p4D[l+11],F.p4D[l+12],F.p4D[l+13],F.p4D[l+14],F.p4D[l+15])}this.lookup4D=[];for(l=0;l<F.lookupPairs4D.length;l+=2)this.lookup4D[F.lookupPairs4D[l]]=g[F.lookupPairs4D[l+1]];this.perm=new Uint8Array(256),this.perm2D=new Uint8Array(256),this.perm3D=new Uint8Array(256),this.perm4D=new Uint8Array(256);for(var p=new Uint8Array(256),l=0;l<256;l++)p[l]=l;(e=new Uint32Array(1))[0]=t,e=o(o(o(e)));for(l=255;0<=l;l--){e=o(e);var f=new Uint32Array(1);f[0]=(e[0]+31)%(l+1),f[0]<0&&(f[0]+=l+1),this.perm[l]=p[f[0]],this.perm2D[l]=14&this.perm[l],this.perm3D[l]=this.perm[l]%24*3,this.perm4D[l]=252&this.perm[l],p[f[0]]=p[l]}this.simplex1D=function(e){return H.simplex2D(e,1)},this.simplex2D=function(e,t){var o=(e+t)*F.STRETCH_2D,n=[e+o,t+o],r=n[0],i=n[1],a=[Math.floor(r),Math.floor(i)],l=a[0],s=a[1],c=(l+s)*F.SQUISH_2D,u=[e-(l+c),t-(s+c)],d=u[0],h=u[1],g=[r-l,i-s],p=g[0],f=g[1],m=p+f,z=new Uint32Array(4);z[0]=p-f+1,z[1]=m,z[2]=m+f,z[3]=m+p;for(var y=z[0]|z[1]<<1|z[2]<<2|z[3]<<4,b=H.lookup2D[y],v=0;void 0!==b;){var w,C,x,k,T=[d+b.dx,h+b.dy],A=T[0],P=T[1],S=2-A*A-P*P;0<S&&(C=(w=[l+b.xsb,s+b.ysb])[0],x=w[1],k=H.perm2D[H.perm[255&C]+x&255],v+=(S*=S)*S*(F.gradients2D[k]*A+F.gradients2D[k+1]*P)),b=b.next}return v*F.NORM_2D},this.simplex3D=function(e,t,o){var n=(e+t+o)*F.STRETCH_3D,r=[e+n,t+n,o+n],i=r[0],a=r[1],l=r[2],s=[Math.floor(i),Math.floor(a),Math.floor(l)],c=s[0],u=s[1],d=s[2],h=(c+u+d)*F.SQUISH_3D,g=[e-(c+h),t-(u+h),o-(d+h)],p=g[0],f=g[1],m=g[2],z=[i-c,a-u,l-d],y=z[0],b=z[1],v=z[2],w=y+b+v,C=new Uint32Array(7);C[0]=b-v+1,C[1]=y-b+1,C[2]=y-v+1,C[3]=w,C[4]=w+v,C[5]=w+b,C[6]=w+y;for(var x=C[0]|C[1]<<1|C[2]<<2|C[3]<<3|C[4]<<5|C[5]<<7|C[6]<<9,k=H.lookup3D[x],T=0;void 0!==k;){var A,P,S,B,I,E=[p+k.dx,f+k.dy,m+k.dz],O=E[0],M=E[1],j=E[2],L=2-O*O-M*M-j*j;0<L&&(P=(A=[c+k.xsb,u+k.ysb,d+k.zsb])[0],S=A[1],B=A[2],I=H.perm3D[H.perm[H.perm[255&P]+S&255]+B&255],T+=(L*=L)*L*(F.gradients3D[I]*O+F.gradients3D[I+1]*M+F.gradients3D[I+2]*j)),k=k.next}return T*F.NORM_3D},this.simplex4D=function(e,t,o,n){var r=(e+t+o+n)*F.STRETCH_4D,i=[e+r,t+r,o+r,n+r],a=i[0],l=i[1],s=i[2],c=i[3],u=[Math.floor(a),Math.floor(l),Math.floor(s),Math.floor(c)],d=u[0],h=u[1],g=u[2],p=u[3],f=(d+h+g+p)*F.SQUISH_4D,m=e-(d+f),z=t-(h+f),y=o-(g+f),b=n-(p+f),v=[a-d,l-h,s-g,c-p],w=v[0],C=v[1],x=v[2],k=v[3],T=w+C+x+k,A=new Uint32Array(11);A[0]=x-k+1,A[1]=C-x+1,A[2]=C-k+1,A[3]=w-C+1,A[4]=w-x+1,A[5]=w-k+1,A[6]=T<<6,A[7]=T+k,A[8]=T+x,A[9]=T+C,A[10]=T+w;for(var P=A[0]|A[1]<<1|A[2]<<2|A[3]<<3|A[4]<<4|A[5]<<5|A[6]<<6|A[7]<<8|A[8]<<11|A[9]<<14|A[10]<<17,S=H.lookup4D[P],B=0;void 0!==S;){var I,E,O,M,j,L,Y=[m+S.dx,z+S.dy,y+S.dz,b+S.dw],_=Y[0],D=Y[1],X=Y[2],R=Y[3],W=2-_*_-D*D-X*X-R*R;0<W&&(E=(I=[d+S.xsb,h+S.ysb,g+S.zsb,p+S.wsb])[0],O=I[1],M=I[2],j=I[3],L=H.perm4D[H.perm[H.perm[H.perm[255&E]+O&255]+M&255]+j&255],B+=(W*=W)*W*(F.gradients4D[L]*_+F.gradients4D[L+1]*D+F.gradients4D[L+2]*X+F.gradients4D[L+3]*R)),S=S.next}return B*F.NORM_4D}},So.Point=function(e,t,o,n,r,i,a,l,s,c){z_d("13.45"),zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=0),zot(n)&&(n=0),zot(r)&&(r=0),zot(i)&&(i=0),zot(a)&&(a=0),zot(l)&&(l=0),zot(s)&&(s=0),zot(c)&&(c=0),this.x=e,this.y=t,this.z=o,this.q=n,this.r=r,this.s=i,this.t=a,this.u=l,this.v=s,this.w=c},So.Bezier=function(e,t,o,n){z_d("13.47"),this.a=e,this.b=t,this.c=o,this.d=n,this.len=100,this.arcLengths=new Array(this.len+1),this.arcLengths[0]=0;for(var r=this.x(0),i=this.y(0),a=0,l=1;l<=this.len;l+=1){var s=this.x(.01*l),c=this.y(.01*l),u=r-s,d=i-c;a+=Math.sqrt(u*u+d*d),this.arcLengths[l]=a,r=s,i=c}this.length=a},So.Bezier.prototype={map:function(e){for(var t=e*this.arcLengths[this.len],o=0,n=this.len,r=0;o<n;)r=o+((n-o)/2|0),this.arcLengths[r]<t?o=r+1:n=r;this.arcLengths[r]>t&&r--;var i=this.arcLengths[r];return i===t?r/this.len:(r+(t-i)/(this.arcLengths[r+1]-i))/this.len},mx:function(e){return this.x(this.map(e))},my:function(e){return this.y(this.map(e))},x:function(e){return(1-e)*(1-e)*(1-e)*this.a.x+(1-e)*(1-e)*3*e*this.b.x+3*(1-e)*(e*e)*this.c.x+e*e*e*this.d.x},y:function(e){return(1-e)*(1-e)*(1-e)*this.a.y+(1-e)*(1-e)*3*e*this.b.y+3*(1-e)*(e*e)*this.c.y+e*e*e*this.d.y}},So.Boundary=function(e,t,o,n){z_d("13.46"),zot(e)||zot(t)||zot(o)||zot(n)||(this.x=e,this.y=t,this.width=o,this.height=n,this.contract=function(e,t,o,n){return zot(e)||(zot(t)&&(t=e),zot(o)?o=2*e:o+=e,zot(n)?n=2*t:n+=t,this.x+=e,this.y+=t,this.width-=o,this.height-=n),this})},So.GradientColor=function(e,t,o,n,r,i){z_d("13.465"),this.type="GradientColor",this.colors=zot(e)?["black","white"]:e,this.ratios=zot(t)?[0,1]:t,this.x0=zot(o)?0:o,this.y0=zot(n)?0:n,this.x1=zot(r)?0:r,this.y1=zot(i)?100:i},So.RadialColor=function(e,t,o,n,r,i,a,l){z_d("13.466"),this.type="RadialColor",this.colors=zot(e)?["black","white"]:e,this.ratios=zot(t)?[0,1]:t,this.x0=zot(o)?0:o,this.y0=zot(n)?0:n,this.r0=zot(r)?0:r,this.x1=zot(i)?0:i,this.y1=zot(a)?100:a,this.r1=zot(l)?100:l},So.BitmapColor=function(e,t,o){z_d("13.467"),this.type="BitmapColor","string"==typeof e&&window.asset&&(e=window.asset(e)),this.image="Bitmap"==e.type?e.image:e,this.repetion=t,this.matrix=o},So.Damp=function(e,t){z_d("14");var o;if(o=zob(So.Damp,arguments,"startValue, damp",this))return o;this.lastValue=zot(e)?0:e,this.damp=zot(t)?.1:t},So.Damp.prototype.convert=function(e){return this.lastValue=this.lastValue+(e-this.lastValue)*this.damp},So.Damp.prototype.immediate=function(e){return this.lastValue=e,this},So.Proportion=function(t,o,n,r,i,a,l){var e,s,c;if(e=zob(So.Proportion,arguments,"baseMin, baseMax, targetMin, targetMax, factor, targetRound, clamp",this))return e;z_d("15"),zot(n)&&(n=0),zot(r)&&(r=1),zot(i)&&(i=1),zot(a)&&(a=!1),zot(l)&&(l=!0),this.convert=function(e){if(!isNaN(e)&&o-t!=0)return l&&(e=Math.max(e,t),e=Math.min(e,o)),s=(e-t)/(o-t),c=0<i?n+(r-n)*s:r-(r-n)*s,a&&(c=Math.round(c)),c}},So.ProportionDamp=function(e,t,o,n,r,i,a,l){var s;if(s=zob(So.ProportionDamp,arguments,"baseMin, baseMax, targetMin, targetMax, damp, factor, targetRound, clamp",this))return s;z_d("16"),zot(o)&&(o=0),zot(n)&&(n=1),zot(r)&&(r=.1),zot(i)&&(i=1),zot(a)&&(a=!1),zot(l)&&(l=!0),this.damp=r;var c,u,d,h=this,g=0,p=e,g=o,f=setInterval(m,20);function m(){isNaN(p)||t-e==0||(l&&(p=Math.max(p,e),p=Math.min(p,t)),c=(p-e)/(t-e),u=n-o,g+=((d=0<i?o+u*c:n-u*c)-g)*h.damp)}this.immediate=function(e){return h.convert(e),m(),g=d,a&&(g=Math.round(g)),h},this.convert=function(e){return p=e,a?Math.round(g):g},this.dispose=function(e,t,o){return clearInterval(f),!0}},So.Dictionary=function(e){z_d("17"),this.length=0,this.unique=e;var n=this.objects=[],r=this.values=[];this.add=function(e,t){zot(e)||(zot(t)&&(t=!0),this.unique&&this.remove(e),n.push(e),r.push(t),this.length++)},this.at=function(e){if(!zot(e)){var t=n.indexOf(e);return-1<t?r[t]:null}},this.remove=function(e){if(zot(e))return!1;var t=n.indexOf(e);return-1<t&&(n.splice(t,1),r.splice(t,1),this.length--,!0)},this.clear=function(){return n=this.objects=[],r=this.values=[],this.length=null,this},this.dispose=function(e,t,o){return r=n=null,!(this.length=null)}},So.Hierarchy=function(o,s){z_d("17.5");var n,t=this;function r(e){var r=[],i=[];return function o(e,n){So.loop(e,function(e,t){r.push(t.obj),i.push(e),t.open&&o(t.list,n+1)})}(e,0),[r,i]}zot(o)||(zot(s)&&(s=!1),t.processSimple=function(e){var l=0,t={};return function r(e,i,a,o){var t;e.constructor=={}.constructor?(e.list&&(e=(t=e).list),o&&t&&So.loop(t,function(e,t){"list"!=e&&(o[e]=t)}),So.loop(e,function(e,t){var o={},n=i["id"+l]={obj:e,level:a,open:s,opened:!1,list:o};l++,r(t,o,a+1,n)})):Array.isArray(e)&&So.loop(e,function(e){i["id"+l]={obj:e},l++})}(o,t,0),n=l,t},t.processComplex=function(e){var r=0;return function o(e,n){So.loop(e,function(e,t){t.level=n,zot(t.open)&&(t.open=s),zot(t.opened)&&(t.opened=!1),t.list&&o(t.list,n+1),r++})}(e,0),n=r,e},zot(o.id0)?t.data=t.processSimple(o):t.data=t.processComplex(o),t.getLinearList=function(e){return zot(e)&&(e=t.data),r(e)[0]},t.getLinearIDs=function(e){return zot(e)&&(e=t.data),r(e)[1]},t.getData=function(n){var r;return function o(e){So.loop(e,function(e,t){return e==n?r=t:void o(t.list)})}(t.data),r},t.getNextSibling=function(n){var r,i;return function o(e){So.loop(e,function(e,t){return!i&&r?i=e:void(e==n?r=t:o(t.list))})}(t.data),i},t.getPrevSibling=function(r){var i,a=[];return function o(e,n){So.loop(e,function(e,t){return e==r?i=a[n]||a[n-1]:(a[n]=e,void o(t.list,n+1))})}(t.data,0),i},Object.defineProperty(t,"length",{get:function(){return n},set:function(e){zon&&zogy("Hierarchy() - length is read only")}}))},So.Pick=function(e){So.pickCheck||(z_d("17.6"),So.pickCheck=!0),this.choices=e,this.num=function(e){for(var t=[],o=0;o<e;o++)t.push(So.Pick.choose(this));return this.choices=So.Pick.series(t),this};var r=this;this.loop=function(e,t){for(var o,n=0;n<e;n++)if(void 0!==(o=t(So.Pick.choose(r),n,e)))return o}},So.Pick.prototype.type="Pick",So.Pick.series=function(){return So.pickCheck||(z_d("17.6"),So.pickCheck=!0),So.series.apply(null,arguments)},So.Pick.rand=function(e,t,o,n){return So.pickCheck||(z_d("17.6"),So.pickCheck=!0),So.rand(e,t,o,n)},So.Pick.choose=function(e,t,o){if(So.pickCheck||(z_d("17.6"),So.pickCheck=!0),null==t&&(t=!0),null==e)return e;if("Pick"==e.type||t){var n=e.choices||e;if(Array.isArray(n)){var r=n[Math.floor(Math.random()*n.length)];return So.Pick.choose(r)}return n.constructor==={}.constructor?zot(n.noPick)?zot(n.max)?n:(zot(n.integer)&&(n.integer=!1),r=So.Pick.rand(n.min,n.max,n.integer,n.negative)):n.noPick:"function"==typeof n?(null==n.count?n.count=0:n.count++,So.Pick.choose(n(o))):e}return e},So.scrollX=function(e,t){return z_d("18"),So.abstractScroll("X","Left",e,t)},So.scrollY=function(e,t){return z_d("19"),So.abstractScroll("Y","Top",e,t)},So.abstractScroll=function(e,t,o,n){z_d("20");var r,i,a,l,s,c,u=Bo(n),d="X"==e?"Y":"X";if(zot(o)){var h=navigator.applicationName;return-1==navigator.userAgent.indexOf("Safari")&&"Safari"!=h||0,document.documentElement&&document.documentElement["scroll"+t]||document.body["scroll"+t]}return zot(n)?window.scrollTo(So["scroll"+d](),o):((r=n*("s"==u?1e3:1))<50&&(r=50),i=r/50,a=So["scroll"+e](),l=(o-a)/i,s=0,c=setInterval(function(){s++,a+=l,window.scrollTo(So["scroll"+d](),a),i<=s&&(window.scrollTo(So["scroll"+d](),o),clearInterval(c))},50)),o},So.windowWidth=function(){z_d("21");var e,t=isNaN(window.innerWidth)?window.clientWidth:window.innerWidth,o=isNaN(window.innerHeight)?window.clientHeight:window.innerHeight;return!So.mobile()||zot(window.orientation)||window.parent||(o<t&&90!=Math.abs(window.orientation)||t<o&&90==Math.abs(window.orientation))&&(e=t,t=o,o=e),void 0!==zdf&&zdf.swapRotation?o:t},So.windowHeight=function(){z_d("22");var e,t=isNaN(window.innerWidth)?window.clientWidth:window.innerWidth,o=isNaN(window.innerHeight)?window.clientHeight:window.innerHeight;return!So.mobile()||zot(window.orientation)||window.parent||(o<t&&90!=Math.abs(window.orientation)||t<o&&90==Math.abs(window.orientation))&&(e=t,t=o,o=e),void 0!==zdf&&zdf.swapRotation?t:o},So.getQueryString=function(e){if(z_d("22.5"),zot(e)&&(e=location.search.replace("?","")),""==e)return{};for(var t=e.split("&"),o={},n=0;n<t.length;n++){var r=t[n].split("=");void 0===o[r[0]]?o[r[0]]=decodeURIComponent((r[1]+"").replace(/\+/g,"%20")):"string"==typeof o[r[0]]?o[r[0]]=[o[r[0]],decodeURIComponent((r[1]+"").replace(/\+/g,"%20"))]:o[r[0]].push(decodeURIComponent((r[1]+"").replace(/\+/g,"%20")))}return o},So.swapHTML=function(e,t){return z_d("17.2"),So.swapProperties("innerHTML",zid(e),zid(t))},So.urlEncode=function(e){z_d("23");e=(e+"").toString();return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},So.urlDecode=function(e){return z_d("24"),decodeURIComponent((e+"").replace(/\+/g,"%20"))},So.setCookie=function(e,t,o){var n,r;if(z_d("25"),!zot(e)&&!zot(t))return r=o?((n=new Date).setTime(n.getTime()+24*o*60*60*1e3),"; expires="+n.toGMTString()):"",document.cookie=e+"="+escape(t)+r+"; path=/",!0},So.getCookie=function(e){z_d("26");var t,o=document.cookie.split(/;\s*/),n=new Array;for(l=0;l<o.length;l++)n[(t=o[l].split("="))[0]]=t[1];if(void 0!==n[e])return unescape(n[e])},So.deleteCookie=function(e){return z_d("27"),!zot(So.getCookie(e))&&(So.setCookie(e,"",-1),!0)},null==createjs)return zon&&zog("ZIM >= 4.3.0 requires createjs namespace to be loaded (import createjs before zim)"),So;function qe(e,t){t?(e.mouseChildren=!0,e.mouseEnabled=!0,e._enabled=!0):(e.mouseChildren=!1,e.mouseEnabled=!1,e._enabled=!1)}var c;So.localToGlobal=function(e,t,o,n){if(So.coordinatesCheck||(z_d("50.43"),So.coordinatesCheck=!0),null!=e&&null!=t){var r=n.call(o,e,t),i=o.stage;if(void 0===zdf){if(!i)return r;zdf={stage:i,canvas:i.canvas}}return r.x/=So.scaX,r.y/=So.scaY,r}},So.globalToLocal=function(e,t,o,n){if(So.coordinatesCheck||(z_d("50.43"),So.coordinatesCheck=!0),null!=e&&null!=t){var r=o.stage;if(void 0===zdf){if(!r)return n.call(o,e,t);zdf={stage:r,canvas:r.canvas}}return e*=So.scaX,t*=So.scaY,n.call(o,e,t)}},So.localToLocal=function(e,t,o,n){if(So.coordinatesCheck||(z_d("50.43"),So.coordinatesCheck=!0),null!=e&&null!=t&&null!=o){var r=n.localToGlobal(e,t),i=n.stage;if(void 0===zdf){if(!i)return o.globalToLocal(r.x,r.y);zdf={stage:i,canvas:i.canvas}}return o==(i=i||zdf.stage)?r:r?o.globalToLocal(r.x,r.y):void 0}},So.gD=function(e){So.zimGDCheck||(z_d("50.435"),So.zimGDCheck=!0),e&&(So.KEYFOCUS==e&&(So.KEYFOCUS=null),e.zimTween&&e.stopAnimate(),e.zimWire&&e.noWire(),e.zimWired&&e.noWired(),e.zimClickDownEvent&&(e.zimClickDownEvent=null),e.zimClickUpEvent&&(e.zimClickUpEvent=null),e.name&&So.zimObjectIDs[e.name]==e&&delete So.zimObjectIDs[e.name])},So.Stage=function(e){var t;z_d("50.44"),zot(e)||(zot(t="CANVAS"==e.tagName?e:zid(e))||(this.cjsStage_constructor(e),this.setBounds(0,0,t.width,t.height),this.type="Stage",void 0===zdf&&(zimDefaultFrame=zdf={stage:this}),this.cache=function(e,t,o,n,r,i){var a,l;return zot(o)&&(zot(e)?zot(a=this.getBounds())||(l=0<this.borderWidth?this.borderWidth/2:0,e=a.x-l,t=a.y-l,o=a.width+2*l,n=a.height+2*l):(o=e,n=t,t=e=0)),this.cjsStage_cache(e,t,o,n,r,i),this},this.loop=function(e,t,o,n,r){return So.loop(this,e,t,o,n,r)},this.hitTestGrid=function(e,t,o,n,r,i,a,l,s,c,u,d){return So.hitTestGrid(this,e,t,o,n,r,i,a,l,s,c,u,d)},this.disposeAllChildren=function(){for(var e=this.numChildren-1;0<=e;e--){var t=this.getChildAt(e);t.dispose&&t.dispose()}return this},!createjs||createjs.stageTransformable||!zdf.retina&&"undefined"==typeof exportRoot||(Object.defineProperty(this,"scale",{get:function(){return this.cjsStage_scale},set:function(e){this.cjsStage_scaleX=e,this.cjsStage_scaleY=e,So.scaX=createjs.stageTransformable?1:e,So.scaY=createjs.stageTransformable?1:e}}),Object.defineProperty(this,"scaleX",{get:function(){return this.cjsStage_scaleX},set:function(e){this.cjsStage_scaleX=e,So.scaX=createjs.stageTransformable?1:e}}),Object.defineProperty(this,"scaleY",{get:function(){return this.cjsStage_scaleY},set:function(e){this.cjsStage_scaleY=e,So.scaY=createjs.stageTransformable?1:e}}),this.localToGlobal=function(e,t){return So.localToGlobal(e,t,this,this.cjsStage_localToGlobal)},this.globalToLocal=function(e,t){return So.globalToLocal(e,t,this,this.cjsStage_globalToLocal)},this.localToLocal=function(e,t,o){return So.localToLocal(e,t,o,this)})))},So.extend(So.Stage,createjs.Stage,["cache","localToLocal","localToGlobal","globalToLocal"],"cjsStage",!1),So.StageGL=function(e,t){var o;z_d("50.45"),zot(e)||(zot(o="CANVAS"==e.tagName?e:zid(e))||(this.cjsStageGL_constructor(e,t),this.setBounds(0,0,o.width,o.height),this.type="StageGL",void 0===zdf&&(zdf={stage:this}),this.cache=function(e,t,o,n,r,i){var a,l;return zot(o)&&(zot(e)?zot(a=this.getBounds())||(l=0<this.borderWidth?this.borderWidth/2:0,e=a.x-l,t=a.y-l,o=a.width+2*l,n=a.height+2*l):(o=e,n=t,t=e=0)),this.cjsStageGL_cache(e,t,o,n,r,i),this},this.loop=function(e,t,o,n,r){return So.loop(this,e,t,o,n,r)},this.hitTestGrid=function(e,t,o,n,r,i,a,l,s,c,u,d){return So.hitTestGrid(this,e,t,o,n,r,i,a,l,s,c,u,d)},this.disposeAllChildren=function(){for(var e=this.numChildren-1;0<=e;e--){var t=this.getChildAt(e);t.dispose&&t.dispose()}return this},!createjs||createjs.stageTransformable||!zdf.retina&&"undefined"==typeof exportRoot||(Object.defineProperty(this,"scale",{get:function(){return this.cjsStage_scale},set:function(e){this.cjsStage_scaleX=e,this.cjsStage_scaleY=e,So.scaX=createjs.stageTransformable?1:e,So.scaY=createjs.stageTransformable?1:e}}),Object.defineProperty(this,"scaleX",{get:function(){return this.cjsStage_scaleX},set:function(e){this.cjsStage_scaleX=e,So.scaX=createjs.stageTransformable?1:e}}),Object.defineProperty(this,"scaleY",{get:function(){return this.cjsStage_scaleY},set:function(e){this.cjsStage_scaleY=e,So.scaY=createjs.stageTransformable?1:e}}),this.localToGlobal=function(e,t){return So.localToGlobal(e,t,this,this.cjsStageGL_localToGlobal)},this.globalToLocal=function(e,t){return So.globalToLocal(e,t,this,this.cjsStageGL_globalToLocal)},this.localToLocal=function(e,t,o){return So.localToLocal(e,t,o,this)})))},So.extend(So.StageGL,createjs.StageGL,["cache","localToLocal","localToGlobal","globalToLocal"],"cjsStageGL",!1),So.Container=function(e,t,o,n,r,i,a){var l;if(l=zob(So.Container,arguments,"a, b, c, d, style, group, inherit",this))return l;So.containerCheck||(z_d("50.5"),z_d("50.435"),So.containerCheck=!0),this.cjsContainer_constructor(),this.type="Container",this.group=i;var u=this,s=!1===r?{}:So.getStyle(this.type,this.group,a);zot(e)&&(e=null!=s.a?s.a:null),zot(t)&&(t=null!=s.b?s.b:null),zot(o)&&(o=null!=s.c?s.c:null),zot(n)&&(n=null!=s.d?s.d:null);var c=d(e,t,o,n);function d(e,t,o,n){var r=[];return zot(e)?r=[e,t,o,n]:zot(o)?(r[0]=0,r[2]=e,r[1]=0,r[3]=t):(r[0]=e,r[2]=o,r[1]=t,r[3]=n),zot(r[3])&&(r[3]=r[2]),r}zot(e)||this.setBounds(c[0],c[1],c[2],c[3]),this.cache=function(e,t,o,n,r,i,a){if("AC"==this.type&&zdf)return zdf.ac("cache",arguments,this),this;var l;if(l=zob(u.cache,arguments,"a,b,c,d,scale,options,margin"))return l;var s,c=u.getBounds();return zot(o)&&(zot(e)?zot(c)||(s=0<u.borderWidth?u.borderWidth/2:0,e=c.x-s,t=c.y-s,o=c.width+2*s,n=c.height+2*s):(o=e,n=t,t=e=0)),"Triangle"==u.type&&(e-=u.borderWidth?u.borderWidth:0,o+=u.borderWidth?2*u.borderWidth:0,t-=u.borderWidth?u.borderWidth:0,n+=u.borderWidth?2*u.borderWidth:0),zot(a)&&(a=0),u.cjsContainer_cache(e-a,t-a,o+2*a,n+2*a,r,i),c&&u.setBounds(c.x,c.y,c.width,c.height),u},this.uncache=function(){return u.cjsContainer_uncache(),u},this.childrenToBitmap=function(){var e=this.cacheCanvas,t=new So.Bitmap(this.cache().cacheCanvas);return e||this.uncache(),this.removeAllChildren(),t.addTo(this),this};var h,g=zdf||1;createjs&&!createjs.stageTransformable&&g.retina&&(this.localToGlobal=function(e,t){return So.localToGlobal(e,t,this,this.cjsContainer_localToGlobal)},this.globalToLocal=function(e,t){return So.globalToLocal(e,t,this,this.cjsContainer_globalToLocal)},this.localToLocal=function(e,t,o){return So.localToLocal(e,t,o,this)}),this.setBounds=function(e,t,o,n){var r=d(e,t,o,n);return this.cjsContainer_setBounds(r[0],r[1],r[2],r[3]),this},this.disposeAllChildren=function(){for(var e=this.numChildren-1;0<=e;e--){var t=this.getChildAt(e);t.dispose&&t.dispose()}return this},Object.defineProperty(u,"name",{get:function(){return h},set:function(e){h=e,So.zimObjectIDs[e]=u}}),this._draggable,Object.defineProperty(u,"draggable",{get:function(){return this._draggable},set:function(e){e!=this._draggable&&(this._draggable=e,this._draggable?this.drag():this.noDrag())}}),!1!==r&&So.styleTransforms(this,s),this.clone=function(e){if("AC"==this.type&&zdf)return zdf.ac("clone",arguments,this),this;var t=this.getBounds();return zot(t)&&(t={x:null,y:null,width:null,height:null}),this.cloneChildren(this.cloneProps(new So.Container(t.x,t.y,t.width,t.height,r,this.group,a)),e)},this.hasProp=function(e){return!zot(this[e])||this.hasOwnProperty(e)}},So.Container.prototype.dispose=function(e){return function e(t,o){t&&So.gD(t);!o&&t&&t.dispose&&t.dispose!==So.Container.prototype.dispose&&t.dispose(null,null,!0);if(t&&t.addChild&&(t.dispatchEvent("removed"),t.removeAllEventListeners(),t.numChildren))for(var n=t.numChildren-1;0<=n;n--)e(t.getChildAt(n));t&&t.parent&&t.parent.removeChild(t)}(this,e),!0},So.Container.prototype.specialColor=function(e,t){"GradientColor"==t.type?e.linearGradient(t.colors,t.ratios,t.x0,t.y0,t.x1,t.y1):"RadialColor"==t.type?e.radialGradient(t.colors,t.ratios,t.x0,t.y0,t.r0,t.x1,t.y1,t.r1):"BitmapColor"==t.type&&e.bitmap(t.image,t.repetition,t.matrix)},zimify(So.Container.prototype),So.extend(So.Container,createjs.Container,["cache","uncache","setBounds","clone","localToLocal","localToGlobal","globalToLocal"],"cjsContainer",!1),So.Shape=function(e,t,o,n,r,i,a,l,s){var c;if(c=zob(So.Shape,arguments,"a, b, c, d, graphics, optimize, style, group, inherit",this))return c;z_d("50.6"),this.cjsShape_constructor(r),this.type="Shape",this.group=l;var u=!1===a?{}:So.getStyle(this.type,this.group,s),d=this;zot(e)&&(e=null!=u.a?u.a:null),zot(t)&&(t=null!=u.b?u.b:null),zot(o)&&(o=null!=u.c?u.c:null),zot(n)&&(n=null!=u.d?u.d:null),zot(r)&&(r=null!=u.graphics?u.graphics:null),zot(i)&&(i=null!=u.optimize&&u.optimize);var h=g(e,t,o,n);function g(e,t,o,n){var r=[];return zot(o)?(r[0]=0,r[2]=e,r[1]=0,r[3]=t):(r[0]=e,r[2]=o,r[1]=t,r[3]=n),zot(r[3])&&(r[3]=r[2]),r}if(zot(e)||this.setBounds(h[0],h[1],h[2],h[3]),!i)for(var p=["mt","lt","a","at","bt","qt","cp","c","f","lf","rf","bf","ef","ss","sd","s","ls","rs","bs","es","dr","rr","rc","dc","de","dp","p"],f=0;f<p.length;f++)!function(){var e=f;d[p[e]]=function(){return d.graphics[p[e]].apply(d.graphics,arguments),d}}();Object.defineProperty(d,"command",{get:function(){return d.graphics.command},set:function(e){}}),this.cache=function(e,t,o,n,r,i,a){var l;if(l=zob(d.cache,arguments,"a,b,c,d,scale,options,margin"))return l;var s,c=d.getBounds();return zot(o)&&(zot(e)?zot(c)||(s=0<d.borderWidth?d.borderWidth/2:0,e=c.x-s,t=c.y-s,o=c.width+2*s,n=c.height+2*s):(o=e,n=t,t=e=0)),zot(a)&&(a=0),d.cjsShape_cache(e-a,t-a,o+2*a,n+2*a,r,i),d},!(this.setBounds=function(e,t,o,n){var r=g(e,t,o,n);return this.cjsShape_setBounds(r[0],r[1],r[2],r[3]),this})!==a&&So.styleTransforms(this,u),this.clone=function(e){zot(e)&&(e=!0);var t=this.getBounds();zot(t)&&(t={x:null,y:null,width:null,height:null});var o=d.cloneProps(new So.Shape(t.x,t.y,t.width,t.height,r,a,l,s));return o.graphics=e?d.graphics.clone():d.graphics,o};var m,z=zdf||1;createjs&&!createjs.stageTransformable&&z.retina&&(this.localToGlobal=function(e,t){return So.localToGlobal(e,t,this,this.cjsShape_localToGlobal)},this.globalToLocal=function(e,t){return So.globalToLocal(e,t,this,this.cjsShape_globalToLocal)},this.localToLocal=function(e,t,o){return So.localToLocal(e,t,o,this)}),this.hasProp=function(e){return!zot(this[e])||this.hasOwnProperty(e)},Object.defineProperty(d,"name",{get:function(){return m},set:function(e){m=e,So.zimObjectIDs[e]=d}}),this._draggable,Object.defineProperty(d,"draggable",{get:function(){return this._draggable},set:function(e){e!=this._draggable&&(this._draggable=e,this._draggable?this.drag():this.noDrag())}}),this.dispose=function(e,t,o){So.gD(this),this.graphics.c(),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},So.extend(So.Shape,createjs.Shape,["cache","clone","setBounds","localToLocal","localToGlobal","globalToLocal"],"cjsShape",!1),zimify(So.Shape.prototype),So.Bitmap=function(l,s,c,e,t,o,n,r,i){var a,u,d;if(a=zob(So.Bitmap,arguments,"image, width, height, left, top, id, style, group, inherit",this))return a;z_d("50.7"),zot(l)||l.uncache&&(u=l.cacheCanvas,l=(d=l).cache().cacheCanvas),this.cjsBitmap_constructor(l),d&&!u&&d.uncache();var h=this;this.type="Bitmap",this.group=r;var g=!1===n?{}:So.getStyle(this.type,this.group,i);this.id=h.fileID=null!=g.id?g.id:o,zot(s)&&(s=null!=g.width?g.width:l?l.width:100),zot(c)&&(c=null!=g.height?g.height:l?l.height:100),zot(s)||zot(c)||h.setBounds(0,0,s,c),zot(e)&&(e=null!=g.left?g.left:0),zot(t)&&(t=null!=g.top?g.top:0),zdf&&(zdf.canvas.getContext("2d")?this.imageData=zdf.canvas.getContext("2d").createImageData(s,c):this.imageData=document.createElement("canvas").getContext("2d").createImageData(s,c),this.drawImageData=function(e,t,o,n,r,i){var a;zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=0),zot(n)&&(n=0),zot(r)&&(r=s),zot(i)&&(i=c),h.proxyCanvas||((a=h.proxyCanvas=document.createElement("canvas")).setAttribute("width",s),a.setAttribute("height",c),h.proxyContext=a.getContext("2d"),l=h.image=a),h.proxyContext&&h.proxyContext.putImageData(h.imageData,e,t,o,n,r,i)},zot(l)&&h.drawImageData(),l.match&&l.match(/data:image/i)&&setTimeout(function(){h.stage&&h.stage.update(),setTimeout(function(){h.stage&&h.stage.update()},50)},50)),l&&l.nodeName&&"video"!=l.nodeName.toLowerCase()&&(h.sourceRect={x:e,y:t,width:s,height:c}),!(this.cache=function(e,t,o,n,r,i){var a;zot(o)&&(zot(e)?zot(l=this.getBounds())||(a=0<this.borderWidth?this.borderWidth/2:0,e=l.x-a,t=l.y-a,o=l.width+2*a,n=l.height+2*a):(o=e,n=t,t=e=0));var l=this.getBounds();return this.cjsBitmap_cache(e,t,o,n,r,i),this.setBounds(l.x,l.y,l.width,l.height),this})!==n&&So.styleTransforms(this,g),this.clone=function(){return this.cloneProps(new So.Bitmap(l,null,null,null,null,h.fileID,n,this.group,i))};var p,f,m=zdf||1;createjs&&!createjs.stageTransformable&&m.retina&&(this.localToGlobal=function(e,t){return So.localToGlobal(e,t,this,this.cjsBitmap_localToGlobal)},this.globalToLocal=function(e,t){return So.globalToLocal(e,t,this,this.cjsBitmap_globalToLocal)},this.localToLocal=function(e,t,o){return So.localToLocal(e,t,o,this)}),this.hasProp=function(e){return!zot(this[e])||this.hasOwnProperty(e)},this.getColorAt=function(e,t){p||(h.cache(),p=h.cacheCanvas.getContext("2d"),h.uncache());var o=p.getImageData(e,t,1,1).data;return"rgba("+o[0]+","+o[1]+","+o[2]+","+o[3]+")"},Object.defineProperty(h,"name",{get:function(){return f},set:function(e){f=e,So.zimObjectIDs[e]=h}}),this._draggable,Object.defineProperty(h,"draggable",{get:function(){return this._draggable},set:function(e){e!=this._draggable&&(this._draggable=e,this._draggable?this.drag():this.noDrag())}}),this.dispose=function(e,t,o){So.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.id&&(m=this.stage&&this.stage.frame?this.stage.frame:zdf)&&m.assets&&m.assets[this.id]&&delete m.assets[this.id],this.parent&&this.parent.removeChild(this)}},So.Bitmap.fromData=function(t,o){var n=100,r=100,i=new Image;i.onload=function(){n=i.naturalWidth,r=i.naturalHeight,zot(n)&&(n=i.width),zot(r)&&(r=i.height);var e=new So.Bitmap(t,n,r);setTimeout(function(){o(e)},50)},i.src=t},So.extend(So.Bitmap,createjs.Bitmap,["cache","clone","localToLocal","localToGlobal","globalToLocal"],"cjsBitmap",!1),zimify(So.Bitmap.prototype),So.Sprite=function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b){var v;if(v=zob(So.Sprite,arguments,"image, cols, rows, count, offsetX, offsetY, spacingX, spacingY, width, height, animations, json, id, globalControl, spriteSheet, label, frame, style, group, inherit",this))return v;z_d("50.8"),this.type="Sprite",this.group=y;var w,C=!1===z?{}:So.getStyle(this.type,this.group,b),D=this;if(zot(m)&&(m=null!=C.frame?C.frame:zdf),zot(d)&&!zot(e)){zot(t)&&(t=null!=C.cols?C.cols:1),zot(o)&&(o=null!=C.rows?C.rows:1),zot(n)&&(n=null!=C.count?C.count:t*o),zot(r)&&(r=null!=C.offsetX?C.offsetX:0),zot(i)&&(i=null!=C.offsetY?C.offsetY:0),zot(a)&&(a=null!=C.spacingX?C.spacingX:0),zot(l)&&(l=null!=C.spacingY?C.spacingY:0),zot(s)&&(s=null!=C.width?C.width:e.width),zot(c)&&(c=null!=C.height?C.height:e.height);var x=(s-r+a)/t-a,k=(c-i+l)/o-l,T=[],A=0;e:for(var P=0;P<o;P++)for(var S=0;S<t;S++){if(++A>n)break e;T.push([r+S*(x+a),i+P*(k+l),x,k])}E(e,T,u)}else if(p)u=(w=p).animations;else{if(!d)return;var B,I,T=d.frames;u=d.animations,zot(e)?(B=d.images?d.images[0]:null)&&B.split?(I=[],So.loop(d.images,function(e){var t=e.split("/").pop();m.asset(e)&&"EmptyAsset"!=m.asset(e).type?I.push(m.asset(e)):m.asset(t)&&"EmptyAsset"!=m.asset(t).type?I.push(m.asset(t)):"EmptyAsset"!=m.asset(e).type?I.push(m.asset(e)):zon&&zogy("ZIM Sprite() - please preload Sprite in Frame or with loadAssets")}),E(I,T,u)):w=new createjs.SpriteSheet(d):E(e,T,u)}function E(o,e,t){Array.isArray(o)||(o=[o]),So.loop(o,function(e,t){o[t]=e.image});var n={images:o,frames:e,animations:t||[]};w=new createjs.SpriteSheet(n)}this.animations=u,this.cjsSprite_constructor(w,f),zot(f)||this.stop(),zot(h)&&(h=So.makeID()),this.id=h,zot(g)&&(g=!0),D.globalControl=g;var X,R=0;this.parseFrames=function(e,t,o,n){var i=[],a=Number.MAX_VALUE,l=0;if(zot(e))zot(t)&&(t=0),zot(o)&&(o=D.totalFrames-1),s(t,o);else{if(zot(D.animations)||zot(D.animations[e]))return[];r(D.animations[e])}function r(e){var t;Array.isArray(e)?(s((t=e)[0],t[1],t[3]),t[2]&&!zot(D.animations[t[2]])&&r(D.animations[t[2]])):e.constructor=={}.constructor?function(e){if(zot(e.frames))return;zot(e.speed)&&(e.speed=1);for(var t=0;t<e.frames.length;t++)e.speed<a&&(a=e.speed),e.speed>l&&(l=e.speed),i.push({f:e.frames[t],s:e.speed});e.next&&!zot(D.animations[e.next])&&r(D.animations[e.next])}(e):isNaN(e)||i.push({f:Math.floor(e),s:1})}function s(e,t,o){if(zot(o)&&(o=1),e<t)for(var n=e;n<=t;n++)r(n);else for(n=t;n<=e;n++)r(e-(n-t));function r(e){o<a&&(a=o),l<o&&(l=o),i.push({f:e,s:o})}}if(n)return i;a=So.constrain(So.decimals(a),.1),l=So.constrain(So.decimals(l),.1);for(var c,u=[],d=a!=l,h=0;h<i.length;h++)if(c=i[h],d)for(var g=0;g<So.constrain(Math.round(a<1?c.s/a:c.s),.1);g++)u.push(c.f);else u.push(c.f);return u},this.run=function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P){var S;if(S=zob(this.run,arguments,"time, label, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, loopPick, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, rewindTime, rewindEase, startFrame, endFrame, tweek, id, globalControl"))return S;var B=Bo();if(zot(T)&&(T=1),zot(A)||(D.id=A),zot(P)||(D.globalControl=P),Array.isArray(t)){for(var I,E,O,M=[],j=0,L=0;L<t.length;L++){(I=t[L]).lookup=D.parseFrames(I.label,I.startFrame,I.endFrame),0==L&&(O=I.lookup[0]),delete I.startFrame,delete I.endFrame,I.obj=So.merge(I.obj,{normalizedFrame:I.lookup.length-1}),I.set=So.merge(I.set,{normalizedFrames:{noPick:I.lookup},normalizedFrame:0}),zot(I.wait)&&(I.wait=j*T),E=I.label,delete I.label,M.push(I),j=0;var Y=zot(I.time)?e:I.time;0<k-x&&(j=Y/(k-x)/2)}if(0==M.length)return this;1==M.length?(e=M[0].time,t=E,_()):D.gotoAndStop(O)}else _();function _(){X=D.parseFrames(t,x,k),R=0,D.gotoAndStop(X[R]),x=k=null,M={normalizedFrame:X.length-1}}zot(e)&&(e="s"==B?1:1e3),D.running&&D.stopAnimate(D.id),D.running=!0,Array.isArray(M)||((j=0)<k-x&&(j=e/Math.abs(k-x)/2),X&&0<X.length&&(j=e/X.length/2),zot(c)&&(c=j*T),zot(m)&&(m=j*T));return So.animate({target:D,obj:M,time:e,ease:"linear",call:function(){D.running=!1,D.stop(),o&&"function"==typeof o&&o(n||D)},params:n,wait:r,waitedCall:i,waitedParams:a,loop:l,loopCount:s,loopWait:c,loopCall:u,loopParams:d,loopWaitCall:h,loopWaitParams:g,rewind:f,rewindWait:m,rewindCall:z,rewindParams:y,rewindWaitCall:b,rewindWaitParams:v,rewindTime:w,rewindEase:C,override:!1,id:D.id}),D.runPaused=!1,D},this.runPaused=!0,this.pauseRun=function(e){return zot(e)&&(e=!0),D.runPaused=e,D.globalControl?So.pauseAnimate(e,D.id):D.pauseAnimate(e,D.id),D},this.stopRun=function(){return D.runPaused=!0,D.running=!1,D.globalControl?So.stopAnimate(D.id):D.stopAnimate(D.id),D},Object.defineProperty(this,"frame",{get:function(){return this.currentFrame},set:function(e){e=Math.round(e),this.paused?this.gotoAndStop(e):this.gotoAndPlay(e)}}),Object.defineProperty(this,"normalizedFrame",{get:function(){return R},set:function(e){R=Math.round(e),this.gotoAndStop(X[R])}}),Object.defineProperty(this,"normalizedFrames",{get:function(){return X},set:function(e){X=e}}),Object.defineProperty(this,"totalFrames",{get:function(){return w.getNumFrames()},set:function(e){zog("zim.Sprite - totalFrames is read only")}}),!1!==z&&So.styleTransforms(this,C),this.clone=function(){return this.cloneProps(new So.Sprite(e,t,o,n,r,i,a,l,s,c,u,d,null,g,p,f,m,z,this.group,b))};var O,m=zdf||1;createjs&&!createjs.stageTransformable&&m.retina&&(this.localToGlobal=function(e,t){return So.localToGlobal(e,t,this,this.cjsSprite_localToGlobal)},this.globalToLocal=function(e,t){return So.globalToLocal(e,t,this,this.cjsSprite_globalToLocal)},this.localToLocal=function(e,t,o){return So.localToLocal(e,t,o,this)}),this.hasProp=function(e){return!zot(this[e])||this.hasOwnProperty(e)},Object.defineProperty(D,"name",{get:function(){return O},set:function(e){O=e,So.zimObjectIDs[e]=D}}),this._draggable,Object.defineProperty(D,"draggable",{get:function(){return this._draggable},set:function(e){e!=this._draggable&&(this._draggable=e,this._draggable?this.drag():this.noDrag())}}),this.dispose=function(e,t,o){So.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},So.extend(So.Sprite,createjs.Sprite,["clone","localToLocal","localToGlobal","globalToLocal"],"cjsSprite",!1),zimify(So.Sprite.prototype),So.MovieClip=function(e,t,o,n,r,i,a){var l;if(l=zob(So.MovieClip,arguments,"mode, startPosition, loop, labels, style, group, inherit",this))return l;z_d("50.9"),this.type="MovieClip",this.group=i;var s=!1===r?{}:So.getStyle(this.type,this.group,a);zot(e)&&(e=null!=s.mode?s.mode:null),zot(t)&&(t=null!=s.startPosition?s.startPosition:null),zot(o)&&(o=null!=s.loop?s.loop:null),zot(n)&&(n=null!=s.labels?s.labels:null),this.cjsMovieClip_constructor(e,t,o,n),!1!==r&&So.styleTransforms(this,s),this.clone=function(){return this.cloneProps(new So.MovieClip(e,t,o,n,r,this.group,a))},this.hasProp=function(e){return!zot(this[e])||this.hasOwnProperty(e)};var c,u=zdf||1;createjs&&!createjs.stageTransformable&&u.retina&&(this.localToGlobal=function(e,t){return So.localToGlobal(e,t,this,this.cjsMovieClip_localToGlobal)},this.globalToLocal=function(e,t){return So.globalToLocal(e,t,this,this.cjsMovieClip_globalToLocal)},this.localToLocal=function(e,t,o){return So.localToLocal(e,t,o,this)}),Object.defineProperty(that,"name",{get:function(){return c},set:function(e){c=e,So.zimObjectIDs[e]=that}}),this._draggable,Object.defineProperty(that,"draggable",{get:function(){return this._draggable},set:function(e){e!=this._draggable&&(this._draggable=e,this._draggable?this.drag():this.noDrag())}}),this.dispose=function(e,t,o){So.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},So.extend(So.MovieClip,createjs.MovieClip,["clone","localToLocal","localToGlobal","globalToLocal"],"cjsMovieClip",!1),zimify(So.MovieClip.prototype),So.SVGContainer=function(e,S,B,I,E,t,o,n){var r;if(r=zob(So.SVGContainer,arguments,"svg, splitTypes, geometric, showControls, interactive, style, group, inherit",this))return r;z_d("50.95"),this.group=o;var O,i,a,l,s,c,u=!1===t?{}:So.getStyle("SVGContainer",this.group,n),M=this,j=new So.Point(0,0);function L(){function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var o=[],n=!0,r=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(o.push(a.value),!t||o.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return n(e,t)}(e,t)||function(){throw new TypeError("Invalid")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function L(e,t,o,n,r,i,a){var l=e.x,s=e.y;return{x:n*(l*=t)-r*(s*=o)+i,y:r*l+n*s+a}}function Y(e,t,o,n){var r=e*o+t*n;return 1<r&&(r=1),r<-1&&(r=-1),(e*n-t*o<0?-1:1)*Math.acos(r)}var _=2*Math.PI;return function(e){var t=e.px,o=e.py,n=e.cx,r=e.cy,s=e.rx,c=e.ry,i=e.xAxisRotation,a=void 0===i?0:i,l=e.largeArcFlag,u=void 0===l?0:l,d=e.sweepFlag,h=void 0===d?0:d,g=[];if(0===s||0===c)return[];var p=Math.sin(a*_/360),f=Math.cos(a*_/360),m=f*(t-n)/2+p*(o-r)/2,z=-p*(t-n)/2+f*(o-r)/2;if(0==m&&0==z)return[];s=Math.abs(s),c=Math.abs(c);var y=Math.pow(m,2)/Math.pow(s,2)+Math.pow(z,2)/Math.pow(c,2);1<y&&(s*=Math.sqrt(y),c*=Math.sqrt(y));var b=j(function(e,t,o,n,r,i,a,l,s,c,u,d){var h=Math.pow(r,2),g=Math.pow(i,2),p=Math.pow(u,2),f=Math.pow(d,2),m=h*g-h*f-g*p;m<0&&(m=0),m/=h*f+g*p;var z=(m=Math.sqrt(m)*(a===l?-1:1))*r/i*d,y=m*-i/r*u,b=c*z-s*y+(e+o)/2,v=s*z+c*y+(t+n)/2,w=(u-z)/r,C=(d-y)/i,x=(-u-z)/r,k=(-d-y)/i,T=Y(1,0,w,C),A=Y(w,C,x,k);return 0===l&&0<A&&(A-=_),1===l&&A<0&&(A+=_),[b,v,T,A]}(t,o,n,r,s,c,u,h,p,f,m,z),4),v=b[0],w=b[1],C=b[2],x=b[3],k=Math.abs(x)/(_/4);Math.abs(1-k)<1e-7&&(k=1);var T=Math.max(Math.ceil(k),1);x/=T;for(var A,P,S,B,I,E,O,M=0;M<T;M++)g.push((A=C,0,S=1.5707963267948966===(P=x)?.551915024494:-1.5707963267948966===P?-.551915024494:4/3*Math.tan(P/4),B=Math.cos(A),I=Math.sin(A),E=Math.cos(A+P),O=Math.sin(A+P),[{x:B-I*S,y:I+B*S},{x:E+O*S,y:O-E*S},{x:E,y:O}])),C+=x;return g.map(function(e){var t=L(e[0],s,c,f,p,v,w),o=t.x,n=t.y,r=L(e[1],s,c,f,p,v,w),i=r.x,a=r.y,l=L(e[2],s,c,f,p,v,w);return{x1:o,y1:n,x2:i,y2:a,x:l.x,y:l.y}})}}if(zot(S)&&(S=!1),zot(B)&&(B=!0),!zot(e)){if(e.replace&&(e=e.replace(/style\s?=[^"]*"[^"]*"/gi,"")),l=zot(e.draggable)?(e.getAttribute||(i=new DOMParser,e=i.parseFromString(e,"image/svg+xml").documentElement),this.svg=e):(i=new DOMParser,a=(e=e.innerHTML?i.parseFromString(e.innerHTML,"text/xml"):e).getElementsByTagName("svg"),this.svg=a?e.getElementsByTagName("svg")[0]:null),zot(l)||(s=l.getAttribute("width"),c=l.getAttribute("height")),s=s&&Number(s.trim()),c=c&&Number(c.trim()),this.zimContainer_constructor(s,c),this.type="SVGContainer",zot(l))return;var Y,d=So.black,h=So.black,g=So.black,p=So.black,f=2,m=2,z=1,y=1,b=1,v=1;var w=e.getElementsByTagName("svg");function C(e){var r,i,a,l,s,t=e.split(";");return So.loop(t,function(e){var t=(e=e.replace(/,/g,"")).split(":"),o=t[0].trim().toLowerCase(),n=t[1].trim().toLowerCase().replace("px","");"fill"==o&&(r=n),"stroke"==o&&(i=n),"stroke-width"==o&&(a=n),"opacity"==o&&(s=l=n),"fill-opacity"==o&&(l=n),"stroke-opacity"==o&&(s=n)}),[r,i,a,l,s]}function x(e,t){var o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C=D(t),x=C[0],k=C[1],T=C[2],A=(C[3],C[4],C[5]),P=C[6];"circle"==e?(n=.5523*(o=Number(t.getAttribute("r").trim())),r=B?new So.Circle(Number(t.getAttribute("r")),x,k,T):new So.Blob(x,k,T,4,o,n,"mirror",null,I,null,null,null,null,null,null,null,null,null,null,E)):"rect"==e?r=B?new So.Rectangle(Number(t.getAttribute("width")),Number(t.getAttribute("height")),x,k,T,Number(t.getAttribute("rx"))):(i=Number(t.getAttribute("width")),a=Number(t.getAttribute("height")),l=Number(t.getAttribute("rx")),s=Number(t.getAttribute("ry")),l&&s?(c=.5523*l,u=.5523*s,new So.Blob(x,k,T,[[l,0,0,0,-c,0,0,0,"free"],[i-l,0,0,0,0,0,c,0,"free"],[i,s,0,0,0,-u,0,0,"free"],[i,a-s,0,0,0,0,0,u,"free"],[i-l,a,0,0,c,0,0,0,"free"],[l,a,0,0,0,0,-c,0,"free"],[0,a-s,0,0,0,u,0,0,"free"],[0,s,0,0,0,0,0,-u,"free"]],null,null,null,null,I,null,null,null,null,null,null,null,null,null,null,E)):new So.Blob(x,k,T,[[0,0],[i,0],[i,a],[0,a]],null,null,null,null,I,null,null,null,null,null,null,null,null,null,null,E)):"line"==e?r=new So.Squiggle(k,T,[[Number(t.getAttribute("x1")),Number(t.getAttribute("y1"))],[Number(t.getAttribute("x2")),Number(t.getAttribute("y2"))]],null,null,null,null,I,null,null,null,null,null,null,null,null,null,null,E):"polygon"==e||"polyline"==e?(d=(d=(d=t.getAttribute("points")).replace(/-/g," -")).replace(/\s+/g," "),h=[],-1!=d.indexOf(",")?So.loop(d.split(" "),function(e){var t=e.split(",");h.push([Number(t[0].trim()),Number(t[1].trim())])}):So.loop(d.split(" "),function(e,t){(t+1)%2==0&&h.push([g,e.trim()]),g=e.trim()}),r="polygon"==e?new Blob(x,k,T,h):new So.Squiggle(k,T,h,null,null,null,null,I,null,null,null,null,null,null,null,null,null,null,E)):"ellipse"==e&&(r=new So.Blob(x,k,T,(f=p=0,m=Number(t.getAttribute("rx")),z=Number(t.getAttribute("ry")),[[p-m,f,0,0,p,(w=f+z)+(b=.5522848*z)-z,p,f-b,"mirror"],[p,f-z,0,0,p-(y=.5522848*m),f,(v=p+m)+y-m,f,"mirror"],[v,f,0,0,p,f-b,p+y-y,w+b-z,"mirror"],[p,w,0,0,v-m+y,f,p-y,f,"mirror"]]),null,null,null,null,I,null,null,null,null,null,null,null,null,null,null,E)),r.loc(A,P,M);var S=t.getAttribute("transform");(S||Y)&&_(r,S||Y),!E||"Rectangle"!=r.type&&"Circle"!=r.type||r.transform({showReg:!1,visible:I})}function _(l,e){var t=e.split(")");So.loop(t,function(e){var t,o,n,r,i,a;""!=e&&(o=(t=e.trim().split("("))[0].trim().toLowerCase(),n=t[1].trim().toLowerCase().replace("px","").replace("deg",""),"translate"==o&&(r=n.split(","),l.mov(Number(r[0].trim()),r[1]?Number(r[1].trim()):0)),"scale"==o&&(i=n.split(","),"Blob"==l.type||"Squiggle"==l.type?1==i.length?l.transformPoints("scale",Number(i[0].trim())):2==i.length&&(l.transformPoints("scaleX",Number(i[0].trim())),l.transformPoints("scaleY",Number(i[1].trim()))):1==i.length?l.sca(Number(i[0].trim())):2==i.length&&l.sca(Number(i[0].trim()),Number(i[1].trim()))),"rotate"==o&&(1==(a=n.split(",")).length?a.push(0,0):2==a.length&&a.push(0),l.rot(Number(a[0].trim()),Number(a[1].trim()),Number(a[2].trim()))),"skewX"==o&&(l.skewX=n),"skewY"==o&&(l.skewY=n))})}0==w.length&&(w=[e]),function c(e){So.loop(e,function(e){var t,o,n,r,i,a,l,s=e.tagName.toLowerCase();"path"==s&&k(e),"circle"==s&&x("circle",e),"rect"==s&&x("rect",e),"ellipse"==s&&x("ellipse",e),"line"==s&&x("line",e),"polygon"==s&&x("polygon",e),"polyline"==s&&x("polyline",e),"g"==s&&((t=e.getAttribute("style"))&&(n=(o=C(t))[0],r=o[1],i=o[2],a=o[3],l=o[4]),Y=e.getAttribute("transform"),h=e.getAttribute("fill")?e.getAttribute("fill"):zot(n)?d:n,p=e.getAttribute("stroke")?e.getAttribute("stroke"):zot(r)?g:r,m=e.getAttribute("stroke-width")?e.getAttribute("stroke-width"):zot(i)?f:i,y=e.getAttribute("fill-opacity")?e.getAttribute("fill-opacity"):zot(a)?z:a,v=e.getAttribute("stroke-opacity")?e.getAttribute("stroke-opacity"):zot(l)?b:l),c(e.children),"g"==e.tagName.toLowerCase()&&(h=d,p=g,m=f,y=z,v=b,Y=null)})}(w)}function D(e){var t,o,n,r,i,a,l=e.getAttribute("style");l&&(o=(t=C(l))[0],n=t[1],r=t[2],i=t[3],a=t[4]),o=e.getAttribute("fill")?e.getAttribute("fill"):zot(o)?h:o,n=e.getAttribute("stroke")?e.getAttribute("stroke"):zot(n)?p:n,r=e.getAttribute("stroke-width")?e.getAttribute("stroke-width"):zot(r)?m:r,i=e.getAttribute("fill-opacity")?e.getAttribute("fill-opacity"):zot(i)?y:i,a=e.getAttribute("stroke-opacity")?e.getAttribute("stroke-opacity"):zot(a)?v:a;var s=e.getAttribute("x")?e.getAttribute("x"):0,s=e.getAttribute("cx")?e.getAttribute("cx"):s,c=e.getAttribute("y")?e.getAttribute("y"):0,c=e.getAttribute("cy")?e.getAttribute("cy"):c;return zot(i)||zot(o)||(o=So.convertColor(o,"rgba",Number(i))),zot(a)||zot(n)||(n=So.convertColor(n,"rgba",Number(a))),[o,n,Number(r),Number(i),Number(a),Number(s),Number(c)]}function k(t,e){zot(e)&&(e=!0);var o,n,r,i,a,l,s,c=["M","m","L","l","H","h","V","v","C","c","S","s","Q","q","T","t","A","a","z","Z"],u=["m","l","h","v","c","s","q","t","a","z"],d=new So.Point(0,0);o=(o=(o=(o=(o=(o=zot(t.getAttribute)?t:(t.getAttribute("id"),t.getAttribute("d"))).replace(/,/g," ")).replace(/([a-zA-Z])/g," $1 ")).replace(/-/g," -")).replace(/\s+/g," ")).replace(/\.(\d*)\./g,".$1 ."),e&&(n=D(t),r=n[0],i=n[1],a=n[2],n[3],n[4]);var h,g=[],p=[0,0],f=new So.Point(0,0),m=new So.Point(0,0,0,0),z=new So.Point(0,0,0,0,0,0),y=new So.Point(0,0,0,0,0,0,0),b=o.split(" "),v=b.slice(1,b.length),w=[],C=!1,x="",k=!1,T="squiggle",A=null;function P(){x=w[w.length-1],2<=g.length&&("z"!=x&&"Z"!=x||(T="blob")),(l="squiggle"==T?new So.Squiggle(i,a,g,null,null,null,null,I,null,null,null,null,null,null,null,null,null,null,E):new So.Blob(r,i,a,g,null,null,null,null,I,null,null,null,null,null,null,null,null,null,null,E)).loc(0,0,M),x=w[w.length-1],w[w.length-2],0<=u.indexOf(x)?(p[0]=g[g.length-1][0],p[1]=g[g.length-1][1],j.x=g[g.length-1][0],j.y=g[g.length-1][1],(g=[]).push([p[0],p[1]])):(p=[0,0],g=[[0,0]]),w=[],"z"!=x&&"Z"!=x&&w.push(x),d.x=0,d.y=0;var e=t.getAttribute("transform");(e||Y)&&_(l,e||Y)}return So.loop(v,function(e,t){var o,n;0==t&&(j.x=0,j.y=0,p=[0,0],x=""),-1==c.indexOf(e)?("lxo"==h&&(h="lx",w.push("l"),C=!0),"lyo"==h&&(h="ly",C=!0),"Lxo"==h&&(h="Lx",w.push("L"),C=!0),"Lyo"==h&&(h="Ly",C=!0),s=Number(e),s=Math.round(100*s)/100,"X"==h?(j.x=s,h="Y"):"Y"==h?(j.y=s,h="Lxo",g.push([j.x,j.y])):"x"==h?(j.x=j.x+s,h="y"):"y"==h&&(j.y=j.y+s,h="lxo",g.push([j.x,j.y])),"H"==h||"h"==h?(d.x=g[g.length-1][0],d.y=g[g.length-1][1],d.x=d.x+("h"==h?s:s-j.x),g.push([d.x,d.y]),h="Lx"):"V"!=h&&"v"!=h||(d.x=g[g.length-1][0],d.y=g[g.length-1][1],d.y=d.y+("v"==h?s:s-j.y),g.push([d.x,d.y]),h="lx"),"Lx"==h?(f.x=s,h="Ly"):"Ly"==h?(f.y=s,d.x=f.x,d.y=f.y,g.push([d.x,d.y]),h="Lx"):"lx"==h?(0<w.length&&(0!=d.x&&0!=d.y?(j.x=d.x,j.y=d.y):(j.x=d.x+j.x,j.y=d.y+j.y)),f.x=j.x+s,h=C?"lyo":"ly"):"ly"==h&&(f.y=j.y+s,d.x=f.x,d.y=f.y,g.push([d.x,d.y]),h="lx"),"qx"==h||"Qx"==h?(0<g.length?(j.x=g[g.length-1][0],j.y=g[g.length-1][1]):(j.x=0,j.y=0),m.x="qx"==h?j.x+s:s,h="qx"==h?"qy":"Qy"):"qy"==h||"Qy"==h?(m.y="qy"==h?j.y+s:s,h="qy"==h?"qz":"Qz",k&&(k=!1,(o=g[g.length-1])[6]=-o[4],o[7]=-o[5],o[8]="mirror",d.x=m.x,d.y=m.y,g[g.length]=[d.x,d.y,0,0,-o[6],o[7],0,0,"free"],h="qy"==h?"qx":"Qx")):"qz"==h||"Qz"==h?(m.z="qz"==h?j.x+s:s,h="qz"==h?"qq":"Qq"):"qq"!=h&&"Qq"!=h||(m.w="qq"==h?j.y+s:s,o=g[g.length-1],d.x=o[0],d.y=o[1],1==g.length?(o[2]=0,o[3]=0,o[4]=0,o[5]=0,o[6]=2/3*(m.x-d.x),o[7]=2/3*(m.y-d.y),o[8]="free"):g[g.length]=[d.x,d.y,0,0,0,0,2/3*(m.x-d.x),2/3*(m.y-d.y),"free"],d.x=m.z,d.y=m.w,g[g.length]=[d.x,d.y,0,0,2/3*(m.x-d.x),2/3*(m.y-d.y),0,0,"free"],h="qq"==h?"qx":"Qx"),"cx"==h||"Cx"==h?(0<g.length?(j.x=g[g.length-1][0],j.y=g[g.length-1][1]):(j.x=0,j.y=0),z.x="cx"==h?j.x+s:s,h="cx"==h?"cy":"Cy"):"cy"==h||"Cy"==h?(z.y="cy"==h?j.y+s:s,h="cy"==h?"cz":"Cz"):"cz"==h||"Cz"==h?(z.z="cz"==h?j.x+s:s,h="cz"==h?"cq":"Cq"):"cq"==h||"Cq"==h?(z.q="cq"==h?j.y+s:s,h="cq"==h?"cr":"Cr",k&&((o=g[g.length-1])[2]=0,o[3]=0,zot(o[4])&&(o[4]=0),zot(o[5])&&(o[5]=0),o[6]=-o[4],o[7]=-o[5],o[8]="mirror",d.x=z.z,d.y=z.q,g[g.length]=[d.x,d.y,0,0,z.x-d.x,z.y-d.y,0,0,"free"],h="cr"==h?"cx":"Cx")):"cr"==h||"Cr"==h?(z.r="cr"==h?j.x+s:s,h="cr"==h?"cs":"Cs"):"cs"==h||"Cs"==h?(z.s="cs"==h?j.y+s:s,o=g[g.length-1],1==g.length&&(o[2]=0,o[3]=0,o[4]=0,o[5]=0),o[6]=z.x-o[0],o[7]=z.y-o[1],o[8]="free",d.x=z.r,d.y=z.s,g[g.length]=[d.x,d.y,0,0,z.z-d.x,z.q-d.y,0,0,"free"],h="cs"==h?"cx":"Cx"):"ax"==h||"Ax"==h?(0<g.length?(j.x=g[g.length-1][0],j.y=g[g.length-1][1]):(j.x=0,j.y=0),y.x=s,h="ax"==h?"ay":"Ay"):"ay"==h||"Ay"==h?(y.y=s,h="ay"==h?"az":"Az"):"az"==h||"Az"==h?(y.z=s,h="az"==h?"aq":"Aq"):"aq"==h||"Aq"==h?(y.q=s,h="aq"==h?"ar":"Ar"):"ar"==h||"Ar"==h?(y.r=s,h="ar"==h?"as":"As"):"as"==h||"As"==h?(y.s="as"==h?j.x+s:s,h="as"==h?"at":"At"):"at"!=h&&"At"!=h||(y.t="at"==h?j.y+s:s,n=(O=O||L())({px:j.x,py:j.y,cx:y.s,cy:y.t,rx:y.x,ry:y.y,xAxisRotation:y.z,largeArcFlag:y.q,sweepFlag:y.r}),loop(n,function(e,t){o=g[g.length-1],1==g.length&&(o[2]=0,o[3]=0,o[4]=0,o[5]=0),0==t&&1==g.length?(o[6]=e.x1-d.x-j.x,o[7]=e.y1-d.y-j.y):(o[6]=e.x1-d.x,o[7]=e.y1-d.y),o[8]="free",d.x=e.x,d.y=e.y,g[g.length]=[d.x,d.y,0,0,e.x2-d.x,e.y2-d.y,0,0,"free"]}),h="at"==h?"ax":"Ax")):(w.push(e),"s"!=e&&(k=!1),1<w.length&&("M"!=e&&"m"!=e||(P(),"M"==e?(j.x=0,j.y=0):(j.x=g[g.length-1][0],j.y=g[g.length-1][1]),g=[],(w=[]).push(e))),"M"==e?h="X":"m"==e?h="x":"L"==e?(h="Lx",S&&A&&"l"!=A&&P(),A="l"):"l"==e?(h="lx",S&&A&&"l"!=A&&P(),A="l"):"H"==e?(h="H",S&&A&&"l"!=A&&P(),A="l"):"h"==e?(h="h",S&&A&&"l"!=A&&P(),A="l"):"V"==e?(h="V",S&&A&&"l"!=A&&P(),A="l"):"v"==e?(h="v",S&&A&&"l"!=A&&P(),A="l"):"C"==e?(h="Cx",S&&A&&"c"!=A&&P(),A="c"):"c"==e?(h="cx",S&&A&&"c"!=A&&P(),A="c"):"S"==e?(k=!0,h="Cx",S&&A&&"c"!=A&&P(),A="c"):"s"==e?(k=!0,h="cx",S&&A&&"c"!=A&&P(),A="c"):"Q"==e?(h="Qx",S&&A&&"q"!=A&&P(),A="q"):"q"==e?(h="qx",S&&A&&"q"!=A&&P(),A="q"):"T"==e?(k=!0,h="Qx",S&&A&&"q"!=A&&P(),A="q"):"t"==e?(k=!0,h="qx",S&&A&&"q"!=A&&P(),A="q"):"A"==e?(h="Ax",S&&A&&"a"!=A&&P(),A="a"):"a"==e?(h="ax",S&&A&&"a"!=A&&P(),A="a"):"z"!=e&&"Z"!=e||(T="blob"))}),e&&P(),g}!(M.processPath=function(e){return k(e,!1)})!==t&&So.styleTransforms(this,u),this.clone=function(){return M.cloneProps(new So.SVGContainer(e,S,B,I,E,t,this.group,n))}},So.extend(So.SVGContainer,So.Container,"clone","zimContainer",!1),So.CustomShape=function(e,t,o,n){So.zimCustomShapeCheck||(z_d("50.97"),So.zimCustomShapeCheck=!0),this.zimContainer_constructor(e,t,o,n,!1);var r=this;this.mouseChildren=!1,r._dashedOffset=5,Object.defineProperty(r,"color",{get:function(){return r._color},set:function(e){zot(e)&&(e="black"),(r._color=e)&&e.type?r.specialColor(r.colorCommand,e):r.colorCommand.style=e}}),this.setColorRange=function(e,t){return zot(t)?(r.startColor=r.color,r.endColor=e):(zot(e)?r.startColor=r.color:r.startColor=e,r.endColor=t),r},r._colorRange=0,Object.defineProperty(r,"colorRange",{get:function(){return r._colorRange},set:function(e){r._colorRange=e,zot(r.startColor)||zot(r.endColor)||(r.color=So.colorRange(r.startColor,r.endColor,e))}}),Object.defineProperty(r,"borderColor",{get:function(){return r._borderColor},set:function(e){(r._borderColor=e)&&!r.borderWidth&&(r.borderWidth=1),r.borderColorCommand?e&&e.type?r.specialColor(r.borderColorCommand,e):r.borderColorCommand.style=e:r.drawShape()}}),Object.defineProperty(r,"borderWidth",{get:function(){return r._borderWidth},set:function(e){0<e||(e=0),r._borderWidth=e,r.borderWidthCommand&&0!=r._borderWidth?(r.borderWidthCommand.width=r._borderWidth,r._dashed&&(r.borderDashedCommand.segments=r._dashed,r.borderDashedCommand.offset=r._dashedOffset)):(r.borderWidthCommand=null,r.drawShape())}}),Object.defineProperty(r,"thickness",{get:function(){return r._thickness},set:function(e){0<e||(e=0),r._thickness=e,r.thicknessCommand&&0!=r._thickness?(r.thicknessCommand.width=r._thickness,r._dashed&&(r.dashedCommand.segments=r._dashed,r.dashedCommand.offset=r._dashedOffset)):r.drawShape()}}),Object.defineProperty(r,"dashed",{get:function(){return r._dashed},set:function(e){if((r._dashed=e)&&!Array.isArray(r._dashed)&&(r.dashed=[10,10]),"Squiggle"==r.type||"Line"==r.type){if(!r.thicknessCommand||0==r._thickness)return;var t=r.dashedCommand}else{if(!r.borderWidthCommand||0==r._borderWidth)return;t=r.borderDashedCommand}t?r._dashed?(t.segments=r._dashed,t.offset=r._dashedOffset):(t.segments=null,t.offset=null):r.drawShape()}}),Object.defineProperty(r,"dashedOffset",{get:function(){return r._dashedOffset},set:function(e){if(isNaN(e)&&(e=5),r._dashedOffset=e,"Squiggle"==r.type||"Line"==r.type){if(!r.thicknessCommand||0==r._thickness)return;var t=r.dashedCommand}else{if(!r.borderWidthCommand||0==r._borderWidth)return;t=r.borderDashedCommand}t?r._dashed?(t.segments=r._dashed,t.offset=r._dashedOffset):(t.segments=null,t.offset=null):r.drawShape()}}),Object.defineProperty(r,"corner",{get:function(){return r._corner},set:function(e){r._corner=e,r.drawShape()}}),this.linearGradient=function(e,t,o,n,r,i){return this.linearGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.linearGradient(e,t,o,n,r,i),this},this.radialGradient=function(e,t,o,n,r,i,a,l){return this.radialGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.radialGradient(e,t,o,n,r,i,a,l),this},this.cloneAll=function(e,t,o,n){var r=this.getBounds();zot(r)&&(r={x:null,y:null,width:null,height:null});var i=this.cloneChildren(this.cloneProps(new So.Container(r.x,r.y,r.width,r.height,t,o,n)),e);return i.mouseChildren=!1,i.type=this.type,i}},So.extend(So.CustomShape,So.Container,null,"zimContainer",!1),So.Circle=function(e,t,o,n,r,i,a,l,s,c,u){var d;if(d=zob(So.Circle,arguments,"radius, color, borderColor, borderWidth, dashed, percent, percentClose, strokeObj, style, group, inherit",this))return d;z_d("51"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Circle",this.group=c;var h=!1===s?{}:So.getStyle(this.type,this.group,u);zot(e)&&(e=null!=h.radius?h.radius:50),zot(r)&&(r=null!=h.dashed&&h.dashed),zot(o)&&(o=null!=h.borderColor?h.borderColor:null),zot(n)&&(n=null!=h.borderWidth?h.borderWidth:null),o<0||n<0?o=n=null:null!=o&&null==n&&(n=1),zot(t)&&(t=null!=h.color?h.color:0<n?"rgba(0,0,0,0)":"black"),zot(i)&&(i=null!=h.percent?h.percent:100),zot(a)&&(a=null==h.percentClose||h.percentClose),zot(l)&&(l=null!=h.strokeObj?h.strokeObj:{});var g=function(){return arguments}(e,t,o,n,i);e=So.Pick.choose(e),t=So.Pick.choose(t),o=So.Pick.choose(o),n=So.Pick.choose(n),i=So.Pick.choose(i);var p=this;p._radius=e,p._color=t,p._borderColor=o,p._borderWidth=n,p._dashed=r,p._dashed&&!Array.isArray(p._dashed)&&(p._dashed=[10,10]);var f=this.shape=new createjs.Shape;this.addChild(f);var m=f.graphics;p.drawShape=function(){m.c(),p.colorCommand=m.f(p._color).command,p._color&&p._color.type&&p.specialColor(p.colorCommand,p._color),(zot(p._borderWidth)||0<p._borderWidth)&&(zot(p._borderColor)&&zot(p._borderWidth)||(zot(p._borderColor)&&(p._borderColor="black"),p.borderColorCommand=m.s(p._borderColor).command,p._borderColor&&p._borderColor.type&&p.specialColor(p.borderColorCommand,p._borderColor),p.borderWidthCommand=m.ss(p._borderWidth,l.caps,l.joints,l.miterLimit,l.ignoreScale).command,p._dashed&&(p.borderDashedCommand=m.sd(Array.isArray(p._dashed)?p._dashed:[10,10],p._dashedOffset).command)));var e,t=2*p._radius;"number"==typeof i&&0<=i&&i<100?(e=360*i/100/2,m.arc(0,0,p._radius,(-e-90)*Math.PI/180,(e-90)*Math.PI/180,!1),a&&m.cp(),t=p._radius-Math.cos(e*Math.PI/180)*p._radius):m.dc(0,0,p._radius),p.setBounds(-p._radius,-p._radius,2*p._radius,t)},p.drawShape(),Object.defineProperty(p,"radius",{get:function(){return p._radius},set:function(e){p._radius=e,p.drawShape()}}),Object.defineProperty(p,"percent",{get:function(){return i},set:function(e){i=e,p.drawShape()}}),Object.defineProperty(p,"percentClose",{get:function(){return a},set:function(e){a=e,p.drawShape()}}),!1!==s&&So.styleTransforms(this,h),this.clone=function(e,t){var o=p.cloneProps(new So.Circle(e||!So.isPick(g[0])?p.radius:g[0],e||!So.isPick(g[1])?p.color:g[1],e||!So.isPick(g[2])?p.borderColor:g[2],e||!So.isPick(g[3])?p.borderWidth:g[3],p.dashed,e||!So.isPick(g[4])?i:g[4],a,l,s,this.group,u));return p.linearGradientParams&&o.linearGradient.apply(o,p.linearGradientParams),p.radialGradientParams&&o.radialGradient.apply(o,p.radialGradientParams),o}},So.extend(So.Circle,So.CustomShape,"clone","zimCustomShape",!1),So.Rectangle=function(t,o,e,n,r,i,a,l,s,c,u){var d;if(d=zob(So.Rectangle,arguments,"width, height, color, borderColor, borderWidth, corner, dashed, strokeObj, style, group, inherit",this))return d;z_d("52"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Rectangle",this.group=c;var h=!1===s?{}:So.getStyle(this.type,this.group,u);zot(t)&&(t=null!=h.width?h.width:null),zot(o)&&(o=null!=h.height?h.height:zot(t)?100:t),zot(t)&&(t=o),zot(i)&&(i=null!=h.corner?h.corner:0),zot(a)&&(a=null!=h.dashed&&h.dashed),zot(n)&&(n=null!=h.borderColor?h.borderColor:null),zot(r)&&(r=null!=h.borderWidth?h.borderWidth:null),n<0||r<0?n=r=null:null!=n&&null==r&&(r=1),zot(e)&&(e=null!=h.color?h.color:0<r?"rgba(0,0,0,0)":"black"),zot(l)&&(l=null!=h.strokeObj?h.strokeObj:{});var g=function(){return arguments}(t,o,e,n,r);t=So.Pick.choose(t),o=So.Pick.choose(o),e=So.Pick.choose(e),n=So.Pick.choose(n),r=So.Pick.choose(r);var p=this;p._color=e,p._borderColor=n,p._borderWidth=r,p._dashed=a,p._dashed&&!Array.isArray(p._dashed)&&(p._dashed=[10,10]);var f=this.shape=new createjs.Shape;this.addChild(f);var m=f.graphics;p.drawShape=function(){m.c(),p.colorCommand=m.f(p._color).command,e&&e.type&&p.specialColor(p.colorCommand,e),(zot(p._borderWidth)||0<p._borderWidth)&&(zot(p._borderColor)&&zot(p._borderWidth)||(zot(p._borderColor)&&(p._borderColor="black"),p.borderColorCommand=m.s(p._borderColor).command,p._borderColor&&p._borderColor.type&&p.specialColor(p.borderColorCommand,p._borderColor),p.borderWidthCommand=m.ss(p._borderWidth,l.caps,l.joints,l.miterLimit,l.ignoreScale).command,p._dashed&&(p.borderDashedCommand=m.sd(Array.isArray(p._dashed)?p._dashed:[10,10],p._dashedOffset).command))),Array.isArray(i)?m.rc(0,0,t,o,i[0],i[1],i[2],i[3]):0<i?m.rr(0,0,t,o,i):m.r(0,0,t,o),p.setBounds(0,0,t,o)},p.drawShape(),!1!==s&&So.styleTransforms(this,h),this.clone=function(e){return p.cloneProps(new So.Rectangle(e||!So.isPick(g[0])?t:g[0],e||!So.isPick(g[1])?o:g[1],e||!So.isPick(g[2])?p.color:g[2],e||!So.isPick(g[3])?p.borderColor:g[3],e||!So.isPick(g[4])?p.borderWidth:g[4],i,p._dashed,l,s,this.group,u))}},So.extend(So.Rectangle,So.CustomShape,"clone","zimCustomShape",!1),So.Triangle=function(s,c,o,e,t,n,u,d,r,h,i,a,l){var g;if(g=zob(So.Triangle,arguments,"a, b, c, color, borderColor, borderWidth, center, adjust, dashed, strokeObj, style, group, inherit",this))return g;z_d("53"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Triangle",this.group=a;var p=!1===i?{}:So.getStyle(this.type,this.group,l);zot(s)&&(s=null!=p.a?p.a:100),zot(c)&&(c=null!=p.b?p.b:s),zot(o)&&(o=null!=p.c?p.c:c),-1==o&&(o=Math.sqrt(Math.pow(s,2)+Math.pow(c,2))),zot(u)&&(u=null==p.center||p.center),zot(d)&&(d=null!=p.adjust?p.adjust:0),zot(t)&&(t=null!=p.borderColor?p.borderColor:null),zot(n)&&(n=null!=p.borderWidth?p.borderWidth:null),t<0||n<0?t=n=null:null!=t&&null==n&&(n=1),zot(e)&&(e=null!=p.color?p.color:0<n?"rgba(0,0,0,0)":"black"),zot(d)&&(d=null!=p.adjust?p.adjust:0),zot(h)&&(h=null!=p.strokeObj?p.strokeObj:{});var f=function(){return arguments}(s,c,o,e,t,n);s=So.Pick.choose(s),c=So.Pick.choose(c),o=So.Pick.choose(o),this.a=s,this.b=c,this.c=o,e=So.Pick.choose(e),t=So.Pick.choose(t),n=So.Pick.choose(n);var m=this;m._color=e,m._borderColor=t,m._borderWidth=n,m._dashed=r,m._dashed&&!Array.isArray(m._dashed)&&(m._dashed=[10,10]);var z=[s,c,o];z.sort(function(e,t){return t-e});var y,b,v=z[0],w=z[1],C=z[2],x=[z.indexOf(s),z.indexOf(c),z.indexOf(o)];w+C<v?zog("zim display - Triangle(): invalid triangle lengths"):(y=this.shape=new createjs.Shape,this.adjusted=d,this.addChild(y),b=y.graphics,m.drawShape=function(){b.c(),m.colorCommand=b.f(m._color).command,m._color&&m._color.type&&m.specialColor(m.colorCommand,m._color),(zot(m._borderWidth)||0<m._borderWidth)&&(zot(m._borderColor)&&zot(m._borderWidth)||(zot(m._borderColor)&&(m._borderColor="black"),m.borderColorCommand=b.s(m._borderColor).command,m._borderColor&&m._borderColor.type&&m.specialColor(m.borderColorCommand,m._borderColor),m.borderWidthCommand=b.ss(m._borderWidth,h.caps,h.joints,h.miterLimit,h.ignoreScale).command,m._dashed&&(m.borderDashedCommand=b.sd(Array.isArray(m._dashed)?m._dashed:[10,10],m._dashedOffset).command))),b.mt(0,0),m.one={x:0,y:0},b.lt(s,0),m.two={x:s,y:0};var e=180*Math.acos((Math.pow(w,2)+Math.pow(C,2)-Math.pow(v,2))/(2*w*C))/Math.PI,t=180*Math.asin(w*Math.sin(e*Math.PI/180)/v)/Math.PI,o=[e,t,180-e-t];m.angles=[o[x[1]],o[x[2]],o[x[0]]];var n=m.angles[1],r=Math.cos(n*Math.PI/180)*c,i=Math.sin(n*Math.PI/180)*c,a=Math.max(s,s-r),l=i;m.setBounds(0,d,a,l),y.y=l,b.lt(s-r,0-i),m.three={x:s-r,y:0-i},b.cp(),u&&(m.regX=a/2,m.regY=l/2),d&&(m.shape.y+=d)},m.drawShape(),!1!==i&&So.styleTransforms(this,p),this.clone=function(e){var t=m.cloneProps(new So.Triangle(e||!So.isPick(f[0])?s:f[0],e||!So.isPick(f[1])?c:f[1],e||!So.isPick(f[2])?o:f[2],e||!So.isPick(f[3])?m.color:f[3],e||!So.isPick(f[4])?m.borderColor:f[4],e||!So.isPick(f[5])?m.borderWidth:f[5],u,d,r,h,i,this.group,l));return m.linearGradientParams&&t.linearGradient.apply(t,m.linearGradientParams),m.radialGradientParams&&t.radialGradient.apply(t,m.radialGradientParams),t})},So.extend(So.Triangle,So.CustomShape,"clone","zimCustomShape"),So.Poly=function(e,t,o,n,r,i,a,l,s,c,u){var d;if(d=zob(So.Poly,arguments,"radius, sides, pointSize, color, borderColor, borderWidth, dashed, strokeObj, style, group, inherit",this))return d;z_d("53.1"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Poly",this.group=c;var h=!1===s?{}:So.getStyle(this.type,this.group,u);zot(e)&&(e=null!=h.radius?h.radius:50),zot(t)&&(t=null!=h.sides?h.sides:5),zot(o)&&(o=null!=h.pointSize?h.pointSize:0),zot(a)&&(a=null!=h.dashed&&h.dashed),zot(r)&&(r=null!=h.borderColor?h.borderColor:null),zot(i)&&(i=null!=h.borderWidth?h.borderWidth:null),r<0||i<0?r=i=null:null!=r&&null==i&&(i=1),zot(n)&&(n=null!=h.color?h.color:0<i?"rgba(0,0,0,0)":"black"),zot(l)&&(l=null!=h.strokeObj?h.strokeObj:{});var g=function(){return arguments}(e,t,o,n,r,i);e=So.Pick.choose(e),t=So.Pick.choose(t),o=So.Pick.choose(o),n=So.Pick.choose(n),r=So.Pick.choose(r),i=So.Pick.choose(i);var p=this;p._radius=e,p._color=n,p._sides=t,p._pointSize=o,p._borderColor=r,p._borderWidth=i,p._dashed=a,p._dashed&&!Array.isArray(p._dashed)&&(p._dashed=[10,10]);var f=this.shape=new createjs.Shape;this.addChild(f),f.rotation=-90;var m=f.graphics;p.drawShape=function(){m.c(),p.colorCommand=m.f(p._color).command,p._color&&p._color.type&&p.specialColor(p.colorCommand,p._color),(zot(p._borderWidth)||0<p._borderWidth)&&(zot(p._borderColor)&&zot(p._borderWidth)||(zot(p._borderColor)&&(p._borderColor="black"),p.borderColorCommand=m.s(p._borderColor).command,p._borderColor&&p._borderColor.type&&p.specialColor(p.borderColorCommand,p._borderColor),p.borderWidthCommand=m.ss(p._borderWidth,l.caps,l.joints,l.miterLimit,l.ignoreScale).command,p._dashed&&(p.borderDashedCommand=m.sd(Array.isArray(p._dashed)?p._dashed:[10,10],p._dashedOffset).command))),m.dp(0,0,p._radius,p._sides,p._pointSize),p.setBounds(-p._radius,-p._radius,2*p._radius,2*p._radius)},p.drawShape(),Object.defineProperty(p,"radius",{get:function(){return p._radius},set:function(e){p._radius=e,p.drawShape()}}),Object.defineProperty(p,"sides",{get:function(){return p._sides},set:function(e){p._sides=e,p.drawShape()}}),Object.defineProperty(p,"pointSize",{get:function(){return p._pointSize},set:function(e){p._pointSize=e,p.drawShape()}}),!1!==s&&So.styleTransforms(this,h),this.clone=function(e,t){var o=p.cloneProps(new So.Poly(e||!So.isPick(g[0])?p.radius:g[0],e||!So.isPick(g[1])?p.sides:g[1],e||!So.isPick(g[2])?p.pointSize:g[2],e||!So.isPick(g[3])?p.color:g[3],e||!So.isPick(g[4])?p.borderColor:g[4],e||!So.isPick(g[5])?p.borderWidth:g[5],p.dashed,l,s,this.group,u));return p.linearGradientParams&&o.linearGradient.apply(o,p.linearGradientParams),p.radialGradientParams&&o.radialGradient.apply(o,p.radialGradientParams),o}},So.extend(So.Poly,So.CustomShape,"clone","zimCustomShape",!1),So.Line=function(e,o,E,O,M,t,j,i,n,L,Y,a,l,r,s){var c;if(c=zob(So.Line,arguments,"length, thickness, color, startHead, endHead, dashed, strokeObj, lineType, lineOrientation, curveH, curveV, points, style, group, inherit",this))return c;z_d("53.15"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Line",this.group=r;var u=!1===l?{}:So.getStyle(this.type,this.group,s);zot(e)&&(e=null!=u.length?u.length:100),zot(t)&&(t=null!=u.dashed&&u.dashed),zot(o)&&(o=null!=u.thickness?u.thickness:3),zot(E)&&(E=null!=u.color?u.color:"black"),zot(O)&&(O=null!=u.startHead?u.startHead:"null"),zot(M)&&(M=null!=u.endHead?u.endHead:"null"),zot(j)&&(j=null!=u.strokeObj?u.strokeObj:{}),zot(i)&&(i=null!=u.lineType?u.lineType:"straight"),"corner"!==i&&"curve"!=i&&(i="straight"),zot(n)&&(n=null!=u.lineOrientation?u.lineOrientation:"auto"),"vertical"!==n&&"horizontal"!=n&&(n="auto"),zot(L)&&(L=null!=u.curveH?u.curveH:20),zot(Y)&&(Y=null!=u.curveV?u.curveV:20),zot(j)&&(j=null!=u.strokeObj?u.strokeObj:{});var d=function(){return arguments}(e,E,o,O,M);e=So.Pick.choose(e),E=So.Pick.choose(E),o=So.Pick.choose(o),O=So.Pick.choose(O),M=So.Pick.choose(M),O.clone&&(O=O.clone()),M.clone&&(M=M.clone());var _=this;function h(e,t){"triangle"==t||"arrow"==t?(_["_"+e+"Head"]=new So.Triangle(4*o,4*o,4*o,E)).rotation=90:"circle"==t&&(_["_"+e+"Head"]=new So.Circle(2.2*o,E)),zot(_["_"+e+"Head"].startAngle)&&(_["_"+e+"Head"].startAngle=_["_"+e+"Head"].rotation)}_._length=e,_._color=E,_._thickness=o,_._dashed=t,_._dashed&&!Array.isArray(_._dashed)&&(_._dashed=[10,10]),_._startX=0,_._startY=0,_._endX=e,_._endY=0,_._startHead=O,_._endHead=M,_._points=a,_._lineOrientation=n,_.angle=0,_.lineType=i,_._startHead&&h("start",_._startHead),_._endHead&&h("end",_._endHead),O=_._startHead,M=_._endHead,O&&"Triangle"==O.type&&(O.startRegY=O.regY),M&&"Triangle"==M.type&&(M.startRegY=M.regY);var g=this.shape=new createjs.Shape;this.addChild(g);var D=g.graphics;_.drawShape=function(e,t){var o,n,r;if(D.c(),_.colorCommand=D.s(_._color).command,E&&E.type&&_.specialColor(_.colorCommand,E),_.thicknessCommand=D.ss(_._thickness,j.caps,j.joints,j.miterLimit,j.ignoreScale).command,_._dashed&&(_.dashedCommand=D.sd(Array.isArray(_._dashed)?_._dashed:[10,10],_._dashedOffset).command),_._points){var i=_._points[0];_._startX=i[0],_._startY=i[1];var a=_._points[_._points.length-1],l=[a[a.length-2],a[a.length-1]];_._endX=l[0],_._endY=l[1],D.mt(i[0],i[1]);for(var s,c,u=1;u<_._points.length;u++){var d=_._points[u];1==u&&(o=[_._startX,_._startY,d[0],d[1]]),2==d.length?D.lt(d[0],d[1]):4==d.length?D.qt(d[0],d[1],d[2],d[3]):6==d.length&&D.bt(d[0],d[1],d[2],d[3],d[4],d[5])}c=4<=d.length?[d[d.length-4],d[d.length-3],_._endX,_._endY]:[(s=_._points[_._points.length-2])[s.lenth-2],s[s.lenth-1],_._endX,_._endY]}else{var h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P=_._startX,S=_._startY,B=_._endX,I=_._endY;"straight"==_.lineType?(O&&"Triangle"==O.type&&((O.regY=0)!=(h=So.dist(P,S,B,I))&&(P+=_._startHead.height/2*(B-P)/h),0!=h&&(S+=_._startHead.height/2*(I-S)/h)),M&&"Triangle"==M.type&&((M.regY=0)!=(h=So.dist(P,S,B,I))&&(B-=_._endHead.height/2*(B-P)/h),0!=h&&(I-=_._endHead.height/2*(I-S)/h))):(e?"horizontal"==_._lineOrientation||"horizontal"==_.autoOrientation?O&&"Triangle"==O.type&&(O.regY=0,P=P<B?Math.min(B,P+_._startHead.height/2):Math.max(B,P-_._startHead.height/2)):O&&"Triangle"==O.type&&(O.regY=0,S=S<I?Math.min(I,S+_._startHead.height/2):Math.max(I,S-_._startHead.height/2)):O&&"Triangle"==O.type&&(O.regY=O.startRegY),t?"horizontal"==_._lineOrientation||"horizontal"==_.autoOrientation?M&&"Triangle"==M.type&&(M.regY=0,P<B?B-=_._endHead.height/2:B+=_._endHead.height/2):M&&"Triangle"==M.type&&(M.regY=0,S<I?I-=_._endHead.height/2:I+=_._endHead.height/2):M&&"Triangle"==M.type&&(M.regY=M.startRegY)),"straight"==_.lineType?(D.mt(P,S).lt(B,I),o=c=[P,S,B,I]):"corner"==_.lineType?(g=P+.4*(B-P),p=S+.4*(I-S),"auto"==_._lineOrientation&&(_.autoOrientation=Math.abs(P-B)>Math.abs(S-I)?"horizontal":"vertical"),"horizontal"==_._lineOrientation||"horizontal"==_.autoOrientation?(o=c=[P,S,g,S],D.mt(P,S).lt(g,S).lt(g,I).lt(B,I)):(o=c=[P,S,P,p],D.mt(P,S).lt(P,p).lt(B,p).lt(B,I))):(f=B<P?-1:1,m=I<S?-1:1,z=P,y=S,b=Math.abs(P-B),v=Math.abs(S-I),w=Math.min(L,.5*b),C=Math.min(Y,.5*v),"auto"==_._lineOrientation&&(_.autoOrientation=Math.abs(P-B)>Math.abs(S-I)?"horizontal":"vertical"),"horizontal"==_._lineOrientation||"horizontal"==_.autoOrientation?(x=v-2*C,k=(b-2*w)/2,D.mt(z,y),0<k&&(z+=k*f,D.lt(z,y)),A=y,y+=C*m,z+=w*f,D.qt(z,A,z,y),o=c=[P,S,z,S],0<x&&(y+=x*m,D.lt(z,y)),y+=C*m,T=z,z+=w*f,D.qt(T,y,z,y),0<k&&(z+=k*f,D.lt(z,y))):(x=b-2*w,k=(v-2*C)/2,D.mt(z,y),0<k&&(y+=k*m,D.lt(z,y)),T=z,z+=w*f,y+=C*m,D.qt(T,y,z,y),o=c=[P,S,P,y],0<x&&(z+=x*f,D.lt(z,y)),z+=w*f,A=y,y+=C*m,D.qt(z,A,z,y),0<k&&(y+=k*m,D.lt(z,y))))}_.setBounds(Math.min(_._startX,_._endX),Math.min(_._startY,_._endY),Math.abs(_._startX-_._endX),Math.abs(_._startY-_._endY)),_._length=Math.sqrt(Math.pow(_._startX-_._endX,2),Math.pow(_._startY-_._endY,2)),_.angle=180*Math.atan2(_._endY-_._startY,_._endX-_._startX)/Math.PI,_._startHead&&_._startHead.loc&&(_._startHead.loc(_._startX,_._startY,_),n=180*Math.atan2(o[3]-o[1],o[2]-o[0])/Math.PI,_._startHead.rotation=n-180+_._startHead.startAngle),_._endHead&&_._endHead.loc&&(_._endHead.loc(_._endX,_._endY,_),r=180*Math.atan2(c[3]-c[1],c[2]-c[0])/Math.PI,_._endHead.rotation=r+_._endHead.startAngle)},_.drawShape(),this.setPoints=function(e,t,o,n,r,i){return Array.isArray(e)&&zot(t)?_.points=e:(e&&!zot(e.x)?(_._startX=zot(e.x)?_._startX:e.x,_._startY=zot(e.y)?_._startY:e.y,t&&(_._endX=zot(t.x)?_._endX:t.x,_._endY=zot(t.y)?_._endY:t.y)):(_._startX=zot(e)?_._startX:e,_._startY=zot(t)?_._startY:t,_._endX=zot(o)?_._endX:o,_._endY=zot(n)?_._endY:n),_.drawShape(r,i)),_},this.from=function(e,t){return e&&!zot(e.x)?(_._startX=zot(e.x)?_._startX:e.x,_._startY=zot(e.y)?_._startY:e.y):(_._startX=zot(e)?_._startX:e,_._startY=zot(t)?_._startY:t),_.drawShape(),_},this.to=function(e,t){return e&&!zot(e.x)?(_._endX=zot(e.x)?_._endX:e.x,_._endY=zot(e.y)?_._endY:e.y):(_._endX=zot(e)?_._endX:e,_._endY=zot(t)?_._endY:t),_.drawShape(),_},Object.defineProperty(_,"length",{get:function(){return _._length},set:function(e){var t,o,n,r,i,a,l=0!=_.length?e/_.length:0;isNaN(l)||(t=_.scaleX,o=_.scaleY,_.scaleX*=l,_.scaleY*=l,n=_.localToGlobal(_._startX,_._startY),r=_.localToGlobal(_._endX,_._endY),_.scaleX=t,_.scaleY=o,i=_.globalToLocal(n.x,n.y),a=_.globalToLocal(r.x,r.y),_.setPoints(i,a))}}),Object.defineProperty(_,"startPoint",{get:function(){return new So.Point(_._startX,_._startY)},set:function(e){_._startX=zot(e.x)?_._startX:e.x,_._startY=zot(e.y)?_._startY:e.y,_.drawShape()}}),Object.defineProperty(_,"endPoint",{get:function(){return new So.Point(_._endX,_._endY)},set:function(e){_._endX=zot(e.x)?_._endX:e.x,_._endY=zot(e.y)?_._endY:e.y,_.drawShape()}}),Object.defineProperty(_,"startHead",{get:function(){return _._startHead},set:function(e){_._startHead=e,_.drawShape()}}),Object.defineProperty(_,"endHead",{get:function(){return _._endHead},set:function(e){_._endHead=e,_.drawShape()}}),Object.defineProperty(_,"startX",{get:function(){return _._startX},set:function(e){_._startX=e||0,_.drawShape()}}),Object.defineProperty(_,"startY",{get:function(){return _._startY},set:function(e){_._startY=e||0,_.drawShape()}}),Object.defineProperty(_,"endX",{get:function(){return _._endX},set:function(e){_._endX=e||0,_.drawShape()}}),Object.defineProperty(_,"endY",{get:function(){return _._endY},set:function(e){_._endY=e||0,_.drawShape()}}),Object.defineProperty(_,"points",{get:function(){return _._points},set:function(e){e&&(_._points=e,_.drawShape())}}),Object.defineProperty(_,"lineOrientation",{get:function(){return _._lineOrientation},set:function(e){e&&(_._lineOrientation=e,_.drawShape())}}),!1!==l&&So.styleTransforms(this,u),this.clone=function(e,t){var o=e||!So.isPick(d[3])?_._startHead:d[3];o&&o.clone&&((o=o.clone()).rotation=_._startHead.startAngle);var n=e||!So.isPick(d[4])?_._endHead:d[4];n&&n.clone&&((n=n.clone()).rotation=_._endHead.startAngle);var r=_.cloneProps(new So.Line(e||!So.isPick(d[0])?_.length:d[0],e||!So.isPick(d[2])?_.thickness:d[2],e||!So.isPick(d[1])?_.color:d[1],o,n,_.dashed,j,i,_._lineOrientation,L,Y,So.copy(a),l,this.group,s));return _.points?r.setPoints(_.points):r.setPoints(_._startX,_._startY,_._endX,_._endY),_.linearGradientParams&&r.linearGradient.apply(r,_.linearGradientParams),_.radialGradientParams&&r.radialGradient.apply(r,_.radialGradientParams),r}},So.extend(So.Line,So.CustomShape,"clone","zimCustomShape",!1),So.Squiggle=function(A,P,S,B,I,E,O,M,j,L,t,Y,_,D,X,R,W,e,H,F,V,o,N){var n;if(n=zob(So.Squiggle,arguments,"color, thickness, points, length, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, allowToggle, move, dashed, onTop, stickColor, selectColor, selectPoints, editPoints, interactive, strokeObj, style, group, inherit",this))return n;z_d("53.2"),this.group=o;var r,G=!1===V?{}:So.getStyle("Squiggle",this.group,N);zot(P)&&(P=null!=G.thickness?G.thickness:6),zot(B)&&(B=null!=G.length?G.length:300),zot(S)&&(S=null!=G.points?G.points:5),"string"==typeof S&&(r=new So.SVGContainer,S=r.processPath(S));var i,q,Q,U,K,Z,J,$,ee,te,oe,a,ne,re,ie,l,ae="number"==typeof S?S:S.length;function s(){ie&&ie.removeAllEventListeners(),U.num=ae="number"==typeof S?S:S.length,ae=Math.max(2,ae),I=B/ae,$=U.shape=new So.Shape({style:!1}).addTo(U);var n=U.sticks=new So.Shape({style:!1}).addTo(U);L<=0&&n.removeFrom();var m=$.graphics;m.c();var z=n.graphics;z.c();var e=L/10*8,t=L;U.selectPoints?(U.selectedBalls=new So.SelectionSet,U.selectedRect1s=new So.SelectionSet,U.selectedRect2s=new So.SelectionSet,U.selectionManager=new So.SelectionManager([U.selectedBalls,U.selectedRect1s,U.selectedRect2s],"ctrl",!1)):U.selectionManager=new So.SelectionManager(null,"ctrl");var o,r,i,a=So.mobile();ie=U.controls=new So.Container({style:!1}).addTo(U),U.interactive&&ie.drag({onTop:!a}),K=[],J=[],Z=[];for(var l,s,c,u,d,h,g,p,f,y=0;y<ae;y++){(f=new So.Container({style:!1}).addTo(ie)).num=y,"number"==typeof S?(l=So.Pick.choose(I),s=new So.Container(l,P,null,null,!1).addTo(U).loc({x:y*B/(ae-1)-l/2,y:y%2*l}),c=new So.Circle(e,U.selectPoints&&U.selectedBalls.isSelected(y)?R:So.light,So.dark,2,null,null,null,null,!1).centerReg(s).loc({x:l/2,y:0}),u=new So.Rectangle(t,t,U.selectPoints&&U.selectedRect1s.isSelected(y)?R:k(E),0==L?null:So.dark,0==L?null:2,null,null,null,!1).centerReg(s).loc({x:0,y:0}),d=new So.Rectangle(t,t,U.selectPoints&&U.selectedRect2s.isSelected(y)?R:k(E),0==L?null:So.dark,0==L?null:2,null,null,null,!1).centerReg(s).loc({x:l,y:0}),h=s.localToLocal(c.x,c.y,ie),c.x=h.x,c.y=h.y,c.addTo(f,null,!1),g=s.localToLocal(u.x,u.y,ie),u.x="none"==E?0:g.x-c.x,u.y="none"==E?0:g.y-c.y,u.addTo(f,null,!1),p=s.localToLocal(d.x,d.y,ie),d.x="none"==E?0:p.x-c.x,d.y="none"==E?0:p.y-c.y,d.addTo(f,null,!1),f.x=c.x,f.y=c.y,c.x=0,c.y=0,"none"==E&&c.addTo(f,null,!1)):(r=(i=S[y])[8]?i[8]:E,f.loc({x:i[0],y:i[1]}),c=new So.Circle(e,So.light,So.dark,2,null,null,null,null,!1).centerReg({add:!1}).addTo(f).loc({x:i[2],y:i[3]}),u=new So.Rectangle(t,t,k(r),0==L?null:So.dark,0==L?null:2,null,null,null,!1).centerReg({add:!1}).addTo(f,0).loc({x:i[4],y:i[5]}),d=new So.Rectangle(t,t,k(r),0==L?null:So.dark,0==L?null:2,null,null,null,!1).centerReg({add:!1}).addTo(f,0).loc({x:i[6],y:i[7]})),c.mySet=f,c.rect1=u,c.rect2=d,c.index=y,a?c.on("mousedown",C):c.on("dblclick",x),u.ball=c,(u.other=d).ball=c,d.other=u,0==L&&(c.expand(10),u.expand(10),d.expand(10)),a&&(c.expand(),u.expand(),d.expand()),o=[f,c,u,d,i?i[8]:E],K.push(o),Z.push(c),J.push(f)}var b,v,w=!1;function C(e){w?(e.preventDefault(),x(e)):(w=!0,setTimeout(function(){w=!1},300))}function x(e){var t,o,n;U.lockControlType||(t=e.target,o=K[t.index][4]?K[t.index][4]:E,Math.abs(t.rect1.x)<=2&&Math.abs(t.rect1.y)<=2&&Math.abs(t.rect2.x)<=2&&Math.abs(t.rect2.y)<=2&&(o="none"),"none"==o&&t.parent.addChildAt(t,0),"none"==(o=U.types[(U.types.indexOf(o)+(U.shiftKey?-1:1)+U.types.length)%U.types.length])&&(t.rect1.x=t.rect1.y=t.rect2.x=t.rect2.y=0,t.parent.addChild(t),e.stopImmediatePropagation()),K[t.index][4]=o,t.rect1.color=k(o),t.rect2.color=k(o),U.drawShape(),(n=new createjs.Event("change")).controlType="bezierSwitch",U.dispatchEvent(n),t.stage.update())}function k(e){var t={straight:So.pink,free:So.yellow,none:So.blue};return t[e]?t[e]:So.purple}function T(e){if("Circle"==e.target.type){var t=U.lastSelectedIndex=U.controls.getChildIndex(e.target.parent);if(U.controls.numChildren<=2)return;var o=U.points;U.selectPoints&&(U.lastPoints=So.copy(o)),o.splice(t,1),U.points=o,U.stage.update(),U.lastSelected=U.lastSelectedIndex=null}}U.drawShape=function(){m.c();var e=So.mobile()?10:6;if(P<e){m.s("rgba(0,0,0,.01)").ss(e);var t=(i=K[0][0]).localToLocal(K[0][1].x,K[0][1].y,$);m.mt(t.x,t.y);for(var o=0;o<K.length;o++){var n=o,r=(o+1)%K.length,i=K[n][0],a=K[n][1],l=K[n][2],s=K[n][3],c=K[r][0],u=K[r][1],d=K[r][2],h=(K[r][3],i.localToLocal(s.x,s.y,$)),g=c.localToLocal(d.x,d.y,$),p=c.localToLocal(u.x,u.y,$);o!=K.length-1&&m.bt(h.x,h.y,g.x,g.y,p.x,p.y)}}U.colorCommand||(U.colorCommand=m.s(U._color).command,A&&A.type&&U.specialColor(U.colorCommand,A)),U.thicknessCommand||(U.thicknessCommand=m.ss(U._thickness,F.caps,F.joints,F.miterLimit,F.ignoreScale).command),U._dashed&&(U.dashedCommand||(U.dashedCommand=m.sd(Array.isArray(U._dashed)?U._dashed:[10,10],U._dashedOffset).command)),t=(i=K[0][0]).localToLocal(K[0][1].x,K[0][1].y,$),m.mt(t.x,t.y),z.c().s(U.stickColor).ss(1);for(o=0;o<K.length;o++){n=o,r=(o+1)%K.length,i=K[n][0],a=K[n][1],l=K[n][2],s=K[n][3],c=K[r][0],u=K[r][1],d=K[r][2],h=(K[r][3],i.localToLocal(s.x,s.y,$)),g=c.localToLocal(d.x,d.y,$),p=c.localToLocal(u.x,u.y,$);o!=K.length-1&&m.bt(h.x,h.y,g.x,g.y,p.x,p.y);var t=i.localToLocal(a.x,a.y,$),f=i.localToLocal(l.x,l.y,$);0==o&&(l.visible=0),0!=o&&z.mt(t.x,t.y).lt(f.x,f.y),o!=K.length-1&&z.mt(t.x,t.y).lt(h.x,h.y),o==K.length-1&&(s.visible=0)}U._dashed&&m.append(U.dashedCommand),m.append(U.thicknessCommand),m.append(U.colorCommand)},U.drawShape(),ie.on("mousedown",function(e){var t,o,n,r,i,a,l;if((v=e.target.stage,!U.lockControls)&&(U.selectPoints&&(U.keyFocus=!0),b={x:e.target.x,y:e.target.y},e.target.rect1?((o=e.target).startX=o.x,o.startY=o.y,o.rect1.startX=o.rect1.x,o.rect1.startY=o.rect1.y,o.rect2.startX=o.rect2.x,o.rect2.startY=o.rect2.y):((t=e.target).startX=t.x,t.startY=t.y,n=(o=t.ball).index,r=E,zot(K[n][4])||(r=K[n][4]),"straight"==r&&(a=(i=t.other).x-o.x,l=i.y-o.y,i.stickLength=Math.sqrt(Math.pow(a,2)+Math.pow(l,2)))),U.selectPoints)){var s=U.selectionManager.currentSet;if(s&&s.selections&&0<s.selections.length)for(var c=0;c<s.selections.length;c++){var u=U.pointObjects[s.selections[c]];u[1].startX=u[1].x,u[1].startY=u[1].y,u[2].startX=u[2].x,u[2].startY=u[2].y,u[3].startX=u[3].x,u[3].startY=u[3].y}}}),U.selectPoints&&ie.tap(function(e){var t,o;e.target.rect1?(o=e.target,U.selectedBalls.toggle(o.parent.num)):((t=e.target).color="white",(o=t.ball).rect1==t?U.selectedRect1s.toggle(o.parent.num):U.selectedRect2s.toggle(o.parent.num));for(var n=0;n<U.pointObjects.length;n++){var r=U.pointObjects[n];r[1].color=U.selectedBalls.isSelected(n)?So.white:So.light,r[2].color=U.selectedRect1s.isSelected(n)?So.white:k(r[4]),r[3].color=U.selectedRect2s.isSelected(n)?So.white:k(r[4])}v.update()}),ie.on("pressmove",function(e){if(!U.lockControls)if(U.selectPoints){var t=le();if(-1==t.indexOf(e.target))re(e.target),U.drawShape();else if(0<t.length){for(var o=e.target.x-e.target.startX,n=e.target.y-e.target.startY,r=0;r<t.length;r++){var i=t[r];i.x=i.startX+o,i.y=i.startY+n,re(i)}U.drawShape()}}else re(e.target),U.drawShape()}),ie.on("pressup",function(e){var t,o;U.lockControls||(t=e.target.x!=b.x||e.target.y!=b.y,o=new createjs.Event("change"),e.target.rect1?(o.controlType="bezierPoint",function(e){if(U.selectPoints){var t=le();if(t&&-1==t.indexOf(e))se(e);else if(t&&0<t.length)for(var o=0;o<t.length;o++)se(t[o]);else se(e)}else se(e)}(e.target)):o.controlType="bezierHandle",t&&U.dispatchEvent(o))}),U.changeControl=function(e,t,o,n,r,i,a,l,s){var c;if(c=zob(U.changeControl,arguments,"index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY, update"))return c;if(zot(e))for(var u=0;u<K.length;u++)U.changeControl(u,t,o,n,r,i,a,l);else{var d=K[e];"none"==(d[4]=t)?(zot(a)||(d[2].x=a),zot(l)||(d[2].y=l),d[2].x=d[1].x,d[2].y=d[1].y,d[3].x=d[1].x,d[3].y=d[1].y,d[1].parent.addChild(d[1])):(zot(o)||(d[2].x=o),zot(n)||(d[2].y=n),zot(r)||(d[3].x=r),zot(i)||(d[3].y=i),zot(a)||(d[1].x=a),zot(l)||(d[1].y=l),d[1].parent.addChildAt(d[1],0)),s&&(U.update(),U.stage&&U.stage.update())}},U.transformPoints=function(e,t,o,n){return U.points=So.transformPoints(U.points,e,t,o,n),U},U.traverse=function(o,e,t,n){var r=So.copy(U.segmentRatios);r.unshift(0),zot(t)&&(t=e+1);var i,a,l=e<t;return a=l?(i=100*r[e],100*r[t]):(i=50+(100-100*r[e])/2,50+(100-100*r[t])/2),o.percentComplete=o.zimStartPercent=i,o.animate({ease:"linear",props:{path:U},rewind:!l,time:n,events:!0}),o.on("animation",function(e){var t;(o.percentComplete>a||0==o.percentComplete)&&(o.stopAnimate(),e.remove(),(t=new createjs.Event("traversed")).obj=o,U.dispatchEvent(t))}),U},U.update=function(e){return e?U.points=U.pointsAdjusted:U.drawShape(),U.zimAnimateChanged=!0,U},U.interactive&&(Y&&$.drag({onTop:!1}),ee=$.on("mousedown",function(e){v=e.target.stage,b={x:$.x,y:$.y},U.selectPoints&&(U.keyFocus=!0),function(){{var e;U.onTop&&(e=U.parent.numChildren-1,"Keyboard"==U.parent.getChildAt(e).type&&e--,U.parent.setChildIndex(U,e))}}()}),te=$.on("pressmove",function(){ie.x=$.x,ie.y=$.y,n.x=$.x,n.y=$.y}),oe=$.on("pressup",function(){var e,t=$.x!=b.x||$.y!=b.y,o=$.localToLocal(U.regX,U.regY,U.parent);U.x=o.x,U.y=o.y,ie.x=ie.y=n.x=n.y=$.x=$.y=0,t&&((e=new createjs.Event("change")).controlType="move",U.dispatchEvent(e)),v.update()}),U.move||ue(!0)),U.toggleEvent=U.on("mousedown",function(){U.allowToggle&&(q||(U.showControls(),U.dispatchEvent("controlsshow")))}),U.added(function(){v=U.stage,U.toggleStageEvent=U.stage.on("stagemousedown",function(e){U.allowToggle&&U.stage&&q&&!U.hitTestPoint(e.stageX/So.scaX,e.stageY/So.scaY,!1)&&(U.hideControls(),U.dispatchEvent("controlshide"))})}),U.clickEvent=U.on("click",function(){U.ctrlKey&&setTimeout(function(){U.clone(!0).addTo(U.stage).mov(0,100),U.allowToggle&&(U.hideControls(),U.dispatchEvent("controlshide"));var e=new createjs.Event("change");e.controlType="move",U.dispatchEvent(e),U.stage.update()},50)}),U.hideControls=function(){return U.toggled=!1,ie.visible=!1,n.visible=!1,q=!1,U.stage&&U.stage.update(),!U.allowToggle&&U.move&&ue(),U},M||U.hideControls(),U.showControls=function(){return U.toggled=!0,ie.visible=!0,n.visible=!0,q=!0,ie.x=$.x,ie.y=$.y,n.x=$.x,n.y=$.y,U.addChildAt($,0),U.move&&!U.allowToggle&&ce(),U.stage&&U.stage.update(),U},U.toggle=function(e){return!0!==e&&(!1===e||q)?U.hideControls():U.showControls(),U},U.recordData=function(e){zot(e)&&(e=!1);var t={type:"Blob",index:U.parent?U.parent.getChildIndex(U):-1,x:U.x,y:U.y,points:U.recordPoints(),color:U.color,thickness:U.thickness,move:U.move,toggle:U.allowToggle,controlsVisible:q};return e?JSON.stringify(t):t},U.setData=function(e,t){if(!zot(e)){if(t)try{e=JSON.parse(e)}catch(e){return}var o=e.index;zot(o)&&(o=-1),delete e.index;var n=e.points;for(var r in zot(n)||U.setPoints(n),delete e.points,U.num=n.length,e)U[r]=e[r];return U.parent&&U.parent.setChildIndex(U,o),U.update(),U}},U.recordPoints=function(e){zot(e)&&(e=!1);var t,o=U.points;return e&&(U.pane||(t=U.pane=new So.Pane({container:U.stage,width:Math.min(500,U.stage.width-20),height:Math.min(500,U.stage.height-20),draggable:!0}),(U.textArea=new So.TextArea(Math.min(400,U.stage.width-70),Math.min(400,U.stage.height-70))).centerReg(t)),U.textArea.text=JSON.stringify(o),U.pane.show()),o},!(U.setPoints=function(e){for(var t,o,n=0;n<e.length;n++)t=K[n],o=e[n],zot(t)||(t[0].x=o[0],t[0].y=o[1],t[1].x=o[2],t[1].y=o[3],t[2].x=o[4],t[2].y=o[5],t[3].x=o[6],t[3].y=o[7],t[4]=o[8]);return U.update(),U})!==V&&So.styleTransforms(U,G),U.clone=function(e,t){var o=U.cloneProps(new So.Squiggle(t?U.colorCommand:e||!So.isPick(Q[0])?U.color:Q[0],U.thickness,U.recordPoints(),B,I,E,O,ie.visible,j,L,U.allowToggle,U.move,_,D,X,R,W,U.editPoints,H,F,V,U.group,N));return U.linearGradientParams&&o.linearGradient.apply(o,U.linearGradientParams),U.radialGradientParams&&o.radialGradient.apply(o,U.radialGradientParams),o},U.shape.on("mousedown",function(e){v=e.target.stage,U.editPoints&&(U.controlsVisible?(U.pressX=e.stageX/So.scaX,U.pressY=e.stageY/So.scaX):(U.pressX=null,U.pressY=null))}),U.addPointFactor=10,U.addMinDistance=15,U.shape.on("pressup",function(e){var t,n,o,r,i,a,l,s,c,u,d,h,g;U.editPoints&&U.pressX&&Math.abs(U.pressX-e.stageX/So.scaX)<ne&&Math.abs(U.pressY-e.stageY/So.scaY)<ne&&(U.selectPoints&&(U.lastPoints=So.copy(U.points)),t=U.points,n=U.globalToLocal(e.stageX/So.scaX,e.stageY/So.scaY),o=So.closestPointAlongCurve(n,U.segmentPoints),"anywhere"==U.editPoints?(t.splice(o+1,0,[n.x,n.y,0,0,0,0,0,0]),U.points=t,U.changeControl({index:o+1,type:"mirror",update:!0})):(r=U.pointsAdjusted,i=U.getSegmentPoint(r[o],r[(o+1)%r.length]),a=So.distanceAlongCurve(i),l=Math.round(a/U.addPointFactor),s=U.interpolate(l,o,!1,t),c=1e4,So.loop(s,function(e,t){var o=So.dist(e,n);o<c&&(c=o,u=t,0)}),c<U.addMinDistance&&(h=(d=U.segmentRatios)[o],g=0<o?d[o-1]:0,U.addPoint(100*(g+u/(l+1)*(h-g))))),U.lastSelectedIndex=o+1,U.lastSelected=U.controls.getChildAt(U.lastSelectedIndex),U.stage.update())}),U.controls.on("click",function(e){U.lastSelected=e.target.parent;U.lastSelectedIndex=U.controls.getChildIndex(e.target.parent);U.editPoints&&U.selectionManager.shiftKey&&T(e)}),U.controls.hold(T),q||U.hideControls(),U.dispatchEvent("update")}function le(){var e=[],t=U.selectionManager.currentSet;if(t&&t.selections&&0<t.selections.length)for(var o=0;o<t.selections.length;o++){var n=U.pointObjects[t.selections[o]];if(t==U.selectedBalls)e.push(n[1]);else if(t==U.selectedRect1s)e.push(n[2]);else{if(t!=U.selectedRect2s)continue;e.push(n[3])}}return e}function se(e){var t,o,n,r;"Circle"==e.type&&(o=(t=e).mySet,n=t.rect1,r=t.rect2,n.x-=t.x,n.y-=t.y,r.x-=t.x,r.y-=t.y,o.x+=t.x,o.y+=t.y,t.x=0,t.y=0)}function ce(){"always"!=U.move&&(a||(a=!0,$.drag({onTop:!1}),ee=$.on("mousedown",ee),te=$.on("pressmove",te),oe=$.on("pressup",oe)))}function ue(e){"always"!=U.move&&(e||a)&&(a=!1,$.noDrag(),$.off("mousedown",ee),$.off("pressmove",te),$.off("pressup",oe))}function C(e,t,o){return{x:e.x+(t.x-e.x)*o,y:e.y+(t.y-e.y)*o}}function g(e,t,o,n,r,i,a,l){var s=e.length-1,c=0,u=0;100==n&&"Squiggle"==U.type&&(n=99.99),n=(n+1e5)%100,So.loop(o,function(e,t){return n/100<e?(s=t,u=e,!0):void(c=e)});var d,h,g,p,f,m,z,y=U.segmentPoints[s],b=0<u?(n/100-c)/(u-c):0,v=So.pointAlongCurve(y,b,null,l),w=[v.x,v.y,0,0];i||(a?U.interpolatedPoints.push({x:v.x,y:v.y,r:n/100}):("none"!=r&&(d=C(y[0],y[1],b),h=C(y[1],y[2],b),g=C(y[2],y[3],b),p=C(d,h,b),f=C(h,g,b),w[4]=p.x-v.x,w[5]=p.y-v.y,w[6]=f.x-v.x,w[7]=f.y-v.y,m=U.localToLocal(d.x,d.y,t[s]),e[s][6]=m.x,e[s][7]=m.y,z=U.localToLocal(g.x,g.y,t[(s+1)%e.length]),e[(s+1)%e.length][4]=z.x,e[(s+1)%e.length][5]=z.y),r&&(w[8]=r),e.splice(s+1,0,w)))}0!=ae&&(zot(I)&&(I=null!=G.controlLength?G.controlLength:B/ae),this.zimCustomShape_constructor(B,I,null,null,!1),this.type="Squiggle",this.mouseChildren=!0,zot(_)&&(_=null!=G.dashed&&G.dashed),zot(A)&&(A=null!=G.color?G.color:So.blue),A.style&&(this.colorCommand=A,A="black"),zot(E)&&(E=null!=G.controlType?G.controlType:null),zot(i=E)&&(E="mirror"),zot(O)&&(O=null!=G.lockControlType&&G.lockControlType),zot(H)&&(H=null==G.interactive||G.interactive),zot(M)&&(M=null!=G.showControls?G.showControls:H),q=M,zot(j)&&(j=null!=G.lockControls?G.lockControls:!H),zot(L)&&(L=null!=G.handleSize?G.handleSize:So.mobile()?20:10),zot(t)&&(t=null!=G.allowToggle?G.allowToggle:H),zot(Y)&&(Y=null!=G.move?G.move:H),zot(X)&&(X=null!=G.stickColor?G.stickColor:"#111"),zot(R)&&(R=null!=G.selectColor?G.selectColor:"#fff"),zot(W)&&(W=null!=G.selectPoints?G.selectPoints:H),this.stickColor=X,zot(D)&&(D=null==G.onTop||G.onTop),zot(e)&&(e=null!=G.editPoints?G.editPoints:H),zot(F)&&(F=null!=G.strokeObj?G.strokeObj:{}),Q=function(){return arguments}(A),A=So.Pick.choose(A),(U=this).types=["mirror","straight","free","none"],this.interactive=H,this.num=ae,this.onTop=D,this.move=Y,this.editPoints=e,this.allowToggle=t,this.lockControlType=O,this.selectPoints=W,this.lockControls=j,U._color=A,U._thickness=P,U._dashed=_,U._dashed&&!Array.isArray(U._dashed)&&(U._dashed=[10,10]),a=U.move,ne=2,i&&"number"!=typeof S&&So.loop(S,function(e){"none"==(e[8]=i)&&(e[4]=e[5]=e[6]=e[7]=0)}),s(),U.selectionManager.on("keydown",function(e){if(U.selectPoints&&U.keyFocus&&37<=e.keyCode&&e.keyCode<=40){var t=le();if(0<t.length){for(var o=0;o<t.length;o++){var n=t[o];37==e.keyCode?n.x-=U.selectionManager.shiftKey?10:1:39==e.keyCode?n.x+=U.selectionManager.shiftKey?10:1:38==e.keyCode?n.y-=U.selectionManager.shiftKey?10:1:40==e.keyCode&&(n.y+=U.selectionManager.shiftKey?10:1),re(n)}U.drawShape(),U.dispatchEvent("update"),U.stage&&U.stage.update()}}}),U.selectionManager.on("keyup",function(e){if(U.selectPoints&&U.keyFocus&&37<=e.keyCode&&e.keyCode<=40){var t=le();if(0<t.length)for(var o=0;o<t.length;o++)se(t[o])}}),U.selectionManager.on("undo",function(){var e;U.selectPoints&&U.keyFocus&&U.lastPoints&&(e=So.copy(U.lastPoints),U.lastPoints=So.copy(U.points),U.points=e,U.stage&&U.stage.update())}),re=function(e){var t,o,n,r,i,a,l,s,c,u,d,h;U.lockControls||(e.rect1?(t=(i=e).x-i.startX,o=i.y-i.startY,i.rect1.x=i.rect1.startX+t,i.rect1.y=i.rect1.startY+o,i.rect2.x=i.rect2.startX+t,i.rect2.y=i.rect2.startY+o):(r=(n=e).other,a=(i=n.ball).index,l=E,zot(K[a][4])||(l=K[a][4]),"straight"!=l&&"mirror"!=l||(s=n.x-i.x,c=n.y-i.y,"mirror"==l?(r.x=i.x-s,r.y=i.y-c):(u=Math.atan2(c,s),d=-r.stickLength*Math.cos(u+Math.PI),h=-r.stickLength*Math.sin(u+Math.PI),r.x=i.x-d,r.y=i.y-h))))},Object.defineProperty(U,"move",{get:function(){return Y},set:function(e){Y!=e&&((Y=e)?ce:ue)()}}),Object.defineProperty(U,"interactive",{get:function(){return H},set:function(e){q=H=e,U.allowToggle=H,U.editPoints=H,U.lockControls=!H,U.selectPoints=H,U.move=H,U.points}}),Object.defineProperty(U,"allowToggle",{get:function(){return t},set:function(e){t!=e&&((t=e)?U.move&&ce():!q&&U.move&&ue())}}),l=j,Object.defineProperty(U,"lockControls",{get:function(){return l},set:function(e){(l=e)?(U.controls.mouseChildren=!1,U.controls.mouseEnabled=!1):(U.controls.mouseChildren=!0,U.controls.mouseEnabled=!0)}}),U.lockControls=l,Object.defineProperty(U,"controlsVisible",{get:function(){return q},set:function(e){(q=e)?U.showControls():U.hideControls()}}),void 0!==KEYFOCUS&&(So.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return So.KEYFOCUS==U},set:function(e){So.KEYFOCUS=U}}),So.KEYFOCUS||function(){if(!U.selectPoints)return;U.keyFocus=!0;var e=document.activeElement;e&&e.blur()}(),Object.defineProperty(U,"points",{get:function(){for(var e,t,o=[],n=0;n<K.length;n++)t=K[n],e=[So.decimals(t[0].x),So.decimals(t[0].y),So.decimals(t[1].x),So.decimals(t[1].y),So.decimals(t[2].x),So.decimals(t[2].y),So.decimals(t[3].x),So.decimals(t[3].y)],t[4]&&"mirror"!==t[4]&&e.push(t[4]),o.push(e);return o},set:function(e){var t=U.x,o=U.y,n=U.visible;U.dispose(!0),S=e,U.shape&&(U.shape.graphics.clear(),U.sticks.graphics.clear(),U.controls.noDrag(),U.removeAllChildren(),delete U.shape,delete U.sticks,delete U.controls),s(),U.lockControls=l,U.x=t,U.y=o,U.visible=n}}),Object.defineProperty(U,"pointsAdjusted",{get:function(){var r,i,a,l=[],s=U.pointObjects;return So.loop(s.length,function(e,t){var o,n;a=s[e],i=K[e],r=0==a[0].rotation&&0==a[0].scaleX&&0==a[0].scaleY?[So.decimals(i[0].x),So.decimals(i[0].y),So.decimals(i[1].x),So.decimals(i[1].y),So.decimals(i[2].x),So.decimals(i[2].y),So.decimals(i[3].x),So.decimals(i[3].y)]:(o=a[0].localToLocal(a[2].x,a[2].y,a[0].parent),n=a[0].localToLocal(a[3].x,a[3].y,a[0].parent),[So.decimals(i[0].x),So.decimals(i[0].y),So.decimals(i[1].x),So.decimals(i[1].y),So.decimals(o.x-i[0].x),So.decimals(o.y-i[0].y),So.decimals(n.x-i[0].x),So.decimals(n.y-i[0].y)]),i[4]&&"mirror"!==i[4]&&r.push(i[4]),l.push(r)}),l},set:function(e){zon&&zogy("Squiggle() - pointsAdjusted is read only")}}),Object.defineProperty(U,"pointObjects",{get:function(){return K},set:function(e){zon&&zog("Squiggle() - pointObjects is read only - but its contents can be manipulated - use squiggle.update() after changes")}}),Object.defineProperty(U,"pointControls",{get:function(){return J},set:function(e){zon&&zog("Squiggle() - pointControls is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(U,"pointCircles",{get:function(){return Z},set:function(e){zon&&zog("Squiggle() - pointCircles is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(U,"segmentPoints",{get:function(){var n=[],r=U.pointsAdjusted;return So.loop(r.length-1,function(e,t){var o=U.getSegmentPoint(r[e],r[e+1]);n.push(o)}),n},set:function(e){zon&&zog("Squiggle() - segmentPoints is read only")}}),Object.defineProperty(U,"segmentRatios",{get:function(){var o=[],n=0;So.loop(U.segmentPoints,function(e){var t=So.distanceAlongCurve(e);o.push(t),n+=t});var t=[],r=0;return So.loop(o,function(e){r+=e/n,t.push(r)}),t},set:function(e){zon&&zog("Squiggle() - segmentRatios is read only")}}),U.approximateBounds=function(e,t){zot(e)&&(e=80),e/=U.num;var o=U.interpolate(e,null,!0,null,!0),n=So.boundsAroundPoints(o);if(U.setBounds(n.x,n.y,n.width,n.height),t){U.hitPathPoints?U.hitPathPoints.removeAllChildren():U.hitPathPoints=(new So.Container).addTo(),U.hitPathPoints.top();for(var r=0;r<o.length;r++){var i=o[r],i=U.localToGlobal(i.x,i.y);new So.Circle(3).loc(i.x,i.y,U.hitPathPoints)}}return U},U.getPointAngle=function(e){var t,o,n=U.pointObjects[e][0],r=U.pointObjects[e][2],i=U.pointObjects[e][3];return o=n==U.stage?(t=new So.Point(r.x,r.y),new So.Point(i.x,i.y)):(t=n.localToGlobal(r.x,r.y),n.localToGlobal(i.x,i.y)),So.angle(t.x,t.y,o.x,o.y)},U.getSegmentPoint=function(e,t){if(!zot(e)&&!zot(t)){0==e[2]&&0==e[3]||(e[4]-=e[2],e[5]-=e[3],e[6]-=e[2],e[7]-=e[3],e[0]+=e[2],e[1]+=e[3],e[2]=0,e[3]=0),0==t[2]&&0==t[3]||(t[4]-=t[2],t[5]-=t[3],t[6]-=t[2],t[7]-=t[3],t[0]+=t[2],t[1]+=t[3],t[2]=0,t[3]=0);var o={x:e[0],y:e[1]},n={x:e[0]+e[6],y:e[1]+e[7]},r={x:t[0]+t[4],y:t[1]+t[5]},i={x:t[0],y:t[1]};return 0==ie.x&&0==ie.y||(o.x+=ie.x,n.x+=ie.x,r.x+=ie.x,i.x+=ie.x,o.y+=ie.y,n.y+=ie.y,r.y+=ie.y,i.y+=ie.y),[o,n,r,i]}},U.getAdjacentSegmentData=function(e){zot(e)&&(e=0);var t=U.pointsAdjusted;return 2==U.num?[[U.getSegmentPoint(t[0],t[1])],[0]]:0==e?[[U.getSegmentPoint(t[0],t[1]),U.getSegmentPoint(t[1],t[2])],[0,1]]:e>=U.num-2?[[U.getSegmentPoint(t[U.num-3],t[U.num-2]),U.getSegmentPoint(t[U.num-2],t[U.num-1])],[U.num-3,U.num-2]]:[[U.getSegmentPoint(t[e-1],t[e]),U.getSegmentPoint(t[e],t[e+1]),U.getSegmentPoint(t[e+1],t[e+2])],[e-1,e,e+1]]},U.getCurvePoint=function(o,e,t,n,r){(zot(o)||isNaN(o))&&(o=0),zot(e)&&(e=U.segmentRatios),zot(t)&&(t=U.segmentPoints),zot(n)&&(n=!1),zot(r)&&(r=!1);var i=e,a=t,l=So.loop(i,function(e,t){if(o<=e)return t}),s=0<l?i[l-1]:0,c=0<l?i[l]-i[l-1]:i[l];if(c){var u=(o-s)/c,d=So.pointAlongCurve(a[l],u,n,!0),h=U.localToGlobal(d.x,d.y);return h.angle=d.angle,h.z=l,zot(h)?void 0:h}},this.addPoint=function(e,t){zot(e)&&(e=100);var o=U.points,n=U.segmentRatios;return g(o,U.pointControls,n,e,t),U.points=o,U.num=o.length,U},this.addPoints=function(i,a,l,t,s,c,u){zot(c)&&(c=So.copy(U.points));var d,e=So.copy(U.segmentRatios),h=0;return s&&(U.interpolatedPoints=[]),t&&(d=e.length*i),So.loop(e,function(o,n){s&&g(c,U.pointControls,U.segmentRatios,100*h,a,!zot(l)&&n!=l,s,u);var e=t?Math.round(d*(o-h)):i,r=1/(e+1);So.loop(e,function(e){var t=h+(o-h)*r*(e+1);g(c,U.pointControls,U.segmentRatios,100*t,a,!zot(l)&&n!=l,s,u),!s&&0<i&&(U.points=c)}),h=o}),s&&"Squiggle"==U.type&&g(c,U.pointControls,U.segmentRatios,100,a,!1,s,u),U.stage&&U.stage.update(),U.num=c.length,U},this.interpolate=function(e,t,o,n,r){return zot(e)&&(e=1),U.addPoints(e,"none",t,o,!0,n,r),U.interpolatedPoints},this.dispose=function(e,t,o){if(U.shape){So.gD(U),U.shape.cursor="default";for(var n=0;n<U.points.length;n++)U.pointObjects[n][1].removeAllEventListeners();for(n=0;n<Z.length;n++)Z[n].removeAllEventListeners();return U.sticks.removeFrom(U),U.controls.removeFrom(U),U.shape.removeAllEventListeners(),U.controls.removeAllEventListeners(),U.off("mousedown",U.toggleEvent),U.off("click",U.clickEvent),!e&&U.selectPoints&&U.selectionManager.removeAllEventListeners(),!0}})},So.extend(So.Squiggle,So.CustomShape,["clone","dispose"],"zimCustomShape",!1),So.Blob=function(A,e,t,P,S,B,I,E,o,O,M,n,j,L,Y,_,D,X,r,R,W,H,i,F){var a;if(a=zob(So.Blob,arguments,"color, borderColor, borderWidth, points, radius, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, allowToggle, move, dashed, onTop, stickColor, selectColor, selectPoints, editPoints, interactive, strokeObj, style, group, inherit",this))return a;z_d("53.5"),this.group=i;var V=!1===H?{}:So.getStyle("Blob",this.group,F);zot(S)&&(S=null!=V.radius?V.radius:100),this.zimCustomShape_constructor(-S,-S,2*S,2*S,!1),this.type="Blob",this.mouseChildren=!0,zot(L)&&(L=null!=V.dashed&&V.dashed),zot(e)&&(e=null!=V.borderColor?V.borderColor:null),zot(t)&&(t=null!=V.borderWidth?V.borderWidth:null),e<0||t<0?e=t=null:null!=e&&null==t&&(t=1),zot(A)&&(A=null!=V.color?V.color:0<t?"rgba(0,0,0,0)":So.green),A.style&&(this.colorCommand=A,A="black"),e&&e.style&&(this.borderColorCommand=e,e="black"),zot(P)&&(P=null!=V.points?V.points:4);var N="number"==typeof P?P:P.length,G=B;zot(B)&&(B=null!=V.controlLength?V.controlLength:4*S/N),zot(I)&&(I=null!=V.controlType?V.controlType:null);var l=I;zot(I)&&(I="straight"),zot(E)&&(E=null!=V.lockControlType&&V.lockControlType),zot(R)&&(R=null==V.interactive||V.interactive),zot(o)&&(o=null!=V.showControls?V.showControls:R);var q=o;zot(O)&&(O=null!=V.lockControls?V.lockControls:!R),zot(M)&&(M=null!=V.handleSize?V.handleSize:So.mobile()?20:10),zot(n)&&(n=null!=V.allowToggle?V.allowToggle:R),zot(j)&&(j=null!=V.move?V.move:R),zot(_)&&(_=null!=V.stickColor?V.stickColor:"#111"),zot(D)&&(D=null!=V.selectColor?V.selectColor:"#fff"),zot(X)&&(X=null!=V.selectPoints?V.selectPoints:R),this.stickColor=_,zot(Y)&&(Y=null==V.onTop||V.onTop),zot(r)&&(r=null!=V.editPoints?V.editPoints:R),zot(W)&&(W=null!=V.strokeObj?V.strokeObj:{});var Q=function(){return arguments}(A,e);A=So.Pick.choose(A),e=So.Pick.choose(e);var U=this;this.interactive=R,this.num=N,this.editPoints=r,this.selectPoints=X,this.lockControls=O,this.onTop=Y,this.move=j,this.allowToggle=n,this.lockControlType=E;var K,Z,J,$,ee,te,oe;this.types=["mirror","straight","free","none"];U._color=A,U._borderColor=e,U._borderWidth=t,U._dashed=L,U._dashed&&!Array.isArray(U._dashed)&&(U._dashed=[10,10]);var ne,re,s,c=U.move,ie=2;function u(e){var t;if("circle"!=e&&"rectangle"!=e&&"triangle"!=e||("circle"==e&&(e=new So.Circle(S)),"rectangle"==e&&(e=new So.Rectangle(2*S,2*S).centerReg({add:!1})),"triangle"==e&&(e=new So.Triangle(2*S,2*S,2*S))),"Circle"!=e.type&&"Rectangle"!=e.type&&"Triangle"!=e.type)return e;var o=e.getBounds();return"Circle"==e.type?(t=4,G=B=2*S*.5523):"Rectangle"==e.type?(e.centerReg({add:!1}),t=[[o.x-o.width/2,o.y-o.height/2],[o.x+o.width/2,o.y-o.height/2],[o.x+o.width/2,o.y+o.height/2],[o.x-o.width/2,o.y+o.height/2]],U.setBounds(o.x-o.width/2,o.y-o.height/2,o.width,o.height),U.regX=e.regX-o.width/2,U.regY=e.regY-o.height/2):"Triangle"==e.type&&(t=[[e.three.x-e.width/2,e.three.y+e.height/2+e.adjusted],[e.two.x-e.width/2,e.two.y+e.height/2+e.adjusted],[e.one.x-e.width/2,e.one.y+e.height/2+e.adjusted]],U.setBounds(o.x-o.width/2,o.y-o.height/2,o.width,o.height)),t}function d(){if(re&&re.removeAllEventListeners(),U.selectPoints?(U.selectedBalls=new So.SelectionSet,U.selectedRect1s=new So.SelectionSet,U.selectedRect2s=new So.SelectionSet,U.selectionManager=new So.SelectionManager([U.selectedBalls,U.selectedRect1s,U.selectedRect2s],"ctrl",!1)):U.selectionManager=new So.SelectionManager(null,"ctrl"),!((N="number"==typeof P?P:P.length)<=0)){zot(G)&&(B=4*S/N),$=U.shape=new So.Shape({style:!1}).addTo(U);var n=U.sticks=new So.Shape({style:!1}).addTo(U);M<=0&&n.removeFrom();var p=$.graphics;p.c();var f=n.graphics;f.c();var e,t,o,r,i,a,l=M/10*8,s=M,c=So.mobile();re=U.controls=new So.Container({style:!1}).addTo(U),U.interactive&&re.drag({onTop:!c}),K=[],J=[],Z=[];for(var u,d,h,g,m,z,y=0;y<N;y++){(z=new So.Container({style:!1}).addTo(re)).num=y,"number"==typeof P?(u=So.Pick.choose(B),(d=new So.Container(u,S,null,null,!1).reg(u/2,S).addTo(U)).rotation=y/N*360,r=new So.Circle(l,U.selectPoints&&U.selectedBalls.isSelected(y)?D:So.light,So.dark,2,null,null,null,null,!1).centerReg(d).loc({x:u/2,y:0}),t=new So.Rectangle(s,s,U.selectPoints&&U.selectedRect1s.isSelected(y)?D:k(I),0==M?null:So.dark,0==M?null:2,null,null,null,!1).centerReg(d).loc({x:0,y:0}),o=new So.Rectangle(s,s,U.selectPoints&&U.selectedRect2s.isSelected(y)?D:k(I),0==M?null:So.dark,0==M?null:2,null,null,null,!1).centerReg(d).loc({x:u,y:0}),h=d.localToLocal(r.x,r.y,re),r.x=h.x,r.y=h.y,r.addTo(z,null,!1),g=d.localToLocal(t.x,t.y,re),t.x="none"==I?0:g.x-r.x,t.y="none"==I?0:g.y-r.y,t.addTo(z,null,!1),m=d.localToLocal(o.x,o.y,re),o.x="none"==I?0:m.x-r.x,o.y="none"==I?0:m.y-r.y,o.addTo(z,null,!1),z.x=r.x,z.y=r.y,r.x=0,r.y=0,"none"==I&&r.addTo(z,null,!1)):(i=(a=P[y])[8]?a[8]:I,z.loc({x:a[0],y:a[1]}),r=new So.Circle(l,So.light,So.dark,2,null,null,null,null,!1).centerReg({add:!1}).addTo(z).loc({x:a[2],y:a[3]}),t=new So.Rectangle(s,s,k(i),0==M?null:So.dark,0==M?null:2,null,null,null,!1).centerReg({add:!1}).addTo(z,0).loc({x:a[4],y:a[5]}),o=new So.Rectangle(s,s,k(i),0==M?null:So.dark,0==M?null:2,null,null,null,!1).centerReg({add:!1}).addTo(z,0).loc({x:a[6],y:a[7]})),r.mySet=z,r.rect1=t,r.rect2=o,r.index=y,0==M&&(r.expand(10),t.expand(10),o.expand(10)),c?r.on("mousedown",C):r.on("dblclick",x),t.ball=r,(t.other=o).ball=r,o.other=t,c&&(r.expand(),t.expand(),o.expand()),e=[z,r,t,o,a?a[8]:I],K.push(e),Z.push(r),J.push(z)}var b,v,w=!1;U.drawShape=function(){p.c(),U.colorCommand||(U.colorCommand=p.f(U._color).command,A&&A.type&&U.specialColor(U.colorCommand,A)),(zot(U._borderWidth)||0<U._borderWidth)&&(zot(U._borderColor)&&zot(U._borderWidth)||(zot(U._borderColor)&&(U._borderColor="black"),U.borderColorCommand||(U.borderColorCommand=p.s(U._borderColor).command,U._borderColor&&U._borderColor.type&&U.specialColor(U.borderColorCommand,U._borderColor)),U.borderWidthCommand||(U.borderWidthCommand=p.ss(U._borderWidth,W.caps,W.joints,W.miterLimit,W.ignoreScale).command),U._dashed&&(U.borderDashedCommand||(U.borderDashedCommand=p.sd(Array.isArray(U._dashed)?U._dashed:[10,10],U._dashedOffset).command))));var e=(n=K[0][0]).localToLocal(K[0][1].x,K[0][1].y,$);p.mt(e.x,e.y),f.c().s(U.stickColor).ss(1);for(var t=0;t<K.length;t++){var o=(t+1)%K.length,n=K[t][0],r=K[t][1],i=K[t][2],a=K[t][3],l=K[o][0],s=K[o][1],c=K[o][2],u=(K[o][3],n.localToLocal(a.x,a.y,$)),d=l.localToLocal(c.x,c.y,$),h=l.localToLocal(s.x,s.y,$);p.bt(u.x,u.y,d.x,d.y,h.x,h.y);var e=n.localToLocal(r.x,r.y,$),g=n.localToLocal(i.x,i.y,$);f.mt(e.x,e.y).lt(g.x,g.y),f.mt(e.x,e.y).lt(u.x,u.y)}p.cp(),p.append(U.colorCommand),U._dashed&&p.append(U.borderDashedCommand),U.borderWidthCommand&&p.append(U.borderWidthCommand),U.borderColorCommand&&p.append(U.borderColorCommand)},U.drawShape(),re.on("mousedown",function(e){var t,o,n,r,i,a,l;if(!U.lockControls&&(U.selectPoints&&(U.keyFocus=!0),b={x:e.target.x,y:e.target.y},e.target.rect1?((o=e.target).startX=o.x,o.startY=o.y,o.rect1.startX=o.rect1.x,o.rect1.startY=o.rect1.y,o.rect2.startX=o.rect2.x,o.rect2.startY=o.rect2.y):((t=e.target).startX=t.x,t.startY=t.y,n=(o=t.ball).index,r=I,zot(K[n][4])||(r=K[n][4]),"straight"==r&&(a=(i=t.other).x-o.x,l=i.y-o.y,i.stickLength=Math.sqrt(Math.pow(a,2)+Math.pow(l,2)))),U.selectPoints)){var s=U.selectionManager.currentSet;if(s&&s.selections&&0<s.selections.length)for(var c=0;c<s.selections.length;c++){var u=U.pointObjects[s.selections[c]];u[1].startX=u[1].x,u[1].startY=u[1].y,u[2].startX=u[2].x,u[2].startY=u[2].y,u[3].startX=u[3].x,u[3].startY=u[3].y}}}),U.selectPoints&&re.tap(function(e){var t,o;e.target.rect1?(o=e.target,U.selectedBalls.toggle(o.parent.num)):((t=e.target).color="white",(o=t.ball).rect1==t?U.selectedRect1s.toggle(o.parent.num):U.selectedRect2s.toggle(o.parent.num));for(var n=0;n<U.pointObjects.length;n++){var r=U.pointObjects[n];r[1].color=U.selectedBalls.isSelected(n)?So.white:So.light,r[2].color=U.selectedRect1s.isSelected(n)?So.white:k(r[4]),r[3].color=U.selectedRect2s.isSelected(n)?So.white:k(r[4])}e.target.stage.update()}),re.on("pressmove",function(e){if(!U.lockControls)if(U.selectPoints){var t=ae();if(-1==t.indexOf(e.target))ne(e.target),U.drawShape();else if(0<t.length){for(var o=e.target.x-e.target.startX,n=e.target.y-e.target.startY,r=0;r<t.length;r++){var i=t[r];i.x=i.startX+o,i.y=i.startY+n,ne(i)}U.drawShape()}}else ne(e.target),U.drawShape()}),re.on("pressup",function(e){var t,o;U.lockControls||(t=e.target.x!=b.x||e.target.y!=b.y,o=new createjs.Event("change"),e.target.rect1?(o.controlType="bezierPoint",function(e){if(U.selectPoints){var t=ae();if(t&&-1==t.indexOf(e))le(e);else if(t&&0<t.length)for(var o=0;o<t.length;o++)le(t[o]);else le(e)}else le(e)}(e.target)):o.controlType="bezierHandle",t&&U.dispatchEvent(o))}),U.changeControl=function(e,t,o,n,r,i,a,l,s){var c;if(c=zob(U.changeControl,arguments,"index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY, update"))return c;if(zot(e)){for(var u=0;u<K.length;u++)U.changeControl(u,t,o,n,r,i,a,l);return U}var d=K[e];return"none"==(d[4]=t)?(zot(a)||(d[1].x=a),zot(l)||(d[1].y=l),d[2].x=d[1].x,d[2].y=d[1].y,d[3].x=d[1].x,d[3].y=d[1].y,d[1].parent.addChild(d[1])):(zot(a)||(d[1].x=a),zot(l)||(d[1].y=l),zot(o)||(d[2].x=o),zot(n)||(d[2].y=n),zot(r)||(d[3].x=r),zot(i)||(d[3].y=i),d[1].parent.addChildAt(d[1],0)),d[2].color=k(t),d[3].color=k(t),s&&(U.update(),U.stage&&U.stage.update()),U},U.transformPoints=function(e,t,o,n){return U.points=So.transformPoints(U.points,e,t,o,n),U},U.traverse=function(o,e,t,n){var r=So.copy(U.segmentRatios);r.unshift(0),zot(t)&&(t=e+1);var i,a,l=e<t;return a=l?(i=100*r[e],100*r[t]):(i=50+(100-100*r[e])/2,50+(100-100*r[t])/2),o.percentComplete=i,o.animate({ease:"linear",props:{path:U},rewind:!l,time:n,events:!0}),o.on("animation",function(e){var t;(o.percentComplete>a||0==o.percentComplete)&&(o.stopAnimate(),e.remove(),(t=new createjs.Event("traversed")).obj=o,U.dispatchEvent(t))}),U},U.update=function(e){return e?U.points=U.pointsAdjusted:U.drawShape(),U.zimAnimateChanged=!0,U},U.move&&U.interactive&&$.drag({onTop:!1}),ee=$.on("mousedown",function(e){v=e.target.stage,b={x:$.x,y:$.y},U.selectPoints&&(U.keyFocus=!0),function(){{var e;U.onTop&&(e=U.parent.numChildren-1,"Keyboard"==U.parent.getChildAt(e).type&&e--,U.parent.setChildIndex(U,e))}}()}),te=$.on("pressmove",function(){re.x=$.x,re.y=$.y,n.x=$.x,n.y=$.y}),oe=$.on("pressup",function(){var e,t=$.x!=b.x||$.y!=b.y,o=$.localToLocal(U.regX,U.regY,U.parent);U.x=o.x,U.y=o.y,re.x=re.y=n.x=n.y=$.x=$.y=0,t&&((e=new createjs.Event("change")).controlType="move",U.dispatchEvent(e)),v.update()}),j||ce(!0),U.toggleEvent=U.on("mousedown",function(){U.allowToggle&&(q||(U.showControls(),U.dispatchEvent("controlsshow")))}),U.added(function(){v=U.stage,U.toggleStageEvent=U.stage.on("stagemousedown",function(e){U.allowToggle&&U.stage&&q&&!U.hitTestPoint(e.stageX/So.scaX,e.stageY/So.scaY,!1)&&(U.hideControls(),U.dispatchEvent("controlshide"))})}),U.clickEvent=U.on("click",function(){U.ctrlKey&&setTimeout(function(){U.clone(!0).addTo(U.stage).mov(100),U.allowToggle&&(U.hideControls(),U.dispatchEvent("controlshide"));var e=new createjs.Event("change");e.controlType="move",U.dispatchEvent(e),U.stage.update()},50)}),U.hideControls=function(){return U.toggled=!1,re.visible=!1,n.visible=!1,q=!1,U.stage&&U.stage.update(),!U.allowToggle&&U.move&&ce(),U},q||U.hideControls(),U.showControls=function(){return U.toggled=!0,re.visible=!0,n.visible=!0,q=!0,re.x=$.x,re.y=$.y,n.x=$.x,n.y=$.y,U.addChildAt($,0),U.move&&!U.allowToggle&&se(),U.stage&&U.stage.update(),U},U.toggle=function(e){return!0!==e&&(!1===e||q)?U.hideControls():U.showControls(),U},U.recordData=function(e){zot(e)&&(e=!1);var t={type:"Blob",index:U.parent?U.parent.getChildIndex(U):-1,x:U.x,y:U.y,points:U.recordPoints(),color:U.color,borderColor:U.borderColor,borderWidth:U.borderWidth,move:U.move,toggle:U.allowToggle,controlsVisible:q};return e?JSON.stringify(t):t},U.setData=function(e,t){if(!zot(e)){if(t)try{e=JSON.parse(e)}catch(e){return}var o=e.index;zot(o)&&(o=-1),delete e.index;var n=e.points;for(var r in zot(n)||U.setPoints(n),delete e.points,this.num=n.length,e)U[r]=e[r];return U.parent&&U.parent.setChildIndex(U,o),U}},U.recordPoints=function(e){zot(e)&&(e=!1);var t,o,n=U.points;return e&&(t||(t=U.pane=new So.Pane({displayClose:!1,container:U.stage,width:Math.min(500,U.stage.width-20),height:Math.min(500,U.stage.height-20),draggable:!0}),(o=U.textArea=new So.TextArea(Math.min(400,U.stage.width-70),Math.min(400,U.stage.height-70))).centerReg(t)),o.text=JSON.stringify(n),t.show()),n},!(U.setPoints=function(e){for(var t,o,n=0;n<e.length;n++)t=K[n],o=e[n],zot(t)||(t[0].x=o[0],t[0].y=o[1],t[1].x=o[2],t[1].y=o[3],t[2].x=o[4],t[2].y=o[5],t[3].x=o[6],t[3].y=o[7],t[4]=o[8],t[2].color=k(t[4]),t[3].color=k(t[4]));return U.update(),U})!==H&&So.styleTransforms(U,V),U.clone=function(e,t){var o=U.cloneProps(new So.Blob(t?U.colorCommand:e||!So.isPick(Q[0])?U.color:Q[0],t?U.borderColorCommand:e||!So.isPick(Q[1])?U.borderColor:Q[1],U.borderWidth,U.recordPoints(),S,B,I,E,re.visible,O,M,U.allowToggle,U.move,L,Y,_,D,X,U.editPoints,R,W,H,U.group,F));return U.linearGradientParams&&o.linearGradient.apply(o,U.linearGradientParams),U.radialGradientParams&&o.radialGradient.apply(o,U.radialGradientParams),o},U.shapeMousedownEvent=U.shape.on("mousedown",function(e){v=e.target.stage,U.editPoints&&(U.controlsVisible?(U.pressX=e.stageX/So.scaX,U.pressY=e.stageY/So.scaY):(U.pressX=null,U.pressY=null))}),U.addPointFactor=10,U.addMinDistance=15,U.shapePressupEvent=U.shape.on("pressup",function(e){var t,n,o,r,i,a,l,s,c,u,d,h,g;U.editPoints&&U.pressX&&Math.abs(U.pressX-e.stageX/So.scaX)<ie&&Math.abs(U.pressY-e.stageY/So.scaY)<ie&&(U.selectPoints&&(U.lastPoints=So.copy(U.points)),t=U.points,n=U.globalToLocal(e.stageX/So.scaX,e.stageY/So.scaY),o=So.closestPointAlongCurve(n,U.segmentPoints),"anywhere"==U.editPoints?(t.splice(o+1,0,[n.x,n.y,0,0,0,0,0,0]),U.points=t,U.changeControl({index:o+1,type:"mirror",update:!0})):(r=U.pointsAdjusted,i=U.getSegmentPoint(r[o],r[(o+1)%r.length]),a=So.distanceAlongCurve(i),l=Math.round(a/U.addPointFactor),s=U.interpolate(l,o,!1,t),c=1e4,So.loop(s,function(e,t){var o;0==t||(o=So.dist(e,n))<c&&(c=o,u=t,0)}),c<U.addMinDistance&&(h=(d=U.segmentRatios)[o],g=0<o?d[o-1]:0,U.addPoint(100*(g+u/(l+1)*(h-g))))),U.lastSelectedIndex=o+1,U.lastSelected=U.controls.getChildAt(U.lastSelectedIndex),U.stage.update())}),U.controlsClickEvent=U.controls.on("click",function(e){U.lastSelected=e.target.parent;U.lastSelectedIndex=U.controls.getChildIndex(e.target.parent);U.editPoints&&U.selectionManager.shiftKey&&T(e)}),U.controls.hold(T),q||U.hideControls(),U.dispatchEvent("update")}function C(e){w?(e.preventDefault(),x(e)):(w=!0,setTimeout(function(){w=!1},300))}function x(e){var t,o,n;U.lockControlType||(t=e.target,o=K[t.index][4]?K[t.index][4]:I,Math.abs(t.rect1.x)<=2&&Math.abs(t.rect1.y)<=2&&Math.abs(t.rect2.x)<=2&&Math.abs(t.rect2.y)<=2&&(o="none"),"none"==o&&t.parent.addChildAt(t,0),"none"==(o=U.types[(U.types.indexOf(o)+(U.shiftKey?-1:1)+U.types.length)%U.types.length])&&(t.rect1.x=t.rect1.y=t.rect2.x=t.rect2.y=0,t.parent.addChild(t),e.stopImmediatePropagation()),K[t.index][4]=o,t.rect1.color=k(o),t.rect2.color=k(o),U.drawShape(),(n=new createjs.Event("change")).controlType="bezierSwitch",U.dispatchEvent(n),t.stage.update())}function k(e){var t={mirror:So.purple,free:So.yellow,none:So.blue};return t[e]?t[e]:So.pink}function T(e){if("Circle"==e.target.type){var t=U.lastSelectedIndex=U.controls.getChildIndex(e.target.parent);if(U.controls.numChildren<=2)return;var o=U.points;U.selectPoints&&(U.lastPoints=So.copy(o)),o.splice(t,1),U.points=o,U.stage.update(),U.lastSelected=U.lastSelectedIndex=null}}}function ae(){var e=[],t=U.selectionManager.currentSet;if(t&&t.selections&&0<t.selections.length)for(var o=0;o<t.selections.length;o++){var n=U.pointObjects[t.selections[o]];if(t==U.selectedBalls)e.push(n[1]);else if(t==U.selectedRect1s)e.push(n[2]);else{if(t!=U.selectedRect2s)continue;e.push(n[3])}}return e}function le(e){var t,o,n,r;U.selectPoints&&"Circle"==e.type&&(o=(t=e).mySet,n=t.rect1,r=t.rect2,n.x-=t.x,n.y-=t.y,r.x-=t.x,r.y-=t.y,o.x+=t.x,o.y+=t.y,t.x=0,t.y=0)}function se(){"always"!=U.move&&(c||(c=!0,$.drag({onTop:!1}),ee=$.on("mousedown",ee),te=$.on("pressmove",te),oe=$.on("pressup",oe)))}function ce(e){"always"!=U.move&&(e||c)&&(c=!1,$.noDrag(),$.off("mousedown",ee),$.off("pressmove",te),$.off("pressup",oe))}"string"==typeof(P=u(P))&&(s=new So.SVGContainer,P=s.processPath(P)),l&&"number"!=typeof P&&So.loop(P,function(e){"none"==(e[8]=l)&&(e[4]=e[5]=e[6]=e[7]=0)}),d(),U.selectionManager.on("keydown",function(e){if(U.selectPoints&&U.keyFocus&&37<=e.keyCode&&e.keyCode<=40){var t=ae();if(0<t.length){for(var o=0;o<t.length;o++){var n=t[o];37==e.keyCode?n.x-=U.selectionManager.shiftKey?10:1:39==e.keyCode?n.x+=U.selectionManager.shiftKey?10:1:38==e.keyCode?n.y-=U.selectionManager.shiftKey?10:1:40==e.keyCode&&(n.y+=U.selectionManager.shiftKey?10:1),ne(n)}U.drawShape(),U.dispatchEvent("update"),U.stage&&U.stage.update()}}}),U.selectionManager.on("keyup",function(e){if(U.selectPoints&&U.keyFocus&&37<=e.keyCode&&e.keyCode<=40){var t=ae();if(0<t.length)for(var o=0;o<t.length;o++)le(t[o])}}),U.selectionManager.on("undo",function(){var e;U.selectPoints&&U.keyFocus&&U.lastPoints&&(e=So.copy(U.lastPoints),U.lastPoints=So.copy(U.points),U.points=e,U.stage&&U.stage.update())}),ne=function(e){var t,o,n,r,i,a,l,s,c,u,d,h;U.lockControls||(e.rect1?(t=(i=e).x-i.startX,o=i.y-i.startY,i.rect1.x=i.rect1.startX+t,i.rect1.y=i.rect1.startY+o,i.rect2.x=i.rect2.startX+t,i.rect2.y=i.rect2.startY+o):(r=(n=e).other,a=(i=n.ball).index,l=I,zot(K[a][4])||(l=K[a][4]),"straight"!=l&&"mirror"!=l||(s=n.x-i.x,c=n.y-i.y,"mirror"==l?(r.x=i.x-s,r.y=i.y-c):(u=Math.atan2(c,s),d=-r.stickLength*Math.cos(u+Math.PI),h=-r.stickLength*Math.sin(u+Math.PI),r.x=i.x-d,r.y=i.y-h))))},Object.defineProperty(U,"move",{get:function(){return j},set:function(e){j!=e&&((j=e)?se:ce)()}}),Object.defineProperty(U,"interactive",{get:function(){return R},set:function(e){q=R=e,U.allowToggle=R,U.editPoints=R,U.lockControls=!R,U.selectPoints=R,U.move=R,U.points}}),Object.defineProperty(U,"allowToggle",{get:function(){return n},set:function(e){n!=e&&((n=e)?U.move&&se():!q&&U.move&&ce())}}),Object.defineProperty(U,"controlsVisible",{get:function(){return q},set:function(e){(q=e)?U.showControls():U.hideControls()}});var h=O;function C(e,t,o){return{x:e.x+(t.x-e.x)*o,y:e.y+(t.y-e.y)*o}}function g(e,t,o,n,r,i,a,l){var s=e.length-1,c=0,u=0;100==n&&"Squiggle"==U.type&&(n=99.99),n=(n+1e5)%100,So.loop(o,function(e,t){return n/100<e?(s=t,u=e,!0):void(c=e)});var d,h,g,p,f,m,z,y=U.segmentPoints[s],b=0<u?(n/100-c)/(u-c):0,v=So.pointAlongCurve(y,b,null,l),w=[v.x,v.y,0,0];i||(a?U.interpolatedPoints.push({x:v.x,y:v.y,r:n/100}):("none"!=r&&(d=C(y[0],y[1],b),h=C(y[1],y[2],b),g=C(y[2],y[3],b),p=C(d,h,b),f=C(h,g,b),w[4]=p.x-v.x,w[5]=p.y-v.y,w[6]=f.x-v.x,w[7]=f.y-v.y,m=U.localToLocal(d.x,d.y,t[s]),e[s][6]=m.x,e[s][7]=m.y,z=U.localToLocal(g.x,g.y,t[(s+1)%e.length]),e[(s+1)%e.length][4]=z.x,e[(s+1)%e.length][5]=z.y),r&&(w[8]=r),e.splice(s+1,0,w)))}Object.defineProperty(U,"lockControls",{get:function(){return h},set:function(e){(h=e)?(U.controls.mouseChildren=!1,U.controls.mouseEnabled=!1):(U.controls.mouseChildren=!0,U.controls.mouseEnabled=!0)}}),U.lockControls=h,void 0!==KEYFOCUS&&(So.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return So.KEYFOCUS==U},set:function(e){So.KEYFOCUS=U}}),U.selectPoints&&!So.KEYFOCUS&&function(){U.keyFocus=!0;var e=document.activeElement;e&&e.blur()}(),Object.defineProperty(U,"points",{get:function(){for(var e,t,o=[],n=0;n<K.length;n++)t=K[n],e=[So.decimals(t[0].x),So.decimals(t[0].y),So.decimals(t[1].x),So.decimals(t[1].y),So.decimals(t[2].x),So.decimals(t[2].y),So.decimals(t[3].x),So.decimals(t[3].y)],t[4]&&"straight"!==t[4]&&e.push(t[4]),o.push(e);return o},set:function(e){var t=U.x,o=U.y,n=U.visible;U.dispose(!0),P=u(e),U.shape&&(U.shape.graphics.clear(),U.sticks.graphics.clear(),U.controls.noDrag(),U.removeAllChildren(),delete U.shape,delete U.sticks,delete U.controls),U.visible=!1,d(),U.lockControls=h,U.x=t,U.y=o,U.visible=n}}),Object.defineProperty(U,"pointsAdjusted",{get:function(){var r,i,a,l=[],s=U.pointObjects;return So.loop(s.length,function(e,t){var o,n;a=s[e],i=K[e],r=0==a[0].rotation&&0==a[0].scaleX&&0==a[0].scaleY?[So.decimals(i[0].x),So.decimals(i[0].y),So.decimals(i[1].x),So.decimals(i[1].y),So.decimals(i[2].x),So.decimals(i[2].y),So.decimals(i[3].x),So.decimals(i[3].y)]:(o=a[0].localToLocal(a[2].x,a[2].y,a[0].parent),n=a[0].localToLocal(a[3].x,a[3].y,a[0].parent),[So.decimals(i[0].x),So.decimals(i[0].y),So.decimals(i[1].x),So.decimals(i[1].y),So.decimals(o.x-i[0].x),So.decimals(o.y-i[0].y),So.decimals(n.x-i[0].x),So.decimals(n.y-i[0].y)]),i[4]&&"mirror"!==i[4]&&r.push(i[4]),l.push(r)}),l},set:function(e){zon&&zogy("Blob() - pointsAdjusted is read only")}}),Object.defineProperty(U,"pointObjects",{get:function(){return K},set:function(e){zon&&zog("Blob() - pointObjects is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(U,"pointControls",{get:function(){return J},set:function(e){zon&&zog("Blob() - pointControls is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(U,"pointCircles",{get:function(){return Z},set:function(e){zon&&zog("Blob() - pointCircles is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(U,"segmentPoints",{get:function(){var n=U.pointsAdjusted,r=[];return So.loop(n.length,function(e,t){var o=U.getSegmentPoint(n[e],n[e<t-1?e+1:0]);r.push(o)}),r},set:function(e){zon&&zog("Blob() - segmentPoints is read only")}}),Object.defineProperty(U,"segmentRatios",{get:function(){var o=[],n=0;So.loop(U.segmentPoints,function(e){var t=So.distanceAlongCurve(e);o.push(t),n+=t});var t=[],r=0;return So.loop(o,function(e){r+=e/n,t.push(r)}),t},set:function(e){zon&&zog("Blob() - segmentRatios is read only")}}),U.approximateBounds=function(e,t){zot(e)&&(e=80),e/=U.num;var o=U.interpolate(e,null,!0,null,!0),n=So.boundsAroundPoints(o);if(U.setBounds(n.x,n.y,n.width,n.height),t){U.hitPathPoints?U.hitPathPoints.removeAllChildren():U.hitPathPoints=(new So.Container).addTo(),U.hitPathPoints.top();for(var r=0;r<o.length;r++){var i=o[r],i=U.localToGlobal(i.x,i.y);new So.Circle(3).loc(i.x,i.y,U.hitPathPoints)}}return U},U.getPointAngle=function(e){var t,o,n=U.pointObjects[e][0],r=U.pointObjects[e][2],i=U.pointObjects[e][3];return o=n==U.stage?(t=new So.Point(r.x,r.y),new So.Point(i.x,i.y)):(t=n.localToGlobal(r.x,r.y),n.localToGlobal(i.x,i.y)),So.angle(t.x,t.y,o.x,o.y)},U.getSegmentPoint=function(e,t){if(!zot(e)&&!zot(t)){0==e[2]&&0==e[3]||(e[4]-=e[2],e[5]-=e[3],e[6]-=e[2],e[7]-=e[3],e[0]+=e[2],e[1]+=e[3],e[2]=0,e[3]=0),0==t[2]&&0==t[3]||(t[4]-=t[2],t[5]-=t[3],t[6]-=t[2],t[7]-=t[3],t[0]+=t[2],t[1]+=t[3],t[2]=0,t[3]=0);var o={x:e[0],y:e[1]},n={x:e[0]+e[6],y:e[1]+e[7]},r={x:t[0]+t[4],y:t[1]+t[5]},i={x:t[0],y:t[1]};return 0==re.x&&0==re.y||(o.x+=re.x,n.x+=re.x,r.x+=re.x,i.x+=re.x,o.y+=re.y,n.y+=re.y,r.y+=re.y,i.y+=re.y),[o,n,r,i]}},U.getAdjacentSegmentData=function(e){zot(e)&&(e=0);var t=U.pointsAdjusted;if(2==U.num)return[[U.getSegmentPoint(t[0],t[1]),U.getSegmentPoint(t[1],t[0])],[0,1]];if(0==e)return[[U.getSegmentPoint(t[U.num-1],t[0]),U.getSegmentPoint(t[0],t[1]),U.getSegmentPoint(t[1],t[2])],[U.num-1,0,1]];if(e>=U.num-1)return[[U.getSegmentPoint(t[U.num-2],t[U.num-1]),U.getSegmentPoint(t[U.num-1],t[0]),U.getSegmentPoint(t[0],t[1])],[U.num-2,U.num-1,0]];var o=e+2>=U.num?0:e+2;return[[U.getSegmentPoint(t[e-1],t[e]),U.getSegmentPoint(t[e],t[e+1]),U.getSegmentPoint(t[e+1],t[o])],[e-1,e,e+1]]},U.getCurvePoint=function(o,e,t,n){zot(e)&&(e=U.segmentRatios),zot(t)&&(t=U.segmentPoints),zot(n)&&(n=!1);var r=e,i=t,a=So.loop(r,function(e,t){if(o<=e)return t}),l=0<a?r[a-1]:0,s=0<a?r[a]-r[a-1]:r[a],c=(o-l)/s,u=So.pointAlongCurve(i[a],c,n,!0);if(!zot(u)){var d=U.localToGlobal(u.x,u.y);return d.angle=u.angle,d.z=a,zot(d)?void 0:d}},this.addPoint=function(e,t){zot(e)&&(e=100);var o=U.points,n=U.segmentRatios;return g(o,U.pointControls,n,e,t),U.points=o,U.num=o.length,U},this.addPoints=function(i,a,l,t,s,c,u){zot(c)&&(c=So.copy(U.points));var d,e=So.copy(U.segmentRatios),h=0;return s&&(U.interpolatedPoints=[]),t&&(d=e.length*i),So.loop(e,function(o,n){s&&g(c,U.pointControls,U.segmentRatios,100*h,a,!zot(l)&&n!=l,s,u);var e=t?Math.round(d*(o-h)):i,r=1/(e+1);So.loop(e,function(e){var t=h+(o-h)*r*(e+1);g(c,U.pointControls,U.segmentRatios,100*t,a,!zot(l)&&n!=l,s,u),!s&&0<i&&(U.points=c)}),h=o}),s&&"Squiggle"==U.type&&g(c,U.pointControls,U.segmentRatios,100,a,null,s,u),U.stage&&U.stage.update(),U.num=c.length,U},this.interpolate=function(e,t,o,n,r){return zot(e)&&(e=1),U.addPoints(e,"none",t,o,!0,n,r),U.interpolatedPoints},this.dispose=function(e,t,o){if(U.shape){So.gD(U),U.shape.cursor="default";for(var n=0;n<U.pointObjects.length;n++)U.pointObjects[n][1].removeAllEventListeners();for(n=0;n<Z.length;n++)Z[n].removeAllEventListeners();return U.sticks.removeFrom(U),U.controls.removeFrom(U),U.shape.removeAllEventListeners(),U.controls.removeAllEventListeners(),U.off("mousedown",U.toggleEvent),U.off("click",U.clickEvent),!e&&U.selectPoints&&U.selectionManager.removeAllEventListeners(),!0}}},So.extend(So.Blob,So.CustomShape,["clone","dispose"],"zimCustomShape",!1),So.Flare=function(O,l,s,c,e,u,m,o,z,M,t,n,r,i,a,d,h,g,j,L,Y,_,D,X,R,W,H,F,V,N,p,f,y){var b;if(b=zob(So.Flare,arguments,"color, borderColor, borderWidth, crossAngle, thickness, thicknessA, thicknessB, pin, startX, startY, lengths, angles, anglesA, anglesB, anglesEnd, cross, crossColors, close, dashed, strokeObj, spineColor, spineBorderWidth, spineBorderColor, spineDashed, spineStrokeObj, closeColor, closeBorderWidth, closeBorderColor, closeDashed, closeStrokeObj, style, group, inherit",this))return b;z_d("53.6"),this.zimContainer_constructor(),this.type="Flare",this.group=f;var v=!1===p?{}:So.getStyle(this.type,this.group,y),G=this;zot(l)&&(l=null!=v.borderColor?v.borderColor:null),zot(s)&&(s=null!=v.borderWidth?v.borderWidth:null),l<0||s<0?l=s=null:null!=l&&null==s&&(s=1),zot(O)&&(O=null!=v.color?v.color:0<s?"rgba(0,0,0,0)":"black"),(zot(s)||0<s)&&(zot(l)&&zot(s)||zot(l)&&(l="black")),zot(c)&&(c=null!=v.crossAngle?v.crossAngle:0);var w,C,x=c;function k(y,b,v,w,C,e,x,o){G.removeAllChildren();var n,r,i=G.shape=(new So.Shape).addTo(G);G.colorCommand=i.c().f(O).command,O&&O.type&&G.specialColor(G.colorCommand,O),(zot(s)||0<s)&&(zot(l)&&zot(s)||(zot(l)&&(l="black"),G.borderColorCommand=i.s(l).command,l&&l.type&&G.specialColor(G.borderColorCommand,l),G.borderWidthCommand=i.ss(s,L.caps,L.joints,L.miterLimit,L.ignoreScale).command,j&&(G.borderDashedCommand=i.sd([10,10],5).command))),i.mt(0,0),0<_&&(n=G.spineShape=(new So.Shape).addTo(G),G.spineColorCommand=n.c().f(Y).command,Y&&Y.type&&G.specialColor(G.spineColorCommand,Y),(zot(_)||0<_)&&(zot(D)&&zot(_)||(zot(D)&&(D="black"),G.spineBorderColorCommand=n.s(D).command,D&&D.type&&G.specialColor(G.spineBorderColorCommand,D),G.spineBorderWidthCommand=n.ss(_,R.caps,R.joints,R.miterLimit,R.ignoreScale).command,X&&(G.spineBorderDashedCommand=n.sd([10,10],5).command)))),zot(W)||(r=G.closeShape=(new So.Shape).addTo(G),G.closeColorCommand=r.c().f(W).command,W&&W.type&&G.specialColor(G.closeColorCommand,W),(zot(H)||0<H)&&(zot(F)&&zot(H)||(zot(F)&&(F="black"),G.closeBorderColorCommand=r.s(F).command,closeBorder&&closeBorder.type&&G.specialColor(G.closeBorderCommand,F),G.closeBorderWidthCommand=r.ss(H,N.caps,N.joints,N.miterLimit,N.ignoreScale).command,V&&(G.closeBorderDashedCommand=r.sd([10,10],5).command))),i.mt(0,0));var k,T,d=z,h=M,A=c,P=A-180,S=u,B=m,I=b[0],t=Math.max(y.length,b.length,v.length,w.length,C.length),I=P,g=[],p=[],f=[],a=(G.points=[],G.pinPoints=[]);function E(e,t,o,n,r){var i=r-90,a=180-n-(90-i),l=Math.tan(i*So.RAD)*o,s=(e-t-l)/Math.sin(a*So.RAD)*Math.sin(n*So.RAD)+Math.sqrt(Math.pow(o,2)+Math.pow(l,2));return{x:s*Math.sin(i*So.RAD),y:s*Math.cos(i*So.RAD),t:s}}So.loop(t,function(e,t){var o=function(e){var t=b[e],o=y[e],n=v[e],r=w[e],i=C[e];{var a;x&&(a=x[e])}zot(t)&&(t=I,G.angles[e]=t);zot(o)&&(o=200,G.lengths[e]=o);zot(n)&&(n=0,G.anglesA[e]=n);zot(r)&&(r=0,G.anglesB[e]=r);zot(i)&&(i=0,G.anglesEnd[e]=i);x&&zot(a)&&(a=O,G.crossColors[e]=a);var l=180-(i+=90),s=Math.cos((I-t)*So.RAD),c=Math.sin((I-t)*So.RAD),u=new So.Point(0,0),d=new So.Point(o,0);{var h;h=zot(k)?new So.Point(Math.cos(A*So.RAD)*S,Math.sin(A*So.RAD)*S):new So.Point(k.x*s-k.y*c,k.x*c+k.y*s)}var g=E(o,h.x,h.y,n,l),p=new So.Point(o-g.x,-g.y);{var f;f=zot(T)?new So.Point(Math.cos(P*So.RAD)*S,Math.sin(P*So.RAD)*B):new So.Point(T.x*s-T.y*c,T.x*c+T.y*s)}var m=E(o,f.x,f.y,r,i),z=new So.Point(o-m.x,m.y);return k=new So.Point(p.x-o,p.y),T=new So.Point(z.x-o,z.y),{a:I=t,A:h,B:p,C:z,D:f,E:d,F:u,tA:g.t,tB:m.t}}(e),n=Math.cos(o.a*So.RAD),r=Math.sin(o.a*So.RAD),i=new So.Point(d+o.A.x*n-o.A.y*r,h+o.A.x*r+o.A.y*n),a=new So.Point(d+o.B.x*n-o.B.y*r,h+o.B.x*r+o.B.y*n),l=new So.Point(d+o.C.x*n-o.C.y*r,h+o.C.x*r+o.C.y*n),s=new So.Point(d+o.D.x*n-o.D.y*r,h+o.D.x*r+o.D.y*n);g.push(i,a),p.unshift(l,s),f.push([i,a,l,s]);var c=new So.Point(d+o.F.x*n-o.F.y*r,h+o.F.x*r+o.F.y*n),u=new So.Point(d+o.E.x*n-o.E.y*r,h+o.E.x*r+o.E.y*n);0==e&&G.pinPoints.push(c),G.pinPoints.push(u),d=u.x,h=u.y,S=o.tA,B=o.tB}),G.points=g.concat(p),e?(So.loop(f,function(e,t){i.mt(e[0].x,e[0].y),zot(x)||zot(x[t])||i.f(x[t]).mt(e[0].x,e[0].y),i.lt(e[1].x,e[1].y).lt(e[2].x,e[2].y).lt(e[3].x,e[3].y).cp()}),o&&i.mt(f[f.length-1][1].x,f[f.length-1][1].y).lt(f[f.length-1][2].x,f[f.length-1][2].y).lt(f[0][3].x,f[0][3].y).lt(f[0][0].x,f[0][0].y).cp()):(So.loop(g,function(e,t){0==t?i.mt(e.x,e.y):i.lt(e.x,e.y)}),o&&(i.lt(g[0].x,g[0].y),i.cp()),So.loop(p,function(e,t){0==t&&o?i.mt(e.x,e.y):i.lt(e.x,e.y)}),o&&i.lt(p[0].x,p[0].y),i.cp()),n&&(So.loop(a,function(e,t){0==t?n.mt(e.x,e.y):n.lt(e.x,e.y)}),o&&n.lt(a[0].x,a[0].y).cp()),zot(W)||(So.loop(p,function(e,t){0==t?r.mt(e.x,e.y):r.lt(e.x,e.y)}),o&&r.lt(p[0].x,p[0].y).cp())}c-=90,zot(e)&&(e=null!=v.thickness?v.thickness:null),zot(u)&&(u=null!=v.thicknessA?v.thicknessA:null),zot(m)&&(m=null!=v.thicknessB?v.thicknessB:null),zot(e)?zot(m)&&!zot(u)?m=u:zot(u)&&!zot(m)?u=m:m=u=10:zot(m)&&!zot(u)?m=e-u:zot(u)&&!zot(m)?u=e-m:m=u=e/2,G.thickness=u+m,zot(d)&&(d=null==v.cross||v.cross),zot(h)&&(h=null!=v.crossColors?v.crossColors:null),zot(h)||Array.isArray(h)||(h=[h]),zot(g)&&(g=null!=v.close&&v.close),zot(z)&&(z=null!=v.startX?v.startX:0),zot(M)&&(M=null!=v.startY?v.startY:0),zot(t)&&(t=null!=v.lengths?v.lengths:[200]),Array.isArray(t)||(t=[t]),zot(n)&&(n=null!=v.angles?v.angles:[0]),Array.isArray(n)||(n=[n]),zot(r)&&(r=null!=v.anglesA?v.anglesA:[10]),Array.isArray(r)||(r=[r]),zot(i)&&(i=null!=v.anglesB?v.anglesB:So.copy(r)),Array.isArray(i)||(i=[i]),zot(a)&&(a=null!=v.anglesEnd?v.anglesEnd:[0]),Array.isArray(a)||(a=[a]),zot(L)&&(L=null!=v.strokeObj?v.strokeObj:{miterLimit:2}),zot(D)&&(D=null!=v.spineBorderColor?v.spineBorderColor:null),zot(_)&&(_=null!=v.spineBorderWidth?v.spineBorderWidth:null),D<0||_<0?D=_=null:null!=D&&null==_&&(_=1),zot(Y)&&(Y=null!=v.spineColor?v.spineColor:0<_?"rgba(0,0,0,0)":"black"),zot(X)&&(X=null!=v.spineDashed?v.spineDashed:null),zot(R)&&(R=null!=v.spineStrokeObj?v.spineStrokeObj:{miterLimit:2}),(zot(_)||0<_)&&(zot(D)&&zot(_)||zot(D)&&(D=l||"black")),zot(F)&&(F=null!=v.closeBorderColor?v.closeBorderColor:null),zot(H)&&(H=null!=v.closeBorderWidth?v.closeBorderWidth:null),F<0||H<0?F=H=null:null!=F&&null==H&&(H=1),zot(W)&&(W=null!=v.closeColor?v.closeColor:0<H?"rgba(0,0,0,0)":null),zot(V)&&(V=null!=v.closeDashed?v.closeDashed:null),zot(N)&&(N=null!=v.closeStrokeObj?v.closeStrokeObj:{miterLimit:2}),(zot(H)||0<H)&&(zot(F)&&zot(H)||zot(F)&&(F=l||"black")),this.thicknessA=u,this.thicknessB=m,this.cross=d,this.close=g,this.lengths=t,this.angles=n,this.anglesA=r,this.anglesB=i,this.anglesEnd=a,this.crossColors=h,k(t,n,r,i,a,d,h,g),this.add=function(e,t,o,n,r,i,a,l){var s;return(s=zob(G.add,arguments,"lengths, angles, anglesA, anglesB, anglesEnd, cross, crossColors, close"))?s:(zot(i)||(G.cross=i),zot(l)||(G.close=l),zot(e)||(Array.isArray(e)||(e=[e]),zot(G.lengths)?G.lengths=e:G.lengths=G.lengths.concat(e)),zot(t)||(Array.isArray(t)||(t=[t]),zot(G.angles)?G.angles=t:G.angles=G.angles.concat(t)),zot(o)||(Array.isArray(o)||(o=[o]),zot(G.anglesA)?G.anglesA=o:G.anglesA=G.anglesA.concat(o)),zot(n)||(Array.isArray(n)||(n=[n]),zot(G.anglesB)?G.anglesB=n:G.anglesB=G.anglesB.concat(n)),zot(r)||(Array.isArray(r)||(r=[r]),zot(G.anglesEnd)?G.anglesEnd=r:G.anglesEnd=G.anglesEnd.concat(r)),zot(a)||(zot(G.crossColors)?zon&&zogy("Flare() - must set crossColor for original object parameters"):(Array.isArray(a)||(a=[a]),zot(G.crossColors)?G.crossColors=a:G.crossColors=G.crossColors.concat(a))),G.remake(),G)},this.remake=function(){return u=this.thicknessA,m=this.thicknessB,k(G.lengths,G.angles,G.anglesA,G.anglesB,G.anglesEnd,G.cross,G.crossColors,G.close),G},Object.defineProperty(G,"color",{get:function(){return O},set:function(e){zot(e)&&(e="black"),(O=e)&&e.type?G.specialColor(G.colorCommand,e):G.colorCommand.style=e}}),this.setColorRange=function(e,t){return C=zot(t)?(w=G.color,e):(w=zot(e)?G.color:e,t),G};var T=0;Object.defineProperty(G,"colorRange",{get:function(){return T},set:function(e){T=e,zot(w)||zot(C)||(G.color=So.colorRange(w,C,e))}}),Object.defineProperty(G,"borderColor",{get:function(){return l},set:function(e){l=e,G.borderColorCommand?e&&e.type?G.specialColor(G.borderColorCommand,e):G.borderColorCommand.style=e:k()}}),Object.defineProperty(G,"borderWidth",{get:function(){return s},set:function(e){0<e||(e=0),s=e,G.borderWidthCommand&&0!=s?(G.borderWidthCommand.width=s,j&&(G.borderDashedCommand.segments=[20,10],G.borderDashedCommand.offset=5)):k()}}),Object.defineProperty(G,"spineColor",{get:function(){return Y},set:function(e){zot(e)&&(e="black"),Y=e,G.spineColorCommand?e&&e.type?G.specialColor(G.spineColorCommand,e):G.spineColorCommand.style=e:k()}}),Object.defineProperty(G,"spineBorderColor",{get:function(){return D},set:function(e){D=e,G.spineBorderColorCommand?e&&e.type?G.specialColor(G.spineBorderColorCommand,e):G.spineBorderColorCommand.style=e:k()}}),Object.defineProperty(G,"spineBorderWidth",{get:function(){return _},set:function(e){0<e||(e=0),_=e,G.spineBorderWidthCommand&&0!=_?(G.spineBorderWidthCommand.width=_,X&&(G.spineBorderDashedCommand.segments=[20,10],G.spineBorderDashedCommand.offset=5)):k()}}),Object.defineProperty(G,"closeColor",{get:function(){return W},set:function(e){zot(e)&&(e="black"),W=e,G.closeColorCommand?e&&e.type?G.specialColor(G.closeColorCommand,e):G.closeColorCommand.style=e:k()}}),Object.defineProperty(G,"closeBorderColor",{get:function(){return F},set:function(e){F=e,G.closeBorderColorCommand?e&&e.type?G.specialColor(G.closeBorderColorCommand,e):G.closeBorderColorCommand.style=e:k()}}),Object.defineProperty(G,"closeBorderWidth",{get:function(){return H},set:function(e){0<e||(e=0),H=e,G.closeBorderWidthCommand&&0!=H?(G.closeBorderWidthCommand.width=H,V&&(G.closeBorderDashedCommand.segments=[20,10],G.closeBorderDashedCommand.offset=5)):k()}}),Object.defineProperty(G,"pin",{get:function(){return o},set:function(e){0<e||(e=0),e>G.pinPoints.length-1&&(o=0),o=e;var t=G.pinPoints[o];t&&(G.regX=t.x,G.regY=t.y)}});var A=So.boundsAroundPoints(G.points);this.setBounds(A.x,A.y,A.width,A.height),zot(o)||(G.pin=o),(this.mouseChildren=!1)!==p&&So.styleTransforms(this,v),this.clone=function(){return G.cloneProps(new So.Flare(O,l,s,x,So.copy(e),So.copy(u),So.copy(m),o,z,M,So.copy(t),So.copy(n),So.copy(r),So.copy(i),So.copy(a),d,So.copy(h),g,j,L,Y,_,D,X,R,W,H,F,V,N,p,this.group,y))}},So.extend(So.Flare,So.Container,["clone"],"zimContainer",!1),So.MultiFlare=function(l,s,c,u,e,t,o){var n;if(n=zob(So.MultiFlare,arguments,"flares, pins, angles, endToEnd, style, group, inherit",this))return n;z_d("53.7"),this.zimContainer_constructor(),this.type="MultiFlare",this.group=t;var r=!1===e?{}:So.getStyle(this.type,this.group,o),d=this;zot(l)&&(l=null!=r.flares?r.flares:[]),Array.isArray(l)||(l=[l]),zot(s)&&(s=null!=r.pins?r.pins:null),zot(c)&&(c=null!=r.angles?r.angles:null),zot(u)&&(u=null!=r.endToEnd&&r.endToEnd),d.flares=l,d.pins=s,d.angles=c,d.endToEnd=u,d.mouseChildren=!1,d.add=function(e,t){return zot(e)||(zot(t)&&(t=!0),Array.isArray(e)||(e=[e]),So.loop(e,function(e){t?d.flares.push(e.clone()):d.flares.push(e)}),d.remake(),d.stage&&d.stage.update()),d},d.remove=function(e){return zot(e)||(Array.isArray(e)||(e=[e]),So.loop(e,function(e){var t=d.flares.indexOf(e);0<=t&&d.flares.splice(t,1)}),d.remake(),d.stage&&d.stage.update()),d},d.remake=function(){d.removeAllChildren(),So.loop(d.flares,function(e,t){var o,n,r,i,a;s&&!zot(s[t])&&(e.pin=s[t]),c&&!zot(c[t])&&(e.rotation=c[t]),e.addTo(d),d.flares.push(e),u&&0<t&&(n=(o=l[t-1]).pinPoints[o.pinPoints.length-1],r=o.localToLocal(n.x,n.y,d),i=e.pinPoints[0],a=e.localToLocal(i.x,i.y,d),e.mov(r.x-a.x,r.y-a.y))})},d.remake(),!1!==e&&So.styleTransforms(this,r),this.clone=function(){return d.cloneProps(new So.MultiFlare(So.copy(l,!0),So.copy(s),So.copy(c),u,e,this.group,o))}},So.extend(So.MultiFlare,So.Container,["clone"],"zimContainer",!1),So.FlareBox=function(o,n,e,t,r,i,a,l,s,c,u){var d;if(d=zob(So.FlareBox,arguments,"width, height, color, borderColor, borderWidth, flares, corners, pins, style, group, inherit",this))return d;z_d("53.8"),this.group=c;var h=!1===s?{}:So.getStyle("FlareBox",this.group,u);zot(o)&&(o=null!=h.width?h.width:220),zot(n)&&(n=null!=h.height?h.height:80),this.zimContainer_constructor(o,n),this.type="FlareBox";var g=this;if(this.mouseChildren=!1,zot(t)&&(t=null!=h.borderColor?h.borderColor:null),zot(r)&&(r=null!=h.borderWidth?h.borderWidth:null),t<0||r<0?t=r=null:null!=t&&null==r&&(r=1),zot(e)&&(e=null!=h.color?h.color:0<r?"rgba(0,0,0,0)":"black"),(zot(r)||0<r)&&(zot(t)&&zot(r)||zot(t)&&(t="black")),zot(i)&&(i=null!=h.flares?h.flares:null),zot(a)&&(a=null!=h.corners?h.corners:null),zot(l)&&(l=null!=h.pins?h.pins:null),g.backing=new So.Rectangle(o,n,e,t,r).addTo(this),!zot(i)){if("MultiFlare"!=i.type){if(!Array.isArray(i)){if("Flare"!=i.type)return;i=[i]}i=new So.MultiFlare(i,l)}i.addTo(g),g.multiFlare=i,g.flares=g.multiFlare.flares,i.loop(function(e,t){l&&!zot(l[t])?e.pin=l[t]:zot(e.pin)&&(e.pin=0),a&&!zot(a[t])?e.corner=a[t]:zot(e.corner)&&(e.corner=0),1==e.corner?e.loc(o,0):2==e.corner?e.loc(o,n):3==e.corner?e.loc(0,n):e.loc(0,0),e.rot(90*(e.corner-e.pin))}),!1!==s&&So.styleTransforms(this,h),this.clone=function(){return g.cloneProps(new So.FlareBox(o,n,e,t,r,So.copy(i,!0),So.copy(a),So.copy(l),s,this.group,u))}}},So.extend(So.FlareBox,So.Container,["clone"],"zimContainer",!1),So.Label=function(e,o,t,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,I,E,O,M){var j;if(j=zob(So.Label,arguments,"text, size, font, color, rollColor, shadowColor, shadowBlur, align, valign, bold, italic, variant, lineWidth, lineHeight, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backgroundDashed, padding, paddingHorizontal, paddingVertical, shiftHorizontal, shiftVertical, rollPersist, labelWidth, labelHeight, maxSize, style, group, inherit",this))return j;z_d("54"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Label",this.group=O;var L=!1===E?{}:So.getStyle(this.type,this.group,M);zot(e)&&(e=null!=L.text?L.text:"LABEL"),zot(o)&&(o=null!=L.size?L.size:36),zot(t)&&(t=null!=L.font?L.font:"arial"),zot(n)&&(n=null!=L.color?L.color:"black"),zot(c)&&(c=null!=L.bold&&L.bold),zot(u)&&(u=null!=L.italic&&L.italic);var Y=function(){return arguments}(e,o,t,n,c,u);e=So.Pick.choose(e);var _=!1;""===e&&(e=" ",_=!0),o=So.Pick.choose(o),t=So.Pick.choose(t),n=So.Pick.choose(n),c=So.Pick.choose(c),u=So.Pick.choose(u),zot(r)&&(r=null!=L.rollColor?L.rollColor:n),!zot(i)&&"ignore"!=i||(i=null!=L.shadowColor&&"ignore"!=i?L.shadowColor:-1),!zot(a)&&"ignore"!=a||(a=null!=L.shadowBlur&&"ignore"!=a?L.shadowBlur:14),zot(l)&&(l=null!=L.align?L.align:"left"),zot(s)&&(s=null!=L.valign?L.valign:"top"),zot(f)&&zot(L.outlineColor)||!zot(m)||(m=null!=L.outlineWidth?L.outlineWidth:Math.round(.2*o)),zot(m)&&zot(L.outlineWidth)||!zot(f)||(f=null!=L.outlineColor?L.outlineColor:"#000000"),zot(m)&&(m=null!=L.outlineWidth?L.outlineWidth:0),!zot(z)&&"ignore"!=z||(z=null!=L.backgroundColor&&"ignore"!=z?L.backgroundColor:null),!zot(C)&&"ignore"!=C||(C=null!=L.padding&&"ignore"!=C?L.padding:10),zot(x)&&(x=null!=L.paddingHorizontal?L.paddingHorizontal:C),zot(k)&&(k=null!=L.paddingVertical?L.paddingVertical:C),zot(T)&&(T=null!=L.shiftHorizontal?L.shiftHorizontal:0),zot(A)&&(A=null!=L.shiftVertical?L.shiftVertical:0),zot(d)&&(d=null!=L.variant&&L.variant),zot(h)&&(h=null!=L.lineWidth?L.lineWidth:null),zot(g)&&(g=null!=L.lineHeight?L.lineHeight:null),!zot(p)&&"ignore"!=p||(p=null!=L.backing&&"ignore"!=p?L.backing.clone():null),zot(P)&&(P=null!=L.rollPersist&&L.rollPersist),null!=L.labelWidth&&(h=L.labelWidth),zot(S)||(h=S),"middle"==l&&(l="center"),zot(B)&&(B=null!=L.labelHeight?L.labelHeight:null),zot(I)&&(I=null!=L.maxSize?L.maxSize:null),o=I?Math.min(o,I):o;var D=void 0!==zdf&&zdf.retina,X=this;this.mouseChildren=!1,this.paddingVertical=k,this.paddingHorizontal=x;var R=[];R[0]=u?"italic":"normal",R[1]=d?"small-caps":"normal",R[2]=c?"bold":"normal",R[3]=o+"px",R[4]=t;var W,H=this.label=new createjs.Text(String(e),R.join(" "),n);H.textAlign=l,H.lineWidth=h,H.lineHeight=g,H.textBaseline="alphabetic",0<m&&((W=this.outlineLabel=H.clone()).color=f,W.outline=m),-1!=i&&0<a&&(H.shadow=new createjs.Shadow(i,3,3,a)),this.addChild(H);var F,V,N,G,q=!1;function Q(){X.removeChild(X.background),X.background=new So.Rectangle(X.getBounds().width+2*x,X.getBounds().height+2*k,z,y,b,v,w,null,!1),So.center(X.background,X,0),X.setBounds(X.background.x,X.background.y,X.background.width,X.background.height)}function U(){var e,t=H.getBounds();"baseline"==s?e=t.y:"top"==s?(H.y=o-o/6,e=0):"center"==s||"middle"==s?(e=-t.height/2,H.y=.3*o):e=-t.height,X.setBounds(t.x,e,L.width?L.width-2*C:t.width,L.height?L.height-2*C:t.height),X.hitArea&&X.hitArea.graphics.c().f("black").r(X.getBounds().x,X.getBounds().y,X.getBounds().width,X.getBounds().height),"center"!=s&&"middle"!=s||(So.pos(H,null,0),So.mov(H,0,1)),p?q&&K():zot(z)||Q(),"baseline"==s||D||(H.y+=o/32),Z()}function K(){var e=p.boundsToGlobal(),t=X.boundsToGlobal(e,!0);X.setBounds(t.x,t.y,t.width,t.height)}function Z(){So.pos(H,"left"==l||"right"==l?p||X.background?x:0:null,"top"==s||"baseline"==s||"bottom"==s?p||X.background?k:0:null,"right"==l,"bottom"==s),H.x+=T,H.y+=A}function J(){W&&(W.x=H.x,W.y=H.y,X.addChildAt(W,X.background?1:0))}zot(p)&&zot(z)&&(F=new createjs.Shape,X.hitArea=F),U(),zot(p)||("Pattern"==p.type?(X.backing=new So.Container(X.width+2*x,X.height+2*k,null,null,!1).centerReg(null,null,!1),-1!=i&&0<a&&(new So.Rectangle(X.width+2*x-2,X.height+k-2,"#666",null,null,v,null,null,!1).center(X.backing).shadow=new createjs.Shadow(i,3,3,a)),V=new So.Rectangle(X.width+2*x,X.height+2*k,z,null,null,v,null,null,!1).addTo(X.backing),p.centerReg(V),p.setMask(V),X.backing.pattern=p):X.backing=p,X.backing.center(X,0),p=X.backing,K(),q=!0),Z(),J(),Object.defineProperty(X,"text",{get:function(){return" "==H.text&&_?"":H.text},set:function(e){_=!1,""===e&&(e=" ",_=!0),H.text=String(e),W&&(W.text=String(e)),U(),zot(h)||zot(B)||(ee(),W&&J())}}),Object.defineProperty(X,"size",{get:function(){return o},set:function(e){o=I?Math.min(e,I):e,R[3]=o+"px",this.label.font=R.join(" "),W&&(W.font=R.join(" ")),U()}}),Object.defineProperty(X,"bold",{get:function(){return Boolean(this.label.font.match("bold"))},set:function(e){R[2]=e?"bold":"normal",this.label.font=R.join(" "),W&&(W.font=R.join(" "))}}),Object.defineProperty(X,"italic",{get:function(){return Boolean(this.label.font.match("italic"))},set:function(e){R[0]=e?"italic":"normal",this.label.font=R.join(" "),W&&(W.font=R.join(" "))}}),Object.defineProperty(X,"variant",{get:function(){return Boolean(this.label.font.match("small-caps"))},set:function(e){R[1]=e?"small-caps":"normal",this.label.font=R.join(" "),W&&(W.font=R.join(" "))}}),Object.defineProperty(X,"font",{get:function(){return R[4]},set:function(e){zot(e)||(R[4]=e,this.label.font=R.join(" "),W&&(W.font=R.join(" ")))}}),Object.defineProperty(X,"align",{get:function(){return l},set:function(e){zot(e)||(l=e,this.label.textAlign=l,W&&(W.textAlign=l),U())}}),Object.defineProperty(X,"valign",{get:function(){return s},set:function(e){zot(e)||(s=e,U())}}),Object.defineProperty(X,"color",{get:function(){return n},set:function(e){r==n&&(r=e),n=e,H.color=n,So.OPTIMIZE||!zns&&OPTIMIZE||!X.stage||X.stage.update()}}),this.setColorRange=function(e,t){return G=zot(t)?(N=X.color,e):(N=zot(e)?X.color:e,t),X};var $=0;function ee(){X.size=200;for(var e=0;g<B/2&&(X.height>B||X.width>h)&&(e++,X.size=X.size/2,!(50<e)););for(e=0;X.height<=B&&X.width<=h&&(e++,X.size=Math.ceil(X.size+1),!(50<e)););X.size=X.size-1,J()}Object.defineProperty(X,"colorRange",{get:function(){return $},set:function(e){$=e,zot(N)||zot(G)||(X.color=So.colorRange(N,G,e))}}),Object.defineProperty(X,"backgroundColor",{get:function(){return z},set:function(e){z=e,X.background?X.background.color=e:X.backing?X.backing.color=e:Q(),So.OPTIMIZE||!zns&&OPTIMIZE||!X.stage||X.stage.update()}}),Object.defineProperty(X,"outlineColor",{get:function(){return f},set:function(e){f=e,W&&(W.color=f),So.OPTIMIZE||!zns&&OPTIMIZE||!X.stage||X.stage.update()}}),Object.defineProperty(X,"rollColor",{get:function(){return r},set:function(e){r=e}}),this._enabled=!0,Object.defineProperty(X,"enabled",{get:function(){return X._enabled},set:function(e){qe(X,e),H.color=n,X.mouseChildren=!1,So.OPTIMIZE||!zns&&OPTIMIZE||!X.stage||X.stage.update()}}),this.showRollColor=function(e){return zot(e)&&(e=!0),H.color=e?r:n,X.stage&&X.stage.update(),X},this.mouseoverEvent=this.on("mouseover",function(e){X.showRollColor&&X.showRollColor()}),this.mouseoutEvent=this.on("mouseout",function(e){X.rollPersist||X.showRollColor(!1)}),this.pressupEvent=this.on("pressup",function(e){X.rollPersist&&X.showRollColor(!1)}),Object.defineProperty(X,"labelWidth",{get:function(){return h},set:function(e){0<e&&(h=e,X.label.lineWidth=e,W&&(W.lineWidth=e)),B&&ee(),So.OPTIMIZE||!zns&&OPTIMIZE||!X.stage||X.stage.update()}}),Object.defineProperty(X,"labelHeight",{get:function(){return B},set:function(e){0<e&&(B=e),h&&ee(),So.OPTIMIZE||!zns&&OPTIMIZE||!X.stage||X.stage.update()}}),zot(h)||zot(B)||ee(),So.styleTransforms(this,L),this.clone=function(e){return X.cloneProps(new So.Label(e||!So.isPick(Y[0])?X.text:Y[0],e||!So.isPick(Y[1])?o:Y[1],e||!So.isPick(Y[2])?t:Y[2],e||!So.isPick(Y[3])?n:Y[3],r,i,a,l,s,e||!So.isPick(Y[4])?c:Y[4],e||!So.isPick(Y[5])?u:Y[5],d,h,g,zot(p)?null:p.clone(e),f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,I,E,this.group,M))}},So.extend(So.Label,So.Container,"clone","zimContainer"),So.LabelOnPath=function(o,i,a,l,e,t,n,r,s,c,u){var d;if(d=zob(So.LabelOnPath,arguments,"label, path, percentAngle, percents, showPath, allowToggle, interactive, onTop, style, group, inherit",this))return d;z_d("54.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="LabelOnPath",this.group=c;var h=!1===s?{}:So.getStyle(this.type,this.group,u);zot(o)&&(o=null!=h.label?h.label:new So.Label("Label on Path")),zot(i)&&(i=null!=h.path?h.path:new So.Squiggle({points:[[0,0,0,0,-86,57,86,-57],[300,150,0,0,-133,21,133,-21]]})),zot(a)&&(a=null!=h.percentAngle?h.percentAngle:100),zot(l)&&(l=null!=h.percents?h.percents:null),zot(e)&&(e=null==h.showPath||h.showPath),zot(t)&&(t=null==h.allowToggle||h.allowToggle),zot(n)&&(n=null==h.interactive||h.interactive),zot(r)&&(r=null!=h.onTop&&h.onTop);var g=o.color;i.addTo(this);var p=this;this.path=i,this.allowToggle=t,i.interactive=n,"string"==typeof o&&(o=new So.Label(o));var f=i.alpha;e||i.alp(0),i.onTop=r;var m=this.letters=(new So.Container).addTo(this);if(!l){l=[];for(var z=0;z<o.text.length;z++)l.push(So.decimals(1/(o.text.length-("Blob"==i.type?0:1))*100*z))}function y(){for(var e=m.numChildren-1;0<=e;e--)m.getChildAt(e).dispose();p.numLetters=o.text.length;for(e=0;e<p.numLetters;e++){var t=o.clone();t.text=o.text[e],t.centerReg(m).reg(null,t.height),""!=t.text&&" "!=t.text&&t.expand(0),p.allowToggle&&(t.cursor="pointer"),t.on("mousedown",function(){p.allowToggle&&p.toggle()})}p.resize()}this.percents=l,this.resize=function(){for(var e=i.segmentRatios,t=i.segmentPoints,o=0;o<this.numLetters;o++){var n,r=i.getCurvePoint(l[o]/100,e,t,!0);r&&((n=this.globalToLocal(r.x,r.y))&&m.getChildAt(o).loc(n).rot((180<r.angle?r.angle-360:r.angle)*a/100))}return this},y(),this.showPath=function(e){return this.toggle(!0),i.toggle(e),this},this.hidePath=function(){return this.toggle(!1),this},Object.defineProperty(p,"text",{get:function(){return o.text},set:function(e){o.text=e,l=[];for(var t=0;t<o.text.length;t++)l.push(So.decimals(1/(o.text.length-("Blob"==i.type?0:1))*100*t));y()}}),Object.defineProperty(this,"color",{get:function(){return g},set:function(e){g=e;for(var t=0;t<p.letters.numChildren;t++)p.letters.getChildAt(t).color=g;p.stage&&p.stage.update()}}),Object.defineProperty(p,"interactive",{get:function(){return n},set:function(e){n=e,i.interactive=e,this.ticker&&So.Ticker.remove(this.ticker),n&&(this.ticker=So.Ticker.add(function(){p.resize()}))}}),this.interactive&&(this.ticker=So.Ticker.add(function(){p.resize()}));var b=p.toggled=e;this.toggle=function(e){if(this.allowToggle)return(b=zot(e)?!b:!!e)?(i.alp(f),this.interactive&&(i.showControls(),m.mouseEnabled=!1,m.mouseChildren=!1,m.cursor="default",this.controlHideEvent&&i.off("controlshide",this.controlHideEvent),this.controlHideEvent=i.on("controlshide",function(){m.mouseEnabled=!0,m.mouseChildren=!0,m.cursor="pointer",f=i.alpha,i.alp(0),b=!1,p.toggled=b,p.stage&&p.stage.update()},null,!0))):(f=i.alpha,i.alp(0),m.mouseEnabled=!0,m.mouseChildren=!0,m.cursor="pointer"),p.toggled=b,p.stage&&p.stage.update(),p},p.toggle(!0),So.styleTransforms(this,h),this.clone=function(){return p.cloneProps(new So.LabelOnPath(p.label.clone(),p.path.clone(),a,So.copy(l),e,t,n,r,s,this.group,u))},this.dispose=function(e,t,o){return this.ticker&&So.Ticker.remove(this.ticker),o||this.zimContainer_dispose(!0),!0}},So.extend(So.LabelOnPath,So.Container,["clone","dispose"],"zimContainer",!1),So.LabelOnArc=function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f){var m;if(m=zob(So.LabelOnArc,arguments,"label, size, font, color, radius, flip, spacing, letterSpacing, angles, showCircle, arcColor, arcBorderColor, arcBorderWidth, style, group, inherit",this))return m;z_d("54.55"),this.group=p;var z=!1===g?{}:So.getStyle("LabelOnArc",this.group,f);zot(t)&&(t=null!=z.size?z.size:30),zot(e)&&(e=null!=z.label?z.label:new So.Label("Label on Arc",t)),zot(o)&&(o=null!=z.font?z.font:"verdana"),zot(n)&&(n=null!=z.color?z.color:"white"),zot(r)&&(r=null!=z.radius?z.radius:100),zot(i)&&(i=null!=z.flip&&z.flip),zot(a)&&(a=null!=z.spacing?z.spacing:0),zot(l)&&(l=null!=z.letterSpacing?z.letterSpacing:5),zot(s)&&(s=null!=z.angles?z.angles:null),zot(c)&&(c=null!=z.showCircle&&z.showCircle),zot(u)&&(u=null!=z.arcColor?z.arcColor:null),zot(d)&&(d=null!=z.arcBorderColor?z.arcBorderColor:null),zot(h)&&(h=null!=z.arcBorderWidth?z.arcBorderWidth:null);var y=this.outerRadius=r+a+e.height;this.innerRadius=r+a,this.zimContainer_constructor(-y,-y,2*y,2*y,!1),this.type="LabelOnArc";var b,v=this;"Label"!=e.type&&(e=new So.Label(e,t,o,n)),v.text=e.text,i&&(b=e.text.split("").reverse().join(""),e.text=b);var w=v.letters=new So.Container(this.width,this.height).centerReg(this),C=0,x=[0];v.numLetters=e.text.length;for(var k=v.labels=[],T=0;T<v.numLetters;T++){var A=e.clone();k.push(A),A.text=e.text[T];var P=180*Math.atan((A.width+l)/2/(r+a))/Math.PI*2;x.push(P),C+=P;var S=new So.Container(A.width,A.height);A.centerReg(S).rot(i?180:0),S.centerReg(w).reg(null,r+a+A.height+(i?.13*A.height:0))}if(s){for(T=C=0;T<s.length;T++)C+=s[T];C+=s[s.length-1]/2}else{s=[];for(var T=0;T<x.length-1;T++)s[T]=Math.round((x[T]+x[T+1])/2*100)/100}this.letterHeight=e.height,this.angles=s;for(var B=this.startAngle=-C/2,I=B,T=0;T<w.numChildren;T++)A=w.getChildAt(T),I=(s[T],A.rotation=I+s[T]);var E=this.circle=new So.Circle(r);c&&E.addTo(this);var O=this.arc=(new So.Shape).addTo(this);(u||d||h)&&(0<h&&zot(d)?d="#000000":zot(h)&&!zot(d)&&(h=2),O.graphics.f(null).s(d).ss(h).arc(0,0,r,(B-90)*Math.PI/180,(B-90+C)*Math.PI/180)),Object.defineProperty(this,"color",{get:function(){return n},set:function(e){n=e;for(var t=0;t<v.labels.length;t++)v.labels[t].color=n;v.stage&&v.stage.update()}}),So.styleTransforms(this,z),this.clone=function(){return v.cloneProps(new So.LabelOnArc(e,t,o,n,r,i,a,l,s,c,u,d,h,g,this.group,f))}},So.extend(So.LabelOnArc,So.Container,"clone","zimContainer",!1),So.LabelLetters=function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p){var f;if(f=zob(So.LabelLetters,arguments,"label, align, valign, letterSpacing, letterSpacings, lineSpacing, lineSpacings, lineHeight, lineAlign, lineValign, cache, rtl, style, group, inherit",this))return f;z_d("54.57"),this.group=g;var m=!1===h?{}:So.getStyle("LabelLetters",this.group,p);zot(e)&&(e=null!=m.label?m.label:new So.Label("Label Letters")),zot(t)&&(t=null!=m.align?m.align:"center"),zot(o)&&(o=null!=m.valign?m.valign:"center"),zot(n)&&(n=null!=m.letterSpacing?m.letterSpacing:5),zot(r)&&(r=null!=m.letterSpacings?m.letterSpacings:null),zot(l)&&(l=null!=m.lineHeight?m.lineHeight:null),zot(i)&&(i=null!=m.lineSpacing?m.lineSpacing:5),zot(a)&&(a=null!=m.lineSpacings?m.lineSpacings:null),zot(d)&&(d=null!=m.rtl&&m.rtl),zot(s)&&(s=null!=m.lineAlign?m.lineAlign:d?"right":"left"),zot(c)&&(c=null!=m.lineValign?m.lineValign:"bottom"),zot(u)&&(u=null!=m.cache&&m.cache),this.zimContainer_constructor(null,null,null,null,!1),this.type="LabelLetters";var z=this,y=z.letterData=[];function b(o){var n,l=[];d&&(G=-1,n=(o=(o=(o=(o=(o=o.replace(/[\u0591-\u07FF]+/gi,function(e){return e.split("").reverse().join("")})).replace(/([^\u0591-\u07FF ])([\u0591-\u07FF])/gi,"$1-!!-$2")).replace(/([\u0591-\u07FF])([^\u0591-\u07FF ])/gi,"$1-!!-$2")).replace(/([^\u0591-\u07FF]) ([\u0591-\u07FF])/gi,"$1-!!- -!!-$2")).replace(/([\u0591-\u07FF]) ([^\u0591-\u07FF])/gi,"$1-!!- -!!-$2")).split(/-!!-/g),loop(n,function(e,t){e.match(/[\u0591-\u07FF]/i)&&(n[t]=e.split(" ").reverse().join(" "))}),o=n.join("")),o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=o.replace(/\n|\r/g,"<br>")).replace(/<strong>|<strong \/>|<strong\/>/gi,"<b>")).replace(/<\/strong>/gi,"</b>")).replace(/<em>|<em \/>|<em\/>/gi,"<i>")).replace(/<\/em>/gi,"</i>")).replace(/\\n|\\r/g,"<br>")).replace(/<br>|<br \/>|<br\/>(<\/br>)?/gi,"<br>")).replace(/<b/gi,"<b")).replace(/<i/gi,"<i")).replace(/<u/gi,"<u")).replace(/<br/gi,"<br")).replace(/<a/gi,"<a")).replace(/<font/gi,"<font");var r,i=[/<(a|i|u|f|br|\/a|\/i|\/u|\/f|\/b)[^>]*>/g,/<(a|i|u|f|br|\/a|\/i|\/u|\/f|b)[^>]*>/g,/<(b|i|u|f|br|\/b|\/i|\/u|\/f|\/a)[^>]*>/g,/<(b|i|u|f|br|\/b|\/i|\/u|\/f|a)[^>]*>/g,/<(b|a|u|f|br|\/b|\/a|\/u|\/f|\/i)[^>]*>/g,/<(b|a|u|f|br|\/b|\/a|\/u|\/f|i)[^>]*>/g,/<(b|a|i|f|br|\/b|\/a|\/i|\/f|\/u)[^>]*>/g,/<(b|a|i|f|br|\/b|\/a|\/i|\/f|u)[^>]*>/g,/<(b|a|i|u|br|\/b|\/a|\/i|\/u|\/f)[^>]*>/g,/<(b|a|i|u|br|\/b|\/a|\/i|\/u|f)[^>]*>/g];So.loop(["b","a","i","u","font"],function(e,t){r=o.replace(i[2*t],""),a("font"==e?r.split("<font "):"a"==e?r.split("<a "):r.split("<"+e+">"),e,0),a((r=o.replace(i[2*t+1],"")).split("</"+e+">"),e,1)}),r=(r=o.replace(/<br>/gi,"@^#")).replace(/<(b|a|i|u|f|\/b|\/a|\/i|\/u|\/f)[^>]*>/g,""),arr=r.split("@^#");var e=arr.join("\n");function a(e,r,i){var o,a;1<e.length&&("font"!=r&&"a"!=r||0!=i?(e.pop(),o=0,So.loop(e,function(e){o+=e.length;var t=l[o];t||(l[o]=[]),(t=l[o])[i]?t[i].push(r):t[i]=[r]})):(a=e[0].length,So.loop(e,function(e,t){var o,n;0!=t&&((o=l[a])||(l[a]=[]),o=l[a],n=e.split(">"),o[i]?o[i].push(r+" "+n[0]):o[i]=[r+" "+n[0]],a+=n[1].length)})))}return r=arr.join(""),a(arr,"br",0),{text:r,data:l,original:e}}if("Label"!=e.type?(data=b(e),y=data.data,e=new So.Label(data.text)):(data=b(e.text),y=data.data,e.text=data.text),z.text=data.original,z.numLetters=e.text.length,r&&!Array.isArray(r)&&(r=null),r)for(v=0;v<z.numLetters;v++)zot(r[v])&&(r[v]=n);else{r=[];for(var v=0;v<z.numLetters;v++)r.push(n)}if(z.letterSpacings=r,a&&!Array.isArray(a)&&(a=null),a)for(v=0;v<z.numLetters-1;v++)zot(a[v])&&(a[v]=i);else{a=[];for(var v=0;v<z.numLetters-1;v++)a.push(i)}z.lineSpacings=a,z.labels=[],z.lines=[[]];var w=[],C=[],x=[0],k=0,T=0,A=0,P=0,S=0,B=y,I=!1,E=!1,O=!1,M=!1,j=!1,L=!1,Y=!1,_=!1,D=(e.group,!1),X=!1,R=!1,W=!1;z.rolls=[[]];for(v=0;v<z.numLetters;v++){var H,M=!1;B[v]&&(B[v][1]&&(0<=B[v][1].indexOf("b")&&(I=!1),0<=B[v][1].indexOf("i")&&(E=!1),0<=B[v][1].indexOf("u")&&(O=!1),So.loop(B[v][1],function(e){return e.match(/^font/i)?(R=j=!1,W&&z.rolls.push([]),void(Y=_=L=W=!1)):void(e.match(/^a/i)&&(X=D=!1))})),B[v][0]&&(0<=B[v][0].indexOf("b")&&(I=!0),0<=B[v][0].indexOf("i")&&(E=!0),0<=B[v][0].indexOf("u")&&(O=!0),M=0,So.loop(B[v][0],function(e){"br"==e&&M++}),So.loop(B[v][0],function(e){var t,o;return e.match(/^font/i)?((o=e.match(/ color\s?=\s?(\S*)/i))&&(j=o[1],0<=(t=So.colors.indexOf(j))&&(j=So.colorsHex[t]),j=j.replace(/'/g,"")),(o=e.match(/size\s?=\s?(\S*)/i))&&(L=o[1]),(o=e.match(/backgroundColor\s?=\s?(\S*)/i))&&(R=o[1],0<=(t=So.colors.indexOf(R))&&(R=So.colorsHex[t]),R=R.replace(/'/g,"")),(o=e.match(/rollBackgroundColor\s?=\s?(\S*)/i))&&(W=o[1],0<=(t=So.colors.indexOf(W))&&(W=So.colorsHex[t]),W=W.replace(/'/g,"")),(o=e.match(/group\s?=\s?(\S*)/i))&&(Y=o[1]),void((o=e.match(/family\s?=\s?(.*)/i))&&(_=(_=o[1]).split(/\ssize\s?=|\scolor\s?=|\sgroup\s?=/i)[0]))):e.match(/^a/i)?((o=e.match(/href\s?=\s?(\S*)/i))&&(D=o[1]),void((o=e.match(/target\s?=\s?(\S*)/i))&&(X=o[1]))):void 0}))),Y?H=new Label({text:e.text[v],group:Y}):(H=e.clone()).text=e.text[v],z.labels.push(H),I&&(H.bold=!0),E&&(H.italic=!0),j&&(H.color=j),R&&(H.backgroundColor=R);var F=zot(H.backgroundColor)?r[v]:-.5;W&&(H.rollIndex=z.rolls.length-1,H.zrbc=W,H.zobc=H.backgroundColor,z.rolls[H.rollIndex].push(H),H.expand(0),H.on("mouseover",V),H.on("mouseout",N)),D&&(H.expand(F,0),H.zurl=D,H.ztar=X,H.cur(),H.on("click",function(e){var t=e.currentTarget;N(e),t.ztar||(t.ztar="_self"),zgo(t.zurl,t.ztar)})),L&&(H.size=L),_&&(H.font=_),M&&(k+=(zot(l)?A:l)+a[P],x.push(k),C.push(zot(l)?A:l),w.push(T),S=Math.max(S,T)),M&&(1<M&&So.loop(M-1,function(e){z.lines.push([]),k+=(zot(l)?A:l)+a[P],x.push(k),C.push(zot(l)?A:l),w.push(0),P++}),T=A=0,z.lines.push([]),P++),T+=H.width+F,A=Math.max(A,H.height),v==z.numLetters-1&&(w.push(T),C.push(A),S=Math.max(S,T)),z.lines[P].push(H),O&&(H.underline=new So.Line(H.width+F+1,1,H.color).center(H,this).mov(0,H.height/2))}function V(e){var t=e.currentTarget,o=z.rolls[t.rollIndex];So.loop(o,function(e){e.backgroundColor=t.zrbc}),t.stage&&t.stage.update()}function N(e){var t=e.currentTarget,o=z.rolls[t.rollIndex];So.loop(o,function(e){e.backgroundColor=t.zobc}),t.stage&&t.stage.update()}for(var G=0,q=0;q<z.lines.length;q++){var Q,U=z.lines[q],T=w[q],A=C[q],k=x[q];for(Z="left"==s?0:"right"==s?S-T:(S-T)/2,Q=k,v=0;v<U.length;v++){G++,u&&H.cache(),(H=U[v]).regX="left"==t?0:"right"==t?H.width:H.width/2,H.regY="top"==o?0:"bottom"==o?H.height:H.height/2;var K=Q+("top"==o?0:"bottom"==o?H.height:H.height/2);"center"==c||"middle"==c?K+=(C[q]-H.height)/2:"bottom"==c&&(K+=C[q]-H.height);var F=zot(H.backgroundColor)?r[G-1]:-.5,Z="left"==t?(H.loc(Z,K,this),H.x+H.width+F):"right"==t?(H.loc(Z+H.width,K,this),H.x+F):(H.loc(Z+H.width/2,K,this),H.x+H.width/2+F)}}this.getBounds()||this.setBounds(0,0,0,0),this.regX=this.getBounds().x,this.regY=this.getBounds().y,Object.defineProperty(this,"color",{get:function(){return this.color},set:function(e){this.color=e;for(var t=0;t<z.numChildren;t++)z.getChildAt(t).color=this.color;z.stage&&z.stage.update()}}),this.dispose=function(){So.gD(this),So.loop(z.labels,function(e){e.removeFrom(),e.dispose()}),z.removeFrom()},So.styleTransforms(this,m),this.clone=function(){return z.cloneProps(new So.LabelLetters(e,t,o,n,r,i,a,l,s,c,u,d,h,this.group,p))}},So.extend(So.LabelLetters,So.Container,"clone","zimContainer",!1),So.Button=function(n,r,o,i,a,l,s,t,c,e,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,I,E,O,M,j,L,Y,_,D,X,R,W,H,F,V,N,G,q,Q,U,K,Z){var J;if(J=zob(So.Button,arguments,"width, height, label, backgroundColor, rollBackgroundColor, color, rollColor, borderColor, borderRollColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, dashed, backing, rollBacking, rollPersist, icon, rollIcon, toggle, toggleBackgroundColor, rollToggleBackgroundColor, toggleColor, rollToggleColor, toggleBacking, rollToggleBacking, toggleIcon, rollToggleIcon, toggleEvent, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, waitBacking, rollWaitBacking, waitIcon, rollWaitIcon, align, valign, indent, indentHorizontal, indentVertical, style, group, inherit",this))return J;z_d("55"),this.group=K;var $=!1===U?{}:So.getStyle("Button",K,Z);zot(n)&&(n=null!=$.width?$.width:200),zot(r)&&(r=null!=$.height?$.height:60),this.zimContainer_constructor(n,r,null,null,!1),this.type="Button",zot(i)&&(i=null!=$.backgroundColor?$.backgroundColor:"#C60"),zot(a)&&(a=null!=$.rollBackgroundColor?$.rollBackgroundColor:"#F93"),zot(l)&&(l=null!=$.color?$.color:"white"),zot(s)&&(s=null!=$.rollColor?$.rollColor:"white");var ee=function(){return arguments}(i,a,l,s);i=zik(i),a=zik(a),l=zik(l),s=zik(s);var te=t,oe=e;zot(t)&&(t=null!=$.borderColor?$.borderColor:null),zot(e)&&(e=null!=$.borderWidth?$.borderWidth:null),t<0||e<0?t=e=null:null!=t&&null==e&&(e=1),zot(c)&&(c=null!=$.borderRollColor?$.borderRollColor:t),zot(u)&&(u=null!=$.corner?$.corner:20),zot(d)&&(d=null!=$.shadowColor?$.shadowColor:"rgba(0,0,0,.3)"),zot(h)&&(h=null!=$.shadowBlur?$.shadowBlur:14),zot(g)&&(g=null!=$.hitPadding?$.hitPadding:0),zot(V)&&(V=null!=$.align?$.align:"center"),zot(N)&&(N=null!=$.valign?$.valign:"center"),zot(G)&&(G=null!=$.indent?$.indent:10),zot(q)&&(q=null!=$.indentHorizontal?$.indentHorizontal:G),zot(Q)&&(Q=null!=$.indentVertical?$.indentVertical:G),zot(p)&&(p=null!=$.gradient?$.gradient:0),zot(f)&&(f=null!=$.gloss?$.gloss:0),zot(o)&&(o=zot(v)?null!=$.label?$.label:"PRESS":"");var ne=(!zot(C)||!zot(P)||!zot(S)||!zot(B)||!zot(I))&&zot(O)&&zot(R)&&zot(W);ne&&zot(E)&&(E=So.mobile()?"mousedown":"click"),"string"!=typeof o&&"number"!=typeof o||(o=new So.Label({text:o,size:null!=$.size?$.size:36,font:null!=$.font?$.font:"arial",color:null!=$.color?$.color:l,rollColor:null!=$.rollColor?$.rollColor:s,align:V,valign:N,rollPersist:null!=$.rollPersist&&$.rollPersist,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",shiftVertical:null!=$.shiftVertical?$.shiftVertical:0,shiftHorizontal:null!=$.shiftHorizontal?$.shiftHorizontal:0,style:!1,group:this.group})),zot(b)&&(b=null!=$.rollPersist&&$.rollPersist),this.rollPersist=b,zot(m)&&(m=null!=$.dashed&&$.dashed),zot(C)||"Label"!=C.type||zon&&zogy("Button() - do not pass Label to toggle parameter - just pass a String"),zot(x)&&(x=null!=$.toggleBackgroundColor?$.toggleBackgroundColor:i),zot(k)&&(k=null!=$.rollToggleBackgroundColor?$.rollToggleBackgroundColor:a),zot(T)&&(T=null!=$.toggleColor?$.toggleColor:o.color),zot(A)&&(A=null!=$.rollToggleColor?$.rollToggleColor:o.rollColor),zot(j)&&(j=null!=$.waitBackgroundColor?$.waitBackgroundColor:i),zot(L)&&(L=null!=$.rollWaitBackgroundColor?$.rollWaitBackgroundColor:a),zot(Y)&&(Y=null!=$.waitColor?$.waitColor:o.color),zot(_)&&(_=null!=$.rollWaitColor?$.rollWaitColor:o.rollColor);var re=this;this.mouseChildren=!1,this.cursor="pointer",re.focus=!1,re.rolled=!1;var ie=Bo(M);zot(z)&&(z=null!=$.backing?$.backing.clone():null),zot(z)?re.backing=new So.Rectangle(n,r,i,null,null,u,m,null,!1).centerReg(null,null,!1):re.backing=z,re.rollBacking=zot(y)?null!=$.rollBacking?$.rollBacking.clone():null:y,re.waitBacking=zot(R)?null!=$.waitBacking?$.waitBacking.clone():null:R,re.rollWaitBacking=zot(W)?null!=$.rollWaitBacking?$.rollWaitBacking.clone():null:W,re.toggleBacking=zot(P)?null!=$.toggleBacking?$.toggleBacking.clone():null:P,re.rollToggleBacking=zot(S)?null!=$.rollToggleBacking?$.rollToggleBacking.clone():null:S;for(var ae,le,se=["backing","rollBacking","toggleBacking","rollToggleBacking","waitBacking","rollWaitBacking"],ce=0;ce<se.length;ce++)ae=se[ce],(le=re[ae])&&("Pattern"==le.type?le=ue(ae,le):-1!=d&&0<h&&(le.shadow=new createjs.Shadow(d,3,3,h)),le.x=n/2,le.y=r/2);function ue(e,t){re[e]=new So.Container(n,r,null,null,!1).centerReg(null,null,!1),-1!=d&&0<h&&(new So.Rectangle(n-2,r-2,"#666",null,null,u,null,null,!1).center(re[e]).shadow=new createjs.Shadow(d,3,3,h));var o=re[e].mask=new So.Rectangle(n,r,0<=e.indexOf("roll")?a:i,null,null,u,null,null,!1).addTo(re[e]);return t.centerReg(o),t.setMask(o.shape),re[e].pattern=t,re[e]}re.addChild(re.backing),e&&(re.border=new So.Rectangle(n,r,"rgba(0,0,0,0)",t,e,u,m,null,!1),re.addChild(re.border)),re.icon=zot(v)?null!=$.icon?$.icon.clone():null:v,re.rollIcon=zot(w)?null!=$.rollIcon?$.rollIcon.clone():null:w,re.waitIcon=zot(H)?null!=$.waitIcon?$.waitIcon.clone():null:H,re.rollWaitIcon=zot(F)?null!=$.rollWaitIcon?$.rollWaitIcon.clone():null:F,re.toggleIcon=zot(B)?null!=$.toggleIcon?$.toggleIcon.clone():null:B,re.rollToggleIcon=zot(I)?null!=$.rollToggleIcon?$.rollToggleIcon.clone():null:I;for(var de,he,ge,pe,fe,me,ze,ye=["icon","rollIcon","toggleIcon","rollToggleIcon","waitIcon","rollWaitIcon"],ce=0;ce<ye.length;ce++){var be=ye[ce],ve=re[be];ve&&(ve.x=n/2,ve.y=r/2)}function we(){(pe=new createjs.Shape).graphics.f("#000").r(-g,-g,n+2*g,r+2*g),re.hitArea=ge=pe}function Ce(){re.toggled?(zot(C)||(re.label.text=!0===C?fe:C),zot(T)||(re.label.color=T),zot(A)||(re.label.rollColor=A),re.rolled?(re.rollToggleBacking?je("rollToggleBacking",re.rollToggleBacking):re.toggleBacking&&je("toggleBacking",re.toggleBacking),re.rollToggleIcon?je("rollToggleIcon",re.rollToggleIcon):re.toggleIcon&&je("toggleIcon",re.toggleIcon),zot(z)&&zot(re.rollToggleBacking)&&(re.backing.color=k)):(re.toggleBacking&&je("toggleBacking",re.toggleBacking),re.toggleIcon&&je("toggleIcon",re.toggleIcon),zot(z)&&(re.backing.color=x))):(re.label.color=me,re.label.rollColor=ze,re.label.text=fe,xe()),re.stage&&re.stage.update()}function xe(){re.rolled?(zot(z)&&!re.rollBacking&&(re.backing.color=a),re.rollBacking?je("rollBacking",re.rollBacking):re.backing&&je("backing",re.backing),re.rollIcon?je("rollIcon",re.rollIcon):re.icon?je("icon",re.icon):je("icon")):(zot(z)&&(re.backing.color=i),re.backing&&je("backing",re.backing),re.icon?je("icon",re.icon):je("icon"))}re.icon&&re.addChild(re.icon),Array.isArray(u)||(u=[u,u,u,u]),0<p&&((de=new createjs.Shape).graphics.lf(["rgba(255,255,255,"+p+")","rgba(0,0,0,"+p+")"],[0,1],0,0,0,r-e),de.graphics.rc(e/2,e/2,n-e,r-e,u[0],u[1],u[2],u[3]),this.addChild(de)),0<f&&((he=new createjs.Shape).graphics.f("rgba(255,255,255,"+f+")"),he.graphics.rc(e/2,e/2,n-e,(r-e)/2,u[0],u[1],0,0),he.graphics.f("rgba(0,0,0,"+f+")"),he.graphics.rc(e/2,r/2,n-e,(r-e)/2,0,0,u[2],u[3]),this.addChild(he)),0<g&&we(),this.addChild(o),o.center(this),o.y+=1,this.label=o,So.pos(o,"left"==V||"right"==V?q:null,"top"==N||"bottom"==N?Q:null,"right"==V,"bottom"==N),this.toggled=!1,ne&&(fe=o.text,me=o.color,ze=o.rollColor,this.on(E,function(){re.toggled=!re.toggled,Ce()}));var ke,Te,Ae,Pe,Se=!(this.toggle=function(e){return ne?(zot(e)?re.toggled=!re.toggled:re.toggled=e,Ce()):zon&&zogy("Button() - can't toggle with wait parameters provided"),re}),Be=re.waiting=!1,Ie=re.label.color,Ee=re.label.rollColor,Oe=this.on("mousedown",function(){Se=!0,Me()});function Me(){zot(O)&&zot(R)&&zot(W)||re.waiting||(Be=!0,zot(X)&&(X=!0),D&&(Pe=re.stage.on("stagemousedown",function(e){re.hitTestPoint(e.stageX/So.scaX,e.stageY/So.scaY)||re.clearWait()},null,!0)),setTimeout(function(){re.waiting=!0},50),Te=o.text,zot(Y)||(re.label.color=Y),zot(_)||(re.label.rollColor=_),Ae=re.enabled,!X&&re.enabled&&(re.enabled=!1),zot(O)||(re.label.text=O),re.rolled?(zot(z)&&!re.rollWaitBacking&&(re.backing.color=L),re.rollWaitBacking?je("rollWaitBacking",re.rollWaitBacking):re.waitBacking&&je("waitBacking",re.waitBacking),re.rollWaitIcon?je("rollWaitIcon",re.rollWaitIcon):re.waitIcon&&je("waitIcon",re.waitIcon)):(zot(z)&&!re.waitBacking&&(re.backing.color=j),re.waitBacking&&je("waitBacking",re.waitBacking),re.waitIcon&&je("waitIcon",re.waitIcon)),zot(M)&&(M="s"==ie?5:5e3),ke&&ke.clear(),ke=So.timeout(M,function(){re.enabled||(re.enabled=Ae),re.clearWait(),re.dispatchEvent("waited")}),re.stage&&re.stage.update())}function je(e){if(0<=e.indexOf("con")){for(var t=0;t<ye.length;t++){var o=ye[t],n=re[o];re.removeChild(n)}re[e]&&re.addChildAt(re[e],1)}else{if(!re[e])return;for(t=0;t<se.length;t++){var r=se[t],i=re[r];re.removeChild(i)}re[e]&&re.addChildAt(re[e],0)}}this.wait=function(){Me()},this.clearWait=function(){return ke&&(Pe&&re.stage.off("stagemousedown",Pe),ke.clear(),re.label.text=Te,xe(),re.label.color=Ie,re.label.rollColor=Ee,setTimeout(function(){re.waiting=!1},55),Be=!1,re.stage&&re.stage.update()),re},this.removeWait=function(){return re.clearWait(),O=null,re.waitBacking=null,re.rollWaitBacking=null,re.off("mousedown",Oe),re},this.on("pressup",function(){Se=!1,re.rollPersist&&!Le&&Ye()});var Le=!1;function Ye(){re.rolled=!1,Be||re.waiting?(zot(z)&&zot(re.waitBacking)&&(re.backing.color=zot(j)?i:j),re.waitBacking?je("waitBacking",re.waitBacking):je("backing",re.backing),re.waitIcon?je("waitIcon",re.waitIcon):re.icon?je("icon",re.icon):je("icon")):re.toggled&&ne?(zot(z)&&zot(re.toggleBacking)&&(re.backing.color=x),re.toggleBacking?je("toggleBacking",re.toggleBacking):je("backing",re.backing),re.toggleIcon?je("toggleIcon",re.toggleIcon):re.icon?je("icon",re.icon):je("icon")):(zot(z)?re.backing.color=i:zot(z.mask)||(re.backing.mask.color=i),je("backing",re.backing),re.icon?je("icon",re.icon):je("icon")),re.border&&(re.border.borderColor=t),re.label.showRollColor&&re.label.showRollColor(!1),re.stage&&re.stage.update()}function _e(e,t){return zot(e)||(re.contains(re[e])&&(re.removeChild(re[e]),t&&re.addChildAt(t,0<=e.indexOf("con")?re.numChildren-1:0),re.stage&&re.stage.update()),t?(zot(z)&&"backing"==e&&(z=t),"Pattern"==t.type&&(t=ue(e,t)),re[e]=t,re[e].x=n/2,re[e].y=r/2):re[e]=null),re}this.on("mouseover",function(e){re.rolled=!0,Le=!0,Be?(zot(z)&&zot(re.rollWaitBacking)&&(re.backing.color=zot(L)?a:L),je("rollWaitBacking",re.rollWaitBacking),re.rollWaitIcon&&je("rollWaitIcon",re.rollWaitIcon)):ne&&re.toggled?(zot(z)&&zot(re.rollToggleBacking)&&(re.backing.color=k),je("rollToggleBacking",re.rollToggleBacking),re.rollToggleIcon&&je("rollToggleIcon",re.rollToggleIcon)):(zot(z)?re.backing.color=a:zot(z.mask)||(re.backing.mask.color=a),je("rollBacking",re.rollBacking),re.rollIcon&&je("rollIcon",re.rollIcon));re.border&&(re.border.borderColor=c);re.label.showRollColor&&re.label.showRollColor();re.stage&&re.stage.update()}),this.on("mouseout",function e(t){Le=!1;re.off("mouseout",e);re.rollPersist&&Se||Ye()}),Object.defineProperty(re,"text",{get:function(){return" "==o.text?"":o.text},set:function(e){o.text=e,fe=fe&&e,o.center(this),o.y+=1}}),Object.defineProperty(re,"color",{get:function(){return l},set:function(e){l=e,me=me&&l,re.label&&!zot(re.label.color)&&(re.label.color=l),So.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}}),Object.defineProperty(re,"rollColor",{get:function(){return s},set:function(e){s=e,ze=ze&&s,re.label&&(re.label.rollColor=s)}}),Object.defineProperty(re,"backgroundColor",{get:function(){return i},set:function(e){i=e,re.backing.color?re.backing.color=i:re.backing.mask&&(re.backing.mask.color=i),So.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}}),Object.defineProperty(re,"rollBackgroundColor",{get:function(){return a},set:function(e){a=e,re.rollBacking&&re.rollBacking.color?re.rollBacking.color=a:re.rollBacking&&re.rollBacking.mask&&(re.rollBacking.mask.color=a)}}),Object.defineProperty(re,"borderColor",{get:function(){return t},set:function(e){t=e,re.rolled||(re.backing&&re.backing.borderColor&&(re.backing.borderColor=e),re.border&&(re.border.borderColor=e))}}),Object.defineProperty(re,"borderRollColor",{get:function(){return c},set:function(e){c=e,re.rolled&&(re.backing&&re.backing.borderColor&&(re.backing.borderColor=e),re.border&&(re.border.borderColor=e))}}),Object.defineProperty(re,"hitPadding",{get:function(){return g},set:function(e){0==(g=e)?ge&&(this.hitArea=null):we()}}),this._enabled=!0,this.startMouseChildren=this.mouseChildren,Object.defineProperty(re,"enabled",{get:function(){return re._enabled},set:function(e){re._enabled&&(re.startMouseChildren=re.mouseChildren),e?(qe(re,e),re.mouseChildren=re.startMouseChildren):(Ye(),qe(re,e)),o.color,So.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}}),this.setBacking=function(e,t){_e(e,t)},!(this.setIcon=function(e,t){_e(e,t)})!==U&&So.styleTransforms(this,$),this.clone=function(e){var t=new So.Button(n,r,o.clone(),e||!So.isPick(ee[0])?i:ee[0],e||!So.isPick(ee[0])?a:ee[1],e||!So.isPick(ee[0])?l:ee[2],e||!So.isPick(ee[0])?s:ee[3],te,c,oe,u,d,h,g,p,f,m,zot(z)?null:re.backing.clone(),zot(y)?null:re.rollBacking.clone(),b,zot(v)?null:v.clone(),zot(w)?null:w.clone(),C,x,k,T,A,zot(P)?null:P.clone(),zot(S)?null:S.clone(),zot(B)?null:B.clone(),zot(I)?null:I.clone(),E,O,M,j,L,Y,_,D,X,zot(R)?null:R.clone(),zot(W)?null:W.clone(),zot(H)?null:H.clone(),zot(F)?null:F.clone(),V,N,G,q,Q,U,this.group);return re.cloneProps(t)},this.doDispose=function(e,t,o){return re.icon&&re.icon.dispose(),re.rollIcon&&re.rollIcon.dispose(),re.waitIcon&&re.waitIcon.dispose(),re.rollWaitIcon&&re.rollWaitIcon.dispose(),re.toggleIcon&&re.toggleIcon.dispose(),re.rollToggleIcon&&re.rollToggleIcon.dispose(),re.icon=re.rollIcon=re.waitIcon=re.rollWaitIcon=re.toggleIcon=re.rollToggleIcon=null,o||this.zimContainer_dispose(!0),!0}},So.extend(So.Button,So.Container,["clone","dispose"],"zimContainer",!1),So.Button.prototype.dispose=function(e){return this.doDispose(null,null,e)},So.CheckBox=function(t,o,e,n,r,i,a,l,s,c,u,d,h,g,p){var f;if(f=zob(So.CheckBox,arguments,"size, label, startChecked, color, backgroundColor, borderColor, borderWidth, corner, margin, indicatorType, indicatorColor, tap, style, group, inherit",this))return f;z_d("56"),this.zimContainer_constructor(null,null,null,null,!1),this.type="CheckBox",this.group=g;var m=!1===h?{}:So.getStyle(this.type,this.group,p);zot(t)&&(t=null!=m.size?m.size:60),zot(o)&&(o=null!=m.label?m.label:null),zot(e)&&(e=null!=m.startChecked&&m.startChecked);var z=e;zot(n)&&(n=null!=m.color?m.color:"#111"),zot(r)&&(r=null!=m.backgroundColor?m.backgroundColor:"rgba(255,255,255,.8)"),zot(i)&&(i=null!=m.borderColor?m.borderColor:"#111"),zot(a)&&(a=null!=m.borderWidth?m.borderWidth:t/10),i<0||a<0?i=a=null:null!=i&&null==a&&(a=t/10),zot(l)&&(l=null!=m.corner?m.corner:0),"string"!=typeof o&&"number"!=typeof o||(o=new So.Label({text:o,size:5*t/6,color:n,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),zot(s)&&(s=null!=m.margin?m.margin:t/5),"box"!=c&&"square"!=c&&"x"!=c&&(c=null!=m.indicatorType?m.indicatorType:"check"),zot(u)&&(u=null!=m.indicatorColor?m.indicatorColor:0<a?i:"black"),this.setBounds(-s,-s,t+2*s,t+2*s),zot(d)&&(d=null!=m.tap&&m.tap);var y=this;this.cursor="pointer";var b=new So.Rectangle(t,t,r,null,null,l),v=new So.Rectangle(5*t/7,5*t/7,"rgba(0,0,0,0)",i,a,l);v.x=t/7,v.y=t/7,this.addChild(b,v);var w=t;o&&(o.center(y),o.x=y.getBounds().width,this.label=o,this.setBounds(-s,-s,t+3*s+o.getBounds().width,Math.max(t+2*s,o.getBounds().height)),w=o.x+o.width);var C=new So.Shape({style:!1});C.graphics.f("rgba(0,0,0,.01)").r(this.getBounds().x,this.getBounds().y,w+2*s,this.getBounds().height),this.hitArea=C;var x=new So.Shape({style:!1}),k=x.graphics;"check"==c?k.f(u).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"):"box"==c||"square"==c?k.f(u).dr(-35,-35,70,70):k.f(u).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg");x.setBounds(-47.5,-47.5,95,95);var T=t/161;function A(e){z=!z,y.setChecked(z),y.dispatchEvent("change")}x.scaleX=x.scaleY=T,x.alpha=.9,x.x=t/2,x.y=t/2,z&&this.addChild(x),d?this.tap(A):this.on((zns?"mousedown"==So.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",A),Object.defineProperty(y,"checked",{get:function(){return z},set:function(e){y.setChecked(e)}}),this.toggle=function(e){zot(e)&&(e=!z),y.setChecked(e)},Object.defineProperty(y,"toggled",{get:function(){return z},set:function(e){y.setChecked(e)}}),Object.defineProperty(y,"text",{get:function(){return o?o.text:null},set:function(e){o&&(o.text=e,So.OPTIMIZE||!zns&&OPTIMIZE||!y.stage||y.stage.update())}}),Object.defineProperty(x,"indicatorColor",{get:function(){return u},set:function(e){z&&y.removeChild(x),x=new createjs.Shape,k=x.graphics,u=e,k.f(u).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"),x.scaleX=x.scaleY=T,x.alpha=.9,x.x=t/2,x.y=t/2,z&&y.addChild(x),So.OPTIMIZE||!zns&&OPTIMIZE||!y.stage||y.stage.update()}}),Object.defineProperty(y,"indicator",{get:function(){return x},set:function(e){zog("ZIM CheckBox - check is read only")}}),this._enabled=!0,Object.defineProperty(y,"enabled",{get:function(){return y._enabled},set:function(e){qe(y,e)}}),!(this.setChecked=function(e){return zot(e)&&(e=!0),(z=e)?y.addChild(x):y.removeChild(x),So.OPTIMIZE||!zns&&OPTIMIZE||!y.stage||y.stage.update(),y})!==h&&So.styleTransforms(this,m),this.clone=function(){return y.cloneProps(new So.CheckBox(t,o?o.clone():"",e,n,r,i,a,l,s,c,u,d,h,this.group,p))}},So.extend(So.CheckBox,So.Container,"clone","zimContainer",!1),So.RadioButtons=function(s,a,l,c,u,d,h,g,p,o,f,n,r,e,i){var t;if(t=zob(So.RadioButtons,arguments,"size, buttons, vertical, color, backgroundColor, borderColor, borderWidth, spacing, margin, always, indicatorColor, selectedIndex, style, group, inherit",this))return t;z_d("57"),this.zimContainer_constructor(null,null,null,null,!1),this.type="RadioButtons",this.group=e;var m=!1===r?{}:So.getStyle(this.type,this.group,i);zot(s)&&(s=null!=m.size?m.size:60),s=Math.max(5,s),zot(a)&&(a=null!=m.buttons?m.buttons:["A","B","C"]),zot(l)&&(l=null==m.vertical||m.vertical),zot(c)&&(c=null!=m.color?m.color:"#111"),zot(u)&&(u=null!=m.backgroundColor?m.backgroundColor:"rgba(255,255,255,.8)"),zot(d)&&(d=null!=m.borderColor?m.borderColor:"#111"),zot(h)&&(h=null!=m.borderWidth?m.borderWidth:s/9),d<0||h<0?d=h=null:null!=d&&null==h&&(h=s/10),zot(g)&&(g=l?null!=m.spacing?m.spacing:.2*s:null!=m.spacing?m.spacing:s),zot(p)&&(p=null!=m.margin?m.margin:s/5),zot(f)&&(f=null!=m.indicatorColor?m.indicatorColor:0<h?d:"black");var z,y=this;if(this.cursor="pointer",this.labels=[],this.indicators=[],"string"==typeof a){var b=a;a=[];for(var v=0;v<b.length;v++)a.push({label:b[v]})}var w=new So.Container({style:!1});function C(e){var t=w.getChildIndex(e.target);o&&y.selectedIndex==t||(y.setSelected(t),y.dispatchEvent("change"))}this.addChild(w),function(){for(var e,t,o=!1,n=a.length-1;0<=n;n--)(e=a[n]).selected&&!0===e.selected&&(o?e.selected="false":(o=!0,y.id=e.id));w.removeAllChildren(),y.buttons=[];for(var r=0,n=0;n<a.length;n++){var i;"string"!=typeof(e=a[n])&&"number"!=typeof e||(i={selected:!1,label:new So.Label({text:e,size:5*s/6,color:null!=m.color?m.color:c,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:y.group})},e=i),(e.label&&"string"==typeof e.label||"number"==typeof e.label)&&(e.label=new So.Label({text:e.label,size:null!=m.size?m.size:5*s/6,color:null!=m.color?m.color:c,valign:"center"})),y.labels.push(e.label),e.index=n,a[n]=e,(t=function(e,t){var o=new So.Container({style:!1});y.buttons.push(o),o.mouseChildren=!1,o.setBounds(-p,-p,s+2*p,s+2*p);var n=new So.Shape({style:!1}),r=n.graphics;r.f(u).dc(s/2,s/2,s/1.85),r.s(d).ss(h).dc(s/2,s/2,s/2-s/2/5),o.addChild(n);var i=o.check=new So.Circle(s/5.2,f,null,null,null,null,null,null,!1);y.indicators.push(i),i.mouseEnabled=!1,i.alpha=.95,i.regX=i.regY=-s/2;var a=s;t&&(o.addChild(t),t.x=o.getBounds().width,t.y=s/2,o.setBounds(-p,-p,s+2*p+t.getBounds().width,Math.max(s+2*p,t.getBounds().height)),a=t.x+t.width,o.text=t.text);e&&(o.addChild(i),y.label=t,y.label&&(y.text=t.text));var l=new So.Shape({style:!1});return(r=l.graphics).f("rgba(0,0,0,.01)").r(o.getBounds().x,o.getBounds().y,a+2*p,o.getBounds().height),o.hitArea=l,o}(e.selected,e.label)).type="RadioButton",(t.obj=e).selected&&(z=t.obj),w.addChild(t),l?(t.y=r,r+=t.getBounds().height+g):(t.x=r,r+=t.getBounds().width+g)}}();for(var x=0;x<w.numChildren;x++)w.getChildAt(x).on((zns?"mousedown"==So.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",C);this.getBounds()||this.setBounds(0,0,s,s),this.setBounds(-p,-p,this.getBounds().width+2*p,this.getBounds().height),this.setSelected=function(e){if(zot(e)&&(e=-1),-1==e||w.getChildAt(e)){for(var t,o,n=0;n<w.numChildren;n++)(t=w.getChildAt(n)).removeChild(t.check);return 0<=e&&(t=w.getChildAt(e),o=-2,z&&(o=z.index),z=t.obj),-1==e||o==z.index?(z=null,y.id=null,y.label=null,y.text=""):(t.addChild(t.check),y.id=z.id,y.label=z.label,y.label&&(y.text=y.label.text)),So.OPTIMIZE||!zns&&OPTIMIZE||!y.stage||y.stage.update(),y}},Object.defineProperty(y,"selected",{get:function(){return z},set:function(e){zog("ZIM RadioButton - selected is read only")}}),Object.defineProperty(y,"selectedIndex",{get:function(){return z?z.index:-1},set:function(e){o&&y.selectedIndex==e||y.setSelected(e)}}),this._enabled=!0,Object.defineProperty(y,"enabled",{get:function(){return y._enabled},set:function(e){qe(y,e)}}),zot(n)&&(n=null!=m.selectedIndex?m.selectedIndex:0),y.selectedIndex=n,So.styleTransforms(this,m),this.clone=function(){for(var e=So.copy(a),t=0;t<e.length;t++)e[t].label=e[t].label.clone();return y.cloneProps(new So.RadioButtons(s,e,l,c,u,d,h,g,p,o,f,n,r,this.group,i))}},So.extend(So.RadioButtons,So.Container,"clone","zimContainer",!1),So.Toggle=function(o,r,e,t,i,n,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w){var C;if(C=zob(So.Toggle,arguments,"width, height, label, startToggled, backgroundColor, margin, indicatorType, indicatorColor, tap, toggleBackgroundColor, color, borderColor, borderWidth, corner, indicatorCorner, shadowColor, shadowBlur, time, labelLeft, style, group, inherit",this))return C;z_d("57.5"),this.group=v;var x=!1===b?{}:So.getStyle("Toggle",this.group,w);zot(o)&&(o=null!=x.width?x.width:80),zot(r)&&(r=null!=x.height?x.height:50),this.zimContainer_constructor(o,r,null,null,!1),this.type="Toggle",zot(i)&&(i=null!=x.backgroundColor?x.backgroundColor:"#C60"),zot(n)&&(n=null!=x.margin?x.margin:10),zot(a)&&(a=null!=x.indicatorType?x.indicatorType:"circle"),zot(l)&&(l=null!=x.indicatorColor?x.indicatorColor:"#fff"),zot(c)&&(c=null!=x.toggleBackgroundColor?x.toggleBackgroundColor:"#F93"),zot(u)&&(u=null!=x.color?x.color:"#111"),zot(d)&&(d=null!=x.borderColor?x.borderColor:null),zot(h)&&(h=null!=x.borderWidth?x.borderWidth:null),d<0||h<0?d=h=null:null!=d&&null==h&&(h=1),zot(g)&&(g=null!=x.corner?x.corner:"circle"!=a?0:25),zot(p)&&(p=null!=x.indicatorCorner?x.indicatorCorner:0),zot(f)&&(f=null!=x.shadowColor?x.shadowColor:"rgba(0,0,0,.3)"),zot(m)&&(m=null!=x.shadowBlur?x.shadowBlur:14),zot(t)&&(t=null!=x.startToggled&&x.startToggled);var k=Bo(z);zot(z)&&(z=null!=x.time?x.time:"s"==k?.1:100);var T=this;function A(e){var t,o=T.indicator.x,n=!0===e?0:z;"rectangle"==a||"square"==a?T.indicator.pos(.2*r,null,T.toggled):T.indicator.pos(.175*r,null,T.toggled),0<z&&T.indicator.animate({props:{x:o},from:!0,time:n}),T.background.color=T.toggled?c:i,T.text=T.toggled?T.label?T.label.text:"on":T.labelLeft?T.labelLeft.text:"off",T.zimAccessibility&&(t="Toggle set to "+(T.toggled?T.label?T.label.text+".":"on.":T.labelLeft?T.labelLeft.text+".":"off."),setTimeout(function(){T.zimAccessibility.talk(t)},50))}T.cursor="pointer","string"!=typeof e&&"number"!=typeof e||(e=this.label=new So.Label({text:e,size:x.size||5*r/6,color:u,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),"string"!=typeof y&&"number"!=typeof y||(y=this.labelLeft=new So.Label({text:y,size:x.size||5*r/6,color:u,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),this.background=new So.Rectangle(o,r,i,d,h,g).addTo(this),this.indicator="rectangle"==a||"square"==a?new So.Rectangle(.65*r,.65*r,l,null,null,p).center(this.background).pos(.2*r,null,t):new So.Circle(.35*r,l).center(this.background).pos(.175*r,null,t),this.toggled=t,T.background.color=T.toggled?c:i,-1!=f&&0<m&&(this.background.shadow=new createjs.Shadow(f,3,3,m)),e&&(this.addChild(e),e.x=o+2+n+h,e.y=r/2,this.label=e,this.setBounds(-n,-n,o+3*n+h+e.getBounds().width,Math.max(r+2*n,e.getBounds().height))),y&&(this.addChild(y),y.x=0,T.background.x+=y.width+3+n+h,T.label.x+=y.width+3+n+h,y.y=r/2,this.labelLeft=y,this.setBounds(-n,-n,T.getBounds().width+y.width+3+n+h,T.getBounds().height)),this.expand(So.mobile()?20:10),this.tap(function(e){if(y){var t=T.localToGlobal(y.width+3+n+h+o/2,0);if(e.stageX/So.scaX<t.x-o/2&&!T.toggled||e.stageX/So.scaX>=t.x+o/2&&T.toggled)return}T.toggled=!T.toggled,A(),T.dispatchEvent("change")},So.mobile()?20:10),new So.Swipe(this,20,"s"==k?.2:200).on("swipe",function(e){0!=e.swipeX&&(1==e.swipeX&&T.toggled||-1==e.swipeX&&!T.toggled||(T.toggled=!T.toggled,A(),T.dispatchEvent("change")))}),Object.defineProperty(T,"textLeft",{get:function(){return y?y.text:null},set:function(e){y&&(y.text=e,So.OPTIMIZE||!zns&&OPTIMIZE||!T.stage||T.stage.update())}}),T.toggle=function(e,t){var o=T.toggled;return zot(e)&&(e=!0),T.toggled=e,o!=T.toggled&&A(t),T},T.text=T.toggled?T.label?T.label.text:"on":T.labelLeft?T.labelLeft.text:"off",this._enabled=!0,Object.defineProperty(T,"enabled",{get:function(){return T._enabled},set:function(e){qe(T,e)}}),!1!==b&&So.styleTransforms(this,x),this.clone=function(){return T.cloneProps(new So.Toggle(o,r,e?e.clone():"",t,i,n,a,l,s,c,u,d,h,g,p,f,m,z,y?y.clone():"",b,this.group,w))}},So.extend(So.Toggle,So.Container,"clone","zimContainer",!1),So.Tip=function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,I,E,O,M,j,L,Y,_,D,X,R){var W;if(W=zob(So.Tip,arguments,"text, align, valign, margin, marginH, marginV, outside, target, size, font, color, rollColor, shadowColor, shadowBlur, textAlign, textValign, lineWidth, lineHeight, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backgroundDashed, padding, paddingHorizontal, paddingVertical, shiftHorizontal, shiftVertical, rollPersist, labelWidth, labelHeight, maxSize, bold, italic, variant, style, group, inherit",this))return W;z_d("57.6"),this.group=X;var H=!1===D?{}:So.getStyle("Tip",this.group,R);zot(e)&&(e=null!=H.text?H.text:"Here's a tip!"),zot(n)&&(n=null!=H.margin?H.margin:40),zot(r)&&(r=null!=H.marginH?H.marginH:n),zot(i)&&(i=null!=H.marginV?H.marginV:n),zot(t)&&(t=null!=H.align?H.align:"right"),zot(o)&&(o=null!=H.valign?H.valign:"bottom"),zot(a)&&(a=null!=H.outside&&H.outside),zot(w)&&(w=null!=H.backgroundColor?H.backgroundColor:So.blue),zot(u)&&(u=null!=H.color?H.color:So.white),zot(k)&&(k=null!=H.corner?H.corner:25),zot(k)&&(k=null!=H.corner?H.corner:25),zot(k)&&(k=null!=H.corner?H.corner:25),zot(P)&&(P=null!=H.paddingHorizontal?H.paddingHorizontal:14+(Array.isArray(k)?k[0]:k)),!zot(h)&&"ignore"!=h||(h=null!=H.shadowColor&&"ignore"!=h?H.shadowColor:"rgba(0,0,0,.3)"),!zot(g)&&"ignore"!=g||(g=null!=H.shadowBlur&&"ignore"!=g?H.shadowBlur:1),this.zimLabel_constructor(e,s,c,u,d,null,null,p,f,L,Y,_,m,z,y,b,v,w,C,x,k,T,A,P,S,B,I,E,O,M,j,D,X,So.copy(H)),this.type="Tip",a&&(r=-r,i=-i);var F=this;F.align=t,F.valign=o,this.background.sha(h,3,5,g),this.show=function(e,o){var t=Bo(o);zot(e)&&(e=null!=H.delay?H.delay:0),zot(o)&&(o=null!=H.time?H.time:"s"==t?2:2e3);if(zot(l)){if(!zdf)return F;l=zdf.stage}else{if(!l.getBounds)return F;if(zot(l.stage))return zog("zim display - Waiter(): The container must have a stage property"),F}function n(){var e;e=l.boundsToGlobal?l.boundsToGlobal():l.getBounds();var t=new So.Container(e.x,e.y,e.width,e.height);t.zimTemp=!0,t.loc(0,0,l.stage),"center"!=F.align&&"middle"!=F.align&&"center"!=F.valign&&"middle"!=F.valign||F.center(t),F.pos("center"==F.align||"middle"==F.align?null:r,"center"==F.valign||"middle"==F.valign?null:i,"right"==F.align,"bottom"==F.valign,t),a&&("right"==F.align?F.x+=F.width:"left"==F.align&&(F.x-=F.width),"bottom"==F.valign?F.y+=F.height:"top"==F.valign&&(F.y-=F.height)),F.addTo(t.stage),t.zimTemp&&t.removeFrom&&(t.removeFrom(),t=null),t=F.stage,F.timeoutID&&F.timeoutID.clear(),F.timeoutID=So.timeout(o,function(){F.hide(),t.stage.update()}),F.upID&&t.stage.off("stagemouseup",F.upID),F.upID=t.stage.on("stagemouseup",function(){F.hide(),t.stage&&t.stage.update()}),t.stage&&t.stage.update()}return 0<e?F.showID=So.timeout(e,n):n(),F},this.hide=function(){return this.removeFrom(),this.timeoutID&&this.timeoutID.clear(),this.upID&&l.stage&&l.stage.off("stagemouseup",this.downID),F},!(this.clear=function(){F.showID&&F.showID.clear(),F.hide()})!==D&&So.styleTransforms(this,H),this.clone=function(){return F.cloneProps(new So.Tip(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,I,E,O,M,j,D,this.group,R))}},So.extend(So.Tip,So.Label,"clone","zimLabel",!1),So.Panel=function(t,e,o,l,s,n,c,u,r,i,a,d,h,g,p,f,m,z,y,b,v,w){var C;if(C=zob(So.Panel,arguments,"width, height, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, backgroundColor, borderColor, borderWidth, corner, close, closeColor, arrow, align, shadowColor, shadowBlur, draggable, boundary, extraButton, style, group, inherit",this))return C;z_d("57.7"),this.group=v;var x=!1===b?{}:So.getStyle("Panel",this.group,w);zot(t)&&(t=null!=x.width?x.width:250),zot(e)&&(e=null!=x.height?x.height:300),this.zimContainer_constructor(t,e,null,null,!1),this.type="Panel",zot(o)&&(o=null!=x.titleBar?x.titleBar:"PANEL"),zot(l)&&(l=null!=x.titleBarColor?x.titleBarColor:"#fff"),zot(s)&&(s=null!=x.titleBarBackgroundColor?x.titleBarBackgroundColor:"#555"),zot(n)&&(n=null!=x.titleBarHeight?x.titleBarHeight:30),zot(c)&&(c=null!=x.backgroundColor?x.backgroundColor:"#eee"),zot(u)&&(u=null!=x.borderColor?x.borderColor:"#888"),zot(r)&&(r=null!=x.borderWidth?x.borderWidth:null),u<0||r<0?u=r=null:null!=u&&null==r&&(r=1),zot(i)&&(i=null!=x.corner?x.corner:5),zot(g)&&(g=null!=x.align?x.align:"left"),zot(p)&&(p=null!=x.shadowColor?x.shadowColor:"rgba(0,0,0,.3)"),zot(f)&&(f=null!=x.shadowBlur?x.shadowBlur:14),zot(m)&&(m=null!=x.draggable&&x.draggable),zot(z)&&(z=null!=x.boundary?x.boundary:null),zot(a)&&(a=null!=x.close&&x.close),zot(d)&&(d=null!=x.closeColor?x.closeColor:zot(l)?"#555":l),zot(h)&&(h=null!=x.arrow?x.arrow:So.vee(o)),Array.isArray(i)||(i=[i,i,i,i]);var k=this,T=this.background=new So.Rectangle(t,e,c,u,r,i).addTo(this);-1!=p&&0<f&&(this.background.shadow=new createjs.Shadow(p,3,3,f));var A=o,P=So.Pick.choose(A),S=So.Pick.choose(l),B=So.Pick.choose(s);So.Pick.choose(c),So.Pick.choose(u);"string"==typeof P&&(P=new So.Label({text:P,color:S,size:null!=x.size?x.size:20,bold:null!=x.bold&&x.bold,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}));var I=k.titleBarLabel=P;zot(B)&&(B="rgba(0,0,0,.2)"),k.titleBar=o=new So.Container(t,n,null,null,!1).loc(0,0,k);var E,O,M=k.titleBar.backing=new So.Rectangle(t+r,n,B,null,null,[.95*i[0],.95*i[1],0,0],!0,null,!1).center(o);function j(){"right"==g?I.center(o).pos(Math.max(i[0]/2,10),null,!0):"center"==g||"middle"==g?I.center(o):I.center(o).loc(Math.max(i[0]/2,10)),I.mov(0,2)}o&&j(),k.label=P,k.text=P.text,a&&((a=k.close=new So.Shape(-40,-40,80,80,null,!1)).graphics.f(d).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),o?(a.centerReg(o).scaleTo(o,null,50),"right"==g?a.pos(Math.max(i[1]/2,15)):a.pos(Math.max(i[1]/2,15),null,!0)):a.addTo(k).sca(.3).mov(t/2-a.width-3,-e/2+a.height),a.expand(40),a.cursor="pointer",a.on((zns?"mousedown"==So.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){var e=k.stage;k.removeFrom(),k.dispatchEvent("close"),e.update()})),this.nextPanel=function(e,t){var o=zot(e)||zot(A.array)?So.Pick.choose(A):A.array[e],n=zot(e)||zot(l.array)?So.Pick.choose(l):l.array[e],r=zot(e)||zot(s.array)?So.Pick.choose(s):s.array[e],i=zot(e)||zot(c.array)?So.Pick.choose(c):c.array[e],a=zot(e)||zot(u.array)?So.Pick.choose(u):u.array[e];"string"==typeof o&&(o=new So.Label({text:o,color:n,size:null!=x.size?x.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),k.label=o,k.text=o.text,I.removeFrom(),I=k.titleBarLabel=o,j(),M.color=r,k.background.color=i,k.background.borderColor=a,t&&k.dispatchEvent("change"),!OPTIMIZE&&k.stage&&k.stage.update()},m&&(o.cursor="pointer",o.on("mousedown",function(){k.drag({rect:z,currentTarget:!0})}),o.on("pressup",function(){k.noDrag()})),0<h&&(E=a?a.width+15:0,(O=k.arrow=new So.Shape(-20,-20,40,40,null,!1)).graphics.f(l).p("AiJieIETCeIkTCfg"),O.centerReg(o).scaleTo(o,null,70).alp(.8).hov(1).expand(),"right"==g?O.pos(Math.max(i[1]/2,10)+E):O.pos(Math.max(i[1]/2,10)+E,null,!0),O.cursor="pointer",O.on((zns?"mousedown"==So.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){k.nextPanel(),k.dispatchEvent("change")})),zot(y)||(y=k.extraButton=new So.Button({label:"R",width:50,height:50,corner:5,group:"PanelExtra"}).scaleTo(o,null,70).centerReg(o).expand(),"left"==g?y.pos(0<h?O.x-O.width-25:Math.max(i[1]/2,10)):y.pos(0<h&&"center"!=g?O.x+O.width:Math.max(i[1]/2,10)));k.overlay=new So.Rectangle(t,e).alp(.7);Object.defineProperty(k,"panelHeight",{get:function(){return k.background.height},set:function(e){T.removeFrom(),T=this.background=new So.Rectangle(t,e,c,u,r,i).addTo(this).bot(),-1!=p&&0<f&&(this.background.shadow=new createjs.Shadow(p,3,3,f)),k.setBounds(t,e),!OPTIMIZE&&k.stage&&k.stage.update()}}),this._enabled=!0,Object.defineProperty(k,"enabled",{get:function(){return k._enabled},set:function(e){qe(k,e),e?k.overlay.removeFrom():k.overlay.addTo(k),!OPTIMIZE&&k.stage&&k.stage.update()}}),!1!==b&&So.styleTransforms(this,x),this.clone=function(){return k.cloneProps(new So.Toggle(t,e,o?o.clone():"",l,s,n,c,u,r,i,a,d,h,g,p,f,m,z,y,b,this.group,w))},this.doDispose=function(e,t,o){return o||this.zimContainer_dispose(!0),!0}},So.extend(So.Panel,So.Container,["clone","dispose"],"zimContainer",!1),So.Panel.prototype.dispose=function(e){return this.doDispose(null,null,e)},So.Pane=function(a,l,n,r,i,s,c,u,d,h,g,p,f,m,z,y,b,e,v,w,C,x,k,T,A,t,P){var o;if(o=zob(So.Pane,arguments,"width, height, label, backgroundColor, color, draggable, resets, modal, corner, backdropColor, shadowColor, shadowBlur, center, displayClose, backdropClose, backing, fadeTime, container, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, close, closeColor, style, group, inherit",this))return o;z_d("58"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pane";var S="zim display - Pane(): Please pass in a reference to a container with bounds set as first parameter";if(zot(e)){if(!zdf)return void zog(S);e=zdf.stage}else{if(!e.getBounds)return void zog(S);if(zot(e.getStage))return void zog("zim display - Pane(): The container must have a stage property")}this.group=t;var B=!1===A?{}:So.getStyle(this.type,this.group,P);zot(a)&&(a=null!=B.width?B.width:200),zot(l)&&(l=null!=B.height?B.height:200),zot(n)&&(n=null!=B.label?B.label:null),"string"!=typeof n&&"number"!=typeof n||(n=new So.Label({text:n,size:null!=B.size?B.size:40,align:null!=B.align?B.align:"center",valign:null!=B.valign?B.valign:"center",color:null!=B.color?B.color:i,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),zot(r)&&(r=null!=B.backgroundColor?B.backgroundColor:"white"),zot(s)&&(s=null!=B.draggable&&B.draggable),zot(c)&&(c=null==B.resets||B.resets),zot(u)&&(u=null==B.modal||B.modal),zot(d)&&(d=null!=B.corner?B.corner:20),zot(v)&&(v=null!=B.titleBar?B.titleBar:null),zot(w)&&(w=null!=B.titleBarColor?B.titleBarColor:null),zot(C)&&(C=null!=B.titleBarBackgroundColor?B.titleBarBackgroundColor:null),zot(x)&&(x=null!=B.titleBarHeight?B.titleBarHeight:null),zot(h)&&(h=null!=B.backdropColor?B.backdropColor:"rgba(0,0,0,.2)"),zot(g)&&(g=null!=B.shadowColor?B.shadowColor:"rgba(0,0,0,.3)"),zot(p)&&(p=null!=B.shadowBlur?B.shadowBlur:20),zot(f)&&(f=null==B.center||B.center),zot(m)&&(m=null==B.displayClose||B.displayClose),s&&(m=!1),zot(z)&&(z=null==B.backdropClose||B.backdropClose),zot(b)&&(b=null!=B.fadeTime?B.fadeTime:0),zot(k)&&(k=null!=B.close&&B.close),zot(T)&&(T=null!=B.closeColor?B.closeColor:"#555");var I=this.backdrop=new So.Shape({style:!1});I.type="CreateJS_Shape";var E=I.graphics;E.f(h),E.drawRect(-5e3,-5e3,1e4,1e4),this.setBounds(-a/2,-l/2,a,l);var O=this;O.container=e,I.on((zns?"mousedown"==So.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",z?R:function(e){e.stopImmediatePropagation()});var M,j,L,Y,_,D,X=new So.Dictionary(!0);function R(e){W(),O.container.stage.update(),O.dispatchEvent("close"),e.stopImmediatePropagation()}function W(){function e(){O.container.removeChild(O);for(var e,t,o=0;o<O.numChildren;o++){"TextArea"!=(t=O.getChildAt(o)).type&&"Loader"!=t.type&&"Tag"!=t.type||(e={obj:t,depth:O.getChildIndex(t)},X.add(t,e))}for(var n,o=O.numChildren-1;0<=o;o--)"TextArea"!=(t=O.getChildAt(o)).type&&"Loader"!=t.type&&"Tag"!=t.type||O.removeChild(t);So.OPTIMIZE||!zns&&OPTIMIZE||O.container.stage.update(),c&&(isNaN(O.resetX)||(O.x=O.resetX),isNaN(O.resetY)||(O.y=O.resetY)),O.zimAccessibility&&((n=O.zimAccessibility).resize(O),D?D.focus():O.zimTabTag.nextSibling.focus(),setTimeout(function(){n.talk("Pane has been closed.")},50))}0<b?O.animate({obj:{alpha:0},time:b,call:function(){e(),O.dispatchEvent("fadedout")}}):e()}I.on("mousedown",function(e){e.stopImmediatePropagation()}),u&&this.addChild(I),zot(y)?j=this.backing=this.display=new So.Rectangle({width:a,height:l,color:r,corner:d,style:!1}):("Pattern"==y.type?(M=y,j=new So.Rectangle(a,l,r,null,null,d,null,null,!1),M.centerReg(j),M.setMask(j.shape)):j=y,O.display=O.backing=j),m&&(j.cursor="pointer",j.on((zns?"mousedown"==So.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",R)),-1!=g&&0<p&&(j.shadow=new createjs.Shadow(g,8,8,p)),j.on("click",function(e){e.stopImmediatePropagation()}),this.resetX,this.resetY,s&&(j.cursor="pointer",j.on("mousedown",function(e){e.target.stage,isNaN(O.resetX)&&(O.resetX=O.x),isNaN(O.resetY)&&(O.resetY=O.y),L=e.stageX/So.scaX-O.x,Y=e.stageY/So.scaY-O.y,j.cursor="pointer"}),j.on("pressmove",function(e){var t,o,n,r=(t=e.stageX/So.scaX-L,o=e.stageY/So.scaY-Y,t=Math.max(a/2,Math.min(O.container.getBounds().width-a/2,t)),o=Math.max(l/2,Math.min(O.container.getBounds().height-l/2,o)),{x:t,y:o});O.x=r.x,O.y=r.y;for(var i=0;i<O.numChildren;i++)"TextArea"!=(n=O.getChildAt(i)).type&&"Loader"!=n.type&&"Tag"!=n.type||n.resize();O.stage.update()}),this.on("pressup",function(e){j.cursor="pointer",O.stage&&O.stage.update()})),j.centerReg(this),n&&(this.addChild(n),So.center(n,this),this.label=n,this.text=n.text,n.mouseEnabled=!1),zot(v)||("string"==typeof v&&(v=new So.Label(v,null,null,w)),_=O.titleBarLabel=v,zot(x)&&(x=1.5*_.height),zot(w)&&(w="black"),zot(C)&&(C="rgba(0,0,0,.2)"),O.titleBar=v=new So.Container(a,x,null,null,!1).centerReg(O).mov(0,-l/2+x/2),v.mouseEnabled=!1,v.mouseChildren=!1,O.titleBar.backing=new So.Rectangle(a,x,C,null,null,[.95*d,.95*d,0,0],null,null,!1).addTo(v),_.center(v).pos({x:Math.max(d/2,10),reg:!0})),k&&((k=O.close=new So.Shape(-40,-40,80,80,null,!1)).graphics.f(T).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),v?k.addTo(O).scaleTo(v,null,50).mov(a/2-Math.max(d/2,10)-k.width/2,-l/2+x/2).expand(40):k.addTo(O).sca(.3).mov(a/2-k.width-3,-l/2+k.height).expand(40),k.cursor="pointer",k.expand(),k.on((zns?"mousedown"==So.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",R)),Object.defineProperty(O,"text",{get:function(){return" "==n.text?"":n.text},set:function(e){n.text=e}}),this._enabled=!0,Object.defineProperty(O,"enabled",{get:function(){return O._enabled},set:function(e){qe(O,e)}}),this.hide=function(e){return W(),O.toggled=!1,e&&O.dispatchEvent("close"),O},this.show=function(){f&&isNaN(O.resetX)&&(O.x=O.container.getBounds().width/2,O.y=O.container.getBounds().height/2),O.container.addChild(O);for(var e,t=0;t<X.length;t++)O.addChildAt(X.values[t].obj,X.values[t].depth);return 0<b?(O.alpha=0,O.animate({props:{alpha:1},time:b,call:function(){O.dispatchEvent("fadedin")}})):O.container.stage&&O.container.stage.update(),O.zimAccessibility&&(e=O.zimAccessibility,setTimeout(function(){e.activatedObject&&(D=e.activatedObject.zimTabTag)},50),e.resize(O),e.tabIndex=O.zimTabIndex),O.toggled=!0,O},!(this.toggle=function(e){return!0!==e&&(!1===e||O.container.contains(O))?O.hide():O.show(),O})!==A&&So.styleTransforms(this,B),this.clone=function(){var e=n.x,t=n.y,o=O.cloneProps(new So.Pane(a,l,n.clone(),r,i,s,c,u,d,h,g,p,f,m,z,zot(y)?y.clone():null,b,O.container,v,w,C,x,k,T,A,this.group,P));return o.label.x=e,o.label.y=t,o}},So.extend(So.Pane,So.Container,"clone","zimContainer",!1),So.Window=function(d,h,o,e,g,n,p,f,m,z,t,r,i,y,b,a,l,s,v,c,u,w,C,x,k,T,A,P,S,B,I,E,O,M,j,L,Y,_,D,X,R){var W;if(W=zob(So.Window,arguments,"width, height, backgroundColor, borderColor, borderWidth, padding, corner, swipe, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, slide, slideDamp, slideSnap, interactive, shadowColor, shadowBlur, paddingHorizontal, paddingVertical, scrollWheel, damp, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, draggable, boundary, onTop, close, closeColor, cancelCurrentDrag, fullSize, fullSizeColor, resizeHandle, style, group, inherit",this))return W;z_d("58.1"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Window",this.group=X;var H=!1===D?{}:So.getStyle(this.type,this.group,R);zot(d)&&(d=null!=H.width?H.width:300),zot(h)&&(h=null!=H.height?H.height:200),zot(o)&&(o=null!=H.backgroundColor?H.backgroundColor:"#333");var F=e,V=g;zot(e)&&(e=null!=H.borderColor?H.borderColor:"#999"),zot(g)&&(g=null!=H.borderWidth?H.borderWidth:1),zot(n)&&(n=null!=H.padding?H.padding:0),zot(p)&&(p=null!=H.corner?H.corner:0),zot(f)&&(f=null==H.swipe||H.swipe),zot(m)&&(m=null==H.scrollBarActive||H.scrollBarActive),zot(z)&&(z=null!=H.scrollBarDrag&&H.scrollBarDrag),zot(t)&&(t=null!=H.scrollBarColor?H.scrollBarColor:e),zot(r)&&(r=null!=H.scrollBarAlpha?H.scrollBarAlpha:.3),zot(i)&&(i=null==H.scrollBarFade||H.scrollBarFade),zot(y)&&(y=null==H.scrollBarH||H.scrollBarH),zot(b)&&(b=null==H.scrollBarV||H.scrollBarV),z&&(i=null!=H.scrollBarFade&&H.scrollBarFade),zot(a)&&(a=null==H.slide||H.slide),zot(l)&&(l=null!=H.slideDamp?H.slideDamp:.6),zot(s)&&(s=null!=H.slideSnap?H.slideSnap:"vertical"),zot(v)&&(v=null==H.interactive||H.interactive),zot(c)&&(c=null!=H.shadowColor?H.shadowColor:"rgba(0,0,0,.3)"),zot(u)&&(u=null!=H.shadowBlur?H.shadowBlur:20),zot(C)&&(C=null!=H.paddingVertical?H.paddingVertical:n),zot(w)&&(w=null!=H.paddingHorizontal?H.paddingHorizontal:n),zot(x)&&(x=null==H.scrollWheel||H.scrollWheel),zot(T)&&(T=null!=H.titleBar?H.titleBar:null),zot(A)&&(A=null!=H.titleBarColor?H.titleBarColor:null),zot(P)&&(P=null!=H.titleBarBackgroundColor?H.titleBarBackgroundColor:null),zot(S)&&(S=null!=H.titleBarHeight?H.titleBarHeight:null),zot(B)&&(B=null!=H.draggable?H.draggable:null),zot(I)&&(I=null!=H.boundary?H.boundary:null),zot(E)&&(E=null!=H.onTop?H.onTop:null),zot(O)&&(O=null!=H.close?H.close:null),zot(M)&&(M=null!=H.closeColor?H.closeColor:null),zot(j)&&(j=null!=H.cancelCurrentDrag&&H.cancelCurrentDrag),zot(L)&&(L=null!=H.fullSize?H.fullSize:null),zot(Y)&&(Y=null!=H.fullSizeColor?H.fullSizeColor:null),zot(_)&&(_=null!=H.resizeHandle?H.resizeHandle:null),!1===T&&(T=null),zot(T)||(zot(S)&&(S=30),h-=S);var N=this;this.scrollX=this.scrollY=this.scrollXMax=this.scrollYMax=0;var G=this.backing=new So.Shape({style:!1});this.addChild(G);var q=new createjs.Shape;q.type="WindowBacking";var Q=q.graphics;this.addChild(q);var U,K,Z=this.content=new So.Container({style:!1});this.addChild(Z),Z.mask=q,v||(U=new createjs.Shape),0<g&&(K=new createjs.Shape,this.addChild(K));var J=T?0:p;function $(){N.setBounds(0,0,d,h),G.graphics.c().f(o).rc(0,0,d,h,J,J,p,p),-1!=c&&0<u&&(G.shadow=new createjs.Shadow(c,4,4,u)),0<g&&(p?K.graphics.c().s(e).ss(g,"square","miter").rc(0,0,d,h,J,J,p,p):K.graphics.c().s(e).ss(g,"square","miter").dr(0,0,d,h)),zot(pe)||(pe=T.backing.widthOnly=N.width,N.setBounds(0,-S,N.width,h+S)),N.close&&(T?O.pos({x:d-Math.max(p/2,10)-O.width/2,y:S/2,reg:!0}):O.pos(Math.max(p/2,10)/2,O.height/2,!0,!1,N)),N.fullSize&&(L.pos({x:d-Math.max(p/2,10)-L.width/2,y:S/2,reg:!0}),N.close&&L.mov(-O.width-10))}$();var ee,te,oe,ne,re,ie,ae,le,se,ce,ue,de,he,ge,pe,fe,me,ze,ye,be,ve,we=this.scrollBar={};function Ce(){ve.loc(0,0,N).top().alp(.01).mov(N.width,N.height-(N.titleBar?N.titleBar.height:0))}function xe(e){"right"==e.align?(e.x=w,e.resize(N.width-(le?we.size+2*we.spacing:w)-2*w)):("center"==e.align||e.align,e.resize(N.width-(le?we.size+2*we.spacing:0)-2*w)),e.alpha=e.wrapperLastAlpha}function ke(e){zot(Te)&&(Te=N.stage||zimDefaultFrame.stage),zot(e)&&(e=!0),e?So.dragBoundary(Z,new createjs.Rectangle(0,0,ae?-N.scrollXMax:0,le?-N.scrollYMax:0)):So.dragBoundary(Z,new createjs.Rectangle(-1e3,-1e3,Te.width+2e3,Te.height+2e3))}we.color=t,we.size=6,we.minSize=2*we.size,we.spacing=3.5+g/2,we.margin=0,we.corner=we.size/2,we.showTime=.5,we.fadeTime=3,m&&(ee=we.horizontal=new So.Shape({style:!1}),te=ee.graphics,ee.alpha=r,this.addChild(ee),z&&ee.drag({localBounds:!0}),oe=we.vertical=new So.Shape({style:!1}),ne=oe.graphics,oe.alpha=r,this.addChild(oe),z&&oe.drag({localBounds:!0})),this.update=function(){m&&(te.clear(),ne.clear()),se=m?we.size+2*we.spacing:0,ce=Z.getBounds()?Z.getBounds().width:0,ue=Z.getBounds()?Z.getBounds().height:0,ae=y&&d-w<ce&&(m||!0===f||"auto"==f||"horizontal"==f),le=b&&h-C<ue&&(m||!0===f||"auto"==f||"vertical"==f),N.scrollXMax=ce+2*w-d+(le?se+we.margin:0),N.scrollYMax=ue+2*C-h+(ae?se+we.margin:0),Q.clear();var e=g/2,t=g/2,o=d-(le&&m?we.size+2*we.spacing:0)-(le?0:g),n=h-(ae&&m?we.size+2*we.spacing:0)-(ae?0:g);Q.f("rgba(0,0,0,0)").rc(e,t,o,n,J,J,le&&m?0:p,ae&&m?0:p),q.setBounds(N.getBounds().x,N.getBounds().y,N.getBounds().width,N.getBounds().height),So.expand(q,0),v||(U.graphics.c().f("red").dr(e,t,o,n),Z.hitArea=U);var r,i,a=Math.max(p,Math.min(we.corner,we.spacing)),l=a+g/2,s=a+(le?se:0)+g/2,c=a+g/2,u=a+(ae?se:0)+g/2;ae&&m&&(r=Math.max(we.minSize,(d-l-s)*(d-l-s)/(ce+w+we.margin)),te.f(we.color).rr(0,0,r,we.size,we.corner),ee.x=l,ee.y=h-we.size-we.spacing,re=new So.Proportion(-N.scrollXMax,0,l,d-r-s,-1),z&&(ee.setBounds(0,0,r,we.size),i=new createjs.Rectangle(l,ee.y,d-r-l-s,0),ee.dragBoundary(i),ee.proportion=new So.Proportion(i.x,i.x+i.width,0,-N.scrollXMax),ee.off("pressmove",de),de=ee.on("pressmove",function(){N.dispatchEvent("scrolling"),U&&(U.x=-Z.x,U.y=-Z.y),Z.x=ee.proportion.convert(ee.x)}))),le&&m&&(r=Math.max(we.minSize,(h-c-u)*(h-c-u)/(ue+C+we.margin)),ne.f(we.color).rr(0,0,we.size,r,we.corner),oe.x=d-we.size-we.spacing,oe.y=c,ie=new So.Proportion(-N.scrollYMax,0,c,h-r-u,-1),z&&(oe.setBounds(0,0,we.size,r),i=new createjs.Rectangle(oe.x,c,0,h-r-c-u),oe.dragBoundary(i),oe.proportion=new So.Proportion(i.y,i.y+i.height,0,-N.scrollYMax),oe.off("pressmove",he),he=oe.on("pressmove",function(){N.dispatchEvent("scrolling"),U&&(U.x=-Z.x,U.y=-Z.y),Fe=Z.y=oe.proportion.convert(oe.y)}))),Xe(),clearTimeout(N.d2Timeout),N.d2Timeout=setTimeout(function(){ee&&ee.proportion&&(Z.x=ee.proportion.convert(ee.x)),oe&&oe.proportion&&(Z.y=oe.proportion.convert(oe.y))},50),clearTimeout(N.dTimeout),N.dTimeout=setTimeout(function(){ke()},300),ke()},this.resize=function(e,t){zot(e)&&(e=d),zot(t)&&(t=h);var o=20;T&&(o=ge.x+ge.width+10),e<o&&(e=o),t<20&&(t=20),d=e,h=t,$();for(var n=0;n<Z.numChildren;n++){var r=Z.getChildAt(n);"Wrapper"==r.type&&xe(r)}return N.update(),Fe=Z.y,k&&Ve.immediate(Fe),N},zot(T)||(zot(B)&&(B=!0),"string"==typeof T&&(T=new So.Label({text:T,color:A,size:null!=H.size?H.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),ge=N.titleBarLabel=T,zot(P)&&(P="rgba(0,0,0,.2)"),N.titleBar=T=new So.Container(d,S,null,null,!1).centerReg(N).mov(0,-h/2-S/2),pe=N.titleBar.backing=new So.Rectangle(d+g,S,P,null,null,[.95*p,.95*p,0,0],!0,null,!1).center(T),ge.center(T).pos({x:Math.max(p/2,Math.max(10,n)),reg:!0}),N.regX=0,N.regY=-S,N.setBounds(0,-S,d,h+S),B?(T.cursor="pointer",T.on("mousedown",function(){N.drag({rect:I,currentTarget:!0,onTop:E})}),T.on("pressup",function(){N.noDrag(!1)})):T.on("mousedown",function(){})),O&&(zot(M)&&(M="#555"),(O=N.close=new So.Shape(-40,-40,80,80,null,!1)).graphics.f(M).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),T?O.centerReg(N).scaleTo(T,null,50).pos({x:d-Math.max(p/2,10)-O.width/2,y:S/2,reg:!0}).expand(40):O.sca(.3).pos(Math.max(p/2,10)/2,O.height/2,!0,!1,N).expand(40),O.cursor="pointer",O.expand(),O.on((zns?"mousedown"==So.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){var e=N.stage;N.removeFrom(),N.dispatchEvent("close"),e&&e.update()})),zot(T)||L&&(zot(Y)&&(Y="#555"),L=N.fullSize=new So.Rectangle(80,80,So.faint,Y,16),fe=(new So.Shape).s(Y).ss(16).mt(-19.6,-20.6).lt(-19.6,-40).lt(40,-40).lt(40,20.7).lt(19.6,20.7).lt(19.6,40).lt(-40,40).lt(-40,-20.6).lt(-19.6,-20.6).lt(19.6,-20.6).lt(19.6,20.7).addTo(N.fullSize).mov(40,40).alp(0),L.centerReg(N).scaleTo(T,null,42).pos({x:d-Math.max(p/2,10)-L.width/2,y:S/2,reg:!0}).expand(40),N.close&&L.mov(-O.width-10),L.cursor="pointer",L.expand(),N.fullCheck=!1,me=d,ze=h,ye=N.x,be=N.y,L.on((zns?"mousedown"==So.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){N.fullCheck?(N.resize(me,ze-T.height),N.x=ye,N.y=be,N.fullCheck=!1,fe.alpha=0,N.fullSize.getChildAt(0).alpha=1):(me=N.width,ze=N.height,ye=N.x,be=N.y,N.resize(N.parent.width,N.parent.height),N.x=0,N.y=0,N.fullCheck=!0,fe.alpha=1,N.fullSize.getChildAt(0).alpha=.01),N.stage&&N.stage.update()})),_&&((ve=N.resizeHandle=new So.Rectangle(25,25,So.grey,So.white).alp(.01).centerReg().rot(45).hov(.5).loc(0,0,N).mov(N.width,N.height-(N.titleBar?N.titleBar.height:0)).drag()).on("pressmove",function(){N.resize(ve.x,ve.y)}),ve.on("pressup",Ce),N.titleBar&&N.titleBar.on("pressup",Ce)),this.add=function(e,t){if(Ge(e),e.getBounds())return t&&N.removeAll(),Z.addChild(e),"Wrapper"==e.type&&(oe.alpha=0,y=!1,e.wrapperLastAlpha=e.alpha,e.alpha=0,this.added(function(){xe(e),N.resize(),ee.alpha=1,oe.alpha=1})),0==e.x&&(e.x=w),0==e.y&&(e.y=C),N.update(),N;zog("SwipeBox.add() - please add content with bounds set")},this.remove=function(e){return Z.removeChild(e),N.update(),N};var Te,Ae,Pe,Se,Be,Ie,Ee,Oe,Me,je,Le,Ye,_e=!(this.removeAll=function(){return Z.removeAllChildren(),N.update(),N});function De(){Fe=Z.y,k&&Ve.immediate(Fe),m&&Xe()}function Xe(){N.dispatchEvent("scrolling"),U&&(U.x=-Z.x,U.y=-Z.y),ae&&m&&(ee.x=re.convert(Z.x)),le&&m&&(oe.y=ie.convert(Z.y))}function Re(e){zot(e)&&(e=100),Ge(N),f&&setTimeout(function(){Z&&(So.drag({obj:Z,currentTarget:!0,localBounds:!0,slide:a,slideDamp:l,slideSnap:!((!y||!0!==f&&"auto"!=f&&"horizontal"!=f)&&(!b||!0!==f&&"auto"!=f&&"vertical"!=f))&&s}),Z.removeAllEventListeners("slidestart"),Z.on("slidestart",function(){N.dispatchEvent("slidestart")}),Z.removeAllEventListeners("slidestop"),Z.on("slidestop",function(){N.dispatchEvent("slidestop")}),Z.getBounds()&&0<Z.getBounds().width&&ke())},e)}function We(e){So.Ticker.remove(De),_e=!1,ae&&i&&m&&So.animate(ee,{alpha:0},we.fadeTime),le&&i&&m&&So.animate(oe,{alpha:0},we.fadeTime)}function He(){if(!Z.stage)return Ye||(N.dispatchEvent("hoverout"),Ye=!0),void So.Ticker.remove(He);Math.abs(Ie-N.windowMouseX)>Le||Math.abs(Ee-N.windowMouseY)>Le?(Ye||(N.dispatchEvent("hoverout"),Ye=!0),Be=Date.now(),Ie=N.windowMouseX,Ee=N.windowMouseY):Date.now()-Be>je&&((Math.abs(Oe-N.windowMouseX)>Le||Math.abs(Me-N.windowMouseY)>Le)&&(N.contentMouse=Z.globalToLocal(N.windowMouseX,N.windowMouseY),N.dispatchEvent("hoverover"),Oe=N.windowMouseX,Me=N.windowMouseY,Ye=!1),Be=Date.now())}f&&Z.on("mousedown",function(){_e||So.Ticker.add(De,Z.stage),_e=!0,ae&&m&&i&&So.animate(ee,{alpha:r},we.showTime),le&&m&&i&&So.animate(oe,{alpha:r},we.showTime)}),this.on("added",function(){Re(50)},null,!0),this.cancelCurrentDrag=function(){N.content&&N.content.noDrag(!1),setTimeout(function(){Z&&(So.drag({obj:Z,currentTarget:!0,localBounds:!0,slide:a,slideDamp:l,slideSnap:!((!y||!0!==f&&"auto"!=f&&"horizontal"!=f)&&(!b||!0!==f&&"auto"!=f&&"vertical"!=f))&&s}),Z.getBounds()&&0<Z.getBounds().width&&ke())},300)},this.added(function(e){Ae=(Te=e).on("stagemousemove",function(e){N.windowMouseX=e.stageX/So.scaX,N.windowMouseY=e.stageY/So.scaY})}),a?Z.on("slidestop",We):Z.on("mousedown",function(){Z.stage.on("stagemouseup",We,null,!0)}),j&&(N.blurEvent=function(){N.cancelCurrentDrag(),We()},document.window.addEventListener("blur",N.blurEvent)),v&&(Z.on("mousedown",function(e){Te=e.target.stage,Pe=e.stageX/So.scaX,Se=Date.now()}),Z.on("click",function(e){Date.now()-Se<600&&Math.abs(e.stageX/So.scaX-Pe)<5&&(N.contentMouse=Z.globalToLocal(e.stageX/So.scaX,e.stageY/So.scaY),N.dispatchEvent("select"))}),Z.on("mouseover",function(){Be=Date.now(),So.Ticker.add(He,Z.stage)}),Z.on("mouseout",function(){Ye||(N.dispatchEvent("hoverout"),Ye=!0);So.Ticker.remove(He)}),Me=Oe=Ee=Ie=0,je=300,Ye=!(Le=2));var Fe=N.scrollY;N.scrollWindow=function(e){var t;le&&N.stage&&N.hitTestPoint(N.windowMouseX,N.windowMouseY)&&N.contains(N.stage.getObjectUnderPoint(N.windowMouseX*So.scaX,N.windowMouseY*So.scaY))&&(zot(e)&&(e=event),zot(t=e.detail?-19*e.detail:e.wheelDelta)&&(t=-19*e.deltaY),Fe+=t,Fe=Math.max(-N.scrollYMax,Math.min(0,Fe)),k||(N.scrollY=Fe,Z.stage.update()))},x&&(window.addEventListener("mousewheel",N.scrollWindow),window.addEventListener("wheel",N.scrollWindow),window.addEventListener("DOMMouseScroll",N.scrollWindow));var Ve,Ne=!1;function Ge(e){k&&!Ne&&e.stage&&(Ne=!0,Ve=new So.Damp(N.scrollY,k),So.Ticker.add(function(){_e||zot(Fe)||(N.scrollY=Ve.convert(Fe))},e.stage))}this._enabled=!0,Object.defineProperty(N,"enabled",{get:function(){return N._enabled},set:function(e){e?Re():(clearTimeout(N.dTimeout),So.noDrag(Z)),qe(N,e)}}),this._scrollEnabled=!0,Object.defineProperty(N,"scrollEnabled",{get:function(){return N._scrollEnabled},set:function(e){e?(Re(),z&&(de&&(ee.mouseEnabled=!0),he&&(oe.mouseEnabled=!0)),window.addEventListener("mousewheel",N.scrollWindow),window.addEventListener("wheel",N.scrollWindow),window.addEventListener("DOMMouseScroll",N.scrollWindow)):(clearTimeout(N.dTimeout),So.noDrag(Z),z&&(de&&(ee.mouseEnabled=!1),he&&(oe.mouseEnabled=!1)),window.removeEventListener("mousewheel",N.scrollWindow),window.removeEventListener("wheel",N.scrollWindow),window.removeEventListener("DOMMouseScroll",N.scrollWindow)),N._scrollEnabled=e}}),Object.defineProperty(N,"scrollX",{get:function(){return Z.x},set:function(e){Z.x=e,clearTimeout(N.d2Timeout),Z.zimDragImmediate&&Z.zimDragImmediate(Z.x,Z.y),Xe()}}),Object.defineProperty(N,"scrollY",{get:function(){return Z.y},set:function(e){Z.y=e,clearTimeout(N.d2Timeout),Z.zimDragImmediate&&Z.zimDragImmediate(Z.x,Z.y),Xe()}}),!1!==D&&So.styleTransforms(this,H),this.clone=function(e){zot(e)&&(e=!0);var t=N.cloneProps(new So.Window(d,h,o,F,V,n,p,f,m,z,we.color,r,i,y,b,a,l,s,v,c,u,w,C,T,A,P,S,B,I,E,O,M,j,L,Y,_,D,X,R));return e&&(N.content.cloneChildren(t.content),t.update()),t},this.doDispose=function(e,t,o){return x&&(window.removeEventListener("mousewheel",N.scrollWindow),window.removeEventListener("wheel",N.scrollWindow),window.removeEventListener("DOMMouseScroll",N.scrollWindow)),Ae&&Te&&Te.off("stagemousemove",Ae),N.resizeHandle&&N.resizeHandle.removeAllEventListeners(),N.blurEvent&&document.window.removeEventListener("blur",N.blurEvent),void 0!==He&&So.Ticker.remove(He),zot(De)||So.Ticker.remove(De),o||this.zimContainer_dispose(!0),!(Z=N.content=null)}},So.extend(So.Window,So.Container,["clone","dispose"],"zimContainer",!1),So.Window.prototype.dispose=function(e){return this.doDispose(null,null,e)},So.Page=function(o,n,r,i,a,l,s,c,u,d,h){var e;if(e=zob(So.Page,arguments,"width, height, color, color2, vertical, pattern, scalePattern, cache, style, group, inherit",this))return e;z_d("58.3"),this.group=d;var t=!1===u?{}:So.getStyle("Page",this.group,h);zot(o)&&(o=null!=t.width?t.width:zdf.width),zot(n)&&(n=null!=t.height?t.height:zdf.height),this.zimContainer_constructor(0,0,o,n,!1),this.type="Page";var g=this;zot(a)&&(a=null==t.vertical||t.vertical),zot(r)&&(r=null!=t.color?t.color:So.light),zot(i)&&(i=null!=t.color2?t.color2:null),zot(l)&&(l=null!=t.pattern?t.pattern:null),zot(s)&&(s=null!=t.scalePattern?t.scalePattern:"outside"),zot(c)&&(c=null!=t.cache&&t.cache),zot(i)||(r=new So.GradientColor([r,i],[0,1],0,0,a?0:o,a?n:0),i=null);var p=this.backing=new So.Rectangle({width:o,height:n,color:r,style:!1}).addTo(this);!zot(c)||zot(i)&&zot(l)||(c=!0),c&&p.cache(),zot(l)||(this.pattern=l.addTo(this),s&&l.scaleTo(this,100,100,s).center(this),c&&l.cache()),Object.defineProperty(g,"color",{get:function(){return r},set:function(e){zot(e)&&(e="black"),r=e,g.backing.color=e}}),!1!==u&&So.styleTransforms(this,t),this.clone=function(e){zot(e)&&(e=!1),r.type&&(i=null);var t=g.cloneProps(new So.Page(o,n,r,i,a,l,s,c,u,d,h));return e&&g.cloneChildren(t),t}},So.extend(So.Page,So.Container,["clone"],"zimContainer",!1),So.Layer=function(e,t,n,s,c,u,o,r,d,h,i,a,g,l,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S){var B;if(B=zob(So.Layer,arguments,"width, height, titleBar, titleBarContainer, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, borderWidth, borderColor, dashed, transformObject, titleBarWidth, titleBarHeight, titleBarX, titleBarY, titleBarDraggable, close, closeColor, closeBackgroundColor, closeIndicatorColor, anchor, style, group, inherit",this))return B;z_d("58.5"),this.group=P;var I=!1===A?{}:So.getStyle("Layer",this.group,S);zot(e)&&(e=null!=I.width?I.width:500),zot(t)&&(t=null!=I.height?I.height:500),this.zimContainer_constructor(0,0,e,t,!1),this.type="Layer";var E=this;E.distX=40,E.distY=0,zot(n)&&(n=null!=I.titleBar?I.titleBar:"LAYER");var O=n,M=n,j=!0;zot(c)&&(c=null!=I.backgroundColor?I.backgroundColor:"#eee"),zot(u)&&(u=null!=I.rollBackgroundColor?I.rollBackgroundColor:"#fff"),zot(o)&&(o=null!=I.selectedBackgroundColor?I.selectedBackgroundColor:"#666"),zot(d)&&(d=null!=I.color?I.color:"#666"),zot(h)&&(h=null!=I.rollColor?I.rollColor:"#666"),zot(i)&&(i=null!=I.selectedColor?I.selectedColor:"#ddd"),zot(g)&&(g=null!=I.borderWidth?I.borderWidth:1),zot(l)&&(l=null!=I.borderColor?I.borderColor:c),(l<0||g<0)&&(l=g=null),zot(p)&&(p=null==I.dashed||I.dashed),zot(f)&&(f=null!=I.titleBar?I.titleBar:null),zot(m)&&(m=null!=I.titleBarWidth?I.titleBarWidth:100);var L=m;if(zot(z)&&(z=null!=I.titleBarHeight?I.titleBarHeight:40),zot(y)&&(y=null!=I.titleBarX?I.titleBarX:null),zot(b)&&(b=null!=I.titleBarY?I.titleBarY:null),zot(v)&&(v=null==I.titleBarDraggable||I.titleBarDraggable),zot(w)&&(w=null==I.close||I.close),zot(C)&&(C=null!=I.closeColor?I.closeColor:o),zot(x)&&(x=null!=I.closeBackgroundColor?I.closeBackgroundColor:o),zot(k)&&(k=null!=I.closeIndicatorColor?I.closeIndicatorColor:i),zot(T)&&(T=null==I.anchor||I.anchor),v||(T=!1),E.anchor=T,w&&(m+=30),f=So.merge({borderColor:o},f,{events:!0,visible:!1,ghostColor:l,ghostWidth:g,ghostDashed:p,ghostHidden:!0}),zot(s)&&(s=null!=I.titleBarContainer?I.titleBarContainer:null),zot(s)){if(!zdf)return void zog("zim Layer(): Please pass in a reference to a container with bounds set.");s=zdf.stage}var Y;E.active=!1,E.turnOff=function(e,t){E.active=!1,w&&(E.checkBox.visible=!1),E.transformControls.remove(),E.mouseChildren=!0,E.button.backgroundColor=c,E.button.rollBackgroundColor=u,E.button.color=d,E.button.rollColor=d,E.transformControls.allowToggleOff(),E.resizeChildren&&E.resizeChildren()},E.turnOn=function(){E.active=!0,w&&(E.checkBox.visible=!0,E.checkBox.checked=!0),E.button.backgroundColor=o,E.button.rollBackgroundColor=o,E.button.color=i,E.button.rollColor=i,E.mouseChildren=!1,E.transformControls.add(),E.transformControls.allowToggleOn()},E.titleBarPos=function(e,t){if(E.titleBar)return E.titleBar.pos?(E.titleBar.pos(e,t,arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]),Y.update()):(E.distX=e,E.distY=t),j=!1,E};var _=E.visible;E.visible=!1;var D=Bo();this.added(function(l){Y=l,E.transform(f),0<=g&&E.transformControls.hideGhost(),setTimeout(function(){E.visible=_,0<=g&&setTimeout(function(){E.transformControls.showGhost(),E.stage&&E.stage.update()},100),Y=l;var e,t,o,r=E.titleBar=new So.Container(m,z).reg(0,z).loc(E,null,s).mov(E.distX,E.distY);function n(e){var t,o,n;j&&v&&(t=s.localToLocal(r.x-E.distX,r.y-E.distY,E.parent),o=E.localToLocal(E.regX,E.regY,E.parent),n=E.localToLocal(0,0,E.parent),E.x=t.x+(o.x-n.x),E.y=t.y+(o.y-n.y),E.transformControls.resize(e),i(E))}function i(e){e.loop(function(e){"Layer"==e.type&&(E.titleBarDraggable&&e.move(),e.transformControls.ghost&&e.transformControls.resize(),i(e))})}function a(){return 0==r.x||(r.y==r.height||(r.x==s.width-r.width||r.y==s.height))}v&&r.drag({all:!0,boundary:new So.Boundary(0,z,s.width-m,s.height-z),localBounds:!0}),40==E.distX&&0==E.distY||r.pos(E.distX,E.distY),w&&(E.checkBox=new So.CheckBox({borderColor:C,backgroundColor:x,indicatorColor:k,size:20,startChecked:!0}).center(r).pos(0,null,!0).change(function(){E.turnOff(!0,!0)}),E.checkBox.visible=!1),r.mouseChildren=!0,(r.layer=E).resetTitleBar=function(){E.distX=40,E.distY=0,j=!0,E.move(!0),E.stage&&E.stage.update()},"string"!=typeof M&&"number"!=typeof M||(M=new So.Label({text:M,color:d,rollColor:h,size:null!=I.size?I.size:18,group:this.group})),E.label=M,E.label.center(r),E.button=new So.Button({shadowBlur:-1,width:L,height:z-1,label:E.label,color:d,rollColor:h,backgroundColor:c,rollBackgroundColor:u,corner:null!=I.corner?I.corner:0,inherit:So.copy(I)}).addTo(r),E.button.on("mousedown",function(){s.loop(function(e){e&&e!=r&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff(!0,!0)}),E.active||E.turnOn(),r.top()}),E.button.on("pressmove",function(){n()}),E.button.on("pressup",function(){n(!0);var e=E.localToLocal(0,0,s);E.distX=r.x-e.x,E.distY=r.y-e.y,r.top(),!a()&&v&&(e=E.localToGlobal(0,0),E.button.hitTestPoint(e.x,e.y)&&E.resetTitleBar())}),E.button.on("dblclick",function(){v&&E.resetTitleBar()}),E.turnOff(),E.on("transformed",function(e){"move"!=e.transformType&&"size"!=e.transformType&&"stretch"!=e.transformType&&"rotate"!=e.transformType||(v&&E.move(),i(E))}),E.move=function(e){!e&&!j&&E.anchor&&a()||(r.loc(E.localToLocal(0,0,s)).mov(E.distX,E.distY),r.x<0&&(j=!1,r.x=0),r.y<r.height&&(j=!1,r.y=r.height),r.x>s.width-r.width&&(j=!1,r.x=s.width-r.width),r.y>s.height&&(j=!1,r.y=s.height),E.anchor||(j=!0))},E.on("transformhide",function(){E.turnOff(!0,!0),s.loop(function(e){e&&e!=r&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff()})}),E.resizeChildren=function(e){E.transformControls.resize(e),E.loop(function(e){e.transformControls&&(e.transformControls.visible&&e.transformControls.hide(),"Layer"==e.type?e.resizeChildren():e.transformControls.resize())})},E.resize=function(e){return E.move(),E.resizeChildren(e),E},E.toggled=!1,E.toggle=function(e){return zot(e)?E.toggled=!E.toggled:E.toggled=e,E.toggled?(s.loop(function(e){e&&e!=r&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff()}),E.turnOn()):(r.top(),E.turnOff(),s.loop(function(e){e&&e!=r&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff()})),E.stage&&E.stage.update(),E},Object.defineProperty(E,"titleBarDraggable",{get:function(){return v},set:function(e){(v=e)?r.drag({all:!0,boundary:So.Boundary(0,40,s.width-m,s.height-z),localBounds:!0}):r.noDrag(!1)}}),E.stageUpEvent=Y.on("stagemouseup",function(){E.transformControls.visible&&r.top()}),zot(y)&&zot(b)||(j=!1,e=zot(y)?r.x:y,t=zot(b)?r.y-z:b,E.titleBarStartX=y,E.titleBarStartY=b,E.titleBarPos(e,t),o=E.parent.localToLocal(E.x,E.y,s),E.distX=r.x-o.x,E.distY=r.y-o.y)})},"s"==D?.05:50),!1!==A&&So.styleTransforms(this,I),this.clone=function(){return E.cloneProps(new So.Layer(e,t,O,s,c,u,o,r,d,h,i,a,g,l,p,f,L,z,y,b,v,w,C,x,k,T,A,this.group,S))},this.dispose=function(e,t,o){return E.stageUpEvent&&Y.off("stagemouseup",E.stageUpEvent),s&&s.loop(function(e){e.layer=null}),E.transformControls.dispose(),E.transformControls=null,o||this.zimContainer_dispose(!0),E.titleBar.layer=null,E.titleBar.dispose(),E.checkBox=E.button=null,!(n=E.titleBar=f=null)}},So.extend(So.Layer,So.Container,["clone","dispose"],"zimContainer",!1),So.Waiter=function(a,l,e,t,o,n,r,s,i,c,u){var d;if(d=zob(So.Waiter,arguments,"container, speed, foregroundColor, backgroundColor, corner, shadowColor, shadowBlur, fadeTime, style, group, inherit",this))return d;z_d("59"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Waiter",this.group=c;var h=!1===i?{}:So.getStyle(this.type,this.group,u),g=Bo(l);zot(l)&&(l=null!=h.speed?h.speed:"s"==g?.6:600),zot(e)&&(e=null!=h.foregroundColor?h.foregroundColor:"white"),zot(t)&&(t=null!=h.backgroundColor?h.backgroundColor:"orange"),zot(o)&&(o=null!=h.corner?h.corner:16),zot(n)&&(n=null!=h.shadowColor?h.shadowColor:"rgba(0,0,0,.3)"),zot(r)&&(r=null!=h.shadowBlur?h.shadowBlur:14),zot(s)&&(s=null!=h.fadeTime?h.fadeTime:0);this.setBounds(-52,-20,104,40);var p,f=this,m=this.display=new So.Shape({style:!1});this.addChild(m),m.setBounds(0,0,104,40),m.regX=52,m.regY=20;var z=m.graphics;z.f(t);var y=o;Array.isArray(y)||(y=[o,o,o,o]),z.rc(0,0,104,40,y[0],y[1],y[2],y[3]),-1!=n&&0<r&&(m.shadow=new createjs.Shadow(n,3,3,r)),m.on("click",function(e){e.stopImmediatePropagation()});var b,v=new So.Container({style:!1});this.addChild(v);for(var w,C=0;C<3;C++)(b=new createjs.Shape).graphics.f(e).dc(0,0,12),b.x=32*(C-1),v.addChild(b),b.cache(-12,-12,24,24),b.alpha=0;this.hide=function(){function e(){var e;f.parent&&f.parent.removeChild(f),(p=f.stage)&&p.update(),f.zimAccessibility&&((e=f.zimAccessibility).resize(f),w?w.focus():f.zimTabTag.nextSibling.focus(),setTimeout(function(){e.talk("Waiter has finished.")},50))}return 0<s?f.animate({obj:{alpha:0},time:s,call:e}):e(),f.toggled=!1,f};var x=[];this.show=function(){var e,t="zim display - Waiter(): Please pass in a reference to a container with bounds set as first parameter to Waiter";if(zot(a)){if(!zdf)return void zog(t);a=zdf.stage}else{if(!a.getBounds)return void zog(t);if(zot(a.stage))return void zog("zim display - Waiter(): The container must have a stage property")}for(var o,n=0,r=l*("s"==g?1e3:1),i=0;i<v.numChildren;i++)v&&x.push(setTimeout(function(){e=v.getChildAt(n),createjs.Tween.get(e,{loop:!0}).to({alpha:1},r/3/2).wait(r/3).to({alpha:0},r/3).wait(r-r/3-r/3/2),n++},i*r/3));return f.ticker=createjs.Ticker.on("tick",function(){a.stage.update()}),f.x=a.getBounds().width/2,f.y=a.getBounds().height/2,a.addChild(f),0<s&&(f.alpha=0,f.animate({alpha:1},s)),f.zimAccessibility&&(o=f.zimAccessibility,setTimeout(function(){o.activatedObject&&(w=o.activatedObject.zimTabTag)},50),o.resize(f),o.talk(f.zimTabTag.getAttribute("aria-label"))),f.toggled=!0,f},!(f.toggle=function(e){return!0!==e&&(!1===e||f.parent)?f.hide():f.show(),f})!==i&&So.styleTransforms(this,h),this.clone=function(){return f.cloneProps(new So.Waiter(a,l,e,t,o,n,r,s,i,this.group,u))},this.dispose=function(e,t,o){f.ticker&&createjs.Ticker.off("tick",f.ticker),createjs.Tween.removeTweens(f),f.removeFrom();for(var n=0;n<v.numChildren;n++){var r=v.getChildAt(n);clearInterval(x[n]),createjs.Tween.removeTweens(r)}return o||this.zimContainer_dispose(!0),!0}},So.extend(So.Waiter,So.Container,["clone","dispose"],"zimContainer",!1),So.ProgressBar=function(t,o,n,r,i,a,l,e,s,c,u,d,h,g,p,f,m,z,y,b,v){var w;if(w=zob(So.ProgressBar,arguments,"barType, foregroundColor, backgroundColor, borderColor, borderWidth, padding, label, color, labelPosition, percentage, corner, shadowColor, shadowBlur, backing, delay, fastClose, container, autoHide, style, group, inherit",this))return w;z_d("59.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="ProgressBar",this.group=b;var C=!1===y?{}:So.getStyle(this.type,this.group,v);zot(o)&&(o=null!=C.foregroundColor?C.foregroundColor:"#acd241"),zot(n)&&(n=null!=C.backgroundColor?C.backgroundColor:"#444"),zot(r)&&(r=null!=C.borderColor?C.borderColor:n),zot(i)&&(i=null!=C.borderWidth?C.borderWidth:null),zot(s)&&(s=null!=C.labelPosition?C.labelPosition:"bottom"),zot(t)&&(t=null!=C.barType?C.barType:"circle"),zot(a)&&(a=null!=C.padding?C.padding:"circle"==t?2:-.5),zot(u)&&(u=null!=C.corner?C.corner:15),zot(d)&&(d=null!=C.shadowColor?C.shadowColor:"rgba(0,0,0,.3)"),zot(h)&&(h=null!=C.shadowBlur?C.shadowBlur:14),zot(g)&&(g=null!=C.backing?C.backing.clone():null),zot(f)&&(f=null==C.fastClose||C.fastClose),r<0||i<0?r=i=null:null!=r&&null==i&&(i="circle"==t?10:2);var x=Bo(p);zot(p)&&(p=null!=C.delay?C.delay:"s"==x?.1:100),zot(z)&&(z=null==C.autoHide||C.autoHide),zot(l)&&(l=null!=C.label?C.label:null),zot(e)&&(e=null!=C.color?C.color:o),"string"!=typeof l&&"number"!=typeof l||(l=new So.Label({text:l,color:e,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}));l&&l.text,!zot(c)&&zot(l)&&(l=new So.Label("")),this.label=l;var k,T,A,P,S,B,I=30,E=this,O=0;function M(e){var t,o;return E.backing?(t=E.getChildIndex(E.backing),E.removeChild(E.backing)):t=E.numChildren,E.border&&E.removeChild(E.border),zot(e)||"Pattern"!=e.type?e=E.backing=zot(e)?new So.Rectangle(k,I,n,r,i,u,null,null,!1).addTo(E,t):g.addTo(E,t):(o=e,((e=E.backing=new So.Rectangle(k,I,n,null,null,u,null,null,!1).addTo(E,t)).pattern=o).center(e),e.getBounds(),o.setMask(e.shape),i&&(E.border=new So.Rectangle(k,I,"rgba(0,0,0,0)",r,i,u,null,null,!1).addTo(E,t+1))),e}function j(e){"circle"==t?P.graphics.c().mt(0,0).s(o).ss(i-2*a+.5).a(0,0,k,0,360*e/100*Math.PI/180):(S.sca(e/100,1),P.setMask(S)),zot(c)||(l.text=l.startText+" "+Math.min(Math.round(e),100)+"%"),z&&f&&100<=Math.round(e)&&(E.timeOut=setTimeout(function(){E.hide()},200)),!E.dispatched&&100<=Math.round(e)&&(E.dispatchEvent("complete"),E.dispatched=!0,setTimeout(function(){E&&(E.dispatched=!1)},100)),E.stage&&E.stage.update()}E.visible=!1,setTimeout(function(){E.visible=!0,E.stage&&E.stage.update()},p),"circle"==t?(k=20,g=this.backing=new So.Circle(k,"rgba(0,0,0,0)",n,i,null,null,null,null,!1).addTo(E),P=this.bar=new So.Shape({style:!1}).addTo(E).loc(g.x,g.y).rot(-90)):(k=200,-1!=d&&0<h&&(new So.Rectangle(k-2,I-2,n,null,null,u,null,null,!1).addTo(this).shadow=new createjs.Shadow(d,3,3,h)),g=M(g),T=u,Array.isArray(T)||(T=[u,u,u,u]),A=1.2*(a+i/2),P=this.bar=new So.Rectangle(k-1.8*(a+i/2),I-1.8*(a+i/2),o,null,null,[T[0]-A,T[1]-A,T[2]-A,T[3]-A],null,null,!1).center(this),S=this.mask=new So.Rectangle(k-1.8*(a+i/2),I-1.8*(a+i/2),null,null,null,null,null,null,!1).center(this).alp(0).sca(0,1),P.setMask(S)),E.setBacking=function(e){M(e),E.stage&&E.stage.update()},g.on("click",function(e){e.stopImmediatePropagation()}),zot(l)||(l.scaleX=l.scaleY=.8,l.startText=l.text,zot(c)||(l.text=l.startText+"  0%"),l.center(E),"above"==s?l.y-=60:l.y+=60,l.alpha=.8),this.hide=function(){var e,t=E.stage;return E.parent&&E.parent.removeChild(E),"Pattern"==E.backing.type&&E.backing.pauseInterval&&E.backing.pauseInterval(),t&&t.update(),E.zimAccessibility&&((e=E.zimAccessibility).resize(E),B?B.focus():E.zimTabTag.nextSibling.focus(),setTimeout(function(){e.talk("Progress Bar has finished.")},50)),E.toggled=!1,E},this.show=function(){var e,t="zim display - ProgressBar(): Please pass in a reference to a container with bounds set as first parameter of the ProgressBar";if(zot(m)){if(!zdf)return void zog(t);m=zdf.stage}else{if(!m.getBounds)return void zog(t);if(zot(m.stage))return void zog("zim display - Waiter(): The container must have a stage property")}return E.timeOut&&clearTimeout(E.timeOut),j(0),E.zimActiveLoader&&E.zimActiveLoader.on("progress",function(e){j(O=100*e.progress)}),E.center(m),"Pattern"==E.backing.type&&E.backing.pauseInterval&&E.backing.pauseInterval(!1),E.zimAccessibility&&(e=E.zimAccessibility,setTimeout(function(){e.activatedObject&&(B=e.activatedObject.zimTabTag)},50),e.resize(E),e.talk(E.zimTabTag.getAttribute("aria-label"))),E.toggled=!0,E},E.toggle=function(e){return!0!==e&&(!1===e||E.parent)?E.hide():E.show(),E},E.run=function(e,t){zot(t)||(z=t),zot(e)&&(e="s"==x?3:3e3),Io(e,x);var o=e*("s"==x?1e3:1);E.toggle(!0),E.runInterval&&clearInterval(E.runInterval),E.percent=0;var n=Date.now();return E.runInterval=setInterval(function(){E.percent=(Date.now()-n)/o*100,100<=E.percent&&(E.percent=100,clearInterval(E.runInterval))},30),E},E.dispatched=!1,Object.defineProperty(E,"percent",{get:function(){return O},set:function(e){j(O=e)}}),!1!==y&&So.styleTransforms(this,C),this.clone=function(){return E.cloneProps(new So.ProgressBar(t,o,n,r,i,a,l,e,s,c,u,d,h,g,p,f,m,z,y,this.group,v))},this.dispose=function(e,t,o){return"Pattern"==E.backing.type&&E.backing.clearInterval&&E.backing.clearInterval(),E.runInterval&&clearInterval(E.runInterval),o||this.zimContainer_dispose(!0),!0}},So.extend(So.ProgressBar,So.Container,["clone","dispose"],"zimContainer",!1),So.Indicator=function(e,t,n,r,i,o,a,l,s,c,u,d,h,g,p,f,m,z,y,b){var v;if(v=zob(So.Indicator,arguments,"width, height, num, foregroundColor, backgroundColor, borderColor, borderWidth, backdropColor, corner, indicatorType, fill, scale, lightScale, interactive, shadowColor, shadowBlur, selectedIndex, style, group, inherit",this))return v;z_d("60"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Indicator",this.group=y;var w=!1===z?{}:So.getStyle(this.type,this.group,b);zot(e)&&(e=null!=w.width?w.width:300),zot(t)&&(t=null!=w.height?w.height:50),zot(n)&&(n=null!=w.num?w.num:6),zot(r)&&(r=null!=w.foregroundColor?w.foregroundColor:"#f58e25"),zot(i)&&(i=null!=w.backgroundColor?w.backgroundColor:"#666"),i<0&&(i=null!=w.backgroundColor?w.backgroundColor:"rgba(0,0,0,.01)"),zot(o)&&(o=null!=w.borderColor?w.borderColor:null),zot(a)&&(a=null!=w.borderWidth?w.borderWidth:null),o<0||a<0?o=a=null:null!=o&&null==a&&(a=1),zot(l)&&(l=null!=w.backdropColor?w.backdropColor:-1),zot(s)&&(s=null!=w.corner?w.corner:0),zot(c)&&(c=null!=w.indicatorType?w.indicatorType:"dot"),zot(u)&&(u=null!=w.fill&&w.fill),zot(d)&&(d=null!=w.scale?w.scale:1),zot(h)&&(h=null!=w.lightScale?w.lightScale:1),zot(g)&&(g=null!=w.interactive&&w.interactive),zot(p)&&(p=null!=w.shadowColor?w.shadowColor:"rgba(0,0,0,.3)"),zot(f)&&(f=null!=w.shadowBlur?w.shadowBlur:5);var C,x=(zns?"mousedown"==So.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",k=this;this.lights=[];var T;new So.Container({style:!1});-1!=l&&(T=k.backdrop=new So.Rectangle(e,t,l,o,a,s,null,null,!1),this.addChild(T));var A,P=this.lightsContainer=new So.Container({style:!1});this.addChild(P);var S=.5*t,B=e/(n+1),I=new createjs.Shape;"square"==c||"box"==c?I.graphics.f("black").dr(-B/2/h+S/2,-t/2+S/2,B/h,t):I.graphics.f("black").dr(-B/2/h,-t/2,B/h,t);for(var E=0;E<n;E++)"square"==c||"box"==c?((A=new So.Rectangle(S,S,i,o,a,null,null,null,!1)).regX=A.width/2,A.regY=A.height/2):A=new So.Circle(S/2,i,o,a,null,null,null,null,!1),this.lights.push(A),A.znum=E,A.scaleX=A.scaleY=h,A.hitArea=I,A.x=B+B*E,A.y=t/2,P.addChild(A);function O(e){var t;n<=e&&(e=-1);for(var o=0;o<n;o++)t=o==e?r:u&&o<e?r:i,P.getChildAt(o).color=t;k.zimAccessibility&&k.zimAccessibility.changeTitle(k),So.OPTIMIZE||!zns&&OPTIMIZE||!k.stage||k.stage.update()}P.setBounds(0,0,e,t),P.regX=P.x=e/2,P.regY=P.y=t/2,this.addChild(P),-1!=p&&0<f&&(P.shadow=new createjs.Shadow(p,2,2,f)),g&&(P.cursor="pointer",P.on(x,function(e){C!=e.target.znum&&(O(C=e.target.znum),k.dispatchEvent("change"))})),P.scaleX=P.scaleY=d,Object.defineProperty(this,"selectedIndex",{get:function(){return C},set:function(e){C=Math.floor(e),O(C=So.constrain(C,-1,n-1))}}),Object.defineProperty(this,"num",{get:function(){return n},set:function(e){zon&&zogy("Indicator() - num is read only")}}),this._enabled=!0,Object.defineProperty(k,"enabled",{get:function(){return k._enabled},set:function(e){qe(k,e)}}),zot(m)&&(m=null!=w.selectedIndex?w.selectedIndex:0),k.selectedIndex=m,!1!==z&&So.styleTransforms(this,w),this.clone=function(){return k.cloneProps(new So.Indicator(e,t,n,r,i,o,a,l,s,c,u,d,h,g,p,f,m,z,this.group,b))}},So.extend(So.Indicator,So.Container,"clone","zimContainer",!1),So.List=function(r,n,o,e,i,t,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,I,E,O,M,j,L,Y,_,D,X,R,W,H,F,V,N,G,q,Q,U,K,Z,J,$,ee,te,oe,ne,re,ie,ae,le,se,ce,ue,de){var he;if(he=zob(So.List,arguments,"width, height, list, viewNum, vertical, currentSelected, align, valign, labelAlign, labelValign, labelIndent, labelIndentHorizontal, labelIndentVertical, indent, spacing, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, padding, corner, swipe, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, scrollBarOverlay, slide, slideDamp, slideSnap, shadowColor, shadowBlur, paddingHorizontal, paddingVertical, scrollWheel, damp, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, draggable, boundary, onTop, close, closeColor, excludeCustomTap, organizer, checkBox, pulldown, clone, cancelCurrentDrag, selectedIndex, noScale, style, group, inherit",this))return he;z_d("60.5"),this.group=ue;var ge=!1===ce?{}:So.getStyle("List",this.group,de);zot(r)&&(r=null!=ge.width?ge.width:300),zot(n)&&(n=null!=ge.height?ge.height:zot(oe)?200:200+oe.height),zot(o)&&(o=null!=ge.list?ge.list:["Option 1","Option 2","Option 3","Option 4","Option 5","Option 6","Option 7","Option 8","Option 9","Option 10"]),0==o.length&&(o=["%-&"]),this.originalList=o,zot(e)&&(e=null!=ge.viewNum?ge.viewNum:5),zot(i)&&(i=null==ge.vertical||ge.vertical),zot(t)&&(t=null==ge.currentSelected||ge.currentSelected);var pe=!zot(a)||!zot(s);zot(ne)&&(ne=null!=ge.checkBox&&ge.checkBox),zot(a)&&(a=null!=ge.align?ge.align:ne?"left":"center"),zot(l)&&(l=null!=ge.valign?ge.valign:"center"),zot(s)&&(s=null!=ge.labelAlign?ge.labelAlign:a),zot(c)&&(c=null!=ge.labelValign?ge.labelValign:l),zot(g)&&(g=null!=ge.indent?ge.indent:ne?0:10),zot(u)&&(u=null!=ge.labelIndent?ge.labelIndent:g),zot(d)&&(d=null!=ge.labelIndentHorizontal?ge.labelIndentHorizontal:u),zot(h)&&(h=null!=ge.labelIndentVertical?ge.labelIndentVertical:u),zot(p)&&(p=null!=ge.spacing?ge.spacing:2),zot(b)&&(b=null!=ge.backdropColor?ge.backdropColor:"#333"),zot(f)&&(f=null!=ge.backgroundColor?ge.backgroundColor:"#777"),zot(m)&&(m=null!=ge.rollBackgroundColor?ge.rollBackgroundColor:"#555"),zot(z)&&(z=null!=ge.selectedBackgroundColor?ge.selectedBackgroundColor:"#444"),zot(y)&&(y=null!=ge.selectedRollBackgroundColor?ge.selectedRollBackgroundColor:"#555"),zot(v)&&(v=null!=ge.color?ge.color:"white"),zot(w)&&(w=null!=ge.rollColor?ge.rollColor:v),zot(C)&&(C=null!=ge.selectedColor?ge.selectedColor:v),zot(x)&&(x=null!=ge.selectedRollColor?ge.selectedRollColor:w),zot(b)&&(b=null!=ge.backdropColor?ge.backdropColor:b);var fe=k,me=T;zot(k)&&(k=null!=ge.borderColor?ge.borderColor:"#999"),zot(T)&&(T=null!=ge.borderWidth?ge.borderWidth:1),zot(A)&&(A=null!=ge.padding?ge.padding:p),zot(P)&&(P=null!=ge.corner?ge.corner:0),zot(S)&&(S=null==ge.swipe||ge.swipe),zot(B)&&(B=null==ge.scrollBarActive||ge.scrollBarActive),zot(I)&&(I=null==ge.scrollBarDrag||ge.scrollBarDrag),zot(E)&&(E=null!=ge.scrollBarColor?ge.scrollBarColor:k),zot(O)&&(O=null!=ge.scrollBarAlpha?ge.scrollBarAlpha:.3),zot(M)&&(M=null==ge.scrollBarFade||ge.scrollBarFade),zot(j)&&(j=null!=ge.scrollBarH?ge.scrollBarH:!i),zot(L)&&(L=null!=ge.scrollBarV?ge.scrollBarV:i),I&&(M=null!=ge.scrollBarFade&&ge.scrollBarFade),zot(Y)&&(Y=null==ge.scrollBarOverlay||ge.scrollBarOverlay),zot(_)&&(_=null==ge.slide||ge.slide),zot(D)&&(D=null!=ge.slideDamp?ge.slideDamp:.6),zot(X)&&(X=null!=ge.slideSnap?ge.slideSnap:i?"vertical":"horizontal"),zot(R)&&(R=null!=ge.shadowColor?ge.shadowColor:"rgba(0,0,0,.3)"),zot(W)&&(W=null!=ge.shadowBlur?ge.shadowBlur:20),zot(F)&&(F=null!=ge.paddingVertical?ge.paddingVertical:A),zot(H)&&(H=null!=ge.paddingHorizontal?ge.paddingHorizontal:A),zot(V)&&(V=null==ge.scrollWheel||ge.scrollWheel),zot(G)&&(G=null!=ge.titleBar?ge.titleBar:null),zot(q)&&(q=null!=ge.titleBarColor?ge.titleBarColor:null),zot(Q)&&(Q=null!=ge.titleBarBackgroundColor?ge.titleBarBackgroundColor:null),zot(U)&&(U=null!=ge.titleBarHeight?ge.titleBarHeight:35),zot(K)&&(K=null!=ge.draggable?ge.draggable:null),zot(Z)&&(Z=null!=ge.boundary?ge.boundary:null),zot(J)&&(J=null!=ge.onTop?ge.onTop:null),zot($)&&($=null!=ge.close?ge.close:null),zot(ee)&&(ee=null!=ge.closeColor?ge.closeColor:null),zot(te)&&(te=null!=ge.excludeCustomTap&&ge.excludeCustomTap),zot(ne)&&(ne=null!=ge.checkBox&&ge.checkBox),zot(re)&&(re=null!=ge.pulldown&&ge.pulldown),zot(se)&&(se=null!=ge.noScale&&ge.noScale),zot(ie)&&(ie=null!=ge.clone&&ge.clone),!1===G&&(G=null),this.vertical=i;var ze=this,ye=n;ne&&So.loop(o,function(e,t){o[t]=So.List.checkItem(e,null,r,"left",10,10,p,v,w,C,x,f,m,z,y)});var be,ve,we,Ce,xe,ke,Te,Ae,Pe,Se=Bo();o.constructor=={}.constructor&&(ve=zot(o.shade)?zot(ge.shade)?.2:ge.shade:o.shade,we=zot(o.dim)?zot(ge.dim)?.1:ge.dim:o.dim,Ce=zot(o.shift)?zot(ge.shift)?15:ge.shift:o.shift,xe=zot(o.bloom)?!zot(ge.bloom)&&ge.bloom:o.bloom,ke=zot(o.whither)?!zot(ge.whither)&&ge.whither:o.whither,Te=zot(o.open)?!zot(ge.open)&&ge.open:o.open,Ae=zot(o.arrows)?!zot(ge.arrows)&&ge.arrows:o.arrows,!0===xe&&(xe="s"==Se?.01:10),!0===ke&&(ke="s"==Se?.01:10),Io(xe),Io(ke),!0===Ce&&(Ce=15),!0===ve&&(ve=.2),!0===we&&(we=.1),Pe=zot(o.subStyles)?zot(ge.subStyles)?{}:ge.subStyles:o.subStyles,zot(o.menu)||(o=o.menu),be=new So.Hierarchy(o,Te),Te&&be.data&&be.data.id0&&(be.data.id0.open=!1),o=be.getLinearList(),pe||(a=s="left")),re&&(e=zot(be)?o.length:be.length,n=e*r/620*100+(e+1)*p+(zot(G)?0:U),T=0,z=f,b=So.clear,S=!1);var Be,Ie=0,Ee=0;So.loop(o,function(e){"ListItem"==e.type&&(e.width=r-2*p),se&&(e.width&&(Ie+=e.width),e.height&&(Ee+=e.height))}),Ie&&(Ie+=p*(o.length-1)),Ee&&(Ee+=p*(o.length-1)),this.align=a,this.valign=l,this.indent=g,zot(oe)||(n-=oe.height,((oe.list=ze).organizer=oe).setButtons(),U+=oe.height),this.zimWindow_constructor(r,n,b,k,T,A,P,S,B,I,E,O,M,j,L,_,D,X,!0,R,W,H,F,V,N,G,q,Q,U,K,Z,J,$,ee,ae,!1,null,!1,ce,ue,So.copy(ge)),this.type="List",zot(G)||(this.titleBarLabel.pos(null,U-30,null,!0),zot(U)&&(U=30),n-=U),zot(oe)||oe.addTo(ze).loc(0,-oe.height),ze.itemWidth=Ie&&se?i?r-2*H-(!B||Y?0:6):Ie/o.length:i?r-2*H-(!B||Y?0:6):(r-2*H)/e,ze.itemHeight=i?(n-2*F)/e:n-2*F-(!B||Y?0:6);var Oe,Me,je,Le=So.copy(ge);function Ye(e,t,o){e.listZID=t,e.label&&(ve&&new So.Rectangle(Ce*(o.level+1),e.height).alp(ve).pos(0,0,"right"==ze.align,!1,e),we&&new So.Rectangle(e.width,e.height).alp((o.level+1)*we).addTo(e).bot().ord(1),Ce&&"center"!=ze.align&&(e.label.x+=("right"==ze.align?-1:1)*Ce*(o.level+1)));var n=be.getData(t);n.obj=e,n.list&&!So.isEmpty(n.list)&&(e.accordion=new So.Label({size:Ae?22:36,text:n.open?Ae?"":"-":Ae?"":"+",align:"center",color:So.convertColor(v,"rgba",.6)}).center(e).alp(.7).pos(15,null,"right"!=ze.align).mov(0,n.open?-3:0))}function _e(){var o,n,t,r,i,a,l;ze.selected.accordion&&((o=be.getData(ze.selected.listZID)).open?(ze.selected.accordion&&(ze.selected.accordion.text=Ae?"":"+",ze.selected.accordion.mov(0,3)),o.open=!1,n=be.getNextSibling(ze.selected.listZID),t=zot(n)?ze.items.length-1:So.loop(ze.items,function(e,t){if(e.listZID==n)return t-1}),ke?(l=0,ze.enabled=!1,So.interval(ke,function(e){ze.removeAt(1,ze.selectedIndex+t-ze.selectedIndex-l),l++,e.total==e.count+1&&(ze.enabled=!0)},t-ze.selectedIndex,!0)):ze.removeAt(t-ze.selectedIndex,ze.selectedIndex+1)):(o.open=!0,ze.selected.accordion&&(ze.selected.accordion.text=Ae?"":"-",ze.selected.accordion.mov(0,-3)),r=be.getLinearList(o.list),i=be.getLinearIDs(o.list),o.opened?Array.isArray(r)&&(xe?(l=0,ze.enabled=!1,So.interval(xe,function(e){ze.addAt(r[l],ze.selectedIndex+1+l),e.total==e.count+1&&(ze.enabled=!0),l++},r.length,!0)):ze.addAt(r,ze.selectedIndex+1)):(o.opened=!0,zot(a=Pe[o.level])&&(a={}),Array.isArray(r)&&(xe?(l=0,ze.enabled=!1,So.interval(xe,function(e){ze.addAt(r[l],ze.selectedIndex+1+l,{backgroundColor:a.backgroundColor,color:a.color,rollBackgroundColor:a.rollBackgroundColor,rollColor:a.rollColor,selectedBackgroundColor:a.selectedBackgroundColor,selectedColor:a.selectedColor,selectedRollBackgroundColor:a.selectedRollBackgroundColor,selectedRollColor:a.selectedRollColor});var t=i[l];Ye(ze.items[ze.selectedIndex+1+l],t,o),e.total==e.count+1&&(ze.enabled=!0),l++,ze.stage&&ze.stage.update()},r.length,!0)):(ze.addAt(r,ze.selectedIndex+1,{backgroundColor:a.backgroundColor,color:a.color,rollBackgroundColor:a.rollBackgroundColor,rollColor:a.rollColor,selectedBackgroundColor:a.selectedBackgroundColor,selectedColor:a.selectedColor,selectedRollBackgroundColor:a.selectedRollBackgroundColor,selectedRollColor:a.selectedRollColor}),So.loop(i,function(e,t){Ye(ze.items[ze.selectedIndex+1+t],e,o)}))))))}function De(e){if(i){var t=-(ze.itemHeight+p)*e+n/2-ze.itemHeight/2;return(ze.itemHeight+p)*ze.length<n&&(t=0),0<t&&(t=0),(ze.itemHeight+p)*ze.length>n&&t<-ze.tabs.height+n-2*F&&(t=-ze.tabs.height+n-2*F),t}var o=-(ze.itemWidth+p)*e+r/2-ze.itemWidth/2;return(ze.itemWidth+p)*ze.length<r&&(o=0),0<o&&(o=0),(ze.itemWidth+p)*ze.length>r&&o<-ze.tabs.width+r-2*H&&(o=-ze.tabs.width+r-2*H),o}delete Le.borderWidth,delete Le.borderColor,Oe=So.copy(o,ie),Be=ze.tabs=new So.Tabs({width:i?ze.itemWidth:ze.itemWidth*o.length,height:i?ze.itemHeight*o.length:ze.itemHeight,tabs:Oe,spacing:p,vertical:i,backgroundColor:f,rollBackgroundColor:m,selectedBackgroundColor:z,selectedRollBackgroundColor:y,color:v,rollColor:w,selectedColor:C,selectedRollColor:x,backdropColor:b,currentEnabled:!0,currentSelected:t,align:a,valign:l,labelAlign:s,labelValign:c,labelIndent:u,labelIndentHorizontal:d,labelIndentVertical:h,indent:g,useTap:!0,excludeCustomTap:te,style:ce,group:ue,inherit:Le}).mov(i?0:H,i?F:0),ze.add(Be),be&&(Me=be.getLinearIDs(),So.loop(Me,function(e,t){ze.tabs.buttons[t].listZID=e}),So.loop(ze.tabs.buttons,function(e){var t=be.getData(e.listZID);So.isEmpty(t.list)||(e.accordion=new So.Label({size:Ae?22:36,text:Ae?"":"+",align:"center",color:So.convertColor(v,"rgba",.6)}).center(e).alp(.7).pos(15,null,"right"!=ze.align))}),ze.tap(_e)),Be.tap(function(e){e.target.selectedIndex!=ze.selectedIndex&&(ze.selectedIndex=Be.selectedIndex,ze.dispatchEvent("change"),e.preventDefault())}),this.getItemIndex=function(e){return ze.items.indexOf(e)},this.animateTo=function(e,t){zot(e)&&(e=0),zot(t)&&(t=.05);var o,n=Bo(t),r=De(ze.selectedIndex=e);return i?(o=Math.abs(ze.scrollY-r)/ze.itemHeight,ze.animate({scrollY:r},o*t/("s"==n?1e3:1))):(o=Math.abs(ze.scrollX-r)/ze.itemWidth,ze.animate({scrollX:r},o*t/("s"==n?1e3:1))),ze},this.addAt=function(e,t,o,n){return zot(e)||("ListItem"==e.type?e.width=r-2*p:Array.isArray(e)&&So.loop(e,function(e){"ListItem"==e.type&&(e.width=r-2*p)}),e.clone?ze.tabs.addAt(n?e.clone():e,t,o):ze.tabs.addAt(So.copy(e,n),t,o),ze.update()),ze},this.removeAt=function(e,t){ze.tabs.removeAt(e,t),je=ze.tabs.selectedIndex;var o=Be.getBounds();return Be.setBounds(0,0,o.width,o.height),ze.update(),ze},"%-&"==o[0]&&1==o.length&&ze.removeAt(1,0),this.clear=function(){return ze.tabs.removeAt(ze.length,0),ze.content.x=0,ze.content.y=0,ze.update(),ze},this.setCheck=function(e,t){zot(e)&&(e=0),zot(t)&&(t=!0),ze.items[e].checkBox.checked=t,ze.items[e].content.zimOut()},this.getCheck=function(e){return zot(e)&&(e=0),ze.items[e].checkBox.checked},this.setChecks=function(t){return So.loop(ze.items,function(e){e.checkBox.checked=t,e.content.zimOut()}),ze},Object.defineProperty(ze,"items",{get:function(){return ze.tabs.buttons},set:function(e){zon&&zogy("List() - items is read only - use addAt() and removeAt() to change")}}),Object.defineProperty(ze,"list",{get:function(){return ze.tabs.buttons},set:function(e){zon&&zogy("List() - list is read only - use addAt() and removeAt() to change")}}),Object.defineProperty(ze,"length",{get:function(){return ze.tabs.buttons.length},set:function(e){zon&&zogy("List() - length is read only")}}),Object.defineProperty(ze,"selectedIndex",{get:function(){return je},set:function(e){Be.selectedIndex=e,ze.label=Be.label,ze.selected=Be.selected,je=e,So.OPTIMIZE||!zns&&OPTIMIZE||!ze.stage||ze.stage.update()}}),t&&(ze.selectedIndex=0),Object.defineProperty(ze,"selectedIndexPlusPosition",{get:function(){return je},set:function(e){ze.selectedIndex=e,je=e,i?ze.scrollY=De(e)-2:ze.scrollX=De(e),So.OPTIMIZE||!zns&&OPTIMIZE||!ze.stage||ze.stage.update()}}),Object.defineProperty(ze,"text",{get:function(){return ze.label?ze.label.text:null},set:function(e){ze.label&&(ze.label.text=e)}}),Object.defineProperty(ze,"currentValue",{get:function(){return ze.label?ze.label.text:null},set:function(r){var e=So.loop(ze.list,function(e,t){var o;e.label&&(o=e.label.text),"Label"==e.type&&(o=e.text);var n=new RegExp(r,"i");if(o&&o.match(n))return t});!0!==e&&(ze.selectedIndexPlusPosition=e)}}),Object.defineProperty(ze,"itemDown",{get:function(){return ze.tabs.buttonDown},set:function(e){}}),Object.defineProperty(ze,"itemsText",{get:function(){for(var e=[],t=0;t<ze.tabs.buttons.length;t++){var o=ze.tabs.buttons[t].label;o&&!zot(o.text)?e.push(o.text):e.push(null)}return e},set:function(e){zon&&zogy("List() - itemsText is read only")}}),t&&(ze.selectedIndex=0),Object.defineProperty(ze,"checkBoxes",{get:function(){for(var e=[],t=0;t<ze.tabs.buttons.length;t++){var o=ze.tabs.buttons[t].checkBox;e.push(o)}return e},set:function(e){zon&&zogy("List() - checkBoxes is read only")}}),Object.defineProperty(ze,"accordionIndex",{get:function(){var e=ze.selected.listZID;return e?Number(e.split("id")[1]):null},set:function(e){zon&&zogy("List() - accordionIndex is read only")}}),this.last=function(){return this.selectedIndexPlusPosition=this.length-1,this},this.first=function(){return this.selectedIndexPlusPosition=0,this},Te&&_e&&(ze.selected=ze.items[0],_e()),zot(le)&&(le=null!=ge.selectedIndex?ge.selectedIndex:0),ze.selectedIndex=le,!1!==ce&&So.styleTransforms(this,ge),this.clone=function(){return ze.cloneProps(new So.List(r,ye,So.copy(ze.originalList,!0),e,i,t,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,fe,me,A,So.copy(P),S,B,I,E,O,M,j,L,Y,_,D,X,R,W,H,F,V,N,G,q,Q,U,K,Z,J,$,ee,te,oe,ne,re,ie,ae,le,se,ce,this.group,de))},this.dispose=function(e,t,o){return o||(ze.organizer&&ze.organizer.dispose(),this.zimWindow_dispose()),!0}},So.extend(So.List,So.Window,["clone","dispose"],"zimWindow",!1),So.List.makeBase=function(e,t,o){e.backing=new So.Rectangle(e.width,e.height,So.dark).center(e),"Label"==t.type?e.label=t:e.label=new So.Label(t,null,null,So.white),e.text=e.label.text,e.label.center(e).loc(o)},So.List.slider=function(e,t,o,n,r,i,a,l,s,c,u,d){var h;if(h=zob(So.List.slider,arguments,"label, min, max, val, call, step, obj, property, paddingLeft, paddingRight, factor, offset"))return h;var g=new So.Container(620,100);return g.type="ListItem",g.listItem="Slider",zot(s)&&(s=20),zot(c)&&(c=30),zot(u)&&(u=1),zot(d)&&(d=0),So.List.makeBase(g,e,s),g.slider=new So.Slider({inside:!0,barWidth:40,barLength:150,barColor:So.blue,min:t,max:o,step:i}).sca(1.5).center(g).mov(20).change(function(){g.stepper.currentValue=d+Math.round(g.slider.currentValue*u),a&&l&&(a[l]=g.slider.currentValue),r&&"function"==typeof r&&r(g.slider.currentValue,g.parent),g.slider.stage&&g.slider.stage.update()}),zot(n)||(g.slider.currentValue=n),g.stepper=new So.Stepper({corner:0,arrows:!1,stepperType:"number",min:d+t*u,max:d+o*u}).sca(.5).center(g).pos(c,null,!0).change(function(){g.slider.currentValue=g.stepper.currentValue/(u||1)-offest,a&&l&&(a[l]=g.slider.currentValue),r&&"function"==typeof r&&r(g.slider.currentValue,g.parent),g.stepper.stage&&g.stepper.stage.update()}),zot(n)||(g.stepper.currentValue=d+n*u),g},So.List.checkBox=function(e,t,o,n,r,i,a){var l;if(l=zob(So.List.checkBox,arguments,"label, checked, call, obj, property, paddingLeft, paddingRight"))return l;var s=new So.Container(620,100);return s.type="ListItem",s.listItem="CheckBox",zot(i)&&(i=20),zot(a)&&(a=30),So.List.makeBase(s,e,i),s.checkBox=new So.CheckBox({startChecked:t,label:""}).sca(1.2).center(s).pos(256+a,null,!0).change(function(){n&&r&&(n[r]=s.checkBox.checked),o&&"function"==typeof o&&o(s.checkBox.checked,s.parent),s.checkBox.stage&&s.checkBox.stage.update()}),s},So.List.colorPicker=function(e,t,o,n,r,i,a,l){var s;if(s=zob(So.List.colorPicker,arguments,"label, color, picker, call, obj, property, paddingLeft, paddingRight"))return s;var c=new So.Container(620,100);return c.type="ListItem",c.listItem="ColorPicker",zot(a)&&(a=20),zot(l)&&(l=30),So.List.makeBase(c,e,a),zot(t)&&(t=So.pink),c.colorPicker=o||new So.ColorPicker({alphaPicker:!1}),c.swatch=new So.Rectangle(132,66,t,So.lighter,5).center(c).pos(270,null,!0).cur(),c.swatch.on("mousedown",function(){c.colorPicker.selectedColor=c.swatch.color,c.colorPicker.show()}),c.colorLabel=new So.Label(c.swatch.color.toUpperCase(),40,null,So.light).center(c).pos(l,null,!0),c.colorPicker.on("close",function(){var e=c.colorPicker.stage;c.colorPicker.hide(),e&&e.update()}),c.colorPicker.on("change",function(){var e=c.colorPicker.stage;c.swatch.color=c.colorPicker.selectedColor,c.colorLabel.text=c.swatch.color.toUpperCase(),c.colorPicker.hide(),r&&i&&(r[i]=c.colorPicker.selectedColor),n&&"function"==typeof n&&n(c.colorPicker.selectedColor,c.parent),e&&e.update()}),c},So.List.checkItem=function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m){var z;if(z=zob(So.List.checkItem,arguments,"label, size, width, align, paddingHorizontal, paddingVertical, spacing, color, rollColor, selectedColor, selectedRollColor, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, group, inherit"))return z;var y=So.getStyle("CheckBox",f,m);zot(t)&&(t=null!=y.size?y.size:20);y=So.getStyle("List",f,m);zot(o)&&(o=300),zot(r)&&(r=10),zot(i)&&(i=10),zot(n)&&(n=null!=y.align?y.align:"center"),zot(a)&&(a=null!=y.spacing?y.spacing:2),zot(d)&&(d=null!=y.backgroundColor?y.backgroundColor:"#777"),zot(h)&&(h=null!=y.rollBackgroundColor?y.rollBackgroundColor:"#555"),zot(g)&&(g=null!=y.selectedBackgroundColor?y.selectedBackgroundColor:"#444"),zot(p)&&(p=null!=y.selectedRollBackgroundColor?y.selectedRollBackgroundColor:"#555"),zot(l)&&(l=null!=y.color?y.color:"white"),zot(s)&&(s=null!=y.rollColor?y.rollColor:l),zot(c)&&(c=null!=y.selectedColor?y.selectedColor:l),zot(u)&&(u=null!=y.selectedRollColor?y.selectedRollColor:s);var b=new So.Container;return b.type="CheckItem",b.checkBox=new So.CheckBox({size:t,label:e,color:l,tap:!0}),b.backing=new So.Rectangle(o-2*a,b.checkBox.height+2*i,d).addTo(b),b.checkBox.center(b),"center"!=n&&"middle"!=n&&b.checkBox.pos(r,null,"right"==n),b.backing.tap(function(){b.checkBox.toggle(),b.zimOut()}),b.checkBox.change(function(){b.zimOut()}),b.zimOver=function(){b.backing.color=b.checkBox.checked?p:h,b.checkBox.label.color=b.checkBox.checked?u:s,b.stage&&b.stage.update()},b.zimOut=function(){b.backing.color=b.checkBox.checked?g:d,b.checkBox.label.color=b.checkBox.checked?c:l,b.stage&&b.stage.update()},b.backing.on("mouseover",b.zimOver),b.checkBox.on("mouseover",b.zimOver),b.backing.on("mouseout",b.zimOut),b.checkBox.on("mouseout",b.zimOut),b},So.Stepper=function(n,e,o,t,r,i,a,c,l,s,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,I,E,O,M,j,L){var Y;if(Y=zob(So.Stepper,arguments,"list, width, backgroundColor, borderColor, borderWidth, label, color, vertical, arrows, corner, shadowColor, shadowBlur, continuous, display, press, hold, holdDelay, holdSpeed, draggable, dragSensitivity, dragRange, stepperType, min, max, step, step2, arrows2, arrows2Scale, keyEnabled, keyArrows, rightForward, downForward, selectedIndex, style, group, inherit",this))return Y;z_d("61"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Stepper",this.group=j;var _=!1===M?{}:So.getStyle(this.type,this.group,L);zot(n)&&(n=null!=_.list?_.list:[]),zot(e)&&(e=null!=_.width?_.width:200),zot(o)&&(o=null!=_.backgroundColor?_.backgroundColor:"white"),zot(t)&&(t=null!=_.borderColor?_.borderColor:null),zot(r)&&(r=null!=_.borderWidth?_.borderWidth:null),t<0||r<0?t=r=null:null!=t&&null==r&&(r=1),zot(a)&&(a=null!=_.color?_.color:"#555"),zot(i)&&(i=null!=_.label?_.label:""),"string"!=typeof i&&"number"!=typeof i||(i=new So.Label({text:i,size:null!=_.size?2*_.size:64,color:a,align:null!=_.align?_.align:"center",valign:null!=_.valign?_.valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),zot(c)&&(c=null!=_.vertical&&_.vertical),zot(l)&&(l=null==_.arrows||_.arrows),zot(s)&&(s=null!=_.corner?_.corner:16),zot(u)&&(u=null!=_.shadowColor?_.shadowColor:"rgba(0,0,0,.3)"),zot(d)&&(d=null!=_.shadowBlur?_.shadowBlur:14),zot(h)&&(h=null!=_.continuous&&_.continuous),zot(g)&&(g=null==_.display||_.display),zot(p)&&(p=null==_.press||_.press),zot(f)&&(f=null==_.hold||_.hold);var D=Bo(m);zot(m)&&(m=null!=_.holdDelay?_.holdDelay:"s"==D?.4:400),zot(z)&&(z=null!=_.holdSpeed?_.holdSpeed:"s"==D?.2:200),Io(z,D),zot(y)&&(y=null==_.draggable||_.draggable),(zot(b)||b<=0)&&(b=null!=_.dragSensitivity?_.dragSensitivity:.1),zot(v)&&(v=null!=_.dragRange?_.dragRange:200),zot(w)&&(w=null!=_.stepperType?_.stepperType:0<n.length?"list":"number"),zot(C)&&(C=null!=_.min?_.min:0),zot(x)&&(x=null!=_.max?_.max:10),zot(k)&&(k=null!=_.step?_.step:1),zot(T)&&(T=null!=_.step2?_.step2:k),zot(A)&&T!=k&&"number"==w&&(A=null==_.arrows2||_.arrows2),zot(P)&&(P=null!=_.arrows2Scale?_.arrows2Scale:.5),zot(S)&&(S=null==_.keyEnabled||_.keyEnabled),zot(B)&&(B=null==_.keyArrows||_.keyArrows),zot(I)&&(I=null==_.rightForward||_.rightForward),zot(E)&&(E=null!=_.downForward?_.downForward:"number"!=w);var X,R,W,H,F,V,N,G=this,q=k,Q=1;function U(e){var t=String(e).split(".")[1];return t=t?t.length:0}"number"==w?(C=Number(C),x=Number(x),NaN==C&&(C=0),NaN==x&&(x=100),R=x<C?(Q=-1,H=x,x=C,C=H,x):C,this.min=C,this.max=x,C<0&&0<x&&(R=0),k=Math.abs(k),W=Math.max(U(k),U(T))):"letter"==w?(n="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),"string"!=typeof C&&(C="A"),"string"!=typeof x&&(x="Z"),C=C.substr(0,1).toUpperCase(),x=x.substr(0,1).toUpperCase(),(F=n.indexOf(C))<0&&(C="A",F=0),(V=n.indexOf(x))<0&&(x="Z",V=n.length),V<F&&(n.reverse(),F=n.length-1-F,V=n.length-1-V),n=n.splice(F,V-F+1)):w="list";var K=0,Z=0;y&&this.on("mousedown",function(e){G.zimAccessibility&&G.zimAccessibility.aria||(this.stage.mouseMoveOutside=!0,K=e.rawX/So.scaX,Z=e.rawY/So.scaY,N=this.stage.on("stagemousemove",function(e){K=e.rawX/So.scaX,Z=e.rawY/So.scaY}))},null,!0),(this.label=i).mouseChildren=!1;var J,$,ee,te,oe,ne,re,ie,ae,le,se,ce,ue,de,he;i.mouseEnabled=!1;function ge(r,i,a,e,t){var o,n,l;f&&(0==(se=e)&&(se=1),0==(ce=t)&&(ce=1),y||(b=1),n=m*("s"==D?1e3:1),l=o=z*("s"==D?1e3:1),ue=new So.Proportion(0,v,o,o*b),J=setTimeout(function(){(function n(){$=setTimeout(function(){var e,t,o=r;y&&(e=Math.abs(K-se),t=Math.abs(Z-ce),c?(i||a||(e=0),a&&(t=0)):(i||a||(t=0),a&&(e=0)),(10<=e||10<=t)&&(l=t<e?(q=c?T:k,o=0<K-se?1:-1,ue.convert(Math.abs(se-K))):(q=c?k:T,o=0<Z-ce?1:-1,"number"!=w&&E||(o*=-1),ue.convert(Math.abs(ce-Z))))),fe(o),n()},l)})()},n))}function pe(){G.zimAccessibility&&G.zimAccessibility.aria||(clearTimeout(J),clearTimeout($))}function fe(e){var t;if("number"==w){var o=R;R+=q*e*Q,R=So.decimals(R,W),h?R>G.max?R=G.min:R<G.min&&(R=G.max):(R>G.max?(R=1==k?G.max:o,g&&(de.cursor="default")):g&&(de.cursor="pointer"),R<G.min&&(R=1==k?G.min:o))}else{if(t=X+e,h)t>n.length-1&&(t=0),t<0&&(t=n.length-1);else{if(t>n.length-1)return void(g&&(de.cursor="default"));if(g&&(de.cursor="pointer"),t<0)return}X=t}ze("number"==w?R:n[X],"number"==w?R:X),G.currentValue!=he&&G.dispatchEvent("change"),he=G.currentValue}function me(){G.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function ze(e,t){X=t,g&&("number"==w&&0!=e&&0<W&&(e=So.decimals(e,W,!0)),i.text=e,i.center(G)),l&&(ee.alpha=1,te.color=o,ee.cursor="pointer",oe.alpha=1,ne.color=o,oe.cursor="pointer",h||("number"==w?(X==G.min&&(0<Q?ye:be)(),X==G.max&&(0<Q?be:ye)()):(0==X&&(c?be:ye)(),X==n.length-1&&(c?ye:be)()))),!oe||So.OPTIMIZE||!zns&&OPTIMIZE||!oe.stage?!i||So.OPTIMIZE||!zns&&OPTIMIZE||!i.stage||i.stage.update():oe.stage.update(),G.zimAccessibility&&G.zimAccessibility.changeTitle(G,null,!0)}function ye(){l&&(ee.alpha=.8,te.color="#aaa",ee.cursor="default")}function be(){l&&(oe.alpha=.8,ne.color="#aaa",oe.cursor="default")}l&&(ee=this.containerPrev=new So.Container({style:!1}),this.addChild(ee),te=this.arrowPrev=new So.Triangle(100,80,80,o,null,null,null,null,null,null,!1),-1!=u&&0<d&&(ee.shadow=new createjs.Shadow(u,3,3,d)),ee.addChild(te),ee.expand(),ee.cursor="pointer",ee.on("mousedown",function(e){var t;G.zimAccessibility&&G.zimAccessibility.aria||(q=k,fe(t=c?E?1:-1:I?-1:1),ge(t,null,null,e.stageX/So.scaX,e.stageY/So.scaY))}),f&&ee.on("pressup",pe),c?(ee.rotation=180,ee.x=e/2,ee.y=g?ee.height+25+100+ee.height/2+25:2*ee.height):(ee.rotation=-90,ee.x=ee.height/2,ee.y=ee.width/2)),g?((de=this.textBox=new So.Rectangle(e,100,o,t,r,s,null,null,!1)).cursor="pointer",this.addChild(de),-1!=u&&0<d&&(de.shadow=new createjs.Shadow(u,3,3,d)),l&&(c?l&&(de.y=te.height+25):l&&(de.x=te.height+25)),this.addChild(i),0<n.length&&(X=0,i.text=n[X]),i.center(G),de.on("mousedown",function(e){G.zimAccessibility&&G.zimAccessibility.aria||(he=G.currentValue,p&&fe(1),ge(1,!0,null,e.stageX/So.scaX,e.stageY/So.scaY))}),de.on("pressup",function(){G.zimAccessibility&&G.zimAccessibility.aria})):0<n.length&&(X=0),l&&(oe=this.containerNext=new So.Container({style:!1}),this.addChild(oe),ne=this.arrowNext=new So.Triangle(100,80,80,o,null,null,null,null,null,null,!1),-1!=u&&0<d&&(oe.shadow=new createjs.Shadow(u,3,3,d)),oe.addChild(ne),oe.expand(),oe.cursor="pointer",oe.on("mousedown",function(e){var t;G.zimAccessibility&&G.zimAccessibility.aria||(q=k,fe(t=c?E?-1:1:I?1:-1),ge(t,null,null,e.stageX/So.scaX,e.stageY/So.scaY))}),f&&oe.on("pressup",pe),c?(oe.rotation=0,oe.x=e/2,oe.y=oe.getBounds().height/2):(oe.rotation=90,oe.x=g?de.x+de.getBounds().width+oe.getBounds().height/2+25:ee.x+ee.getBounds().width,oe.y=oe.getBounds().width/2)),f&&g&&de.on("pressup",pe),A&&(re=this.prev2=new So.Container({style:!1}),ie=this.arrowPrev2=new So.Triangle(100,80,80,"rgba(0,0,0,.2)",o,2,null,null,null,null,!1),re.addChild(ie),re.expand(),re.cursor="pointer",re.sca(P),re.alpha=.5,re.on("mousedown",function(e){var t;G.zimAccessibility&&G.zimAccessibility.aria||(q=T,fe(t=c?I?-1:1:E?1:-1),ge(t,null,!0,e.stageX/So.scaX,e.stageY/So.scaY))}),f&&re.on("pressup",pe),ae=this.next2=new So.Container({style:!1}),le=this.arrowNext2=new So.Triangle(100,80,80,"rgba(0,0,0,.2)",o,2,null,null,null,null,!1),ae.addChild(le),ae.expand(),ae.cursor="pointer",ae.sca(P),ae.alpha=.5,ae.on("mousedown",function(e){var t;G.zimAccessibility&&G.zimAccessibility.aria||(q=T,fe(t=c?I?1:-1:E?-1:1),ge(t,null,!0,e.stageX/So.scaX,e.stageY/So.scaY))}),f&&ae.on("pressup",pe),c?(re.y=this.height/2,re.x=-re.width/2-25*Math.max(.2,Math.min(1,P)),re.rotation=270,ae.y=this.height/2,ae.x=this.width+ae.width/2+25*Math.max(.2,Math.min(1,P)),ae.rotation=90):(ae.x=this.width/2,ae.y=-ae.height/2-25*Math.max(.2,Math.min(1,P)),ae.rotation=0,re.x=this.width/2,re.y=this.height+re.height/2+25*Math.max(.2,Math.min(1,P)),re.rotation=180),this.addChild(re,ae)),Object.defineProperty(this,"stepperArray",{get:function(){if("number"==w){n=[];for(var e=G.min;e<=G.max;e+=Math.min(k,T))n.push(So.decimals(e,W,null,!1))}return n},set:function(e){n=e,G.selectedIndex}}),Object.defineProperty(this,"min",{get:function(){return C},set:function(e){"number"==w?(G.currentValue<e&&(G.currentValue=e),C=e,G.selectedIndex):C=e}}),Object.defineProperty(this,"max",{get:function(){return x},set:function(e){"number"==w?(G.currentValue>e&&(G.currentValue=e),x=e,G.selectedIndex):x=e}}),ze("number"==w?R:n[X],"number"==w?R:X),Object.defineProperty(this,"selectedIndex",{get:function(){return"number"==w?G.stepperArray.indexOf(G.currentValue):X},set:function(e){zot(e)||("number"==w?(X=Math.min(G.stepperArray.length-1,Math.max(0,e)),ze(R=G.stepperArray[X],R)):(e=Math.min(n.length-1,Math.max(0,e)),ze(n[X=e],X)))}}),Object.defineProperty(this,"currentValue",{get:function(){return"number"==w?R:n[X]},set:function(e){if(!zot(e))if("number"==w){if(e=Number(e),G.max>G.min){if(e>G.max||e<G.min)return}else if(e<G.max||e>G.min)return;var t=G.stepperArray.indexOf(e);if(t<0)return;X=t,ze(R=G.stepperArray[X],R)}else{if(!(-1<n.indexOf(e)))return;if((e=n.indexOf(e))==G.selectedIndex)return;ze(n[X=e],X)}}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return G.currentValue},set:function(e){String(e)!=String(G.currentValue)&&(G.currentValue=e,G.dispatchEvent("change"))}}),Object.defineProperty(this,"continuous",{get:function(){return h},set:function(e){h=e,"number"==w?ze(R,R):ze(n[G.selectedIndex],G.selectedIndex)}}),this._enabled=!0,Object.defineProperty(G,"enabled",{get:function(){return G._enabled},set:function(e){qe(G,e),e?("number"==w?ze(R,R):ze(n[G.selectedIndex],G.selectedIndex),window.addEventListener("keydown",G.keyDownEvent)):(ye(),be(),window.removeEventListener("keydown",G.keyDownEvent),g&&(i.mouseChildren=!1),g&&(i.mouseEnabled=!1)),!oe||So.OPTIMIZE||!zns&&OPTIMIZE||!oe.stage?!i||So.OPTIMIZE||!zns&&OPTIMIZE||!i.stage||i.stage.update():oe.stage.update()}}),void 0!==KEYFOCUS&&(So.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return So.KEYFOCUS==G},set:function(e){So.KEYFOCUS=G}}),So.KEYFOCUS||me(),this.on("mousedown",function(){me()});var ve=!0,we="";this.on("mousedown",function(){ve=!0,we="",G.zimAccessibility&&G.zimAccessibility.aria||(G.focus=!0,0)}),this.keyDownEvent=function(e){if(G.stage&&(G.zimAccessibility&&G.focus||!G.zimAccessibility&&G.keyFocus)){var t,o,n,r,i=(e=e||event).keyCode;if(B&&37<=i&&i<=40&&(o=I?39:37,n=E?38:40,r=I?37:39,i==(t=E?40:38)||i==o?(q=c&&i==t||!c&&i==o?k:T,fe(1)):i!=n&&i!=r||(q=c&&i==n||!c&&i==r?k:T,fe(-1))),S)if("number"==w){var a,l=null,s=null;if(8==i&&((a=String(we).split("")).pop(),l=a.pop(),we=a.join("")),!e.shiftKey&&48<=i&&i<=57?l=i-48:96<=i&&i<=105?l=i-96:190==i?(we=String(we)+".",s=!0):173==i||189==i?(G.currentValue=-1*G.currentValue,G.currentValue!=he&&G.dispatchEvent("change"),he=G.currentValue,0):46==i&&(ve=!0,we=""),zot(l)&&zot(s))return ve=!0,void(we="");if(zot(l))return;if(we=ve?(ve=!1,l):l=Number(we+""+l),l<C||x<l)return;G.currentValue=l,G.currentValue!=he&&G.dispatchEvent("change"),he=G.currentValue}else ve=!0,we="",G.currentValue=String.fromCharCode(e.keyCode),G.currentValue!=he&&G.dispatchEvent("change"),he=G.currentValue}},window.addEventListener("keydown",this.keyDownEvent),this.next=function(){fe(1)},this.prev=function(){fe(-1)},zot(O)&&(O=null!=_.selectedIndex?_.selectedIndex:0),G.selectedIndex=O,!1!==M&&So.styleTransforms(this,_),this.clone=function(){return G.cloneProps(new So.Stepper(n,e,o,t,r,i.clone(),a,c,l,s,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,I,E,O,M,this.group,L))},this.dispose=function(e,t,o){return window.removeEventListener("keydown",G.keyDownEvent),G.removeAllEventListeners(),G.stage&&G.stage.off(N),o||this.zimContainer_dispose(!0),ee=this.containerPrev=te=this.arrowPrev=null,oe=this.containerNext=ne=this.arrowNext=null,!(de=this.textBox=i=this.label=null)}},So.zut=function(e){if(zot(e)||!e.key)return!0;So.async("https://zimjs.com/gamdata.php?id="+e.key+"&player="+e.player+"&score="+e.score+"&reverse="+e.info.reverse+"&total="+e.info.total+"&allowZero="+e.info.allowZero,e.info.type)},So.extend(So.Stepper,So.Container,["clone","dispose"],"zimContainer",!1),So.Slider=function(a,l,t,s,e,o,n,c,r,i,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,I,E,O,M){var j;if(j=zob(So.Slider,arguments,"min, max, step, button, barLength, barWidth, barColor, vertical, useTicks, tickColor, tickStep, semiTicks, tickScale, semiTickScale, accentSize, accentOffset, accentColor, accentBackgroundColor, accentDifference, sound, inside, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, damp, currentValue, expand, expandVertical, expandBar, expandBarVertical, style, group, inherit",this))return j;z_d("62"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Slider",this.group=O;var L=!1===E?{}:So.getStyle(this.type,this.group,M);if(zot(a)&&(a=null!=L.min?L.min:0),zot(l)&&(l=null!=L.max?L.max:10),l-a!=0){zot(b)&&(b=null!=L.sound&&L.sound),zot(t)&&(t=null!=L.step?L.step:0),zot(s)&&(s=null!=L.button?L.button:b?"aztec":null),zot(e)&&(e=null!=L.barLength?L.barLength:300),zot(o)&&(o=null!=L.barWidth?L.barWidth:3),zot(n)&&(n=null!=L.barColor?L.barColor:b?So.lighter:"#666"),zot(c)&&(c=null!=L.vertical?L.vertical:!!b),zot(r)&&(r=null!=L.useTicks?L.useTicks:!!b),zot(u)&&(u=null!=L.tickStep?L.tickStep:t||(r||b?(a-l)/40:0)),zot(d)&&(d=null!=L.semiTicks?L.semiTicks:u?3:0),zot(i)&&(i=null!=L.tickColor?L.tickColor:b?So.tin:n),zot(h)&&(h=null!=L.tickScale?L.tickScale:b?1.25:1),zot(g)&&(g=null!=L.semiTickScale?L.semiTickScale:1),zot(p)&&(p=null!=L.accentSize?L.accentSize:b?10:0),zot(f)&&(f=null!=L.accentOffset?L.accentOffset:b?-(p+o)/2:0),zot(m)&&(m=null!=L.accentColor?L.accentColor:So.pink),zot(z)&&(z=null!=L.accentBackgroundColor?L.accentBackgroundColor:b?So.blue:So.clear),zot(y)&&(y=null!=L.accentDifference?L.accentDifference:-.5),zot(v)&&(v=null!=L.inside&&L.inside),zot(w)&&(w=null==L.keyArrows||L.keyArrows),zot(x)&&(x=null==L.keyArrowsH||L.keyArrowsH),zot(k)&&(k=null==L.keyArrowsV||L.keyArrowsV),zot(C)&&(C=null!=L.keyArrowsStep?L.keyArrowsStep:(l-a)/100),zot(T)&&(T=null!=L.damp&&L.damp),zot(A)&&(A=null!=L.currentValue&&L.currentValue),zot(P)&&(P=null!=L.expand?L.expand:So.mobile()?10:null),zot(S)&&(S=null!=L.expandVertical?L.expandVertical:P),zot(B)&&(B=null!=L.expandBar?L.expandBar:null),zot(I)&&(I=null!=L.expandBarVertical?L.expandBarVertical:P);var Y,_=this;p&&(_.accentBacking=new So.Rectangle(e-.25,p+y,z).addTo(this).rot(c?90:0).mov(c?-f-o/2+y/2:.25,c?0:f+o/2-y/2),Y=_.accent=new So.Rectangle(e,p,m).sca(0,1).rot(c?-90:0).mov(c?-f-p-o/2:0,c?e:f+o/2).addTo(this));var D,X,R,W,H,F,V,N,G=!(!zot(L.backing)&&"Pattern"!=L.backing.type);!zot(s)&&"string"!=typeof s||(D=30,X=40,c&&(D=50,X=40),"pill"!=s&&"aztec"!=s&&"circle"!=s&&"grip"!=s||("pill"==s?H={width:c?40:18,height:c?18:40,borderColor:So.tin,borderWidth:3,corner:8}:"aztec"==s?(D=null!=L.width?L.width:.9*Math.max(D,X),X=null!=L.height?L.height:.6*Math.min(D,X),R=fe(null!=L.backgroundColor?L.backgroundColor:So.lighter).rot(c?0:-90),W=fe(null!=L.rollBackgroundColor?L.rollBackgroundColor:So.white).rot(c?0:-90),H={width:D,height:X,backing:R,rollBacking:W},L.borderWidth=0,L.borderColor=0):"circle"==s&&(D=null!=L.width?L.width:30,X=null!=L.height?L.height:30,H={width:D,height:D,corner:null!=L.corner?L.corner:D/2}),_.buttonType=s),F=null!=L.borderColor?L.borderColor:H?H.borderColor:G?"#666":null,s=new So.Button({width:null!=L.width?L.width:H?H.width:D,height:null!=L.height?L.height:H?H.height:X,label:"",backgroundColor:null!=L.backgroundColor?L.backgroundColor:"#fff",rollBackgroundColor:null!=L.rollBackgroundColor?L.rollBackgroundColor:"#ddd",borderColor:F,borderRollColor:null!=L.borderRollColor?L.borderRollColor:F,borderWidth:null!=L.borderWidth?L.borderWidth:H?H.borderWidth:G?1:null,corner:null!=L.corner?L.corner:H?H.corner:0,backing:null!=L.backing?L.backing.clone():H?H.backing:null,rollBacking:null!=L.rollBacking?L.rollBacking.clone():H?H.rollBacking:null,shadowColor:null!=L.shadowColor?L.shadowColor:null,shadowBlur:null!=L.shadowBlur?L.shadowBlur:null,hitPadding:30,style:!1}),"circle"==_.buttonType?(s.scaleY=X/D,c||s.rot(-90)):"grip"==_.buttonType&&So.loop([1,1,1],function(e,t,o){c?new So.Line(.62*s.width,e,s.borderColor?s.borderColor:So.grey).pos(0,.4*s.height/2+(t+1)*(.6*s.height)/(o+1),So.CENTER,So.TOP,s):new So.Line(.62*s.height,e,s.borderColor?s.borderColor:So.grey).rot(90).pos(.4*s.width/2+(t+1)*(.6*s.width)/(o+1),0,So.LEFT,So.CENTER,s)})),s.rollPersist=!0,zot(P)&&zot(S)||s.expand(P,S),c?(V=s.width,v?(N=e,this.setBounds(0,0,V,N)):(N=e+s.height,this.setBounds(-s.width/2,-s.height/2,V,N))):(N=Math.max(s.height,o),v?(V=e,this.setBounds(0,0,V,N)):(V=e+s.width,this.setBounds(-s.width/2,-s.height/2,V,N)));var q,Q,U,K,Z,J,$,ee,te,oe,ne,re=a,ie=0;if(this.button=s,this.cursor="pointer",r&&(U=this.ticks=new So.Shape({style:!1}),this.addChild(U),(K=U.graphics).ss(1).s(i),Z=Math.round((l-a)/(u||t)),J=(l-a)/Z,u?(J!=u&&zon&&zogy("Slider() - non-divisible step ("+u+") adjusted to "+J),u=J):(J!=t&&zon&&zogy("Slider() - non-divisible step ("+t+") adjusted to "+J),t=J),$=v?(e-(c?s.height:s.width))/Math.abs(Z):e/Math.abs(Z)),c){var ae=v?s.height/2:0,le=this.bar=new So.Rectangle(o,e,n,null,null,null,null,null,!1);if(B?le.expand(B,expandBarVerticical):le.expand(20,0),le.centerReg(this),s.centerReg(this),Q=le.getBounds(),q=new createjs.Rectangle(le.x,Q.y+ae,0,Q.height-2*ae),r){for(var se=0;se<=Math.abs(Z);se++){var ce=se%(d+1)==0;K.mt(0,ae+$*se).lt(ce?25*h:15*g,ae+$*se)}U.x=le.x+15}}else{ae=v?s.width/2:0;if(le=this.bar=new So.Rectangle(e,o,n,null,null,null,null,null,!1),B?le.expand(B,expandBarVerticical):le.expand(0,20),le.centerReg(this),s.centerReg(this),Q=le.getBounds(),q=new createjs.Rectangle(Q.x+ae,le.y,Q.width-2*ae,0),r){for(se=0;se<=Math.abs(Z);se++){ce=se%(d+1)==0;K.mt(ae+$*se,0).lt(ae+$*se,-(ce?25*h:15*g))}U.y=le.y-10}}s.x=q.x,s.y=q.y,s.on("mousedown",function(e){e.target.stage,_.focus=!0;var t=_.globalToLocal(e.stageX/So.scaX,e.stageY/So.scaY);ee=t.x-s.x,te=t.y-s.y,_.stage&&(_.stage.mouseMoveOutside=!0)}),s.on("pressmove",function(e){ze(e)}),le.on("mousedown",function(e){e.target.stage,te=ee=0,_.zimAccessibility&&_.zimAccessibility.aria||ze(e)}),T&&(oe=a,ne=new So.Damp(oe,T),_.ticker=So.Ticker.add(function(){oe=ne.convert(re)})),Object.defineProperty(this,"currentValue",{get:function(){return T?oe:re},set:function(e){zot(e)||(a<l?(e<a&&(e=a),l<e&&(e=l)):(a<e&&(e=a),e<l&&(e=l)),re=e=me(e),ne&&ne.immediate(re),ie=c?(s.y=(e-l)/(a-l)*q.height+ae,s.y):(s.x=(e-a)/(l-a)*q.width+ae,s.x),Y&&pe(),be(),So.OPTIMIZE||!zns&&OPTIMIZE||!_.stage||_.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return T?oe:re},set:function(e){e!=_.currentValue&&(_.currentValue=e,_.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return a},set:function(e){zon&&zogy("Slider() - min is read only")}}),Object.defineProperty(this,"max",{get:function(){return l},set:function(e){zon&&zogy("Slider() - max is read only")}}),Object.defineProperty(this,"step",{get:function(){return t},set:function(e){zon&&zogy("Slider() - step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return x},set:function(e){x=e}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return k},set:function(e){k=e}}),void 0!==KEYFOCUS&&(So.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return So.KEYFOCUS==_},set:function(e){So.KEYFOCUS=_}}),w&&!So.KEYFOCUS&&ve(),this.on("mousedown",function(){w&&ve()});var ue=!1,de=!1,he=!1,ge=!1;this.keyDownEvent=function(e){_.stage&&(_.zimAccessibility&&_.focus||!_.zimAccessibility&&_.keyFocus)&&(37==e.keyCode&&x?ue=!0:40==e.keyCode&&k?de=!0:39==e.keyCode&&x?he=!0:38==e.keyCode&&k&&(ge=!0),null==_.keyInterval&&(ue||de||he||ge)&&(we(),_.keyTimeout=setTimeout(function(){null==_.keyInterval&&(ue||de||he||ge)&&(_.keyInterval=setInterval(we,40))},140)))},window.addEventListener("keydown",this.keyDownEvent),_.keyUpEvent=function(e){37==e.keyCode?ue=!1:40==e.keyCode?de=!1:39==e.keyCode?he=!1:38==e.keyCode&&(ge=!1),null==_.keyInterval||ue||de||he||ge||(clearInterval(_.keyInterval),_.keyInterval=null)},window.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(_,"enabled",{get:function(){return _._enabled},set:function(e){qe(_,e),e?(window.addEventListener("keydown",_.keyDownEvent),window.addEventListener("keyup",_.keyUpEvent)):(window.removeEventListener("keydown",_.keyDownEvent),window.removeEventListener("keyup",_.keyUpEvent))}}),zot(A)||(_.currentValue=A),!1!==E&&So.styleTransforms(this,L),this.clone=function(){return _.cloneProps(new So.Slider(a,l,t,s.clone(),e,o,n,c,r,i,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,I,E,this.group,M))},this.dispose=function(e,t,o){return window.removeEventListener("keydown",_.keyDownEvent),window.removeEventListener("keyup",_.keyUpEvent),o||this.zimContainer_dispose(!0),!0}}else zog("ZIM Slider range must not be 0");function pe(){Y.sca((_.currentValue-_.min)/Math.abs(_.max-_.min),1)}function fe(e){var t=new So.Shape(D,X);return t.f(e).s(null!=L.borderColor?L.borderColor:So.tin).ss(null!=L.borderWidth?L.borderWidth:3).mt(2,0).lt(D+2,.2*X).lt(D+2,.8*X).lt(2,X).cp().centerReg({add:!1}),t}function me(e){return 0==t?e:Math.round(e/t)*t}function ze(e){var t,o,n,r=_.globalToLocal(e.stageX/So.scaX,e.stageY/So.scaY),i=(t=r.x-ee,o=r.y-te,n=q,t=Math.max(n.x,Math.min(n.x+n.width,t)),o=Math.max(n.y,Math.min(n.y+n.height,o)),{x:t,y:o});ie=c?(s.x=i.x,re=me((i.y-q.y)/q.height*(a-l)),s.y=q.y+re*q.height/(a-l),re+=l,s.y!=ie&&_.dispatchEvent("change"),s.y):(re=me((i.x-q.x)/q.width*(l-a)),s.x=q.x+re*q.width/(l-a),re+=a,s.y=i.y,s.x!=ie&&_.dispatchEvent("change"),s.x),Y&&pe(),be(),So.OPTIMIZE||!zns&&OPTIMIZE||!_.stage||_.stage.update()}function ye(e){return 0<e?1:-1}function be(){_.zimAccessibility&&_.zimAccessibility.changeTitle(_,null,!0)}function ve(){_.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function we(){(ue||de)&&(_.currentValueEvent-=0<t?t*ye(l-a):C*ye(l-a)),(he||ge)&&(_.currentValueEvent+=0<t?t*ye(l-a):C*ye(l-a))}},So.extend(So.Slider,So.Container,["clone","dispose"],"zimContainer",!1),So.Selector=function(s,n,r,i,a,l,c,u,d,h,g,p,f,m,z,y,e,t,o){var b;if(b=zob(So.Selector,arguments,"tile, borderColor, borderWidth, backgroundColor, corner, dashed, paddingHorizontal, paddingVertical, speed, diagonal, dim, multi, keyArrows, behind, resizeScale, selectedIndex, style, group, inherit",this))return b;z_d("62.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Selector",this.group=t;var v=!1===e?{}:So.getStyle(this.type,this.group,o),w=Bo();zot(s)&&(s=null!=v.tile?v.tile:new So.Tile(new So.Circle(20,So.red),4,4,10,10)),zot(n)&&(n=null!=v.borderColor?v.borderColor:"white"),zot(r)&&(r=null!=v.borderWidth?v.borderWidth:2),zot(i)&&(i=null!=v.backgroundColor?v.backgroundColor:"rgba(0,0,0,.1)"),zot(a)&&(a=null!=v.corner?v.corner:10),zot(l)&&(l=null!=v.dashed&&v.dashed),zot(c)&&(c=null!=v.padding?v.padding:s.spacingH/2),zot(u)&&(u=null!=v.paddingVertical?v.paddingVertical:s.spacingV/2),zot(d)&&(d=null!=v.speed?v.speed:2),zot(h)&&(h=null!=v.diagonal&&v.diagonal),zot(g)&&(g=null!=v.dim&&v.dim),zot(p)&&(p=null!=v.multi&&v.multi),p&&(d=0),zot(f)&&(f=null==v.keyArrows||v.keyArrows),zot(m)&&(m=null!=v.behind&&v.behind),zot(z)&&(z=null!=v.resizeScale&&v.resizeScale),zot(y)&&(y=null!=v.selectedIndex?v.selectedIndex:null);var C=[],x=[];So.loop(s.items.length,function(e){C.push(zik(n)),x.push(zik(i))});var k,T,A,P,S,B,I,E,O=this;zot(y)&&p||(T=zot(k=y)||y<0?0:y,A=s.getChildAt(T),O.currentItem=s.getChildAt(T),zot(y=k)&&(y=null!=v.selectedIndex?v.selectedIndex:0)),(P=A||s.getChildAt(0))&&(S=P.width+2*c,B=P.height+2*u),O.tile=s.addTo(O).cur(),p?(I=this.selectors=[],So.loop(10,function(){(E=new So.Rectangle(S,B,So.faint,So.faint,r,a,l,{ignoreScale:!z}).centerReg(O,m?0:1)).visible=!1,I.push(E),E.mouseEnabled=!1}),this.selector=E):(E=this.selector=new So.Rectangle(S,B,So.faint,So.faint,r,a,l,{ignoreScale:!z}).centerReg(O)).visible=!1,y<0||zot(A)||(E.loc(P.x+c,P.y+u,O,m?0:1),E.color=x[y],E.borderColor=C[y],E.visible=!0),s.mov(c,u),this.setBounds(s.width+2*c,s.height+2*u);var M={};function j(e,t,o){zot(o)&&(o=E),y=(A=e).tileNum,o.color=x[y],o.borderColor=C[y],p&&(O.upItem=O.upIndex=null,O.downItem=A,O.downIndex=y),O.animating=!0;var n,r=s.localToLocal(e.x,e.y,O),i=Math.abs(r.x-E.x),a=Math.abs(r.y-E.y),l=O.noAnimate||t?0:d;O.noAnimate=!1,0==l?(o.loc(r.x,r.y).siz(e.width+2*c,e.height+2*u),O.animating=!1,O.dispatchEvent("change")):(h||(i+a)*l<=0?o.animate({x:r.x,y:r.y},(a+i)*l):a<=i?o.animate([{props:{x:r.x},time:Math.max("s"==w?.1:100,i*l/("s"==w?1e3:1))},{props:{y:r.y},time:Math.max("s"==w?.1:100,a*l/("s"==w?1e3:1))}]):o.animate([{props:{y:r.y},time:Math.max("s"==w?.1:100,a*l/("s"==w?1e3:1))},{props:{x:r.x},time:Math.max("s"==w?.1:100,i*l/("s"==w?1e3:1))}]),o.animate({props:{widthOnly:e.width+2*c,heightOnly:e.height+2*u},time:Math.max("s"==w?.2:200,(a+i)*l/("s"==w?1e3:1)),call:function(){O.animating=!1,O.dispatchEvent("change")}}),g&&(n=!0===g?.7:So.constrain(g,0,1),s.animate({props:{alpha:n},rewind:!0,time:(a+i)*d*.7/("s"==w?1e3:1)}))),s.stage&&s.stage.update()}function L(){O.keyFocus=!0;var e=document.activeElement;e&&e.blur()}this.tileDown=s.on("mousedown",function(e){var t=E;if(!p||!zot(t=I.shift())){t.visible=!0;for(var o,n=e.target,r=0;n.parent!=s&&r<10;)n=n.parent,r++;n.parent==s&&j(n,null,t),p&&(o="id"+Math.abs(e.pointerID+1),M[o]={index:y,item:A,selector:t})}}),p&&(this.tileMove=s.on("pressmove",function(e){var t,o,n="id"+Math.abs(e.pointerID+1),r=M[n];zot(r)||(t=s.itemUnderPoint(e.stageX/So.scaX,e.stageY/So.scaY),r.item!=t&&(O.upItem=r.item,O.upIndex=r.index,O.downItem=r.item=t,O.downIndex=r.index=t?t.tileNum:null,O.dispatchEvent("change"),zot(t)?r.selector.visible=!1:(o=s.localToLocal(t.x,t.y,O),r.selector.loc(o.x,o.y).siz(t.width+2*c,t.height+2*u),r.selector.color=x[r.index],r.selector.borderColor=C[r.index],r.selector.visible=!0),O.stage.update()))}),this.tileUp=s.on("pressup",function(e){var t="id"+Math.abs(e.pointerID+1),o=M[t];zot(o)||(O.downIndex=O.downItem=null,O.upIndex=o.index,O.upItem=o.item,I.push(o.selector),o.selector.visible=!1,O.dispatchEvent("change"),O.stage&&!So.OPTIMIZE&&O.stage.update(),delete M[t])})),O.noAnimate=!1,f&&O.added(function(){O.keyEvent=O.stage.frame.on("keydown",function(e){var t,o,n,r;O.stage&&(O.animating||(O.zimAccessibility&&O.focus||!O.zimAccessibility&&O.keyFocus)&&(!0===(t=So.loop(s.items2D,function(e,o){var t=So.loop(e,function(e,t){if(e==A)return[t,o]});if(Array.isArray(t))return t}))&&(t=[0,0]),o=s.items2D[t[1]].length,n=s.items2D.length,"39"==e.keyCode?(r=(t[0]+1)%o,j(s.items2D[t[1]][r],r<t[0])):"37"==e.keyCode?(r=(t[0]-1+o)%o,j(s.items2D[t[1]][r],r>t[0])):"38"==e.keyCode?(r=(t[1]-1+n)%n,j(s.items2D[r][t[0]],r>t[1])):"40"==e.keyCode&&(r=(t[1]+1)%n,j(s.items2D[r][t[0]],r<t[1]))))})}),Object.defineProperty(this,"selectedIndex",{get:function(){return y},set:function(e){zot(e)&&(O.currentItem=null),O.currentItem=s.items[e]}}),Object.defineProperty(this,"currentItem",{get:function(){return A},set:function(e){if(zot(e))return y=A=null,E.visible=!1,O.selectedCol=null,void(O.selectedRow=null);E.visible=!0,O.lastItem=A,O.lastIndex=y,O.lastCol=O.selectedCol,O.lastRow=O.selectedRow,O.selectedCol=e.tileCol,O.selectedRow=e.tileRow,y=e.tileNum,j(A=e)}}),void 0!==KEYFOCUS&&(So.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return So.KEYFOCUS==O},set:function(e){So.KEYFOCUS=O}}),So.KEYFOCUS||L(),this.on("mousedown",function(){L()}),!1!==e&&So.styleTransforms(this,v),this.clone=function(e){if(e)for(var t=[],o=0;o<O.tile.items.length;o++)t.push(O.tile.items[o].clone(!0));return O.cloneProps(new So.Selector(e?So.series(t):s.clone?s.clone():s,n,r,i,a,l,c,u,d,h,g,p,f,m,z,y,this.style,this.group))},this.dispose=function(e,t,o){O.keyEvent&&O.stage&&O.stage.frame.off("keydown",O.keyEvent),s.off(O.tileDown),s.dispose(),p&&(s.off(O.tileMove),s.off(O.tileUp)),o||this.zimContainer_dispose(!0)}},So.extend(So.Selector,So.Container,["clone","dispose"],"zimContainer",!1),So.Dial=function(n,a,r,e,t,o,i,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,I,E,O,M,j,L,Y,_,D,X){var R;if(R=zob(So.Dial,arguments,"min, max, step, width, backgroundColor, indicatorColor, indicatorScale, indicatorType, useTicks, innerTicks, tickColor, tickStep, semiTicks, tickScale, semiTickScale, innerCircle, innerScale, innerColor, inner2Color, accentSize, accentOffset, accentColor, accentBackgroundColor, accentDifference, sound, linear, gap, limit, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, continuous, continuousMin, continuousMax, damp, currentValue, style, group, inherit",this))return R;z_d("63"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Dial",this.group=D;var W=!1===_?{}:So.getStyle(this.type,this.group,X);if(zot(n)&&(n=null!=W.min?W.min:0),zot(a)&&(a=null!=W.max?W.max:10),a-n!=0){zot(k)&&(k=null!=W.sound&&W.sound),zot(r)&&(r=null!=W.step?W.step:k?0:1),zot(e)&&(e=null!=W.width?W.width:100),zot(t)&&(t=null!=W.backgroundColor?W.backgroundColor:"#666"),zot(o)&&(o=null!=W.indicatorColor?W.indicatorColor:k?"white":"#222"),zot(i)&&(i=null!=W.indicatorScale?W.indicatorScale:1),zot(l)&&(l=null!=W.indicatorType?W.indicatorType:k?"aztec":"arrow"),zot(s)&&(s=null!=W.useTicks?W.useTicks:0!=r),zot(c)&&(c=null!=W.innerTicks&&W.innerTicks),zot(d)&&(d=null!=W.tickStep?W.tickStep:r||(s?.25:0)),zot(h)&&(h=null!=W.semiTicks?W.semiTicks:k?3:0),zot(u)&&(u=null!=W.tickColor?W.tickColor:k?So.tin:t),zot(g)&&(g=null!=W.tickScale?W.tickScale:k?1.25:1),zot(p)&&(p=null!=W.semiTickScale?W.semiTickScale:1.25),zot(f)&&(f=null==W.innerCircle||W.innerCircle),zot(z)&&(z=null!=W.innerColor?W.innerColor:k?So.pink:"rgba(0,0,0,.2)"),zot(y)&&(y=null!=W.inner2Color?W.inner2Color:k?So.light:"rgba(0,0,0,.1)"),zot(m)&&(m=null!=W.innerScale?W.innerScale:k?.4:.5),zot(b)&&(b=null!=W.accentSize?W.accentSize:k?e/2*.15:0),zot(v)&&(v=null!=W.accentOffset?W.accentOffset:e/2*.45),zot(x)&&(x=null!=W.accentDifference?W.accentDifference:-.25),zot(w)&&(w=null!=W.accentColor?W.accentColor:So.pink),zot(C)&&(C=null!=W.accentBackgroundColor?W.accentBackgroundColor:k?So.blue:So.clear),zot(A)&&(A=null!=W.gap?W.gap:k?.25:0),zot(T)&&(T=null!=W.linear?W.linear:k),A&&(O=!(T=!0)),zot(P)&&(P=null==W.limit||W.limit),zot(S)&&(S=null==W.keyArrows||W.keyArrows),zot(B)&&(B=null!=W.keyArrowsStep?W.keyArrowsStep:(a-n)/100),zot(I)&&(I=null==W.keyArrowsH||W.keyArrowsH),zot(E)&&(E=null==W.keyArrowsV||W.keyArrowsV),zot(O)&&(O=null!=W.continuous&&W.continuous),O&&(P=null!=W.limit&&W.limit),zot(L)&&(L=null!=W.damp&&W.damp),0==P&&(L=null);var H=this;this.cursor="pointer";var F,V,N,G=e/2,q=n,Q=0;b&&(F=e/2+v+b/2,V=360*A/2,H.accentBacking=new So.Shape(-G,-G,2*G,2*G).addTo(this).s(C).ss(b+x).a(0,0,F,(V-90)*So.RAD,(360-V-90)*So.RAD),N=H.accent=new So.Shape(-G,-G,2*G,2*G).addTo(this));var U,K,Z=this.backing=new So.Circle(G,t,null,null,null,null,null,null,!1);b?Z.center(this):this.addChild(Z),f&&(U=this.inner=new So.Circle(G*m,z,null,null,null,null,null,null,!1),this.addChild(U),K=this.inner2=new So.Circle(G*(m-.1),y,null,null,null,null,null,null,!1),this.addChild(K)),k&&(H.rotation=180);var J,$,ee,te,oe,ne,re,ie,ae,le=Math.abs(a-n)/(d||r)+(A?1:0);r&&Math.abs(a-n);if(s){var se=this.ticks=new So.Container({style:!1});this.addChild(se);for(var ce=0;ce<le;ce++){var ue=ce%(h+1)==0,de=new So.Rectangle(1,G*(ue?.2*g:.1*p),u,null,null,null,null,null,!1);de.regY=G+(c?m-.05:de.height+.1*G),de.regX=.5,de.rotation=(360-360*A)/(le-(A?1:0))*ce+360*A/2,se.addChild(de)}H.expand(de.height)}this.setBounds(-G,-G,e,e),"dot"==l||"circle"==l?(te=this.indicator=new So.Container({style:!1}),oe=this.indicatorShape=new So.Circle(.19*G,o,null,null,null,null,null,null,!1),te.addChild(oe),So.sca(te,i),te.regY=G-te.getBounds().width*i/2-.07*G):"line"==l||"rectangle"==l?(te=this.indicator=new So.Container({style:!1}),oe=this.indicatorShape=new So.Rectangle(.1*G,.3*G,o,null,null,null,null,null,null,null,!1),te.addChild(oe),So.sca(te,i),te.regY=G-te.getBounds().width*i/2-.07*G,te.regX=.05*G):"aztec"==l?(te=this.indicator=new So.Container({style:!1}),J=.05*G,$=.1*G,ee=.42*G,oe=this.indicatorShape=new So.Shape(-$,0,2*$,ee).f(o).mt(-J,0).lt(J,0).lt($,ee).lt(-$,ee).cp(),te.addChild(oe),So.sca(te,i),te.regY=G-te.getBounds().width*i/2-.04*G):(te=this.indicator=new So.Container({style:!1}),oe=this.indicatorShape=new So.Triangle(.4*G,.4*G,.4*G,o,null,null,null,null,null,null,!1),te.addChild(oe),So.sca(te,i),te.regY=G-te.getBounds().height*i*(c?.85:.75),c&&(oe.rotation=180)),te.regY/=i,this.addChild(te);var he,ge,pe,fe,me,ze,ye,be,ve,we=0;O?(pe=ge=he=0,ze=!(me=fe=!1)):0,T?this.on("mousedown",function(e){var o,n;e.target.stage,H.zimAccessibility&&H.zimAccessibility.aria||(o=ne=te.rotation,H.parent.globalToLocal(0,0),n=H.parent.globalToLocal(e.stageX/So.scaX,e.stageY/So.scaY),ie=H.on("pressmove",function(e){var t=H.parent.globalToLocal(e.rawX/So.scaX,e.rawY/So.scaY);te.rotation=o=ne+100*(n.y-t.y)/(this.width||1),P&&(360-360*A/2<o||o<0+360*A/2)&&(o=So.constrain(o,360*A/2,360-360*A/2),n=H.parent.globalToLocal(e.rawX/So.scaX,e.rawY/So.scaY),ne=o),Ie(o)}),ae=this.on("pressup",function(e){H.off("pressmove",ie),H.off("pressup",ae)}))}):(ye=!0,this.on("mousedown",function(e){var t,o,n,r;e.target.stage,H.zimAccessibility&&H.zimAccessibility.aria||(ne=te.rotation,t=H.parent.globalToLocal(e.stageX/So.scaX,e.stageY/So.scaY),t.x,o=t.x-H.x,n=H.y-t.y,re=180*Math.atan2(o,n)/Math.PI,r=(new Date).getTime(),ie=H.on("pressmove",function(e){var t,o,n;fe&&(o=(t=H.parent.globalToLocal(e.rawX/So.scaX,e.rawY/So.scaY)).x-H.x,n=H.y-t.y,re=180*Math.atan2(o,n)/Math.PI,ne=te.rotation),o=(t=H.parent.globalToLocal(e.rawX/So.scaX,e.rawY/So.scaY)).x-H.x,n=H.y-t.y;var r=180*Math.atan2(o,n)/Math.PI,i=((i=ne+r-re)+36e5)%360;P&&ye&&(180<i-we&&H.currentValue!=a?i=0:i-we<-180&&(i=359)),ye=!0,Ie(i),we=i,t.x}),ae=this.on("pressup",function(e){H.currentValue!=H.min&&H.currentValue!=H.max&&(ye=!1),(new Date).getTime()-r<200&&(t=H.parent.globalToLocal(e.rawX/So.scaX,e.rawY/So.scaY),o=t.x-H.x,n=H.y-t.y,Ie(180*Math.atan2(o,n)/Math.PI-H.rotation)),ne=te.rotation,H.off("pressmove",ie),H.off("pressup",ae)}))})),L&&(be=n,ve=new So.Damp(be,L),H.ticker=So.Ticker.add(function(){be=ve.convert(q)})),Object.defineProperty(this,"currentValue",{get:function(){return L?be:q},set:function(e){zot(e)||(O?(fe=!1,zot(M)||zot(j)?zot(M)?zot(j)||j<e&&(e=j,fe=!0):e<M&&(e=M,fe=!0):M<j?(e<M&&(e=M,fe=!0),j<e&&(e=j,fe=!0)):(M<e&&(e=M,fe=!0),e<j&&(e=j,fe=!0)),ze&&(me=!0,pe=360*Math.floor(e/(a-n)))):n<a?(e<n&&(e=P?n:a),a<e&&(e=P?a:n)):(n<e&&(e=P?n:a),e<a&&(e=P?a:n)),e=Pe(q=e),L&&L.immediate(q),te.rotation=360*A/2+(e-n)*(360-360*A)/(a-n),te.rotation=(te.rotation+36e5)%360,Q=e-n,we=te.rotation,N&&Ae(),Be(),So.OPTIMIZE||!zns&&OPTIMIZE||!H.stage||H.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return L?be:q},set:function(e){e!=H.currentValue&&(H.currentValue=e,H.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return n},set:function(e){O?n=e:zon&&zogy("Dial() - min is read only")}}),Object.defineProperty(this,"max",{get:function(){return a},set:function(e){O?a=e:zon&&zogy("Dial() - max is read only")}}),Object.defineProperty(this,"continuous",{get:function(){return O},set:function(e){zon&&zogy("Dial() - continuous is read only")}}),Object.defineProperty(this,"continuousMin",{get:function(){return M},set:function(e){M=e,H.currentValue<M&&(H.currentValue=M)}}),Object.defineProperty(this,"continuousMax",{get:function(){return j},set:function(e){j=e,H.currentValue>j&&(H.currentValue=j)}}),Object.defineProperty(this,"step",{get:function(){return r},set:function(e){zon&&zogy("Dial() - step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return I},set:function(e){I=e}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return E},set:function(e){E=e}}),void 0!==KEYFOCUS&&(So.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return So.KEYFOCUS==H},set:function(e){So.KEYFOCUS=H}}),S&&!So.KEYFOCUS&&Ee(),this.on("mousedown",function(){S&&Ee()});var Ce=!1,xe=!1,ke=!1,Te=!1;this.keyDownEvent=function(e){H.stage&&(H.zimAccessibility&&H.focus||!H.zimAccessibility&&H.keyFocus)&&(37==e.keyCode&&I?Ce=!0:40==e.keyCode&&E?xe=!0:39==e.keyCode&&I?ke=!0:38==e.keyCode&&E&&(Te=!0),null==H.keyInterval&&(Ce||xe||ke||Te)&&(Oe(),H.keyTimeout=setTimeout(function(){null==H.keyInterval&&(Ce||xe||ke||Te)&&(H.keyInterval=setInterval(Oe,40))},140)))},window.addEventListener("keydown",this.keyDownEvent),H.keyUpEvent=function(e){37==e.keyCode?Ce=!1:40==e.keyCode?xe=!1:39==e.keyCode?ke=!1:38==e.keyCode&&(Te=!1),null==H.keyInterval||Ce||xe||ke||Te||(clearInterval(H.keyInterval),H.keyInterval=null)},window.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(H,"enabled",{get:function(){return H._enabled},set:function(e){e?(window.addEventListener("keydown",H.keyDownEvent),window.addEventListener("keyup",H.keyUpEvent)):(window.removeEventListener("keydown",H.keyDownEvent),window.removeEventListener("keyup",H.keyUpEvent))}}),zot(Y)&&(Y=null!=W.currentValue?W.currentValue:n),H.currentValue=Y,!1!==_&&So.styleTransforms(this,W),this.clone=function(){return H.cloneProps(new So.Dial(n,a,r,e,t,o,i,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,I,E,O,M,j,L,Y,_,this.group,X))},this.dispose=function(e,t,o){return window.removeEventListener("keydown",H.keyDownEvent),window.removeEventListener("keyup",H.keyUpEvent),o||this.zimContainer_dispose(!0),!0}}else zog("ZIM Dial range must not be 0");function Ae(){N.c().s(w).ss(b).a(0,0,F,(V-90)*So.RAD,(te.rotation-2*V)*So.RAD)}function Pe(e){return 0==r?e:Math.round(e/r)*r}function Se(e){return 0<e?1:-1}function Be(){H.zimAccessibility&&H.zimAccessibility.changeTitle(H,null,!0)}function Ie(e){if(O){me&&(he=e,me=!1),he+180<e?pe-=360:e<he-180&&(pe+=360),ge=pe+e,ze=!1;var t=H.currentValue;return H.currentValue=Pe(ge*(a-n)/360),t!=H.currentValue&&H.dispatchEvent("change"),he=e,ze=!0,N&&Ae(),1}var o;e<0&&(e+=360),e%=360,0!=r?(o=Pe(((e=Math.min(e,360))-360*A/2)/(360-360*A)*(a-n)),te.rotation=360*A/2+o*(360-360*A)/(a-n)):o=((te.rotation=e)-360*A/2)/(360-360*A)*(a-n),o!=Q&&(q=(Q=o)+n,N&&Ae(),H.dispatchEvent("change"),So.OPTIMIZE||!zns&&OPTIMIZE||!H.stage||H.stage.update()),Be()}function Ee(){H.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function Oe(){(Ce||xe)&&(H.currentValueEvent-=0<r?r*Se(a-n):B*Se(a-n)),(ke||Te)&&(H.currentValueEvent+=0<r?r*Se(a-n):B*Se(a-n))}},So.extend(So.Dial,So.Container,["clone","dispose"],"zimContainer",!1),So.Tabs=function(s,c,n,u,d,h,g,p,f,m,z,y,a,l,b,v,o,r,w,C,x,k,T,A,P,S,B,I,E,O,M,j,L,Y,_,i,D,X,R,W,H,F,V,N,e,G){var t;if(t=zob(So.Tabs,arguments,"width, height, tabs, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, vertical, spacing, currentEnabled, currentSelected, corner, base, keyEnabled, gradient, gloss, backing, rollBacking, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, backdropColor, align, valign, labelAlign, labelValign, labelIndent, labelIndentHorizontal, labelIndentVertical, indent, useTap, excludeCustomTap, selectedIndex, styleLabels, style, group, inherit",this))return t;z_d("65");var q=!1===N?{}:So.getStyle("Tabs",e,G);zot(y)&&(y=null!=q.vertical&&q.vertical),zot(s)&&(s=null!=q.width?q.width:null);var Q=!zot(s);if(zot(s)&&(s=y?60:240),zot(c)&&(c=null!=q.height?q.height:y?240:60),this.zimContainer_constructor(null,null,null,null,!0),this.type="Tabs",this.group=e,(zot(n)||n.length<=0)&&(n=null!=q.tabs?q.tabs:[1,2,3,4]),zot(u)&&(u=null!=q.backgroundColor?q.backgroundColor:"#777"),zot(d)&&(d=null!=q.rollBackgroundColor?q.rollBackgroundColor:"#555"),zot(h)&&(h=null!=q.selectedBackgroundColor?q.selectedBackgroundColor:"#333"),zot(g)&&(g=null!=q.selectedRollBackgroundColor?q.selectedRollBackgroundColor:d),zot(p)&&(p=null!=q.color?q.color:"white"),zot(f)&&(f=null!=q.rollColor?q.rollColor:p),zot(m)&&(m=null!=q.selectedColor?q.selectedColor:p),zot(z)&&(z=null!=q.selectedRollColor?q.selectedRollColor:f),zot(x)&&(x=null!=q.backing?q.backing.clone():null),zot(k)&&(k=null!=q.rollBacking?q.rollBacking.clone():null),zot(j)&&(j=null!=q.align?q.align:"center"),zot(L)&&(L=null!=q.valign?q.valign:"center"),zot(Y)&&(Y=null!=q.labelAlign?q.labelAlign:j),zot(_)&&(_=null!=q.labelValign?q.labelValign:L),zot(R)&&(R=null!=q.indent?q.indent:10),zot(i)&&(i=null!=q.labelIndent?q.labelIndent:R),zot(D)&&(D=null!=q.labelIndentHorizontal?q.labelIndentHorizontal:i),zot(X)&&(X=null!=q.labelIndentVertical?q.labelIndentVertical:i),zot(l)&&(l=null!=q.currentEnabled&&q.currentEnabled),zot(b)&&(b=null==q.currentSelected||q.currentSelected),b||(l=!0),zot(a)&&(a=null!=q.spacing?q.spacing:1),zot(v)&&(v=null!=q.corner?q.corner:0),zot(w)&&(w=null!=q.gradient?q.gradient:null),zot(C)&&(C=null!=q.gloss?q.gloss:null),zot(o)&&(o=null!=q.base?q.base:0!=v||Array.isArray(v)?y?"left":"bottom":"none"),zot(r)&&(r=null==q.keyEnabled||q.keyEnabled),zot(W)&&(W=null!=q.useTap&&q.useTap),zot(H)&&(H=null!=q.excludeCustomTap&&q.excludeCustomTap),zot(M)&&(M=null!=q.backdropColor?q.backdropColor:null),zot(V)&&(V=null!=q.styleLabels?q.styleLabels:null),"none"==o||0==v||Array.isArray(v))Array.isArray(v)||(v=[v,v,v,v]);else switch(o){case"bottom":v=[v,v,0,0];break;case"left":v=[0,v,v,0];break;case"top":v=[0,0,v,v];break;case"right":v=[v,0,0,v]}var U=this;this.keyEnabled=r;var K,Z,J=0,$=[],ee=[],te=n.length,oe=(s-a*(te-1))/te,ne=(c-a*(te-1)-2)/te;zot(M)||(Z=this.backdrop=new So.Rectangle(s,c,M,null,null,null,null,null,!1),this.addChild(Z));var re,ie=!1;function ae(e){for(var t=0;t<e.length;t++){var o=e[t];o.constructor!=={}.constructor?re="string"==typeof o||"number"==typeof o||"Label"==o.type?(e[t]={type:"TabObject",label:String(null!=o)||"Label"==o.type?o:"1"},re&&"TabObject"!=re&&(ie=!0),"TabObject"):(re&&"TabObject"==re&&(ie=!0),"Other"):(re&&"TabObject"!=re&&(ie=!0),re="TabObject",o.type="TabObject")}}ae(n);for(var le,se,ce=0,ue=0,de=0;de<n.length;de++)le=n[de],y?Q&&(le.width=le.width?le.width:s):(zot(le.width)&&ue++,ce+=zot(le.width)?oe:le.width);if(!y)if(s-a*(te-1)<ce)for(de=0;de<n.length;de++)(le=n[de]).width=(s-a*(te-1))/ce*(zot(le.width)?oe:le.width);else if(Math.round(ce)<Math.round(s-a*(te-1))&&0<ue)for(se=(te*oe-(ce-ue*oe))/ue,de=0;de<n.length;de++)(le=n[de]).width=zot(le.width)?se:le.width;function he(e,t){for(de=0;de<e.length;de++)""!=(le=e[de])&&"TabObject"==le.type&&(zot(le.label)&&(le.label=" "),"string"!=typeof le.label&&"number"!=typeof le.label||(le.label=new So.Label({text:le.label,size:null!=q.size?q.size:y?ne/2:c/2,font:null!=q.font?q.font:null,style:V,valign:_,inherit:t})))}he(n,V?q:null);for(var ge=0,de=0;de<n.length;de++)!(le=n[de]).width&&y&&le.label.width>ge&&(ge=le.label.width);var pe=0;function fe(e,t){var o=[],n=[];for(de=0;de<e.length;de++){if("TabObject"==(le=e[de]).type){var r={color:zot(le.color)?So.Pick.choose(p):le.color,rollColor:zot(le.rollColor)?So.Pick.choose(f):le.rollColor,selectedColor:zot(le.selectedColor)?So.Pick.choose(m):le.selectedColor,selectedRollColor:zot(le.selectedRollColor)?So.Pick.choose(z):le.selectedRollColor,backgroundColor:zot(le.backgroundColor)?So.Pick.choose(u):le.backgroundColor,rollBackgroundColor:zot(le.rollBackgroundColor)?So.Pick.choose(d):le.rollBackgroundColor,selectedBackgroundColor:zot(le.selectedBackgroundColor)?So.Pick.choose(h):le.selectedBackgroundColor,selectedRollBackgroundColor:zot(le.selectedRollBackgroundColor)?So.Pick.choose(g):le.selectedRollBackgroundColor,wait:zot(le.wait)?So.Pick.choose(T):le.wait};if(t)for(var i in t)zot(t[i])||(r[i]=t[i]);(K=new So.Button({width:y?zot(le.width)?Q?s:ge+ne/2+v[0]/2:le.width:zot(le.width)?oe:le.width,height:y?ne:c,label:le.label,borderColor:null!=q.borderColor?q.borderColor:null,borderWidth:null!=q.borderWidth?q.borderWidth:null,backgroundColor:r.backgroundColor,rollBackgroundColor:r.rollBackgroundColor,corner:v,shadowColor:-1,gradient:w,gloss:C,backing:x?x.clone():null,rollBacking:k?k.clone():null,wait:r.wait,waitTime:zot(le.waitTime)?A:le.waitTime,waitBackgroundColor:zot(le.waitBackgroundColor)?P:le.waitBackgroundColor,rollWaitBackgroundColor:zot(le.rollWaitBackgroundColor)?S:le.rollWaitBackgroundColor,waitColor:zot(le.waitColor)?B:le.waitColor,rollWaitColor:zot(le.rollWaitBackgroundColor)?I:le.rollWaitColor,waitModal:zot(le.waitModal)?E:le.waitModal,waitEnabled:zot(le.waitEnabled)?O:le.waitEnabled,align:Y,valign:_,indentHorizontal:D,indentVertical:X,inherit:So.copy(q)})).tabInfo=r,K.color=K.tabInfo.color,K.rollColor=K.tabInfo.rollColor,K.type="TabsButton",K.content=le,K.listIndentReady=!0}else{if(le.listIndentReady)K=le;else{(K=new So.Container).type=le.type,K.content=le;for(var a=["text","backing","label","slider","stepper","checkBox","colorPicker","swatch","colorLabel"],l=0;l<a.length;l++)le[a[l]]&&(K[a[l]]=le[a[l]])}le.checkBox&&(K.checkBox=le.checkBox),zot(K.tabInfo)&&(K.tabInfo={}),H&&(K.excludeTap=!0),K.tabInfo.color=zot(le.color)?p:le.color,K.tabInfo.backgroundColor=zot(le.backgroundColor)?u:le.backgroundColor,le.listIndentReady||(new So.Rectangle(Math.max(le.width,y?Q?s:ge+ne/2+v[0]/2:le.width),Math.max(le.height,y?ne:c),So.clear).addTo(K).expand(0).cur(),le.center(K).cur(),"center"!=j&&"middle"!=j&&le.pos(0,null,"right"==j),"center"!=L&&"middle"!=L&&le.pos(null,0,null,"bottom"==L))}K.width>pe&&(pe=K.width),W?K.tap(function(e){ye(e.currentTarget.znum),U.dispatchEvent("change"),So.OPTIMIZE||!zns&&OPTIMIZE||!U.stage||U.stage.update()}):K.zimTabEvent=K.on((zns?"mousedown"==So.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(e){ye(e.currentTarget.znum),U.dispatchEvent("change"),So.OPTIMIZE||!zns&&OPTIMIZE||!U.stage||U.stage.update()}),K.on("mousedown",function(e){U.buttonDown=e.currentTarget}),K.on("pressup",function(){U.buttonDown=null}),n.push(le.label),o.push(K),K.index=de}return[o,n]}var me=fe(n);function ze(){var e,t=0,o=0;for(de=0;de<ee.length;de++)(e=ee[de]).znum=de,e.selectedIndex=de,e.selectedIndex==J&&b&&(e.backgroundColor=h,e.rollBackgroundColor=g,e.color=m),$[de]&&($[de].znum=de),U.addChild(e),y&&!Q||(e.x=(s-e.width)/2,e.y=(c-e.height)/2),y?(e.y=o,o=e.y+e.height+a,"left"==j?e.x=("TabsButton"==e.type||"ListItem"==e.type?0:R)+(e.regX-(e.getBounds()?e.getBounds().x:0))*e.scaleX:"right"==j&&(e.x=(Q?s:pe)-e.width-("TabsButton"==e.type||"ListItem"==e.type?0:R))):(e.x=t,t=e.x+e.width+a,"top"==L?e.y=("TabsButton"!=e.type||ie?R:0)+(e.regY-(e.getBounds()?e.getBounds().y:0))*e.scaleY:"bottom"==L&&(e.y=c-e.height-("TabsButton"!=e.type||ie?R:0))),0!=de||l||(e.enabled=!1),e.enabled=!0;zot(M)||U.removeChild(Z),U._bounds=null;var n=U.getBounds(),r=0,i=0;if(n||0==createjs.EaselJS.version[0]?n&&(r=y&&0!=n.width&&Q?s:n.width,i=y&&0!=n.height?n.height:c,U.setBounds(r,i)):U.setBounds(),zot(M)||(Z.widthOnly=r,Z.heightOnly=i,U.addChildAt(Z,0)),y&&!Q)for(de=0;de<=ee.length;de++)"center"!=j&&"middle"!=j||(e.x=(r-e.width)/2)}function ye(e){var t=ee[J];t&&b&&(t.tabInfo&&zot(t.tabInfo.wait)&&(t.tabInfo.backgroundColor&&(t.backgroundColor=t.tabInfo.backgroundColor),t.tabInfo.rollBackgroundColor&&(t.rollBackgroundColor=t.tabInfo.rollBackgroundColor),t.tabInfo.color&&t.label&&(t.color=t.tabInfo.color),t.tabInfo.rollColor&&t.label&&(t.rollColor=t.tabInfo.rollColor)),l||(t.enabled=!0)),(t=ee[J=e])&&(t.tabInfo&&zot(t.tabInfo.wait)&&b&&(t.tabInfo.selectedBackgroundColor&&(t.backgroundColor=t.tabInfo.selectedBackgroundColor),t.tabInfo.selectedRollBackgroundColor&&(t.rollBackgroundColor=t.tabInfo.selectedRollBackgroundColor),t.tabInfo.selectedColor&&t.label&&(t.color=t.tabInfo.selectedColor),t.tabInfo.selectedRollColor&&t.label&&(t.rollColor=t.tabInfo.selectedRollColor)),l||(t.enabled=!1))}function be(){U.keyFocus=!0;var e=document.activeElement;e&&e.blur()}ee=me[0],$=me[1],ze(),this.addAt=function(e,t,o){zot(t)&&(t=ee.length),t=So.constrain(t,0,ee.length),Array.isArray(e)||(e=[e]),ae(e),he(e,o);var n=fe(e,o),r=n[0],i=n[1];t<=J&&(J+=r.length);var a=[t,0].concat(r);return Array.prototype.splice.apply(ee,a),a=[t,0].concat(i),Array.prototype.splice.apply($,a),ze(),U},this.removeAt=function(e,t){if(0==ee.length)return U;for(zot(e)&&(e=1),zot(t)&&(t=ee.length-e),(t=So.constrain(t,0,ee.length-e))<=J&&J<=t+e&&(J=-1),t+e<J&&(J-=e),de=t;de<t+e;de++)ee[de].tabInfo&&(ee[de].tabInfo.backgroundColor&&(ee[de].backgroundColor=ee[de].tabInfo.backgroundColor),ee[de].tabInfo.color&&ee[de].label&&(ee[de].color=ee[de].tabInfo.color)),W?ee[de].noTap():ee[de].off((zns?"mousedown"==So.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",ee[de].zimTabEvent),ee[de].removeFrom();return ee.splice(t,e),$.splice(t,e),ze(),U},U.keyEvent=function(e){var t;U.keyEnabled&&U.keyFocus&&!U.zimAccessibility&&9==e.keyCode&&(t=J,e.shiftKey?ye(--t<0?n.length-1:t):ye(++t>n.length-1?0:t),U.dispatchEvent("change"),So.OPTIMIZE||!zns&&OPTIMIZE||!U.stage||U.stage.update(),e.preventDefault())},window.addEventListener("keydown",U.keyEvent),Object.defineProperty(this,"selected",{get:function(){return ee[J]},set:function(e){zon&&zogy("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"selectedIndex",{get:function(){return J},set:function(e){ye(e),So.OPTIMIZE||!zns&&OPTIMIZE||!U.stage||U.stage.update()}}),this.last=function(){return this.selectedIndex=this.buttons.length-1,this},this.first=function(){return this.selectedIndex=0,this},Object.defineProperty(this,"tabs",{get:function(){return J},set:function(e){ye(Math.min(Math.max(e,0),n.length-1)),So.OPTIMIZE||!zns&&OPTIMIZE||!U.stage||U.stage.update()}}),Object.defineProperty(this,"color",{get:function(){return U.buttons[0].tabItems?U.buttons[0].tabItems.color:p},set:function(e){if(p=e,U.buttons[0].tabInfo){for(var t=0;t<U.buttons.length;t++)U.buttons[t].tabInfo&&(U.buttons[t].tabInfo.color=e),t==J&&b||(U.buttons[t].color=p);So.OPTIMIZE||!zns&&OPTIMIZE||!U.stage||U.stage.update()}}}),Object.defineProperty(this,"rollColor",{get:function(){return U.buttons[0].tabItems?U.buttons[0].tabItems.rollColor:f},set:function(e){if(f=e,U.buttons[0].tabInfo){for(var t=0;t<U.buttons.length;t++)U.buttons[t].tabInfo&&(U.buttons[t].tabInfo.rollColor=e),U.buttons[t].rollColor=f,t!=J&&U.buttons[t].rolled&&(U.buttons[t].color=f);So.OPTIMIZE||!zns&&OPTIMIZE||!U.stage||U.stage.update()}}}),Object.defineProperty(this,"selectedColor",{get:function(){return U.buttons[0].tabItems?U.buttons[0].tabItems.selectedColor:m},set:function(e){if(m=e,U.buttons[0].tabInfo){for(var t=0;t<U.buttons.length;t++)U.buttons[t].tabInfo&&(U.buttons[t].tabInfo.selectedColor=e),t==J&&b&&(U.buttons[t].color=m);So.OPTIMIZE||!zns&&OPTIMIZE||!U.stage||U.stage.update()}}}),Object.defineProperty(this,"selectedRollColor",{get:function(){return U.buttons[0].tabItems?U.buttons[0].tabItems.selectedRollColor:z},set:function(e){if(z=e,U.buttons[0].tabInfo){for(var t=0;t<U.buttons.length;t++)U.buttons[t].tabInfo&&(U.buttons[t].tabInfo.selectedRollColor=e),t==J&&b&&U.buttons[t].rolled&&(U.buttons[t].color=z);So.OPTIMIZE||!zns&&OPTIMIZE||!U.stage||U.stage.update()}}}),Object.defineProperty(this,"backgroundColor",{get:function(){return U.buttons[0].tabItems?U.buttons[0].tabItems.backgroundColor:u},set:function(e){if(u=e,U.buttons[0].tabInfo){for(var t=0;t<U.buttons.length;t++)U.buttons[t].tabInfo&&(U.buttons[t].tabInfo.backgroundColor=e),t==J&&b||(U.buttons[t].backgroundColor=u);So.OPTIMIZE||!zns&&OPTIMIZE||!U.stage||U.stage.update()}}}),Object.defineProperty(this,"rollBackgroundColor",{get:function(){return U.buttons[0].tabItems?U.buttons[0].tabItems.rollBackgroundColor:d},set:function(e){if(d=e,U.buttons[0].tabInfo){for(var t=0;t<U.buttons.length;t++)U.buttons[t].tabInfo&&(U.buttons[t].tabInfo.rollBackgroundColor=e),U.buttons[t].rollBackgroundColor=d,t!=J&&U.buttons[t].rolled&&(U.buttons[t].backgroundColor=d);So.OPTIMIZE||!zns&&OPTIMIZE||!U.stage||U.stage.update()}}}),Object.defineProperty(this,"selectedBackgroundColor",{get:function(){return U.buttons[0].tabItems?U.buttons[0].tabItems.selectedBackgroundColor:h},set:function(e){if(h=e,U.buttons[0].tabInfo){for(var t=0;t<U.buttons.length;t++)U.buttons[t].tabInfo&&(U.buttons[t].tabInfo.selectedBackgroundColor=e),t==J&&b&&(U.buttons[t].backgroundColor=h);So.OPTIMIZE||!zns&&OPTIMIZE||!U.stage||U.stage.update()}}}),Object.defineProperty(this,"selectedRollBackgroundColor",{get:function(){return U.buttons[0].tabItems?U.buttons[0].tabItems.selectedRollBackgroundColor:g},set:function(e){if(g=e,U.buttons[0].tabInfo){for(var t=0;t<U.buttons.length;t++)U.buttons[t].tabInfo&&(U.buttons[t].tabInfo.selectedRollBackgroundColor=e),t==J&&b&&U.buttons[t].rolled&&(U.buttons[t].backgroundColor=g);So.OPTIMIZE||!zns&&OPTIMIZE||!U.stage||U.stage.update()}}}),Object.defineProperty(this,"label",{get:function(){return $[J]},set:function(e){zon&&zogy("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"text",{get:function(){return null!=$[J]?$[J].text:void 0},set:function(e){zon&&zogy("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"buttons",{get:function(){return ee},set:function(e){zon&&zogy("Tabs() - buttons is read only")}}),Object.defineProperty(this,"labels",{get:function(){return $},set:function(e){zon&&zogy("Tabs() - labels is read only")}}),this._enabled=!0,Object.defineProperty(U,"enabled",{get:function(){return U._enabled},set:function(e){qe(U,e)}}),void 0!==KEYFOCUS&&(So.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return So.KEYFOCUS==U},set:function(e){So.KEYFOCUS=U}}),r&&So.KEYFOCUS&&be(),this.on("mousedown",function(){r&&be()});var ve=U.getBounds();zot(ve)||0==ve.width?U.setBounds(0,0,s,c):U.width=s,zot(F)&&(F=null!=q.selectedIndex?q.selectedIndex:0),U.selectedIndex=F,!1!==N&&So.styleTransforms(this,q),this.clone=function(){for(var e=So.copy(n,!0),t=0;t<e.length;t++)e[t].label=e[t].label.clone();return U.cloneProps(new So.Tabs(s,c,e,u,d,h,g,p,f,m,z,y,a,l,b,v,o,r,w,C,x,k,T,A,P,S,B,I,E,O,M,j,L,Y,_,i,D,X,R,W,H,F,V,N,this.group,G))},this.doDispose=function(e,t,o){U.keyEvent&&window.removeEventListener("keydown",U.keyEvent),So.loop(U.buttons,function(e){e.dispose()}),U.keyEvent=null,o||this.zimContainer_dispose(!0),b=le=selected=n=$=label=K=ee=me=null}},So.extend(So.Tabs,So.Container,["clone","dispose"],"zimContainer",!1),So.Tabs.prototype.dispose=function(e){return this.doDispose(null,null,e)},So.Pad=function(e,r,t,o,n,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,I,E){var O;if(O=zob(So.Pad,arguments,"width, cols, rows, keys, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, spacing, currentEnabled, corner, labelColor, gradient, gloss, backing, rollBacking, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, selectedIndex, style, group, inherit",this))return O;z_d("66"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pad",this.group=I;var M=!1===B?{}:So.getStyle(this.type,this.group,E);if(zot(e)&&(e=null!=M.width?M.width:150),zot(r)&&(r=null!=M.cols?M.cols:3),zot(t)&&(t=null!=M.rows?M.rows:r),zot(o))if(null!=M.keys)o=M.keys;else{o=[];for(var j=1;j<=t*r;j++)o.push(j)}zot(g)&&(g=null==M.currentEnabled||M.currentEnabled),zot(h)&&(h=null!=M.spacing?M.spacing:1);var L,Y=this;this.cols=r,this.rows=t;var _,D=e/r-h,X=[],R=0;this.labels=[],this.buttons=[];for(j=0;j<t;j++){for(var W=[],H=0;H<r;H++)W.push(null!=o[R]?o[R]:""),R++;var F=null!=M.corner?M.corner:p;F&&!Array.isArray(F)&&(F=[F,F,F,F]),_=X[j]=new So.Tabs({width:e,height:D,tabs:W,backgroundColor:null!=M.backgroundColor?M.backgroundColor:n,rollBackgroundColor:null!=M.rollBackgroundColor?M.rollBackgroundColor:i,selectedBackgroundColor:null!=M.selectedBackgroundColor?M.selectedBackgroundColor:a,color:null!=M.color?M.color:s,rollColor:null!=M.rollColor?M.rollColor:c,selectedColor:null!=M.selectedColor?M.selectedColor:u,spacing:null!=M.spacing?M.spacing:h,currentEnabled:null!=M.currentEnabled?M.currentEnabled:g,corner:F,backing:null!=M.backing?M.backing.clone():y,rollBacking:null!=M.rollBacking?M.rollBacking.clone():b,base:null,keyEnabled:!1,gradient:null!=M.gradient?M.gradient:m,gloss:null!=M.gloss?M.gloss:z,wait:null!=M.wait?M.wait:v,waitTime:null!=M.waitTime?M.waitTime:w,waitBackgroundColor:null!=M.waitBackgroundColor?M.waitBackgroundColor:C,rollWaitBackgroundColor:null!=M.rollWaitBackgroundColor?M.rollWaitBackgroundColor:x,waitColor:null!=M.waitColor?M.waitColor:k,rollWaitColor:null!=M.rollWaitColor?M.rollWaitColor:T,waitModal:null!=M.waitModal?M.waitModal:A,waitEnabled:null!=M.waitEnabled?M.waitEnabled:P,group:I,style:!1}),this.labels=this.labels.concat(_.labels),this.buttons=this.buttons.concat(_.buttons),this.addChild(_),_.selectedIndex=-1,_.y=(D+h)*j,_.znum=j,_.on("change",V)}function V(e){var t=e.target;Y.selected=t.selected,Y.text=t.text,Y.label=t.label;for(var o=t.selectedIndex,n=0;n<X.length;n++)X[n].selectedIndex=-1;t.selectedIndex=o,L=t.znum*r+o,Y.dispatchEvent("change"),So.OPTIMIZE||!zns&&OPTIMIZE||!Y.stage||Y.stage.update()}this.tabs=X,Object.defineProperty(this,"selectedIndex",{get:function(){return L},set:function(e){L=e;for(var t=0;t<X.length;t++)X[t].selectedIndex=-1;var o=Math.floor(L/r);0<=o&&o<Y.tabs.length&&(Y.tabs[o].selectedIndex=L%r)}}),this._enabled=!0,Object.defineProperty(Y,"enabled",{get:function(){return Y._enabled},set:function(e){qe(Y,e)}}),zot(S)&&(S=null!=M.selectedIndex?M.selectedIndex:0),Y.selectedIndex=S,!1!==B&&So.styleTransforms(this,M),this.clone=function(){return Y.cloneProps(new So.Pad(e,r,t,o,n,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,this.group,E))},this.dispose=function(e,t,o){So.loop(X,function(e){e.dispose()}),this.labels=this.buttons=tabs=this.tabs=null,_=X=Y.rowTabs=null,o||this.zimContainer_dispose(!0)}},So.extend(So.Pad,So.Container,["clone","dispose"],"zimContainer",!1),So.DPad=function(e,o,t,n,r,i,a,l,s,c,u,d,h,g,p,f,m){var z;if(z=zob(So.DPad,arguments,"axis, width, backgroundColor, borderWidth, borderColor, indicatorColor, indicatorPressColor, indicatorScale, indicatorRadius, innerCircle, innerScale, activeRadius, clamp, logo, style, group, inherit",this))return z;z_d("66.2"),this.zimContainer_constructor(null,null,null,null,!1),this.type="DPad",this.group=f;var y=!1===p?{}:So.getStyle(this.type,this.group,m);zot(e)&&(e=null!=y.axis?y.axis:"all"),zot(o)&&(o=null!=y.width?y.width:100),zot(t)&&(t=null!=y.backgroundColor?y.backgroundColor:"#666666"),zot(r)&&(r=null!=y.borderColor?y.borderColor:null),zot(n)&&(n=null!=y.borderWidth?y.borderWidth:null),r<0||n<0?r=n=null:null!=r&&null==n&&(n=1),zot(i)&&(i=null!=y.indicatorColor?y.indicatorColor:"#dddddd"),zot(a)&&(a=null!=y.indicatorPressColor?y.indicatorPressColor:"#eeeeee"),zot(l)&&(l=null!=y.indicatorScale?y.indicatorScale:1),zot(s)&&(s=null!=y.indicatorRadius?y.indicatorRadius:null),zot(c)&&(c=null==y.innerCircle||y.innerCircle),zot(u)&&(u=null!=y.innerScale?y.innerScale:.5),zot(d)&&(d=null!=y.activeRadius?y.activeRadius:o),zot(h)&&(h=null==y.clamp||y.clamp),zot(g)&&(g=null!=y.logo&&y.logo);var b=this;this.axis=e;this.outer=new So.Circle(o/2,t,r,n).addTo(this);var v=this.inner=new So.Circle(o*u/2,"rgba(0,0,0,.2)").center(this);g&&(this.logo=new So.Label({text:"D",bold:!0}).center(v).mov(1,2).alp(.3));var w=(new So.Container).addTo(this),C=.2*(o-n)*l,x=8;"vertical"==e?x=2:"horizontal"==e?(x=2,w.rotation=90):"both"==e&&(x=4),So.loop(x,function(e,t){new So.Triangle(C,C,C,i).addTo(w).reg(null,zot(s)?.475*(o-n):s).rot(360*e/t)});var k,T,A=0,P=0;this.on("mousedown",function(e){e.target.stage,T=e,w.loop(function(e){e.color=a}),b.ticker=So.Ticker.add(function(){!function(){var e=T;A=e.stageX/So.scaX,P=e.stageY/So.scaY,k=b.globalToLocal(A,P),(e=new createjs.Event("change")).dirX=2*((k.x+d)/(2*d)-.5),e.dirY=2*((k.y+d)/(2*d)-.5),h&&(e.dirX=So.constrain(e.dirX,-1,1),e.dirY=So.constrain(e.dirY,-1,1));b.dirX=e.dirX,b.dirY=e.dirY,b.dispatchEvent(e)}()})}),this.on("pressmove",function(e){T=e}),this.on("pressup",function(e){So.Ticker.remove(b.ticker),b.dirX=b.dirY=0,w.loop(function(e){e.color=i}),b.stage&&b.stage.update()}),this._enabled=!0,Object.defineProperty(b,"enabled",{get:function(){return b._enabled},set:function(e){qe(b,e)}}),So.styleTransforms(this,y),this.clone=function(){return b.cloneProps(new So.DPad(e,o,t,n,r,i,a,l,s,c,u,d,h,g,p,this.group,m))},this.dispose=function(e,t,o){return this.ticker&&So.Ticker.remove(this.ticker),o||this.zimContainer_dispose(!0),!0}},So.extend(So.DPad,So.Container,["clone","dispose"],"zimContainer",!1),So.Radial=function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,I,E,O,M,j,L,Y,_){var D;if(D=zob(So.Radial,arguments,"labels, size, font, height, coreRadius, coreColor, startAngle, totalAngle, angles, flip, shiftRadial, icons, rollIcons, rotateIcons, iconsShiftRadial, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, gradient, gap, gapAsAngle, spacing, spacingInner, spacingOuter, currentEnabled, currentSelected, selectedIndex, style, group, inherit",this))return D;z_d("66.4"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Radial",this.group=Y;var X=!1===L?{}:So.getStyle(this.type,this.group,_);zot(e)&&(e=null!=X.labels?X.labels:["A","B","C","D","E"]),zot(t)&&(t=null!=X.size?X.size:30),zot(o)&&(o=null!=X.font?X.font:"verdana"),zot(a)&&(a=null!=X.startAngle?X.startAngle:null),zot(l)&&(l=null!=X.totalAngle?X.totalAngle:360),zot(s)&&(s=null!=X.angles?X.angles:null),zot(c)&&(c=null==X.flip||X.flip),zot(u)&&(u=null!=X.shiftRadial?X.shiftRadial:0),zot(d)&&(d=null!=X.icons?X.icons:null),zot(h)&&(h=null!=X.rollIcons?X.rollIcons:null),zot(g)&&(g=null!=X.rotateIcons&&X.rotateIcons),zot(p)&&(p=null!=X.iconsShiftRadial?X.iconsShiftRadial:0),zot(n)&&(n=null!=X.height?X.height:60),zot(r)&&(r=null!=X.coreRadius?X.coreRadius:100),zot(i)&&(i=null!=X.coreColor?X.coreColor:"#333"),zot(b)&&(b=null!=X.backdropColor?X.backdropColor:So.clear),zot(f)&&(f=null!=X.backgroundColor?X.backgroundColor:"#666"),zot(m)&&(m=null!=X.rollBackgroundColor?X.rollBackgroundColor:"#777"),zot(z)&&(z=null!=X.selectedBackgroundColor?X.selectedBackgroundColor:"#444"),zot(y)&&(y=null!=X.selectedRollBackgroundColor?X.selectedRollBackgroundColor:z),zot(v)&&(v=null!=X.color?X.color:"white"),zot(w)&&(w=null!=X.rollColor?X.rollColor:v),zot(C)&&(C=null!=X.selectedColor?X.selectedColor:v),zot(x)&&(x=null!=X.selectedRollColor?X.selectedRollColor:w),zot(k)&&(k=null!=X.borderColor?X.borderColor:"#333"),zot(T)&&(T=null!=X.borderWidth?X.borderWidth:2),zot(S)&&(S=null!=X.gapAsAngle&&X.gapAsAngle),zot(P)&&(P=null!=X.gap?X.gap:S?3:6),zot(A)&&(A=null!=X.gradient?X.gradient:null),!0===A&&(A=.1),zot(B)&&(B=null!=X.spacing?X.spacing:6),zot(I)&&(I=null!=X.spacingInner?X.spacingInner:B),zot(E)&&(E=null!=X.spacingOuter?X.spacingOuter:B),zot(O)&&(O=null!=X.currentEnabled&&X.currentEnabled),zot(M)&&(M=null==X.currentSelected||X.currentSelected);var R=this,W=this.innerRadius=r+I,H=this.outerRadius=W+n;this.setBounds(-H,-H,2*H,2*H);var F,V=this.backdrop=new So.Circle(H+E,b).center(this);if(0<r&&(this.core=new So.Circle(r,i).center(this)),s&&s.length<e.length-1)return zon&&zogy("Radial() - not enough angles provided"),this;if(e&&0<e.length||d&&0<d.length){if(e&&0<e.length&&(F=e.length),d&&0<d.length&&(F=0<F?Math.min(d.length,F):d.length),h&&h.length<F)for(var N=0;N<F-h.length;N++)h.push(new So.Circle(1,So.clear));var G=V.width,q=this.buttons=new So.Container(-G/2,-G/2,G,G).centerReg(this),Q=P;S||(P=P/H*180/Math.PI,Q=Q/W*180/Math.PI);for(var U=(l-P*F+(360==l?0:P))/F,K=a||0,Z=0;Z<F;Z++){s&&(U=s[Z]);var J=new So.Shape(-G/2,-G/2,G,G).centerReg(q);J.num=Z,J.zimSelected=!1,J.angle=U;var $=J.graphics;J.backgroundColor=So.Pick.choose(f),J.rollBackgroundColor=So.Pick.choose(m),J.selectedBackgroundColor=So.Pick.choose(z),J.selectedRollBackgroundColor=So.Pick.choose(y),J.color=So.Pick.choose(v),J.rollColor=So.Pick.choose(w),J.selectedColor=So.Pick.choose(C),J.selectedRollColor=So.Pick.choose(x),J.colorCommand=$.f(J.backgroundColor).command,(zot(T)||0<T)&&(zot(k)&&zot(T)||(zot(k)&&(k="black"),J.borderColorCommand=$.s(k).command,J.borderWidthCommand=$.ss(T).command));var ee,te,oe,ne,re=(K-90-U/2)*Math.PI/180,ie=(K-90+U/2)*Math.PI/180,ae=(K-90+(U+P-Q)/2)*Math.PI/180,le=(K-90-(U+P-Q)/2)*Math.PI/180;$.arc(0,0,H,re,ie,!1),$.arc(0,0,W,ae,le,!0).cp(),A&&($.s().ss().rf(["rgba(0,0,0,"+A+")","rgba(255,255,255,"+A+")"],[0,1],0,0,W,0,0,H),$.arc(0,0,H,re,ie,!1),$.arc(0,0,W,ae,le,!0).cp()),J.cursor="pointer",J.zimOverEvent=J.on("mouseover",function(e){var t=e.target;t.colorCommand.style=t==R.selected&&M?t.selectedRollBackgroundColor:t.rollBackgroundColor,t.label&&(t.label.color=t==R.selected&&M?t.selectedRollColor:t.rollColor),h&&(t.holder.removeAllChildren(),h[t.num].loc(1,0,t.holder)),R.stage&&R.stage.update()}),J.zimOutEvent=J.on("mouseout",function(e){var t=e.target;t.colorCommand.style=t==R.selected&&M?t.selectedBackgroundColor:t.backgroundColor,t.label&&(t.label.color=t==R.selected&&M?t.selectedColor:t.color),h&&(t.holder.removeAllChildren(),d&&d[t.num].loc(1,0,t.holder)),R.stage&&R.stage.update()}),J.zimDownEvent=J.on((zns?"mousedown"==So.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(e){var t=e.target,o=t!==R.selected;R.lastSelected=R.selected,se=t.num,M?o?(R.selected&&(R.selected.colorCommand.style=R.selected.backgroundColor,R.selected.label&&(R.selected.label.color=R.selected.color)),R.selected=t,R.label=t.label,R.label&&(R.text=R.label.text),R.icon=t.icon,t.colorCommand.style=t.selectedRollBackgroundColor,t.label&&(t.label.color=t.selectedRollColor)):O||(se=-1,R.selected=null,R.label=null,R.text=null,R.icon=null,t.colorCommand.style=t.rollBackgroundColor,t.label&&(t.label.color=t.rollColor)):(R.selected=t,R.label=t.label,R.label&&(R.text=R.label.text),R.icon=t.icon),R.dispatchEvent("change"),So.OPTIMIZE||!zns&&OPTIMIZE||!R.stage||R.stage.update()}),d&&0<d.length&&(ee=W+n/2+p,(te=J.holder=new So.Container(3,ee).addTo(this).reg(1,ee).rot(K)).mouseChildren=!1,te.mouseEnabled=!1,J.icon=d[Z],d[Z].loc(1,0,te),g||(d[Z].rotation=-K)),e&&0<e.length&&(ne="LabelOnArc"!=e[Z].type?(oe="Label"==e[Z].type?e[Z]:new So.Label({text:e[Z],size:t,font:o,color:v,style:L,inherit:_}),new So.LabelOnArc({label:oe,color:v,size:t,spacing:-5,flip:c&&90<K&&K<270,radius:W+(n-oe.height)/2+2+u,style:L,inherit:_})):e[Z],e[Z]=ne,(J.label=ne).center(this).rot(K),ne.mouseChildren=!1,ne.mouseEnabled=!1),Z!=e.length-1&&(K+=(U+(s?s[Z+1]:U))/2+P)}zot(a)||(R.rotation+=R.buttons.getChildAt(0).angle/2)}var se=null;Object.defineProperty(this,"selectedIndex",{get:function(){return se},set:function(e){var t;R.buttons&&(t=R.buttons.getChildAt(e)),t!==R.selected&&(R.selected&&(R.selected.colorCommand.style=R.selected.backgroundColor,R.selected.label&&(R.selected.label.color=R.selected.color)),(R.selected=t)&&(M&&(t.colorCommand.style=t.selectedRollBackgroundColor),t.label&&(M&&(t.label.color=t.selectedColor),R.text=t.label.text))),So.OPTIMIZE||!zns&&OPTIMIZE||!R.stage||R.stage.update()}}),zot(j)&&(j=null!=X.selectedIndex?X.selectedIndex:0),R.selectedIndex=j,So.styleTransforms(this,X),this.clone=function(){return R.cloneProps(new So.Radial(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,I,E,O,M,j,L,this.group,_))}},So.extend(So.Radial,So.Container,"clone","zimContainer",!1),So.RadialMenu=function(e,l,s,c,i,t,o,n,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,r,I,E,O,M,a,j,L,Y,_){var D,X="menu, size, font, height, coreRadius, coreColor, title, titleIcon, startAngle, totalAngle, flip, shiftRadial, rotateIcons, iconsShiftRadial, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, gradient, gap, gapAsAngle, spacing, spacingInner, spacingOuter, currentEnabled, currentSelected, open, under, style, group, inherit",R=X.split(", "),W=!1;if(e&&e.constructor==={}.constructor)for(var H in e)if(0<=R.indexOf(H)){W=!0;break}if(e&&W&&(D=zob(So.RadialMenu,arguments,X,this)))return D;z_d("66.6"),this.zimContainer_constructor(null,null,null,null,!1),this.type="RadialMenu",this.group=Y;var F=!1===L?{}:So.getStyle(this.type,this.group,_);zot(e)&&(e=null!=F.menu?F.menu:{A:{A1:["AA1","AA2","AA3","AA4"],A2:[],A3:[]},B:["B1","B2","B3","B4","B5","B6"],C:[]}),zot(l)&&(l=null!=F.size?F.size:30),zot(s)&&(s=null!=F.font?F.font:"verdana"),zot(u)&&(u=null!=F.startAngle?F.startAngle:null),zot(d)&&(d=null!=F.totalAngle?F.totalAngle:360),zot(h)&&(h=null==F.flip||F.flip),zot(p)&&(p=null!=F.rotateIcons&&F.rotateIcons),zot(g)&&(g=null!=F.shiftRadial?F.shiftRadial:0),zot(f)&&(f=null!=F.iconsShiftRadial?F.iconsShiftRadial:0),zot(c)&&(c=null!=F.height?F.height:60),zot(i)&&(i=null!=F.coreRadius?F.coreRadius:100),zot(t)&&(t=null!=F.coreColor?F.coreColor:"#333"),zot(o)&&(o=null!=F.title?F.title:"MENU"),zot(n)&&(n=null!=F.titleIcon?F.titleIcon:null),zot(v)&&(v=null!=F.backdropColor?F.backdropColor:So.clear),zot(m)&&(m=null!=F.backgroundColor?F.backgroundColor:"#666"),zot(z)&&(z=null!=F.rollBackgroundColor?F.rollBackgroundColor:"#777"),zot(y)&&(y=null!=F.selectedBackgroundColor?F.selectedBackgroundColor:"#444"),zot(b)&&(b=null!=F.selectedRollBackgroundColor?F.selectedRollBackgroundColor:y),zot(w)&&(w=null!=F.color?F.color:"white"),zot(C)&&(C=null!=F.rollColor?F.rollColor:w),zot(x)&&(x=null!=F.selectedColor?F.selectedColor:w),zot(k)&&(k=null!=F.selectedRollColor?F.selectedRollColor:C),zot(T)&&(T=null!=F.borderColor?F.borderColor:"#333"),zot(A)&&(A=null!=F.borderWidth?F.borderWidth:2),zot(B)&&(B=null!=F.gapAsAngle&&F.gapAsAngle),zot(S)&&(S=null!=F.gap?F.gap:B?3:6),zot(r)&&(r=null!=F.spacing?F.spacing:6),zot(P)&&(P=null!=F.gradient?F.gradient:null),!0===P&&(P=.1),zot(I)&&(I=null!=F.spacingInner?F.spacingInner:r),zot(E)&&(E=null!=F.spacingOuter?F.spacingOuter:r),zot(O)&&(O=null!=F.currentEnabled&&F.currentEnabled),zot(M)&&(M=null==F.currentSelected||F.currentSelected),zot(a)&&(a=null!=F.open&&F.open),zot(j)&&(j=null==F.under||F.under);var V=this,N=(zns?"mousedown"==So.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",G=null,q=this.core=new So.Circle({radius:i,color:t,style:L,inherit:_}).addTo(this);n&&(this.titleIcon=n.center(q)),o&&(this.title=new So.Label({text:o,size:l,font:s,color:w,style:L,inherit:_}).center(q)),q.cursor="pointer",q.on(N,function(e){V.leafNode=!1,0==Z.length?J():(So.loop(Z,function(e){e.selectedIndex=-1,e.removeFrom(),Z=[]}),V.outerLevel=0,V.selected=V.outerMenu=V.selectedMenu=V.text=null),!O&&V.selected==G||V.dispatchEvent("change"),G=V.selected,V.stage&&V.stage.update()}),this.closeRings=function(e){zot(e)&&(e=V.outerLevel);var o=V.outerLevel-e;So.loop(Z,function(e,t){o-1<t&&(e.removeFrom(),e.selectedIndex=-1,Z.pop())},!0),V.outerLevel=o,V.outerMenu=Z[Z.length-1],V.outerMenu&&(V.outerMenu.selectedIndex=-1),V.selected=V.selectedMenu=V.text=null,Z[Z.length-2]?(V.selectedMenu=Z[Z.length-2],V.selectedIndex=V.selectedMenu.selectedIndex):V.selectedIndex=-1,V.selected!=G&&V.dispatchEvent("change"),G=V.selected,V.stage&&V.stage.update()};var Q,U,K={};V.outerLevel=0,e.constructor=={}.constructor&&(e={core:e},Q=V.tree=new So.Hierarchy(e),U=Q.getLinearIDs()),V.lastRadial=null;var Z=this.radials=[];function J(e){var o,t,n,r;e?o=e.ringLevel:(o=0,r=i),So.loop(Z,function(e,t){o-1<t&&(e.removeFrom(),e.selectedIndex=-1,Z.pop())},!0),e&&(t=e.selected),t?(n=t.id,r=e.outerRadius,$(n,o+1,r)):e||$("id0",o+1,r),V.selected=t,V.selected?(V.selectedMenu=Z[V.selected.menu.ringLevel-1],V.selectedIndex=V.selected.num,V.selected.label?V.text=V.selected.label.text:V.text=null):O&&e?(V.selectedIndex=e.selectedIndex,V.label=e.label,V.text=e.text,V.icon=e.icon,V.selectedMenu=e):(V.text=null,V.selectedIndex=-1,V.selectedMenu=null),V.stage&&V.stage.update()}function $(e,t,o){var n,r,i,a;t&&(V.outerLevel=t),K[e]||(i=(r=Q.getData(e)).list)&&!So.isEmpty(i)&&(a={labels:Q.getLinearList(i),coreRadius:o,size:l,font:s,startAngle:u,totalAngle:d,flip:h,rotateIcons:p,shiftRadial:g,iconsShiftRadial:f,height:c,coreColor:So.clear,backdropColor:v,backgroundColor:m,rollBackgroundColor:z,selectedBackgroundColor:y,selectedRollBackgroundColor:b,color:w,rollColor:C,selectedColor:x,selectedRollColor:k,borderColor:T,borderWidth:A,gapAsAngle:B,gap:S,gradient:P,spacingInner:I,spacingOuter:E,currentSelected:M,currentEnabled:O,style:L,inherit:_},r.styles&&(a=So.merge(a,r.styles)),n=K[e]=new So.Radial(a),U=Q.getLinearIDs(i),n.buttons.loop(function(e,t){e.menu=n,e.id=U[t]}),n.ringLevel=V.outerLevel,n.selectedIndex=-1,n.on("change",function(e){V.leafNode=!1,J(e.target),!O&&V.selected==G||V.dispatchEvent("change"),G=V.selected})),K[e]?(Z.push(K[e]),K[e].center(V),j&&K[e].bot()):(V.leafNode=!0,--V.outerLevel),V.outerMenu=n}a&&J(),So.styleTransforms(this,F),this.clone=function(){return V.cloneProps(new So.RadialMenu(e,l,s,c,i,t,o,n,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,r,I,E,O,M,a,j,L,this.group,_))}},So.extend(So.RadialMenu,So.Container,"clone","zimContainer",!1),So.ColorPicker=function(e,o,n,r,i,t,a,l,s,c,u,d,h,g,p,f,m,z,y,b){var v;if(v=zob(So.ColorPicker,arguments,"width, colors, cols, spacing, greyPicker, alphaPicker, startBackgroundColor, draggable, shadowColor, shadowBlur, buttonBar, circles, indicator, backgroundColor, keyArrows, container, selectedIndex, style, group, inherit",this))return v;z_d("67"),this.zimContainer_constructor(null,null,null,null,!1),this.type="ColorPicker",this.group=y;var w=!1===z?{}:So.getStyle(this.type,this.group,b);zot(e)&&(e=null!=w.width?w.width:500),zot(o)&&(o=null!=w.colors?w.colors:null),zot(o)&&(B=!0),zot(n)&&(n=null!=w.cols?w.cols:10),zot(r)&&(r=null!=w.spacing?w.spacing:2);var C=!B&&0<o.length&&o.length<=n;zot(t)&&(t=null!=w.alphaPicker?w.alphaPicker:!C),zot(i)&&(i=null!=w.greyPicker?w.greyPicker:!C),zot(s)&&(s=null!=w.shadowColor?w.shadowColor:"rgba(0,0,0,.3)"),zot(c)&&(c=null!=w.shadowBlur?w.shadowBlur:14),zot(u)&&(u=null!=w.buttonBar?w.buttonBar:!C),zot(l)&&(l=u?null==w.draggable||w.draggable:null!=w.draggable&&w.draggable),zot(d)&&(d=null!=w.circles&&w.circles),zot(h)&&(h=null!=w.indicator&&w.indicator,u||(h=null==w.indicator||w.indicator)),zot(g)&&(g=null!=w.backgroundColor?w.backgroundColor:"black"),zot(a)&&(a=null!=w.startBackgroundColor?w.startBackgroundColor:null),zot(p)&&(p=null==w.keyArrows||w.keyArrows);var x=this;if(zot(f)){if(!zdf)return;f=zdf.stage}else{if(!f.getBounds)return;if(zot(f.getStage))return}x.container=f;var k="#e472c4",T="#50c4b7",A=1,P=1,S=new createjs.Shape;this.addChild(S),S.x+=r,S.y+=r;var B=!1,I=[];if(zot(o)){B=!0;for(var E=(O=6)*O*O,O=Math.ceil(Math.pow(E,.5)),M=(e-r)/18-r,j=Math.floor(Math.pow(O*O,1/3)),L=[],Y=0;Y<6;Y++)for(var _=0;_<6;_++)for(var D=0;D<6;D++)L.push("#"+V(3*Y)+V(3*_)+V(3*D));for(o=[],Y=0;Y<L.length;Y++)G=Math.floor(Y/6),o[18*((N=Y%6)+6*(j=18<=G?1:0))+(G-6*j*3)]=L[Y];n=18,I=[T,k]}else M=(e-r)/n-r;var X,R,W=Math.ceil(o.length/n),H=1,F=String(o[o.length-1]);function V(e){return(e=Math.floor(e).toString(16))+""+e}zot(a)||((X=a.match(/rgba\((.*)\)/))&&(H=(G=X[1].split(",")).pop(),a="rgb("+G.join(",")+")"),F=String(a)),B&&(R=T);var N,G,q,Q,U=S.graphics,j=0,K=null!=w.borderColor?w.borderColor:null,Z=null!=w.borderWidth?w.borderWidth:null;for(!zot(K)&&zot(Z)&&(Z=1),Z&&zot(K)&&(K="#333"),Z&&U.s(K).ss(Z),Y=0;Y<o.length;Y++)G=Y%n,N=Math.floor(Y/n),q=G*(M+r),Q=N*(M+r),d?U.f(o[Y]).dc(q+M/2,Q+M/2,M/2):U.f(o[Y]).r(q,Q,M,M);var J=Q+M+r;x.colors=o;var $=J;if(i){for(Y=0;Y<16;Y++)I.push("#"+V(Y)+V(Y)+V(Y));for(Y=0;Y<I.length;Y++)G=Math.floor(Y/n),q=(N=Y%n)*(M+r),Q=G*(M+r)+J,d?U.f(I[Y]).dc(q+M/2,Q+M/2,M/2):U.f(I[Y]).r(q,Q,M,M);J=Q+M+r;var ee=n,te=Math.ceil(I.length/n)}function oe(e){zot(e)||e<0?h.visible=!1:(h.visible=!0,"#000"==F||"#000000"==F||"black"==F?(h.color="#222",h.alpha=1):(h.color="black",h.alpha=.5),h.x=S.x+e%n*(M+r)+M/2,h.y=S.x+Math.floor(e/n)*(M+r)+M/2)}x.greys=I,h&&((h=this.indicator=d?new So.Circle(M/2*.5,null,null,null,null,null,null,null,!1):new So.Rectangle(.5*M,.5*M,null,null,null,null,null,null,!1)).alpha=.5,h.centerReg(),this.addChild(h),h.mouseEnabled=!1,oe(o.indexOf(F)));var ne,re,ie,ae,le,se,ce,ue,de,he,ge,pe;t&&((ne=new So.Container({style:!1})).setBounds(0,0,600,70),this.addChild(ne),ne.x=0,ne.y=J,re=this.alphaBacking=new So.Rectangle(580,50,"#222",null,null,0,null,null,!1),ne.addChild(re),So.centerReg(re,ne),ie=this.alphaBut=new So.Button({width:20,height:30,backgroundColor:"darkorange",rollBackgroundColor:"orange",label:"",corner:0,hitPadding:20,style:!1}),(ae=this.alphaSlider=new So.Slider({min:0,max:1,step:.05,button:ie,barLength:330,barWidth:2,barColor:"#999",vertical:!1,useTicks:!1,inside:!1,style:!1})).currentValue=zot(H)?1:H,ne.addChild(ae),ae.x=40,ae.y=ne.height/2,le=this.alphaText=new So.Label({text:"Alpha: "+So.decimals(H),size:30,color:"orange",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",rollColor:"orange",group:this.group}),ne.addChild(le),le.x=ae.x+ae.bar.width+40,le.y=ne.height/2-le.height/2,ne.scaleX=ne.scaleY=e/600,ae.on("change",function(){le.text="Alpha: "+Pe(ae.currentValue),pe&&(pe.alpha=P=ae.currentValue),u?x.dispatchEvent("set"):x.dispatchEvent("change"),x.stage&&x.stage.update()}),J+=ne.height-10),u?((se=new So.Container({style:!1})).setBounds(0,0,600,100),this.addChild(se),se.x=0,se.y=J+10,ce=this.swatchText=new So.Label({align:"center",text:F.toUpperCase(),labelWidth:120,labelHeight:50,size:30,color:"orange",rollColor:"orange",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",group:this.group}),se.addChild(ce),So.centerReg(ce),ce.x=90,ce.y=48,l&&(ue=this.grip=new So.Shape({style:!1}),se.addChild(ue),ue.graphics.f("rgba(256,256,256,.25)").r(0,0,5,20).r(10,0,5,20).r(20,0,5,20).r(30,0,5,20),ue.x=70,ue.y=65,ce.y=40,ue.mouseEnabled=!1),de=this.closeBut=new So.Button({width:90,height:90,label:"X",backgroundColor:"#222",rollBackgroundColor:"#444",corner:0,style:!1}),se.addChild(de),de.x=600-de.width-10,de.y=0,de.on((zns?"mousedown"==So.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){x.dispatchEvent("close")}),he=this.okBut=new So.Button({width:150,height:90,label:"OK",backgroundColor:"#222",rollBackgroundColor:"#444",corner:0,style:!1}),se.addChild(he),he.x=de.x-he.width-10,he.y=0,he.on((zns?"mousedown"==So.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",be),ge=this.swatchBacking=new So.Shape({style:!1}),se.addChild(ge),(U=ge.graphics).f("black").r(.5,.5,50,89).f("#666").r(50,.5,50,89).f("white").r(100,.5,49.5,89),ge.x=he.x-150-10,ge.y=0,pe=this.swatch=new So.Rectangle(150,90,F,null,null,null,null,null,!1),se.addChild(pe),pe.x=ge.x,pe.y=0,pe.on((zns?"mousedown"==So.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",be),pe.cursor="pointer",pe.alpha=P=H,se.scaleX=se.scaleY=e/600,J+=se.height):S.cursor="pointer",t||u||(J-=10-r);var fe=J+10;this.setBounds(0,0,e,fe);var me,ze,ye=this.background=new So.Rectangle(e,fe,g,null,null,null,null,null,!1);function be(){if(F!=R||P!=A){if(B&&i){var e=[T=k,k=R];for(Y=0;Y<2;Y++){var t=S.graphics;G=Math.floor(Y/n),q=(N=Y%n)*(M+r),Q=G*(M+r)+$,I[Y]=e[Y],t.f(ye.color).r(q-1,Q-1,M+2,M+2).f(e[Y]).r(q,Q,M,M)}So.OPTIMIZE||!zns&&OPTIMIZE||!x.stage||x.stage.update()}R=F,A=P,x.dispatchEvent("change")}else x.dispatchEvent("close")}this.addChildAt(ye,0),-1!=s&&0<c&&(ye.shadow=new createjs.Shadow(s,8,8,c)),l&&(ye.on("mousedown",function(e){e.target.stage,me=e.stageX/So.scaX-x.x,ze=e.stageY/So.scaY-x.y,ye.cursor="move"}),ye.on("pressmove",function(e){x.x=e.stageX/So.scaX-me,x.y=e.stageY/So.scaY-ze,x.stage&&x.stage.update()}),ye.on("pressup",function(e){ye.cursor="default",x.stage&&x.stage.update()}));var ve,we,Ce,xe=n*(M+r),ke=W*(M+r);function Te(){x.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function Ae(){x.zimAccessibility&&x.zimAccessibility.changeTitle(x,null,!0)}function Pe(e){return Math.round(e*Math.pow(10,2))/Math.pow(10,2)}i&&(ve=ee*(M+r),we=te*(M+r)),S.on((zns?"mousedown"==So.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(e){var t=So.hitTestGrid(S,xe,ke,n,W,e.stageX,e.stageY,0,0,r,r);zot(t)||(F=o[t],u?(pe.color=F,ce.text=String(o[t]).toUpperCase(),F!=R&&x.dispatchEvent("set")):be()),i&&(t=null,zot(t=So.hitTestGrid(S,ve,we,ee,te,e.stageX,e.stageY,0,ke,r,r))||(F=I[t],u?(pe.color=F,ce.text=I[t].toUpperCase(),F!=R&&x.dispatchEvent("set")):be())),h&&oe(o.indexOf(F)),u?x.stage&&x.stage.update():h&&x.stage&&x.stage.update(),Ae()}),Object.defineProperty(this,"selectedColor",{get:function(){return F},set:function(e){e=e.toLowerCase(),R=F=e,u&&(pe.color=F,ce.text=F,x.stage&&x.stage.update()),h&&oe(o.indexOf(F)),Ae()}}),Object.defineProperty(this,"currentValue",{get:function(){return F},set:function(e){x.selectedColor=e}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return F},set:function(e){e!=x.selectedColor&&(x.selectedColor=e,x.dispatchEvent("change"))}}),Object.defineProperty(this,"selectedIndex",{get:function(){return o.indexOf(F)},set:function(e){R=F=o[e],u&&(pe.color=F,ce.text=F,x.stage&&x.stage.update()),h&&oe(o.indexOf(F)),Ae()}}),Object.defineProperty(this,"selectedAlpha",{get:function(){return t?Pe(ae.currentValue):1},set:function(e){t&&(A=ae.currentValue=e,pe&&(pe.alpha=A),le&&(le.text="Alpha: "+Pe(ae.currentValue)),x.stage&&x.stage.update())}}),Object.defineProperty(this,"colors",{get:function(){return i?o.concat(I):o},set:function(e){zon&&zogy("ColorPicker() colors is read only - make a new ColorPicker to change")}}),void 0!==KEYFOCUS&&(So.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return So.KEYFOCUS==x},set:function(e){zns?So.KEYFOCUS=x:KEYFOCUS=x}}),p&&So.KEYFOCUS&&Te(),this.on("mousedown",function(){p&&Te()}),this.keyDownEvent=function(e){var t;function o(){t<0&&(t=x.colors.length-1),t>x.colors.length-1&&(t=0),x.selectedIndex=t,x.dispatchEvent("change"),x.stage&&x.stage.update()}x.stage&&(x.zimAccessibility&&x.focus||!x.zimAccessibility&&x.keyFocus)&&(t=x.selectedIndex,37==e.keyCode||40==e.keyCode?(t--,o()):38!=e.keyCode&&39!=e.keyCode||(t++,o()))},window.addEventListener("keydown",this.keyDownEvent),this.hide=function(){var e;return x.removeFrom(),x.toggled=!1,x.zimAccessibility&&((e=x.zimAccessibility).resize(x),Ce?Ce.focus():x.zimTabTag.nextSibling.focus(),setTimeout(function(){e.talk("ColorPicker has been closed.")},50)),x},this.show=function(){var e;return x.center(x.container),x.zimAccessibility&&(e=x.zimAccessibility,setTimeout(function(){e.activatedObject&&(Ce=e.activatedObject.zimTabTag)},50),e.resize(x),e.tabIndex=x.zimTabIndex),x.toggled=!0,x},this.toggle=function(e){return!0!==e&&(!1===e||x.container.contains(x))?x.hide():x.show(),x},zot(m)&&(m=null!=w.selectedIndex?w.selectedIndex:0),x.selectedIndex=m,!1!==z&&So.styleTransforms(this,w),this.clone=function(){return x.cloneProps(new So.ColorPicker(e,B?null:o,n,r,i,t,a,l,s,c,u,d,h,g,p,f,m,z,this.group,b))},this.dispose=function(e,t,o){return window.removeEventListener("keydown",x.keyDownEvent),ae&&ae.dispose(),o||this.zimContainer_dispose(!0),!0}},So.extend(So.ColorPicker,So.Container,["clone","dispose"],"zimContainer",!1),So.TextEditor=function(i,n,e,t,o,r,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,I,E,O){var M;if(M=zob(So.TextEditor,arguments,"width, color, backgroundColor, fieldColor, fieldHeight, textSize, sizeList, optionList, colorList, fontList, live, button, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, wrap, limit, scroll, placeholder, password, borderColor, borderWidth, margin, corner, shadowColor, shadowBlur, draggable, boundary, frame, style, group, inherit",this))return M;z_d("67.1"),this.group=E;var j=!1===I?{}:So.getStyle("TextEditor",this.group,O);if(zot(i)&&(i=null!=j.width?j.width:400),zot(e)&&(e=null!=j.backgroundColor?j.backgroundColor:So.lighter),zot(h)&&(h=null!=j.titleBar?j.titleBar:"Text Editor"),zot(P)&&(P=null==j.draggable||j.draggable),zot(f)&&(f=null!=j.titleBarHeight?j.titleBarHeight:30),zot(t)&&(t=null!=j.fieldColor?j.fieldColor:e.darken(.05)),zot(u)&&(u=null==j.live||j.live),zot(m)&&(m=null==j.wrap||j.wrap),zot(y)&&(y=null==j.scroll||j.scroll),zot(x)&&(x=null!=j.margin?j.margin:10),zot(z)&&(z=null!=j.limit?j.limit:null),zot(h)&&(h=null!=j.titleBar?j.titleBar:null),zot(a)&&(a=null!=j.sizeList?j.sizeList:null),zot(s)&&(s=null!=j.colorList?j.colorList:null),zot(l)&&(l=null!=j.optionList?j.optionList:null),zot(c)&&(c=null!=j.fontList?j.fontList:null),zot(t)&&(t=null!=j.fieldColor?j.fieldColor:null),zot(o)&&(o=null!=j.fieldHeight?j.fieldHeight:null),zot(r)&&(r=null!=j.textSize?j.textSize:null),zot(B)){if(!zdf)return void(zon&&zog("zim.TextEditor - please provide a reference to zim Frame"));B=zdf}this.zimPanel_constructor(i,300,h,g,p,f,e,w,C,k,!0,null,null,null,T,A,P,S,null,I,E,O);var L=this;zot(d)&&(d=new So.Button({width:50,height:50,label:"",icon:(new Shape).sca(.4).f("white").p("AikFsQg5jmhphxIA1gXQBeBGA3CwQC8mRCpjOIBfAoQkPFGiSFpg"),color:So.white,corner:10,backgroundColor:So.green.darken(.2),borderColor:So.white,borderWidth:2,rollBackgroundColor:So.green,shadowBlur:3}).pos(x,f+2*x,So.RIGHT,So.TOP,L)),(L.button=d).on((zns?"mousedown"==So.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){u||(_.text=Y.text);L.hide(),L.dispatchEvent("set")}),zot(o)&&(o=null!=j.fieldHeight?j.fieldHeight:d.height+2*x);var Y=L.textArea=new So.TextArea({color:n,backgroundColor:t,width:i-d.width-3*x,height:zot(o)?d.height+2*x:o,expand:10,password:v,placeholder:b,frame:B}).loc(x,f+x+(o&&o<d.height+2*x?(d.height-o)/2+x:0),null,null,!1);m||(Y.tag.style.whiteSpace="nowrap"),z&&Y.tag.setAttribute("maxLength",z),y&&(Y.tag.style.overflowY="auto");var _=new So.Label;L.on("pressmove",function(){Y.resize()}),L.on("close",function(){L.inputEvent&&Y.off("input",L.inputEvent),Y.removeFrom()}),L.panelHeight=f+x+Math.max(o,d.height+2*x)+x;var D,X,R,W,H,F,V,N,G,q,Q=So.mobile(),U=Q?35:30;function K(){Y.tag.style.display="block",R.hide(),L.stage&&L.stage.update()}function Z(){_&&(Y.text=_.text),n&&(n.color=_.color),W&&W.toggle(1==_.bold),H&&H.toggle(1==_.italic),F&&(F.noAnimate=!0,"center"==_.align?F.selectedIndex=1:"right"==_.align?F.selectedIndex=2:F.selectedIndex=0),V&&(V.currentValue=_.size),q&&(q.currentValue=_.font),L.inputEvent&&Y.off("input",L.inputEvent),L.inputEvent=Y.on("input",function(e){u&&(_.text=Y.text),L.dispatchEvent("input"),L.dispatchEvent("update"),L.stage&&L.stage.update()})}(a||l||s)&&(new So.Rectangle(i,U+x,"rgba(0,0,0,.05)").loc(0,L.panelHeight,L),D=[],s&&(X=Array.isArray(s),(R=L.colorPicker=new So.ColorPicker({colors:X?s:null,cols:X?Math.min(s.length,12):null,alphaPicker:!1,greyPicker:!X,container:B.stage})).on("close",K),R.on("change",function(){_.color=n.color=R.selectedColor,L.dispatchEvent("update"),K()}),L.closeColorPicker=function(){K()},(n=L.swatch=new So.Rectangle(U,U,_.color,So.dark,1).cur()).on("mousedown",function(){L.dispatchEvent("color"),Y.tag.style.display="none",R.selectedColor=n.color,R.show(),L.stage&&L.stage.update()}),D.push(n)),l&&(!0===l&&(l=["bold","italic","align"]),zot(STYLE)&&(STYLE={}),zot(STYLE.group)&&(STYLE.group={}),STYLE.group.zimEditor={width:U,height:U,corner:0,borderColor:So.tin,shadowBlur:-1,backgroundColor:So.light,rollBackgroundColor:So.light,toggleBackgroundColor:So.green,toggleColor:So.grey},So.loop(l,function(e){var o,n,t;"bold"==e.toLowerCase()?((W=L.bold=new So.Button({label:new So.Label({text:"B",color:So.grey,size:16,bold:!0}),toggle:"B",group:"zimEditor"})).on("click",function(){_.bold=W.toggled,L.dispatchEvent("update"),L.stage&&L.stage.update()}),D.push(W),_.bold&&W.toggle()):"italic"==e.toLowerCase()?((H=L.italic=new So.Button({label:new So.Label({text:"I",color:So.grey,size:16,bold:!0,italic:!0}),toggle:"I",group:"zimEditor"})).on("click",function(){_.italic=H.toggled,L.dispatchEvent("update"),L.stage&&L.stage.update()}),D.push(H),_.italic&&H.toggle()):"align"==e.toLowerCase()&&(o=new So.Tile(new So.Rectangle(U-10,U-10,So.grey).centerReg(),3,1,10,10),n=Q?["","",""]:["","",""],So.loop(3,function(e){var t=o.getChildAt(e);new So.Label(n[e],2*U/3,null,So.white).center(t).expand(10)}),t=0,"right"==_.align?t=2:"center"!=_.align&&"middle"!=_.align||(t=1),(F=L.align=new So.Selector({tile:o,corner:0,borderWidth:1,borderColor:So.grey,backgroundColor:So.clear,selectedIndex:t})).on("change",function(){0==F.selectedIndex?_.align="left":1==F.selectedIndex&&(_.align="center"),2==F.selectedIndex&&(_.align="right"),L.dispatchEvent("update"),L.stage&&L.stage.update()}),D.push(F))}),delete STYLE.group.zimEditor),a&&((V=L.sizePicker=new So.Stepper({list:!0===a?null:a,stepperType:!0===a?null:"list",min:!0===a?5:null,max:!0===a?500:null,width:150,shadowBlur:-1,borderColor:So.dark,borderWidth:2,corner:0,backgroundColor:So.green,downForward:!1}).siz(null,U)).arrowPrev.expand(0),V.textBox.color=So.lighter,V.on("change",function(){_.size=V.currentValue,L.dispatchEvent("update"),L.stage&&L.stage.update()}),V.currentValue=_.size,D.push(V)),N=new So.Tile(D,D.length,1,10,10,!0).loc(x,L.panelHeight+x/2,L),L.panelHeight=L.panelHeight+x+N.height+x),c&&(Array.isArray(c)?G=c:(G=["Arial","Courier New","Georgia","Helvetica","Palatino","Tahoma","Verdana"],Q||(G=G.concat(["Comic Sans MS","Impact"])),G.sort()),(q=L.fonts=new So.List({width:i-2*x,height:100,viewNum:3,backgroundColor:So.moon,color:So.grey,rollColor:So.dark,rollBackgroundColor:So.green.lighten(.5),selectedBackgroundColor:So.mist,selectedRollBackgroundColor:So.green.lighten(.6),selectedColor:So.dark,backdropColor:So.light,scrollBarColor:So.dark,shadowBlur:-1,list:G}).center(L).loc(null,L.panelHeight)).on("change",function(){_.font=q.currentValue,L.dispatchEvent("update"),L.stage&&L.stage.update()}),L.panelHeight=L.panelHeight+x+q.height+x),L.show=function(e,t,o,n){if(L.parent)return e==L.label||(L.label=e),L;var r;if(_=e,Y.addTo(L),_&&_.stage)r=_.stage;else if(n)r=n.stage;else{if(!zdf)return L;r=zdf.stage}return zot(t)&&zot(o)?_&&_.y>r.height/2?L.loc(r.width/2-i/2,_.y-L.panelHeight-.05*r.height,r):_&&_.y<=r.height/2?L.loc(r.width/2-i/2,_.y+_.height+.05*r.height,r):L.center(r):L.loc(t,o),L.y<20&&(L.y=20),L.y+L.height>L.stage.height&&(L.y=L.stage.height-L.height-20),Z(),L.stage.update(),L},L.hide=function(){if(s&&R.hide(),Y&&Y.removeFrom(),!zot(L.stage)){var e=L.stage;return L.removeFrom(),e.update(),L}},Object.defineProperty(L,"label",{get:function(){return _},set:function(e){_=e,Z()}}),!1!==I&&So.styleTransforms(this,j),this.clone=function(){return L.cloneProps(new So.TextEditor(i,n,e,t,o,r,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,I,this.group,O))},this.dispose=function(e,t,o){L.stage;return L.inputEvent&&Y.off("input",L.inputEvent),R&&R.dispose(),n&&n.dispose(),q&&q.dispose(),d&&d.dispose(),Y&&Y.dispose(),F&&F.dispose(),W&&W.dispose(),H&&H.dispose(),V&&V.dispose(),o||this.zimPanel_dispose(),L.stage&&L.stage.update(),!(L.textArea=L.color=L.colorPicker=L.font=L.button=L.selector=L.bold=L.italic=L.size=null)}},So.extend(So.TextEditor,So.Panel,["clone","dispose"],"zimPanel",!1),So.Keyboard=function(n,f,m,r,i,a,l,t,z,y,b,o,v,s,c,u,d,h,g,p,w,C,x,k,e,T){var A;if(A=zob(So.Keyboard,arguments,"labels, backgroundColor, color, shiftBackgroundColor, shiftHoldBackgroundColor, placeBackgroundColor, placeColor, cursorColor, shadeAlpha, borderColor, borderWidth, margin, corner, draggable, placeClose, shadowColor, shadowBlur, container, data, place, special, rtl, hardKeyboard, style, group, inherit",this))return A;z_d("67.2"),this.zimContainer_constructor(1e3,400,null,null,!1),this.type="Keyboard",this.group=e;var P=!1===k?{}:So.getStyle(this.type,this.group,T);zot(n)&&(n=null!=P.labels?P.labels:[]),Array.isArray(n)||(n=[n]),zot(f)&&(f=null!=P.backgroundColor?P.backgroundColor:"#333"),zot(m)&&(m=null!=P.color?P.color:"white"),zot(r)&&(r=null!=P.shiftBackgroundColor?P.shiftBackgroundColor:"orange"),zot(i)&&(i=null!=P.shiftHoldBackgroundColor?P.shiftHoldBackgroundColor:"red"),zot(a)&&(a=null!=P.placeBackgroundColor?P.placeBackgroundColor:"#50c4b7"),zot(l)&&(l=null!=P.placeColor?P.placeColor:m),zot(t)&&(t=null!=P.cursorColor?P.cursorColor:"#50c4b7"),zot(z)&&(z=null!=P.shadeAlpha?P.shadeAlpha:.2),zot(y)&&(y=null!=P.borderColor?P.borderColor:"rgba(0,0,0,.1)"),zot(b)&&(b=null!=P.borderWidth?P.borderWidth:null),y<0||b<0?y=b=null:null!=y&&null==b&&(b=1),zot(o)&&(o=null!=P.margin?P.margin:5),zot(v)&&(v=null!=P.corner?P.corner:30),zot(s)&&(s=null!=P.draggable&&P.draggable),zot(c)&&(c=null==P.placeClose||P.placeClose),zot(u)&&(u=null!=P.shadowColor?P.shadowColor:"rgba(0,0,0,.2)"),zot(d)&&(d=null!=P.shadowBlur?P.shadowBlur:14),zot(g)&&(g=null!=P.data?P.data:[[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["shift","z","x","c","v","b","n","m","backspace"],["?123"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC"]],[["+","x","%","=","<",">","{","}","[","]"],["","","","$","","~","`","","",""],["2/2","_","\\","|","","","","","backspace"],["ABC"]]]);var S=this;S.data=g,zot(p)&&(p=null==P.place||P.place),zot(C)&&(C=null!=P.rtl&&P.rtl),zot(x)&&(x=null==P.hardKeyboard||P.hardKeyboard);var B="zim display - Keyboard(): Please pass in a reference to a container with bounds set";if(zot(h)){if(!zdf)return void zog(B);h=zdf.stage}else{if(!h.getBounds)return void zog(B);if(zot(h.stage))return void zog("zim display - Keyboard(): The container must have a stage property")}-1!=u&&0<d&&(S.shadow=new createjs.Shadow(u,3,3,d));var I,E=zdf?zdf.stage:null;S.labels=n;var O=["@","",".","/","away"];zot(w)||O.splice(1,0,w);var M=So.copy(g[0]);M[3]=M[3].concat(O);var j=So.copy(g[1]);j[3]=j[3].concat(O);var L=So.copy(g[2]);L[3]=L[3].concat(O);var Y,_,D,X,R,W,H,F,V,N,G,q,Q=["","","","","","",""],U=["","","","",""],K=["","","","","",""],Z=["","","","","","","",""],J=["","","","","","","",""],$=["",""],ee=[],te=95.5,oe={def:"default",shift:"shift",number1:"number1",number2:"number2"},ne=oe.def,re=!1,ie=0,ae=[];function le(e){var t,o,n=!1;if(ne===oe.def){for(X.color=e?i:r,t=0;t<ee.length-6-(zot(w)?0:1);t++){0<(o=ee[t]).label.text.length&&(1===o.na.length?(o.label.text=o.label.text.toUpperCase(),o.label.centerReg(o).mov(0,6)):o.label.centerReg(o))}e||(n=!0,setTimeout(function(){n&&(re=!0,X.color=i,Y.updateCache(),S.stage&&S.stage.update())},500),q=S.on("pressup",function(e){S.off("pressup",q),n=!1})),ne=oe.shift}else{for(X.color=f,re=!1,t=0;t<ee.length-6;t++){0<(o=ee[t]).label.text.length&&(1===o.na.length?(o.label.text=o.label.text.toLowerCase(),o.label.centerReg(o).mov(0,3)):o.label.centerReg(o))}ne=oe.def}Y.updateCache(),S.stage&&S.stage.update()}function se(e){var t,o,n,r,i,a,l=0,s=0,c=!1,u=!1;zot(e)&&(e=oe.def),e===oe.def?t=M:e===oe.number1?t=j:e===oe.number2&&(t=L),Y=new So.Container(1e3,430,null,null,!1).addTo(S);for(var d=0;d<t.length;d++){(d<=1||e==oe.def&&2==d&&"shift"!=t[2][0])&&(l=(te/2+2.5)*(10-t[d].length));for(var h=0;h<t[d].length;h++){var g,c=!1,p=null,u=!1;"backspace"==t[d][h]?(p=F,u=i=!0):"shift"==t[d][h]?(i=!0,p=H):(3==d||e!=oe.def&&2==d)&&0==h?u=i=!0:""==t[d][h]?c=!(i=!1):"away"==t[d][h]?(p=V,u=i=!0):i=!1,r=i?1.5*te+2.5:c?(te+5)*(zot(w)?4:3)-5:te,n=new So.Rectangle(r,te,f,y,b,v,null,null,!1).cur().addTo(Y),u&&n.addChild(new So.Rectangle(r,te,"black",null,null,v,null,null,!1).alp(z)),n.label=o=p?new So.Label({text:"",backgroundColor:"ignore",font:null!=P.font?P.font:null,style:!1}):new So.Label({lineWidth:10,lineHeight:25,font:null!=P.font?P.font:null,text:t[d][h],color:m,align:"center",style:!1}),p&&((g=p.clone()).scaleTo(n,70,70),g.centerReg(n)),a?(a=!1,l+=67.33):(o.centerReg(n).mov(0,isNaN(o.text)?3:7),n.x=l,n.y=s,n.na=t[d][h],2==d&&0==h&&e==oe.number1&&(n.toggle="1/2"),2==d&&0==h&&e==oe.number2&&(n.toggle="2/2"),3==d&&0==h&&e==oe.def&&(n.toggle="?123"),3==d&&0==h&&e!=oe.def&&(n.toggle="ABC"),n.toggle&&o.mov(0,3),ee.push(n),"shift"==n.na&&(X=n),l=n.x+n.width+5)}s+=te+5,l=0}Y.cache(b?-b:0,b?-b:0,b?Y.width+2*b:Y.width,b?Y.height+2*b:Y.height)}function ce(){S.mouseYAmount&&(S.y=S.parent.globalToLocal(0,S.mouseYAmount-G).y)}function ue(){E.off("pressmousemove",S.tickerMouseEvent),So.Ticker.remove(ce)}function de(){if(R&&D){for(var e=R.label.x+R.label.getBounds().x,t=0;t<ie;t++)e+=R.widthArray[t]?R.widthArray[t]:0;D.heightOnly=R.getBounds().height*(R.backing&&zot(R.padding)?.9:1)-(R.paddingVertical&&R.background?2*R.paddingVertical:0),D.center(R),D.x=e}}function he(){if(W)return S;if(!R)return S;var e,t,o,n=c?["<",">","x"]:["<",">"];ae=[],o=R.localToLocal(0,0,S),W=new So.Container({style:!1}).addTo(S).pos({x:o.x,y:o.y+R.height+15,reg:!0}).cur();for(var r=0;r<n.length;r++)e=new So.Rectangle(te,te,a,y,b,v,null,null,!1),"x"==n[r]&&new So.Rectangle(te,te,"black",null,null,v,null,null,!1).alp(z).addTo(e),(t=new So.Label({lineWidth:10,text:n[r],backing:e,font:null!=P.font?P.font:null,color:l,align:"center",valign:"center",style:!1})).pos(0,0,So.LEFT,So.TOP,W).cache(),t.x=t.x+r*(te+5),ae.push(t);o=R.localToLocal(0,0,S),W.x=o.x,W.y=o.y+R.height+15,W.on("click",function(e){0==ae.indexOf(e.target)?0<ie&&ie--:1==ae.indexOf(e.target)?ie<R.text.length&&ie++:ge();de()}),S.stage&&S.stage.update()}function ge(){if(!W)return S;W.removeAllEventListeners(),S.removeChild(W),W=null}function pe(e){var t,o,n,r;R&&("del"===e?(R&&(R.text=[R.text.slice(0,ie-1),R.text.slice(ie)].join("")),ie--,me()):(ne===oe.shift&&(e=e.toUpperCase()),o=R.text,(n=R.clone().removeFrom()).text=e,t=n.label.getMeasuredWidth(),R.widthArray?R.widthArray.splice(ie,0,t):R.widthArray=[R.breedte],ie<R.text.length?R.text=[R.text.slice(0,ie),e,R.text.slice(ie)].join(""):R.text+=e,R&&R.label.getBounds().width<I?(ie++,de()):R.text=o),ne!==oe.shift||re||(S.removeChild(Y),se(),ne=oe.def),de(),(r=new createjs.Event("keydown")).letter=e,S.dispatchEvent(r),S.stage&&S.stage.update())}function fe(e){if(S.stage){var t,o=0,n=!1;(R=e.target).widthArrayCheck||me(),I=R.label.lineWidth?R.label.lineWidth:1e4,(t=R.globalToLocal(e.stageX/So.scaX,e.stageY/So.scaY)).x-=R.label.x,t.y-=R.label.y;for(var r=0;r<R.widthArray.length;r++)if(o+=R.widthArray[r],t.x<o-R.widthArray[r]/2+R.label.getBounds().x){ie=r,n=!0;break}n||(ie=R.text.length),de(),p&&!W&&0<R.text.length&&he(),W&&R&&(0<R.text.length?(t=R.localToLocal(0,0,S),W.x=t.x,W.y=t.y+R.height+15):ge())}}function me(){if(R){var e=new Label("");R.widthArray=[];for(var t=0;t<R.text.length;t++)(e=R.clone().removeFrom()).text=R.text[t],R.widthArray.push(e.label.getMeasuredWidth());e.text=R.text,R.widthArrayCheck=!0,de()}}function ze(e){var t,o=!0;function n(){R&&0<R.text.length?(0<S.selectedIndex&&pe("del"),e?r():S.on("pressup",r)):pe("del")}function r(){o=!1,t&&t.clear(),S.off("pressup",r)}n(),t=So.timeout(300,function e(){(!R||R.text.length<1||0==S.currentIndex)&&(o=!1),o&&(n(),t=t&&So.timeout(200,e,null,"ms")),R&&R.text.length<1&&r()},null,"ms"),S.stage&&S.stage.update()}function ye(){for(var e=0;e<n.length;e++)n[e].clickEvent=n[e].on("click",fe)}function be(){if(1<n.length)for(var e=0;e<n.length;e++)n[e].off("click",n[e].clickEvent)}function ve(){if(!D&&(R=n[0],I=R&&R.label.lineWidth?R.label.lineWidth:1e4,R)){(D=new So.Rectangle(3,R.height-(R.paddingVertical&&R.background?2*R.paddingVertical:0),t,null,null,null,null,null,!1).center(R)).x=0,D.visible=!1,D.animate({obj:{alpha:0},rewind:!0,loop:!0,loopWait:750,time:250,id:"knipperTekst",timeUnit:"ms"});for(var e=0;e<n.length;e++)n[e].widthArray=[0];me()}}function we(){So.stopAnimate("knipperTekst"),R&&R.removeChild(D),R=D=null}!function(){(H=new So.Shape({style:!1})).graphics.f(m).p("AhIFoIAAjYIixAAID5n3ID6H3IixAAIAADYgAjHBxICeAAIAADYIBTAAIAAjYICeAAIjImSg"),H.setBounds(-25.5,-36,51,72),F=new So.Container({style:!1});var e=new So.Shape({style:!1});e.graphics.f(m).p("ACgC+IigigIifCgQgGAGgJAAQgJAAgGgGQgGgGgBgJQABgJAGgGICgigIigifQgGgGgBgJQABgJAGgGQAGgGAJAAQAIAAAHAGICfCgICgigQAGgGAJAAQAJAAAGAGQAGAGABAJQgBAJgGAGIigCfICgCgQAGAGABAJQgBAJgGAGQgGAGgJAAQgJAAgGgGg"),e.setTransform(82.6,32),e.addTo(F);var t=new So.Shape({style:!1});t.graphics.f(m).s().p("AkhFAQgcAAgUgUIkHj6QgVgUAAgeQAAgdAVgVIEHj6QAUgTAcAAINKAAQAdAAAUAUQAUAUAAAdIAAH1QAAAdgUATQgUAVgdAAgAk0kOIkGD8QgIAHAAALQAAALAIAIIEGD7QAIAHALAAINKAAQALAAAIgIQAHgHAAgLIAAn1QAAgLgHgIQgIgIgLAAItKAAQgLAAgIAHg"),t.setTransform(62.2,32),t.addTo(F),F.setBounds(0,0,125,64),(V=new So.Container({style:!1})).setBounds(0,0,147,86);for(var o,n=[{p:"Ai+heIF9AAIi/C9g",transform:[73.4,76]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.4,43.2]},{p:"AnNAzIAAhlIObAAIAABlg",transform:[73,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.8,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.2,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.5,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.8,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[87.1,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.4,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.7,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.6,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.3,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.6,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[86.9,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.2,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.5,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[45.8,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.1,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.4,15.8]},{p:"AphEnQgzAAgkgkQglglAAgzIAAlVQAAgzAlglQAkgkAzAAITDAAQAzAAAkAkQAlAlAAAzIAAFVQAAAzglAlQgkAkgzAAgAqjjtQgcAcAAAnIAAFVQAAAnAcAbQAbAcAnAAITDAAQAnAAAcgcQAbgbAAgnIAAlVQAAgngbgcQgcgcgnAAIzDAAQgnAAgbAcg",transform:[73.4,29.5]}],r=0;r<n.length;r++)(o=new So.Shape({style:!1})).graphics.f(m).s().p(n[r].p),o.setTransform(n[r].transform[0],n[r].transform[1]),o.addTo(V)}(),se(ne),s&&function(){N=new So.Rectangle(1.5*te+2.5+2.5,te,f,y,b,v,null,null,!1).addTo(S,0).cur();for(var e=0;e<4;e++)new So.Rectangle(.4*N.width,4,m,null,null,null,null,null,!1).centerReg(N).alp(.2).y-=15*e-22;N.x=8.5*te+40,N.y=-te-5,N.na="drag"}(),this.on("mousedown",function(e){E=S.stage,_&&S.removeChild(_);W&&ae.indexOf(e.target)<0&&ge();zot(e.target.na)||(s&&e.target===N?(S.tickerMouseEvent=E.on("stagemousemove",function(e){S.mouseYAmount=e.stageY}),So.Ticker.add(ce),S.on("pressup",ue),G=e.stageY-S.localToGlobal(0,0).y):zot(w)||e.target.na!==w?"shift"===e.target.na?le():"?123"===e.target.toggle?(S.removeChild(Y),se(oe.number1)):"ABC"===e.target.toggle?(S.removeChild(Y),ne=oe.def,se(),re&&le(!0)):"1/2"===e.target.toggle?(S.removeChild(Y),se(oe.number2)):"2/2"===e.target.toggle?(S.removeChild(Y),se(oe.number1)):"away"===e.target.na?(S.hide(),S.dispatchEvent("close")):"e"===e.target.na||"u"===e.target.na||"i"===e.target.na||"o"===e.target.na||"a"===e.target.na||"n"===e.target.na?function(t){var a,l,s=!1,c=!1;switch(t){case"e":a=Q;break;case"u":a=U;break;case"i":a=K;break;case"o":a=Z;break;case"a":a=J;break;case"n":a=$}l=So.timeout(function(){var e,t,o,n,r=0;if(l.clear(),!s){c=!0,(_=new So.Container(1e3,te,null,null,!1).addTo(S,0)).y=-te-5;for(var i=0;i<a.length;i++)n=ne===oe.shift?a[i].toUpperCase():a[i],e=new So.Label({lineWidth:10,lineHeight:25,text:n,font:null!=P.font?P.font:null,color:m,align:"center",style:!1}),t=new So.Rectangle(te,te,f,y,b,v,null,null,!1).addTo(_),o=new So.Rectangle(te,te,"white",null,null,v,null,null,!1).alp(.2),t.addChild(o),e.center(t),t.na=a[i],t.x=r,r+=te+5;S.stage&&S.stage.update()}},500,null,"ms");var o=S.on("pressup",function(e){s=!0,S.off("pressup",o),c||pe(t)})}(e.target.na):"return"===e.target.na?pe("\n"):"backspace"===e.target.na?ze():""===e.target.na?pe(" "):pe(e.target.na):S.dispatchEvent("special"),E.update())}),S.addChar=function(e){!zot(e)&&e.match(/^.$/)&&pe(e)},S.removeChar=function(){ze(!0)},ye(),ve(),Object.defineProperty(this,"selectedLabel",{get:function(){return R},set:function(e){fe({target:e}),S.hidePlace()}}),Object.defineProperty(this,"selectedIndex",{get:function(){return ie},set:function(e){ie=e,de()}}),this.show=function(e){return S.addTo(h),zot(e)||fe({target:n[e]}),D&&(D.visible=!0),S.toggled=!0,S},this.hide=function(){return S.removeFrom(h),D&&(D.visible=!1),E.update(),S.toggled=!1,S},this.toggle=function(e){return!0!==e&&(!1===e||S.parent)?S.hide():S.show(),S},this.showPlace=function(){return he(),S},this.hidePlace=function(){return ge(),S},this.addLabels=function(e){Array.isArray(e)||(e=[e]);for(var t=e.length-1;0<=t;t--){0<=n.indexOf(e[t])||"Label"!=e[t].type?e.splice(t,1):e[t].widthArray=[0]}return be(),n=n.concat(e),ye(),ve(),D&&(D.visible=!0),S},this.removeLabels=function(e){Array.isArray(e)||(e=[e]),be();for(var t=0;t<e.length;t++){var o=n.indexOf(e[t]);0<=o&&n.splice(o,1)}return ye(),0==n.length?R&&we():R&&-1==n.indexOf(R)&&(we(),ve()),S};var Ce=new So.Rectangle(this.width,this.height,So.clear,null,null,null,null,null,!1).addTo(this).expand().bot();Ce.on("mousedown",function(){}),Ce.on("click",function(){}),this.resize=function(){var e;return S.scaleTo(E,100-2*o/E.width*100,50-2*o/E.height*100),S.y=E.height-S.height-o,S.x=E.width/2-S.width/2,R&&W&&(e=R.localToLocal(0,0,S),W.x=e.x,W.y=e.y+R.height+15),S.stage&&S.stage.update(),S},this.resize(),S.selectedLabel&&(S.selectedIndex=S.selectedLabel.text.length),x&&(this.keydownEvent=function(e){var t;S.stage&&(zot(t=S)||(35==e.keyCode&&(t.selectedIndex=t.selectedLabel.text.length),36==e.keyCode&&(t.selectedIndex=0),37==e.keyCode&&(t.selectedIndex=t.selectedIndex-1),39==e.keyCode&&(t.selectedIndex=t.selectedIndex+1),46==e.keyCode&&t.selectedIndex<t.selectedLabel.text.length&&(t.selectedIndex=t.selectedIndex+1,t.removeChar()),8==e.keyCode&&(e.preventDefault(),t.removeChar()),t.addChar(e.key),S.stage&&S.stage.update()))},window.addEventListener("keydown",this.keydownEvent)),!1!==k&&So.styleTransforms(this,P),this.clone=function(){var e=new So.Keyboard(n,f,m,r,i,a,t,z,o,v,s,c,u,d,h,g,p,w,C,x,k,this.group,T);return S.cloneProps(e)},this.dispose=function(e,t,o){Ce.removeAllEventListeners(),Ce=null,S.keydownEvent&&window.removeEventListener("keydown",S.keydownEvent);for(var n=0;n<S.labels.length;n++)S.labels[n].removeAllEventListeners();return zog(So.zimObjectIDs),S.labels=R=null,E&&E.off("pressmousemove",S.tickerMouseEvent),o||S.zimContainer_dispose(!0),!0}},So.extend(So.Keyboard,So.Container,["clone","dispose"],"zimContainer",!1),So.Organizer=function(e,t,r,o,i,a,l,s,n,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A){var P;if(P=zob(So.Organizer,arguments,"width, list, useAdd, useRemove, usePosition, autoAdd, autoRemove, autoPosition, addForward, removeForward, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, spacing, corner, keyEnabled, gradient, gloss, backdropColor, style, group, inherit",this))return P;z_d("67.3"),this.group=T;var S,B,I,E,O,M,j,L,Y,_=!1===k?{}:So.getStyle("Organizer",this.group,A);zot(e)&&(e=null!=_.width?_.width:t&&t.vertical?t.width:300),zot(r)&&(r=null==_.useAdd||_.useAdd),zot(o)&&(o=null==_.useRemove||_.useRemove),zot(i)&&(i=null==_.usePosition||_.usePosition),zot(a)&&(a=null!=_.autoAdd?_.autoAdd:r),zot(l)&&(l=null!=_.autoRemove?_.autoRemove:o),zot(s)&&(s=null!=_.autoPosition?_.autoPosition:i),zot(n)&&(n=null==_.addForward||_.addForward),zot(c)&&(c=null==_.removeForward||_.removeForward),zot(u)&&(u=null!=_.backgroundColor?_.backgroundColor:"#777"),zot(d)&&(d=null!=_.rollBackgroundColor?_.rollBackgroundColor:"#555"),zot(h)&&(h=null!=_.selectedBackgroundColor?_.selectedBackgroundColor:"#333"),zot(p)&&(p=null!=_.color?_.color:"white"),zot(f)&&(f=null!=_.rollColor?_.rollColor:p),zot(m)&&(m=null!=_.selectedColor?_.selectedColor:p),zot(z)&&(z=null!=_.selectedRollColor?_.selectedRollColor:p),zot(y)&&(y=null!=_.spacing?_.spacing:1),zot(b)&&(b=null!=_.corner?_.corner:0),zot(w)&&(w=null!=_.gradient?_.gradient:.2),zot(C)&&(C=null!=_.gloss?_.gloss:null),zot(x)&&(x=null!=_.backdropColor?_.backdropColor:null),Array.isArray(b)||(b=[b,b,b,b]),(r||i||o)&&(B={width:S=(e+y)/((r?1:0)+(i?4:0)+(o?1:0)),height:S,label:"",shadowColor:-1,gradient:w,corner:b,backgroundColor:u,rollBackgroundColor:d},I=[],(E=new So.Shape).graphics.f(p).p("AAAA4Ih6B8Ig5g4IB8h8Ih7h6IA4g5IB6B8IB7h8IA5A5Ih8B6IB8B7Ig5A5g"),r&&I.push(new So.Button({icon:E.sca(.55).rot(-45).reg(1),inherit:B})),i&&((O=new So.Shape).graphics.f(p).p("AiJieIETCeIkTCfg"),I.push(new So.Button({icon:O.sca(.6).rot(t&&!t.vertical?180:-90).reg(-2),inherit:B})),I.push(new So.Button({icon:O.clone().sca(.6).rot(t&&!t.vertical?0:90).reg(-2),inherit:B})),(M=new So.Shape).graphics.f(p).p("AiFCLIAAkVIBXAAIAAEVgAgiAAICoiHIAAEQg"),I.push(new So.Button({icon:M.sca(.62).rot(t&&!t.vertical?0:90).reg(0),inherit:B})),I.push(new So.Button({icon:M.clone().sca(.62).rot(t&&!t.vertical?180:-90).reg(0),inherit:B}))),o&&I.push(new So.Button({icon:E.clone().rot(0).sca(.55),inherit:B})),0==I.length&&(I=[""]),this.zimTabs_constructor(e,S,I,u,d,h,g,p,f,m,z,!1,y,!0,!1,b,null,!0,w,C,null,null,null,null,null,null,null,null,null,null,x),(j=this).list=t,j.type="Organizer",L=!(j.setButtons=function(){var e;i&&(I[0+(e=r?1:0)]&&(I[0+e].icon.rotation=j.list&&!j.list.vertical?180:-90),I[1+e]&&(I[1+e].icon.rotation=j.list&&!j.list.vertical?0:90),I[2+e]&&(I[2+e].icon.rotation=j.list&&!j.list.vertical?0:90),I[3+e]&&(I[3+e].icon.rotation=j.list&&!j.list.vertical?180:-90))}),Y=t,j.change(function(e){(!L&&j.list||j.list&&j.list!=Y)&&(j.list!=Y&&Y&&Y.noChange(),j.list.change(function(e){j.orgItem=j.list.selected,j.orgIndex=j.list.selectedIndex}),L=!0,Y=j.list);var t=e.target.selectedIndex;r||t++,i||r&&!(0<t)||(t=5);var o,n=zot(j.list.selectedIndex)||j.list.selectedIndex<0;switch(n&&(j.currentValue=null),j.lastIndex=j.list.selectedIndex,t){case 0:a&&(o=Math.max(0,j.list.selectedIndex),j.add(o)),j.orgType="add";break;case 1:if(n)break;s&&(o=j.list.selectedIndex,j.up(o)),j.orgType="up";break;case 2:if(n)break;s&&(o=j.list.selectedIndex,j.down(o)),j.orgType="down";break;case 3:if(n)break;s&&(o=j.list.selectedIndex,j.toTop(o)),j.orgType="top";break;case 4:if(n)break;s&&(o=j.list.selectedIndex,j.toBottom(o)),j.orgType="bottom";break;case 5:if(n)break;l&&(o=j.list.selectedIndex,j.remove(o)),j.orgType="remove"}}),this.add=function(e,t,o){return zot(e)&&(e=j.lastIndex),zot(t)&&(t=""),e=n?Math.min(j.list.length,Math.max(0,j.list.selectedIndex)+1):Math.max(0,j.list.selectedIndex),j.list.addAt(t,e,o),j.list.selectedIndexPlusPosition=e,j.orgItem=j.list.selected,j.orgIndex=j.list.selectedIndex,j},this.up=function(e){zot(e)&&(e=j.lastIndex);var t=j.list.items[e];return zot(t)||(j.list.removeAt(1,e),j.list.addAt(t,e-1),j.list.selectedIndexPlusPosition=Math.max(0,e-1),j.orgItem=j.list.selected,j.orgIndex=j.list.selectedIndex),j},this.down=function(e){zot(e)&&(e=j.lastIndex);var t=j.list.items[e];return zot(t)||(j.list.removeAt(1,e),j.list.addAt(t,e+1),j.list.selectedIndexPlusPosition=Math.min(j.list.length-1,e+1),j.orgItem=j.list.selected,j.orgIndex=j.list.selectedIndex),j},this.toTop=function(e){zot(e)&&(e=j.lastIndex);var t=j.list.items[e];return zot(t)||(j.list.removeAt(1,e),j.list.addAt(t,0),j.list.first(),j.orgItem=j.list.selected,j.orgIndex=j.list.selectedIndex),j},this.toBottom=function(e){zot(e)&&(e=j.lastIndex);var t=j.list.items[e];if(!zot(t))return j.list.removeAt(1,e),j.list.addAt(t,j.list.length),j.list.last(),j.orgItem=j.list.selected,j.orgIndex=j.list.selectedIndex,j},!(this.remove=function(e){if(zot(e)){if(!(0<=j.list.selectedIndex))return j;e=j.list.selectedIndex}var t=e==j.list.selectedIndex;return j.removedItem=j.list.items[e],j.list.removeAt(1,e),t?c||(e=Math.max(0,e-1)):e=j.list.selectedIndex,j.list.selectedIndexPlusPosition=Math.min(j.list.length-1,e),j.orgItem=j.list.selected,j.orgIndex=j.list.selectedIndex,j})!==k&&So.styleTransforms(this,_),this.clone=function(){return j.cloneProps(new So.Organizer(e,t,r,o,i,a,l,s,n,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,j.group,A))},this.dispose=function(e,t,o){return I=null,o||j.zimTabs_dispose(!0),!0})},So.extend(So.Organizer,So.Tabs,["clone","dispose"],"zimTabs",!1),So.Scrambler=function(l,r,i,e,t,o,n,a,s,c,u,d,h,g){var p;if(p=zob(So.Scrambler,arguments,"tile, keys, keyProperty, scramble, time, wait, num, shadowColor, shadowBlur, swap, swapLock, style, group, inherit",this))return p;z_d("67.35"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Scrambler",this.group=h;var f,m,z,y,b,v,w,C=!1===d?{}:So.getStyle(this.type,this.group,g);function x(e){var r=e.target;r.stopAnimate();var t=r.boundsToGlobal(),i=l.hitTestGrid(l.width,l.height,l.cols,l.rows,t.x+t.width/2,t.y+t.height/2,null,null,null,null,null,"array");zot(i)||So.loop(l,function(e){var t,o,n;e!=r&&!1!==e.paused&&(t=e.boundsToGlobal(),zot(o=l.hitTestGrid(l.width,l.height,l.cols,l.rows,t.x+t.width/2,t.y+t.height/2,null,null,null,null,null,"array"))||(i[2]==o[2]&&(e.x>=r.x&&e.x<=r.x+z/2||e.x<=r.x&&e.x>=r.x-z/2)&&(n=e.x,e.mouseEnabled=!1,e.top().ord(-1),e.animate({props:{x:b},time:.2,id:"zimScrambler",timeUnit:"seconds",call:function(){e.mouseEnabled=!0,c&&!f.complete&&f.test()&&(f.complete=!0,f.dispatchEvent("complete"))}}),b=n),i[1]==o[1]&&(e.y>=r.y&&e.y<=r.y+y/2||e.y<=r.y&&e.y>=r.y-y/2)&&(n=e.y,e.mouseEnabled=!1,e.top().ord(-1),e.animate({props:{y:v},time:.201,override:!1,id:"zimScrambler",timeUnit:"seconds",call:function(){e.mouseEnabled=!0,c&&!f.complete&&f.test()&&(f.complete=!0,f.dispatchEvent("complete"))}}),v=n)))},!0)}function k(){f.upEvent&&l.off("pressup",f.upEvent),f.moveEvent&&l.off("pressmove",f.moveEvent),l.noDrag(),0<o+t&&f.noMouse()}function T(r,i,a){So.stopAnimate("zimScrambler"),So.loop(l.items,function(e,t,o){var n=f.starts[r[t]];i?e.animate({props:{x:n.x,y:n.y},time:i,ease:a?"quadInOut":"quadOut",wait:a,timeUnit:"seconds",id:"zimScrambler"}):(e.loc(n),f.stage?e.drag({boundary:l}):t==o-1&&f.added(function(){l.drag({boundary:l})}))})}zot(l)&&(l=null!=C.tile?C.tile:l),zot(r)&&(r=null!=C.keys?C.keys:null),zot(i)&&(i=null!=C.keyProperty?C.keyProperty:null),zot(e)&&(e=null==C.scramble||C.scramble),zot(t)&&(t=null!=C.time?C.time:0),zot(o)&&(o=null!=C.wait?C.wait:0),zot(n)&&(n=null!=C.num?C.num:1),zot(a)&&(a=null!=C.shadowColor?C.shadowColor:"rgba(0,0,0,.3)"),zot(s)&&(s=null!=C.shadowBlur?C.shadowBlur:5),zot(c)&&(c=null!=C.swap&&C.swap),zot(u)&&(u=null!=C.swapLock&&C.swapLock),u&&(c=!0),zot(l)||(l.addTo(this),(f=this).complete=!0,m=Bo(t),Bo(o),z=l.width/l.cols,y=l.height/l.rows,l.on("mousedown",function(e){if(u){var i=l.current;if(f.testItem(e.target,i.indexOf(e.target)))return e.target.noMouse(),void e.target.noDrag()}var t;b=e.target.x,v=e.target.y,-1!=a&&0<s&&(t=new createjs.Shadow(a,3,3,s),e.target.backing?e.target.backing.shadow=t:e.target.shadow=t),f.upEvent&&l.off("pressup",f.upEvent),f.upEvent=l.on("pressup",function(e){var t,o,n,r=!0;u&&(t=e.target.boundsToGlobal(),r=!zot(o=l.hitTestGrid(l.width,l.height,l.cols,l.rows,t.x+t.width/2,t.y+t.height/2))&&(n=i[o],e.target!=n&&!f.testItem(n,o))),c&&r&&x(e),e.target.mouseEnabled=!1,e.target.animate({props:{x:b,y:v},time:.1,id:"zimScrambler",timeUnit:"seconds",call:function(){!f.complete&&f.test()&&(f.complete=!0,f.dispatchEvent("complete")),-1!=a&&0<s&&(e.target.backing?e.target.backing.shadow=null:e.target.shadow=null),e.target.mouseEnabled=!0}})},null,!0),c||(f.moveEvent&&l.off("pressmove",f.moveEvent),f.moveEvent=l.on("pressmove",function(e){x(e)}))}),this.test=function(){var e=l.current;return So.loop(e,function(e,t){return!zot(e)&&(!!f.testItem(e,t)&&void 0)})},this.testItem=function(e,t){if(!zot(e)){if(zot(t)&&(t=l.current.indexOf(e)),r){if((zot(i)?e.key:e[i])!=r[t])return!1}else if(l.items[t]!=e)return!1;return!0}},this.starts=[],this.order=[],So.loop(l.rows*l.cols,function(e){f.order.push(e)}),w=f.order.slice(),l.loop(function(e){f.starts.push({x:e.x,y:e.y})}),this.inactive=!1,this.scramble=function(o,e,n){function t(){for(var e=!0,t=0;e&&t<50;)t++,So.shuffle(f.order),e=So.loop(f.order,function(e,t){var o=l.getChildAt(e);if(r){if((zot(i)?o.key:o[i])!=r[t])return!1}else if(l.items[t]!=o)return!1});T(f.order,o/n),So.timeout(o,function(){f.dispatchEvent("scrambled")})}zot(e)&&(e=0),zot(o)&&(o=0),!zot(n)&&0!=o||(n=1),k(),So.timeout(e,function(){0<o?So.interval(o/n,t,n,!0):t()}),setTimeout(function(){f.complete=!1,l.loop(function(e){e.mouse()}),f.mouse(),l.drag({boundary:l})},"s"==m?1e3*(e+o):e+o)},e?f.scramble(t,o,n):f.added(function(){l.drag({boundary:l})}),this.solve=function(e,t,o){zot(o)&&(o=!0),zot(t)&&(t=0),zot(e)&&(e=0),t+e==0&&o&&f.noMouse(),setTimeout(function(){f.order=w.slice(),k(),T(f.order,e,0)},"s"==m?1e3*t:t),o||setTimeout(function(){f.mouse(),l.drag({boundary:l})},"s"==m?1e3*(t+e):t+e)},this._enabled=!0,Object.defineProperty(f,"enabled",{get:function(){return f._enabled},set:function(e){qe(f,e),So.OPTIMIZE||!zns&&OPTIMIZE||!f.stage||f.stage.update()}}),!(this.dispose=function(e,t,o){return l.removeAllEventListeners(),o||(f.zimContainer_dispose(!0),f.stage&&f.stage.update()),!0})!==d&&So.styleTransforms(this,C),this.clone=function(){return f.cloneProps(new So.Scrambler(l.clone(),r,i,e,t,o,n,a,s,c,u,d,f.group,g))})},So.extend(So.Scrambler,So.Container,["clone","dispose"],"zimContainer",!1),So.Connectors=function(e,t,o,l,s,c,n,u,d,h,g,p,f,r,m,z,y,b,v,w,C,i,a,x,k,T,A,P,S,B,I,E){var O;if(O=zob(So.Connectors,arguments,"width, height, points, node, line, linear, linearWrap, linearOrder, num, snapH, snapV, dropType, deleteNode, dblclick, fullMove, min, max, boundary, expand, nodeRollColor, nodeRollBorderColor, nodeSelectedColor, nodeSelectedBorderColor, baseColor, baseBorderColor, baseRollover, rootLock, grandChildren, dblclickTime, style, group, inherit",this))return O;z_d("67.39"),this.group=I;var M=!1===B?{}:So.getStyle("Connectors",this.group,E);zot(e)&&(e=null!=M.width?M.width:null),zot(t)&&(t=null!=M.height?M.height:null),this.zimContainer_constructor(null,null,null,null,!1),this.type="Connectors",zot(o)&&(o=null!=M.points?M.points:[[0,0],[100,0],[100,100],[0,100]]),zot(l)&&(l=null!=M.node?M.node:new So.Circle(10,So.grey,So.grey)),l.removeFrom(),l.color!=So.clear||l.hitArea||l.expand(0),zot(s)&&(s=null!=M.line?M.line:new So.Line({length:10,thickness:3,color:So.tin,strokeObj:{caps:"round"}})),zot(d)&&(d=null!=M.num?M.num:10),zot(c)&&(c=null!=M.linear&&M.linear),zot(n)&&(n=null==M.linearWrap||M.linearWrap),zot(w)&&(w=null!=M.nodeRollColor?M.nodeRollColor:l.color.match("rgb")?l.color:l.color.lighten(.2)),zot(C)&&(C=null!=M.nodeRollBorderColor?M.nodeRollBorderColor:l.borderColor),zot(i)&&(i=null!=M.nodeSelectedColor?M.nodeSelectedColor:So.white),zot(a)&&(a=null!=M.nodeSelectedBorderColor?M.nodeSelectedBorderColor:l.borderColor),zot(x)&&(x=null!=M.baseColor?M.baseColor:l.color),zot(k)&&(k=null!=M.baseBorderColor?M.baseBorderColor:l.borderColor),zot(T)&&(T=null!=M.baseRollover&&M.baseRollover),zot(z)&&(z=null!=M.min?M.min:l.radius?2*l.radius:Math.min(l.width,l.height)),zot(y)&&(y=null!=M.max?M.max:null),zot(v)&&(v=null!=M.expand?M.expand:So.mobile()?10:0),zot(p)&&(p=null!=M.dropType?M.dropType:"any"),zot(f)&&(f=null==M.deleteNode||M.deleteNode),zot(r)&&(r=null==M.dblclick||M.dblclick),zot(m)&&(m=null==M.fullMove||M.fullMove),zot(S)&&(S=null!=M.dblclickTime?M.dblclickTime:.5);var j,L,Y,_,D,X,R,W,H,F,V=Bo(S);function N(e,t,r,o){if(e.addChild){p="on",P=!(A=!0),(r=e).connectorMoveEvent||(j.bases||(j.bases=[]),j.bases.push(r),r.connectorMoveEvent=r.on("pressmove",function(){r.positionConnectors(r,!0,!0)}),r.connectorUpEvent=r.on("pressup",function(){r.positionConnectors(r,!0,!0)}),T&&(r.connectorOverEvent=r.on("mouseover",function(){ee(r)}),r.connectorOutEvent=r.on("mouseout",function(){te(r)})),r.positionConnectors=function(o,n,r){So.loop(o.connectors,function(e){var t=o.parent.localToLocal(o.x-o.baseStart.x+e.nodeStart.x,o.y-o.baseStart.y+e.nodeStart.y,e.parent);e.x=t.x,e.y=t.y,le(e,n,r)}),o.stage&&o.stage.update()},r.setConnectorColors=function(t,o,e,n){return zot(t)||(r.connectorColor=t),zot(o)||(r.connectorBorderColor=o),zot(e)||(r.connectorRollColor=e),zot(n)||(r.connectorRollBorderColor=n),So.loop(r.connectors,function(e){zot(t)||(e.color=t),zot(o)||(e.borderColor=o)}),r},r.setConnectorColors(x,k,w,C));var i=r.getBounds();s.endHead,Array.isArray(t)||(t=[t,t]);var a=[];return 2==t.length&&(t=[t[0],t[1],t[0],t[1]]),s.lineOrientation!=So.HORIZONTAL&&"auto"!=s.lineOrientation||So.loop([t[0],t[1]],function(e,n){var t,o;-1!=e&&-2!=e||(t=r.localToLocal(0==n?i.x:i.x+i.width,i.y,j),a.push([t.x,t.y,So.HORIZONTAL])),-1!=e&&-3!=e||(o=r.localToLocal(0==n?i.x:i.x+i.width,i.y+i.height,j),a.push([o.x,o.y,So.HORIZONTAL])),0<e&&So.loop(e,function(e,t){var o=r.localToLocal(0==n?i.x:i.x+i.width,i.y+i.height*(e+1)/(t+1),j);a.push([o.x,o.y,So.HORIZONTAL])})}),s.orientation!=So.VERTICAL&&"auto"!=s.lineOrientation||So.loop([t[2],t[3]],function(e,n){var t,o;-1!=e&&-2!=e||(t=r.localToLocal(i.x,0==n?i.y:i.y+i.height,j),a.push([t.x,t.y,So.VERTICAL])),-1!=e&&-3!=e||(o=r.localToLocal(i.x+i.width,0==n?i.y:i.y+i.height,j),a.push([o.x,o.y,So.VERTICAL])),0<e&&So.loop(e,function(e,t){var o=r.localToLocal(i.x+i.width*(e+1)/(t+1),0==n?i.y:i.y+i.height,j);a.push([o.x,o.y,So.VERTICAL])})}),r.connectors=[],r.baseStart=new So.Point(r.x,r.y),So.loop(a,function(e){var t=N(e[0],e[1],r,e[2]);oe(r,t)}),j}var n=l.clone().loc(e,t,D).drag({boundary:b}).expand(v);return n.orientation=o,n.on("mouseover",Q),n.on("mouseout",U),n.on("mousedown",K),n.on("pressmove",Z),n.on("pressup",J),f&&n.hold(q),n.creations=[],n}function G(){So.loop(o,function(e){N(e[0],e[1])}),c&&D.loop(function(e,t,o){0==t?(e.before=n?D.getChildAt(o-1):null,e.after=D.getChildAt(t+1)):t==o-1?(e.after=n?D.getChildAt(0):null,e.before=D.getChildAt(t-1)):(e.before=D.getChildAt(t-1),e.after=D.getChildAt(t+1)),u&&0<t&&e.noMouse()})}function q(e){var t=e.target.stage,o=e.target;j.bases||A&&!o.creator.creator||(o.adding?se(o.creator):se(o),t&&t.update())}function Q(e){var t=e.target;t.selected||(t.color=t.base?t.base.connectorRollColor:w,t.borderColor=t.base?t.base.connectorRollBorderColor:C,j.stage&&j.stage.update())}function U(e){var t=e.target;t.selected||(t.color=t.base?t.base.connectorColor:L,t.borderColor=t.base?t.base.connectorBorderColor:Y,j.stage&&j.stage.update())}function K(e){var t,o,n=e.target;c||A&&!n.creator||!r||(0==H&&(F=setTimeout(function(){var t;H=0,R&&(t=j.stage?j.stage.frame:zdf,D.loop(function(e){if(e.hitTestPoint(t.mouseX,t.mouseY)&&e.selected)return!1})&&ae())},S)),H++),n.startX=n.x,n.startY=n.y,!c&&0<R.length&&So.loop(R,function(e){e.startX=e.x,e.startY=e.y}),n.creations.length>=d||n.selected||n.creator&&!P||(n.adding=!0,(t=N(n.x,n.y).bot()).creations=n.creations,t.creatorLine=n.creatorLine,t.creator=n.creator,t.orientation=n.orientation,t.startX=n.startX,t.startY=n.startY,n.base&&(t.base=n.base,t.baseStart=n.baseStart,t.nodeStart=n.nodeStart,t.connectors=n.connectors,n.base=n.baseStart=n.nodeStart=n.connectors=null,t.base.connectors&&t.base.connectors.splice(t.base.connectors.indexOf(n),1,t),t.color=t.base.connectorColor,t.borderColor=t.base.connectorBorderColor),t.before=n.before,t.after=n.after,t.before&&(t.before.after=t),t.after&&(t.after.before=t),!t.creator||-1!=(o=t.creator.creations.indexOf(n))&&t.creator.creations.splice(o,1,t),So.loop(t.creations,function(e){e.creator=t}),n.creator=t,n.creatorLine=s.clone().setPoints(n.x,n.y,n.x,n.y).addTo(_).alp(0),n.creatorLine.lineOrientation=n.orientation,(n.creatorLine.node=n).creatorLine.creatorNode=t,n.creations=[],t.creations.push(n))}function Z(e){var t=e.target;t.creatorLine&&t.creatorLine.alp(1),!c&&0<R.length&&-1==R.indexOf(t)&&ae(),le(t,!1,!0),j.bases&&So.loop(j.bases,function(e){t.creator&&t.creator.base==e||(!e.connectorsOn&&t.hitTestBounds(e)&&ee(e),e.connectorsOn&&!t.hitTestBounds(e)&&te(e))}),j.stage.update()}function J(e){var n=e.target;j.bases&&So.loop(j.bases,function(e){e!=n.base&&e.connectorsOn&&te(e)});var t,o=!1;if(!c&&1<H&&(clearTimeout(F),t=n.adding?n.creator:n,n.adding&&se(t.creations[t.creations.length-1]),t.selected||re(t,!(j.stage?j.stage.frame:zdf).ctrlKey),o=!(H=0)),c||j.base||(h&&(n.x=Math.round(n.x/h)*h),g&&(n.y=Math.round(n.y/g)*g)),z&&So.dist(n.x,n.y,n.startX,n.startY)<z||y&&So.dist(n.x,n.y,n.startX,n.startY)>y)return n.adding?se(n):(n.loc(n.startX,n.startY),o||le(n)),j.stage.update(),void j.dispatchEvent("noconnection");var r=!1,i=!1;if(c){var a=n.creator;if(j.connectionStart=a,j.connectionEnd=n,a.before&&n.hitTestCircle(a.before)&&!u)n.loc(a.before).removeFrom(),a.before.after=null,a.before.before||a.before.noMouse(),a.before=null,a.after||a.noMouse(),i=!0,r=ie();else if(a.after&&n.hitTestCircle(a.after))n.loc(a.after).removeFrom(),a.after.before=null,a.after.after||a.after.noMouse(),u&&a.after.mouse(),a.after=null,a.before||a.noMouse(),u&&a.noMouse(),i=!0,r=ie();else{if(a&&!(0<n.creations.length))return se(n),j.stage.update(),void j.dispatchEvent("noconnection");n.loc(n.startX,n.startY).bot()}}else{if("off"==p){if(!D.loop(function(e){if(n!=e)return n.hitTestCircles(e)?(n.adding?se(n):(n.loc(n.startX,n.startY),le(n)),A&&ne(n),!m&&n.creator&&0<d&&n.creator.creations.length>=d&&n.creator.noMouse(),j.dispatchEvent("connection"),j.stage.update(),!1):void 0}))return void $(n)}else if("on"==p||"single"==p){var l,s=0;if(D.loop(function(e,t,o){if(n!=e&&n.hitTestCircles(e)){if(l=e,j.bases&&(n.orientation!=e.orientation||n.creator&&n.creator.base&&n.creator.base==e.base))return;if("on"==p)return!1;s++,s+=e.creations.length}})&&("single"!=p||1!=s))return void $(n);if(n.loc(l),n.creator&&n.orientation==So.VERTICAL&&Math.round(n.y)==Math.round(n.creator.startY)||n.creator&&n.orientation==So.HORIZONTAL&&Math.round(n.x)==Math.round(n.creator.startX))return;l.base&&l.base.connectors&&oe(l.base,n),r=!0}}!m&&n.creator&&0<d&&n.creator.creations.length>=d&&n.creator.noMouse(),n.adding=!1,le(n,!0,!0),So.loop(R,function(e){e.startX=e.x,e.startY=e.y}),n.startX=n.x,n.startY=n.y,A&&ne(n),i?j.dispatchEvent("connection"):j.dispatchEvent("noconnection"),r&&j.dispatchEvent("complete"),j.stage.update()}function $(e){var t,o;e.adding||!P?se(e):(e.loc(e.startX,e.startY),le(e)),A&&ne(e),e.base&&e.base.connectors&&(t=e.base,o=e,t.connectors.splice(t.connectors.indexOf(o),1),o.nodeStart=null,o.base=null),j.stage.update(),j.dispatchEvent("noconnection")}function ee(t){So.loop(t.connectors,function(e){e.color=t.connectorRollColor,e.borderColor=t.connectorRollBorderColor}),t.connectorsOn=!0,t.stage.update()}function te(t){So.loop(t.connectors,function(e){e.color=t.connectorColor,e.borderColor=t.connectorBorderColor}),t.connectorsOn=!1,t.stage.update()}function oe(e,t){e.connectors.push(t),t.nodeStart=t.parent.localToLocal(t.x,t.y,e.parent),t.nodeStart.x-=e.x-e.baseStart.x,t.nodeStart.y-=e.y-e.baseStart.y,t.base=e}function ne(e){e.creator&&(e.creator.creator?ne(e.creator):e.creator&&e.creator.creations.length>=d?e.creator.noMouse():e.creator.mouse())}function re(e,t){t&&So.loop(e.creations,function(e){re(e,t)}),e.selected=!0,e.color=e.base?e.base.connectorColor:i,e.borderColor=e.base?e.base.connectorBorderColor:a,R.push(e),e.top(),W=W||j.stage.on("stagemousedown",function(e){var t=j.stage?j.stage.frame:zdf;D.loop(function(e){if(e.hitTestPoint(t.mouseX,t.mouseY))return!1})&&ae()})}function ie(){if(D.loop(function(e){if(e.before||e.after)return!1}))return D.loop(function(e){e.noMouse()}),!0}function ae(){So.loop(R,function(e){e.selected=!1,e.color=e.base?e.base.connectorColor:L,e.borderColor=e.base?e.base.connectorBorderColor:Y}),R=[],j.stage.off("stagemousedown",W),W=null,j.stage.update()}function le(t,o,n){var e=0<R.length?R:[t];So.loop(e,function(e){e!=t&&e.loc(e.startX+t.x-t.startX,e.startY+t.y-t.startY),e.creator&&e.creatorLine.setPoints(e.x,e.y,e.creator.x,e.creator.y,o,n),So.loop(e.creations,function(e){e.creatorLine.setPoints(e.x,e.y,e.creator.x,e.creator.y,o,n)})})}function se(e){var t;return So.loop(e.creations,function(e){se(e)},!0),e.creatorLine&&(e.creatorLine.removeFrom(),-1!=(t=e.creator.creations.indexOf(e))&&e.creator.creations.splice(t,1),e.creator.mouseEnabled||A&&!e.creator.creator||e.creator.mouse()),e.removeFrom(),e.removeAllEventListeners(),e=null,j}function ce(e){e.off("pressmove",e.connectorMoveEvent),e.off("pressup",e.connectorUpEvent),e.connectorOverEvent&&e.off("mouseover",e.connectorOverEvent),e.connectorOutEvent&&e.off("mouseout",e.connectorOutEvent),e.connectors=null,e.baseStart=null,e.positionConnectors=e.setConnectorColors=null,e.connectorColor=e.connectorBorderColor=e.connectorRollColor=e.connectorRollBorderColor=null,j.bases.splice(j.bases.indexOf(e),1),j.stage&&j.stage.update()}S*="s"==V?1e3:1,zot(h)&&(h=null!=M.snapH?M.snapH:null),zot(g)&&(g=null!=M.snapV?M.snapV:null),zot(A)&&(A=null!=M.rootLock&&M.rootLock),zot(P)&&(P=null==M.grandChildren||M.grandChildren),c&&o.length<=1?zon&&zogy("ZIM Connector() - linear needs more than one point"):((j=this).node=l,j.line=s,L=l.color,Y=l.borderColor,So.faint,_=j.lines=new So.Container(e,t).addTo(j),D=j.nodes=new So.Container(e,t).addTo(j),"Blob"!=o.type&&"Squiggle"!=o.type||(X=[],So.loop(o.points,function(e){X.push([e[0],e[1]])}),o=X),j.points=o,this.addNode=function(e,t,o){if(!c)return N(e,t)},G(),j.keyEvent=function(e){f&&46==e.keyCode&&(So.loop(R,function(e){e&&e.parent&&se(e)}),j.stage&&j.stage.update())},window.addEventListener("keydown",j.keyEvent),R=[],H=0,this.selectNode=function(e,t){re(e,t)},this.removeNode=function(e){se(e)},this.removeConnectors=function(){So.loop(D,function(e){se(e)},!0),G(),j.stage.update()},this.removeBase=function(e){So.loop(e.connectors,function(e){se(e)}),ce(e)},this.addBase=function(e,t){N(e,t)},Object.defineProperty(this,"selectedList",{get:function(){return R},set:function(e){zon&&zogy("Selectors() - selectedList is read only")}}),!(this.dispose=function(e,t,o){return j.nodes.loop(function(e){e.removeFrom(),e.removeAllEventListeners(),e=null},!0),j.lines.loop(function(e){e.removeFrom(),e=null},!0),window.removeEventListener("keydown",j.keyEvent),j.keyEvent=null,j.bases&&So.loop(j.bases,function(e){ce(e)}),o||(j.zimContainer_dispose(!0),j.stage&&j.stage.update()),!0})!==B&&So.styleTransforms(this,M),this.clone=function(){return j.cloneProps(new So.Collectors(e,t,o,l,s,c,n,u,d,h,g,p,f,r,m,z,y,b,v,w,C,i,a,x,k,T,A,P,S,B,j.group,E))})},So.extend(So.Connectors,So.Container,["clone","dispose"],"zimContainer",!1),So.Marquee=function(e,t,o,i,n,r,a,l,s,c,u,d,h,g,p,f,m){var z;if(z=zob(So.Marquee,arguments,"width, height, items, time, transition, speed, direction, marginLeft, marginRight, marqueeType, borderColor, borderWidth, refresh, mix, style, group, inherit",this))return z;z_d("67.4"),this.group=f;var y=!1===p?{}:So.getStyle("Marquee",this.group,m),b=this;zot(e)&&(e=null!=y.width?y.width:300),zot(t)&&(t=null!=y.height?y.height:100);var v=Bo(i);zot(i)&&(i=null!=y.time?y.time:"s"==v?5:5e3),zot(n)&&(n=null!=y.transition?y.transition:"slide"),zot(u)&&(u=null!=y.borderColor?y.borderColor:"#333"),zot(d)&&(d=null!=y.borderWidth?y.borderWidth:1),u<0||d<0?u=d=null:null!=u&&null==d&&(d=1),zot(l)&&(l=null!=y.marginLeft?y.marginLeft:25),zot(s)&&(s=null!=y.marginRight?y.marginRight:25),zot(r)&&(r=null!=y.speed?y.speed:"s"==v?.5:500),Io(r,v),zot(a)&&(a=null!=y.direction?y.direction:"right"),zot(h)&&(h=null!=y.refresh?y.refresh:"s"==v?1800:18e5),zot(g)&&(g=null==y.mix||y.mix),this.zimContainer_constructor(e+l+s,t,null,null,!1),this.type="Marquee",this.speed=r;var w,C=new So.Rectangle(e-1,t-1,So.clear).addTo(b).mov(l+.5,.5),x=this.content=new So.Container(e,t).loc(l,0,b).setMask(C),k=this.pages=new So.Pages(null,n,r,null,x).addTo(x),T=!1;this.add=function(e,t,o,n,r){zot(r)&&(r=!0),e.scaleTo(x),t&&e.cur().on("click",function(){zgo(t,o)}),k.addPage(e),r&&k.center(),e.marqueeViews=0,e.marquee=b,T||function(){T=!0,b.selectedIndex=0,b.selected=k.pages[b.selectedIndex].page,b.lastSelected=null,b.selected.marqueeOn&&b.selected.marqueeOn();b.interval=So.interval(i,function(){b.go()})}(),n||_(),L&&L.top()},this.remove=function(e){if(b.selected==e){if(1==b.pages.pages.length)return;var t=b.selectedIndex+1;t==b.pages.pages.length&&(t=0),b.pages.go(t,null,null,0),setTimeout(function(){b.pages.removePage(e),e.dispose&&e.dispose(),_()},20)}else b.pages.removePage(e),e.dispose&&e.dispose(),_()},zot(o)||Array.isArray(o)||(o=[o]),o&&0<o.length&&(g&&So.shuffle(o),So.loop(o,function(e){b.add(e,null,null,!0)})),0<h&&(w=So.timeout(h*("s"==v?1e3:1),function(){location.reload()},null,"ms")),b.go=function(o){var e;b.selected.marqueeViews+=1,b.selected.marqueeOff&&b.selected.marqueeOff(),o?(b.selected=o,So.loop(k.pages,function(e,t){e.page!=o||(b.selectedIndex=t)}),b.interval.interval=b.selected.marqueeTime?b.selected.marqueeTime:i,b.interval.pause(Y.toggled,null,!0)):(e=b.selectedIndex+1,b.selectedIndex=e%k.pages.length,b.selected=k.pages[b.selectedIndex].page,b.interval.time=b.selected.marqueeTime?b.selected.marqueeTime:i),b.dispatchEvent("page"),b.selected.marqueeOn&&b.selected.marqueeOn(),k.go(b.selected,a,n,r)},k.on("pagetransitioned",function(){b.dispatchEvent("pagetransitioned"),b.indicator&&(b.indicator.selectedIndex=b.selectedIndex)});var A=!1,P=b.left=new So.Container(l-4,t-4),S=(new So.Shape).sca(.6);S.graphics.f(So.light).mt(0,0).p("AAhCLIAAkVIBXAAIAAEVgAh3CLIAAkVIBXAAIAAEVg");var B=(new So.Shape).sca(.6).reg(-2,0);B.graphics.f(So.light).mt(0,0).p("AiJieIETCeIkTCfg");var I,E,O,M,j,L,Y=b.button=new So.Button({label:"",icon:S,toggleIcon:B,width:45,height:45,corner:0,shadowBlur:0}).scaleTo(P,100).pos(0,0,!1,!0,P);function _(){var e;zot(l)||0==l||(e=4*l/25,P.pos(l-P.width-e,e/2,!1,!0,b),b.indicator&&(b.indicator.dispose(),b.indicator.removeFrom()),I=I||new So.Proportion(8,16,P.width+e,P.width/2+e,-1),b.indicator=new So.Indicator({width:(k.pages.length<=2?k.pages.length:k.pages.length-1)*(P.width-3),height:I.convert(k.pages.length),num:k.pages.length,shadowBlur:-1,interactive:!0,scale:1.2,indicatorType:c}),b.indicator.fit(0,0,t-Y.height,Y.width),b.indicator.rot("down"==a?-90:90).center(P).pos(null,P.width-e/2,null,!0),b.indicator.selectedIndex=b.selectedIndex,b.indicator.on("change",function(){b.go(k.pages[b.indicator.selectedIndex].page)}))}Y.on("click",function(){b.interval&&b.interval.pause(Y.toggled),A=Y.toggled,b.stage.update()}),_(),!zot(s)&&0<s&&void 0!==zdf&&zdf&&(E=4*s/25,O=b.right=new So.Container(45,270),(M=b.icon=zdf.makeIcon(So.grey,So.lighter,So.silver).sca(.5).pos(0,0,!0,!0,O).mov(0,0).cur()).on("mouseover",function(){j.animate({props:{scaleX:1},time:500,ease:"backOut",override:!0,timeUnit:"ms"}),M.stage.update()}),M.on("mouseout",function(){j.animate({props:{scaleX:0},time:300,ease:"backIn",override:!0,timeUnit:"ms"}),M.stage.update()}),M.on("mousedown",function(){zgo("https://zimjs.com/marquee","_blank")}),j=b.label=new So.Label({text:"MARQUEE",color:So.dark,backgroundColor:So.lighter,shiftVertical:1,paddingVertical:5}).rot(-90).pos(0,13,!0,!1,O).reg(-10).sca(0,1).mov(0),O.fit(0,0,s-E,t-E),O.pos(s-O.width-E,E/2,!0,!0,b)),b.stage&&b.stage.update(),this.pause=function(e,t){zot(e)&&(e=!0),e!=A&&(A=e,b.interval.pause(e,t),b.button.toggle(e))},Object.defineProperty(this,"paused",{get:function(){return A},set:function(e){zon&&zogy("Marquee() - paused is read only - use pause()")}}),Object.defineProperty(this,"time",{get:function(){return i},set:function(e){i=e,b.interval.time=i}}),this.load=function(r,e){var t=[];g&&So.shuffle(r),So.loop(r,function(e){Array.isArray(e)?t.push(e[0]):t.push(e)});var o=b.stage?b.stage.frame:zdf;return b.marqueeLoader=o.loadAssets(t,e),b.loadEvent=b.marqueeLoader.on("assetload",function(e){var t,o,n=r[e.asset.id];o=Array.isArray(n)?(t=n[0],n[1]):(t=n,"_self"),b.add(e.asset,t,o),_()}),b},zot(u)||((L=new So.Rectangle(e-1,t-1,So.clear,u,d).loc(C,null,b)).mouseEnabled=!1),!1!==p&&So.styleTransforms(this,y),this.clone=function(){return b.cloneProps(new So.Marquee(e,t,o,i,n,r,a,c,u,d,h,g,p,this.group,m))},this.dispose=function(e,t,o){return w&&w.clear(),b.interval&&b.interval.clear(),b.loadEvent&&b.marqueeLoader.off("assetload",b.loadEvent),k.dispose(),k=null,o||this.zimContainer_dispose(!0),!0}},So.extend(So.Marquee,So.Container,["clone","dispose"],"zimContainer"),So.Loader=function(t,o,n,h,r,i,a,l,s,e,c,u,d,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,I,E,O,M,j){var L;if(L=zob(So.Loader,arguments,"width, height, label, type, backgroundColor, rollBackgroundColor, color, rollColor, borderColor, borderRollColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, dashed, backing, rollBacking, rollPersist, icon, rollIcon, toggle, toggleBacking, rollToggleBacking, toggleIcon, rollToggleIcon, toggleEvent, frame, multiple, accept, style, group, inherit",this))return L;z_d("67.5"),this.group=M;var Y=!1===O?{}:So.getStyle("Loader",this.group,j);if(zot(t)&&(t=null!=Y.width?Y.width:250),zot(o)&&(o=null!=Y.height?Y.height:70),zot(h)&&(h=null!=Y.type?Y.type:"image"),h=h.toLowerCase(),zot(r)&&(r=null!=Y.backgroundColor?Y.backgroundColor:"rgba(0,0,0,.05)"),zot(i)&&(i=null!=Y.rollBackgroundColor?Y.rollBackgroundColor:"rgba(0,0,0,.1)"),zot(a)&&(a=null!=Y.color?Y.color:"rgba(0,0,0,.5)"),zot(l)&&(l=null!=Y.rollColor?Y.rollColor:a),zot(s)&&(s=null!=Y.borderColor?Y.borderColor:"rgba(0,0,0,.3)"),zot(c)&&(c=null!=Y.borderWidth?Y.borderWidth:1),zot(z)&&(z=null==Y.dashed||Y.dashed),zot(u)&&(u=null!=Y.corner?Y.corner:0),zot(I)&&(I=null==Y.multiple||Y.multiple),zot(n)&&(n=null!=Y.label?Y.label:new So.Label({text:"UPLOAD PIC",color:a,rollColor:l,valign:"center",align:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",group:this.group})),zot(B)){if(!zdf)return void(zon&&zog("zim.Loader - please provide a reference to zim Frame"));B=zdf}this.zimButton_constructor(t,o,n,r,i,a,l,s,e,c,u,d,g,p,f,m,z,y,b,v,w,C,x,null,null,null,null,k,T,A,P,S,null,null,null,null,null,null,null,null,null,null,null,null,!1),this.type="Loader";var _=this,D=B.stage;n=_.label;var X=_.tag=document.createElement("input");document.body.appendChild(X),X.setAttribute("type","file"),X.setAttribute("aria-hidden",!0),I&&X.setAttribute("multiple","multiple"),E&&X.setAttribute("accept",E),X.hidden=!0,X.zimDisplay=X.style.display||"inline-block",X.style.cssText="border:thin solid grey; z-index:2; width:"+t+"px; height:"+o+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none; cursor:pointer; opacity: 0; filter: alpha(opacity=0);",this.addEventListener("mousedown",function(){X.click()}),X.addEventListener("change",F);var R=new createjs.DOMElement(X);D.addChild(R),R.alpha=0;var W,H=B.retina&&window.devicePixelRatio||1;function F(e){var i,a,l,s,c,u,d=e.dataTransfer&&e.dataTransfer.files&&0<e.dataTransfer.files.length?e.dataTransfer.files:e.target.files;"text"==h||"json"==h?(i=[],"json"==h.toLowerCase()&&(l=[])):c=[];for(var t,o,n=0;n<d.length;n++)t=d[n],o=void 0,(o=new FileReader).onload=function(e){var t,o,n,r;"text"==h||"json"==h?(t=e.target.result,i.push(t),"json"==h&&(o=JSON.parse(t),l.push(o)),1==i.length&&(a=t,"json"==h&&(s=o)),i.length==d.length&&((n=new createjs.Event("loaded")).texts=i,n.text=a,n.lastText=t,n.total=i.length,"json"==h&&(n.jsons=l,n.json=s,n.lastJSON=o),_.dispatchEvent(n),X.value="")):((r=new Image).onload=function(){var e,t=new So.Bitmap(r);c.push(t),1==c.length&&(u=t),c.length==d.length&&((e=new createjs.Event("loaded")).bitmaps=c,e.bitmap=u,e.lastBitmap=t,e.total=c.length,_.dispatchEvent(e),X.value="")},r.src=e.target.result)},"text"==h||"json"==h?o.readAsText(t):o.readAsDataURL(t)}this.resize=function(){return _.stage?(X.setAttribute("aria-hidden",!1),X.hidden=!1,X.style.display=X.zimDisplay,setTimeout(function(){var e=_.getConcatenatedMatrix().decompose(),t=_.localToGlobal(0,0);B.retina?(R.x=B.x/D.scaleX+t.x/H,R.y=B.y/D.scaleY+t.y/H,So.sca(R,e.scaleX/H/D.scaleX,e.scaleY/H/D.scaleY)):(R.x=B.x+t.x*B.scale,R.y=B.y+t.y*B.scale,So.sca(R,B.scale*e.scaleX,B.scale*e.scaleY)),D.update()},50),_):(X.setAttribute("aria-hidden",!0),X.hidden=!0,void(X.style.display="none"))},this.resize(),_.on("added",function(){X.style.display="block",X.hidden=!1,X.style.display="block",_.resize()}),_.added(function e(){_.resize();setTimeout(function(){X.style.display="block",X.hidden=!1,X.style.display="block"},50);_.on("added",e,null,!0)}),_.on("removed",function(){X&&(X.style.display="none",X.hidden=!0,X.style.display="none")}),(new XMLHttpRequest).upload&&(W=function(e){X.removeEventListener("change",F),F(e),setInterval(function(){X.addEventListener("change",F)},100)},X.addEventListener("drop",W)),!(this.save=function(e,t,o,n,r,i,a,l,s,c){var u,d,h,g,p,f;if(u=zob(_.save,arguments,"content, filename, x, y, width, height, cached, cachedBounds, type, data"))return u;if(zot(e)&&(e=B.stage),zot(s)&&(s="png"),zot(t)?t="saved_"+String(So.makeID("numbers",5))+"."+s:1==(d=t.split(".")).length||-1==(g=(h=["png","jpg","jpeg"]).indexOf(d[d.length-1].toLowerCase()))?t+="."+s:s=h[g],zot(o)&&(o=0),zot(n)&&(n=0),zot(r)&&(r=e.getBounds&&e.getBounds()?e.getBounds().width:B.width),zot(i)&&(i=e.getBounds&&e.getBounds()?e.getBounds().height:B.height),e.cache(o,n,r,i),c){var m=e.cacheCanvas.toDataURL("image/"+s);return a?l&&e.cache(l.x,l.y,l.width,l.height):e.uncache(),m}return/Edge\/(\d)+/.test(navigator.userAgent)?((p=window.open()).document.write("<html><head><title>saved</title></head><body style='margin:0px;padding:0px;overflow:hidden'><img src="+e.cacheCanvas.toDataURL("image/"+s)+"></body></html>"),p.document.close()):("jpg"==s&&(s="jpeg"),(f=document.createElement("a")).setAttribute("download",t),f.setAttribute("href",e.cacheCanvas.toDataURL("image/"+s)),document.body.appendChild(f),f.click(),document.body.removeChild(f)),a?l&&e.cache(cashedBounds.x,cashedBounds.y,cashedBounds.width,cashedBounds.height):e.uncache(),_})!==O&&So.styleTransforms(this,Y),this.clone=function(){var e=new So.Loader(t,o,zot(n)?null:n.clone(),r,i,a,l,s,c,u,d,g,p,f,m,zot(y)?null:y.clone(),zot(b)?null:b.clone(),v,zot(w)?null:w.clone(),zot(C)?null:C.clone(),x,zot(k)?null:k.clone(),zot(T)?null:T.clone(),zot(A)?null:A.clone(),zot(P)?null:P.clone(),S,B,O,this.group);return _.cloneProps(e)},Object.defineProperty(this,"frame",{get:function(){return B},set:function(e){e!=B&&(B.off("update",_.updateEvent),B.off("resize",_.resizeEvent),B=e,_.resizeEvent=B.on("resize",_.resize),_.updateEvent=B.on("update",_.resize),_.resize())}}),this.resizeEvent=B.on("resize",_.resize),this.updateEvent=B.on("update",_.resize),this.dispose=function(e,t,o){var n;return _.stage&&(n=_.stage),B.off("update",_.updateEvent),B.off("resize",_.resizeEvent),X.removeEventListener("change",F),W&&X.removeEventListener("drop",W),X&&X.parentNode&&X.parentNode.removeChild(X),X=null,o||(this.zimButton_dispose(),n&&n.update()),!0}},So.extend(So.Loader,So.Button,["clone","dispose"],"zimButton",!1),So.TextArea=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,e,k){var T;if(T=zob(So.TextArea,arguments,"width, height, size, padding, color, backgroundColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, dashed, id, placeholder, readOnly, spellCheck, password, inputType, wrap, maxLength, frame, expand, style, group, inherit",this))return T;z_d("67.6"),this.group=e;var A=!1===x?{}:So.getStyle("TextArea",this.group,k);if(zot(t)&&(t=null!=A.width?A.width:250),zot(o)&&(o=null!=A.height?A.height:70),zot(n)&&(n=null!=A.size?A.size:20),zot(r)&&(r=null!=A.padding?A.padding:5),zot(i)&&(i=null!=A.color?A.color:"#666"),zot(a)&&(a=null!=A.backgroundColor?A.backgroundColor:"rgba(256,256,256,.1)"),zot(l)&&(l=null!=A.borderColor?A.borderColor:"rgba(0,0,0,.1)"),zot(s)&&(s=null!=A.borderWidth?A.borderWidth:null),l<0||s<0?l=s=null:null!=l&&null==s&&(s=1),zot(c)&&(c=null!=A.corner?A.corner:0),!zot(d)&&zot(u)&&(u=null!=A.shadowColor?A.shadowColor:"rgba(0,0,0,.3)"),!zot(u)&&zot(d)&&(d=null!=A.shadowBlur?A.shadowBlur:10),zot(z)&&(z=null!=A.password&&A.password),zot(y)&&(y=null!=A.inputType&&A.inputType),zot(b)&&(b=null==A.wrap||A.wrap),zot(v)&&(v=null!=A.maxLength?A.maxLength:null),zot(m)&&(m=null==A.spellCheck||A.spellCheck),zot(f)&&(f=null!=A.readOnly&&A.readOnly),zot(p)&&(p=null!=A.placeholder?A.placeholder:null),this.maxLength=v,zot(C)&&(C=null!=A.expand?A.expand:20),!0===C&&(C=20),zot(w)){if(!zdf)return void(zon&&zog("zim.TextArea - please provide a reference to zim Frame"));w=zdf}this.zimContainer_constructor(t,o,null,null,!1),this.type="TextArea";var P=this,S=w.stage,B=this.background=new So.Rectangle(t,o,a,l,s,c,h,null,!1).expand(C);-1!=u&&0<d&&(B.shadow=new createjs.Shadow(u,3,3,d)),P.addChild(B);var I=P.tag=y||z?document.createElement("input"):document.createElement("textarea");document.body.appendChild(I),zot(g)||(I.setAttribute("id",g),I.setAttribute("name",g)),z?I.setAttribute("type","password"):y&&I.setAttribute("type",y),I.readOnly=f,I.spellcheck=m,p&&I.setAttribute("placeholder",p),I.zimDisplay=I.style.display||"inline-block",I.style.cssText="background-color:rgba(0,0,0,.01); color:"+i+"; resize:none; z-index:3; width:"+(t-2*r)+"px; height:"+(o-2*r)+"px; overflow:hidden; outline:none;font-size:"+n+"px; font-family:"+(null!=A.font?A.font:"arial")+"; border:none; position:absolute; left:0px; top:0px; display:none;",P.taInput=function(){!zot(P.maxLength)&&P.text.length>P.maxLength&&(P.text=P.text.substring(0,P.maxLength)),P.dispatchEvent("input")},P.taFocus=function(){w.zil&&window.removeEventListener("keydown",w.zil[0]),P.dispatchEvent("focus")},P.taBlur=function(){w.zil&&window.addEventListener("keydown",w.zil[0]),P.dispatchEvent("blur")},I.addEventListener("change",P.taChange),I.addEventListener("input",P.taInput),I.addEventListener("focus",P.taFocus),I.addEventListener("blur",P.taBlur);var E=new createjs.DOMElement(I);E.alpha=0,this.on("mousedown",function(){setTimeout(function(){I.focus()},100)}),this.setFocus=function(e){return zot(e)&&(e=!0),e?I.focus():I.blur(),P};var O=w.retina&&window.devicePixelRatio||1;this.resize=function(){return setTimeout(function(){var e=P.getConcatenatedMatrix().decompose(),t=P.localToGlobal(r,r);w.retina?(E.x=w.x/S.scaleX+t.x/O,E.y=w.y/S.scaleY+t.y/O,So.sca(E,e.scaleX/O/S.scaleX,e.scaleY/O/S.scaleY)):(E.x=w.x+t.x*w.scale,E.y=w.y+t.y*w.scale,So.sca(E,w.scale*e.scaleX,w.scale*e.scaleY)),E.alpha=1,P.stage&&S.update()},20),P},this.resize(),P.added(function e(){S.addChild(E);setTimeout(function(){I.style.display=I.zimDisplay},50);P.resize();P.on("added",e,null,!0)}),P.on("removed",function(){S.removeChild(E),I&&(I.style.display="none")}),Object.defineProperty(this,"currentValue",{get:function(){return I.value},set:function(e){I.value=e}}),Object.defineProperty(this,"text",{get:function(){return I.value},set:function(e){I.value=e}}),Object.defineProperty(this,"focus",{get:function(){return document.activeElement==I},set:function(e){P.setFocus(e)}}),Object.defineProperty(this,"readOnly",{get:function(){return I.readOnly},set:function(e){I.readOnly=e}}),void 0!==KEYFOCUS&&(So.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return So.KEYFOCUS==P},set:function(e){So.KEYFOCUS=P}}),So.KEYFOCUS||(P.keyFocus=!0),P.taMousedown=function(){P.keyFocus=!0},I.addEventListener("mousedown",P.taMousedown),b||(I.style.whiteSpace="pre"),!1!==x&&So.styleTransforms(this,A),this.clone=function(){var e=new So.TextArea(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,this.group,k);return P.cloneProps(e)},Object.defineProperty(this,"frame",{get:function(){return w},set:function(e){e!=w&&(w.off("update",P.updateEvent),w.off("resize",P.resizeEvent),w=e,P.resizeEvent=w.on("resize",P.resize),P.updateEvent=w.on("update",P.resize),O=w.retina&&window.devicePixelRatio||1,S=w.stage,P.resize())}}),this.resizeEvent=w.on("resize",P.resize),this.updateEvent=w.on("update",P.resize),this.dispose=function(e,t,o){var n;return P.stage&&(n=P.stage),w.off("update",P.updateEvent),w.off("resize",P.resizeEvent),I&&I.parentNode&&I.parentNode.removeChild(I),I.removeEventListener("change",P.taChange),I.removeEventListener("input",P.taInput),I.removeEventListener("focus",P.taFocus),I.removeEventListener("blur",P.taBlur),I.removeEventListener("mousedown",P.taMousedown),I=null,o||(this.zimContainer_dispose(!0),n&&n.update()),!(P.background=null)}},So.extend(So.TextArea,So.Container,["clone","dispose"],"zimContainer",!1),So.Tag=function(t,o,n,r,i,a,l,s,c,u,e,d){var h;if(h=zob(So.Tag,arguments,"width, height, id, frame, backgroundColor, padding, paddingHorizontal, paddingVertical, expand, style, group, inherit",this))return h;z_d("67.7"),this.group=e;var g=!1===u?{}:So.getStyle("Tag",this.group,d);if(zot(t)&&(t=null!=g.width?g.width:250),zot(o)&&(o=null!=g.height?g.height:70),zot(n)&&(n=null!=g.id?g.id:"zimTag_"+So.rand(1e4)),zot(r)){if(!zdf)return void(zon&&zog("zim.TextArea - please provide a reference to zim Frame"));r=zdf}zot(i)&&(i=null!=g.backgroundColor?g.backgroundColor:"rgba(0,0,0,0)"),zot(a)&&(a=null!=g.padding?g.padding:10),zot(l)&&(l=null!=g.paddingHorizontal?g.paddingHorizontal:a),zot(s)&&(s=null!=g.paddingVertical?g.paddingVertical:a),zot(c)&&(c=null!=g.expand?g.expand:20),!0===c&&(c=20),this.zimContainer_constructor(t,o,null,null,!1),this.type="Tag",this.tagID=n,this.id=n;var p=this,f=r.stage,m=(p.background=new So.Rectangle(t+l,o+s,i).center(this).expand(c||0),p.tag=document.createElement("div"));document.body.appendChild(m),m.setAttribute("id",n),m.setAttribute("name",n),m.zimDisplay=m.style.display||"inline-block",m.style.cssText="resize:none; z-index:3; width:"+t+"px; height:"+o+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none;";var z=new createjs.DOMElement(m);z.alpha=0;var y=r.retina&&window.devicePixelRatio||1;this.resize=function(){return setTimeout(function(){var e=p.getConcatenatedMatrix().decompose(),t=p.localToGlobal(0,0);r.retina?(z.x=r.x/f.scaleX+t.x/y,z.y=r.y/f.scaleY+t.y/y,So.sca(z,e.scaleX/y/f.scaleX,e.scaleY/y/f.scaleY)):(z.x=r.x+t.x*r.scale,z.y=r.y+t.y*r.scale,So.sca(z,r.scale*e.scaleX,r.scale*e.scaleY)),z.alpha=1,p.stage&&f.update()},50),p},this.resize(),p.added(function e(){f.addChild(z);setTimeout(function(){m.style.display=m.zimDisplay},50);p.resize();p.on("added",e,null,!0)}),p.on("removed",function(){f.removeChild(z),m&&(m.style.display="none")}),this.add=function(e){return m.innerHTML+=e,p},Object.defineProperty(this,"innerHTML",{get:function(){return m.innerHTML},set:function(e){m.innerHTML=e}}),Object.defineProperty(this,"style",{get:function(){return m.style},set:function(e){m.style=e}}),!1!==u&&So.styleTransforms(this,g),this.clone=function(){var e=new So.Tag(t,o,n,r,i,a,l,s,c,u,this.group,d);return p.cloneProps(e)},Object.defineProperty(this,"frame",{get:function(){return r},set:function(e){e!=r&&(r.off("update",p.updateEvent),r.off("resize",p.resizeEvent),r=e,p.resizeEvent=r.on("resize",p.resize),p.updateEvent=r.on("update",p.resize),p.resize())}}),this.resizeEvent=r.on("resize",p.resize),this.updateEvent=r.on("update",p.resize),this.dispose=function(e,t,o){var n;return p.stage&&(n=p.stage),r.off("update",p.updateEvent),r.off("resize",p.resizeEvent),m&&m.parentNode&&m.parentNode.removeChild(m),m=null,o||(this.zimContainer_dispose(!0),n&&n.update()),!0}},So.extend(So.Tag,So.Container,["clone","dispose"],"zimContainer",!1),So.addTo=function(e,t,o,n){var r,i;if(r=zob(So.addTo,arguments,"obj, container, index, localToLocal"))return r;if(z_d("47.5"),!zot(e)){if(zot(t)){if(!zdf)return void zog("zim methods - addTo(): please provide container");t=zdf.stage}return zot(n)&&(n=!0),e.parent||(n=!1),n&&(i=e.parent.localToLocal(e.x,e.y,t)),zot(o)||isNaN(o)?t.addChild(e):t.addChildAt(e,o),n&&(e.x=i.x,e.y=i.y),e}zog("zim methods - addTo(): please provide object")},So.removeFrom=function(e,t){if(z_d("47.6"),!zot(e))return zot(t)?e.parent&&e.parent.removeChild(e):t.removeChild(e),e;zog("zim methods - removeFrom(): please provide object")},So.added=function(e,t,o,n){if(z_d("47.7"),!zot(e)&&!zot(t)&&"function"==typeof t){var r=Bo(o);if(zot(o)&&(o="s"==r?.1:100),!e.stage){var i,a=o*("s"==r?1e3:1);n&&(Io(n),i=n*("s"==r?1e3:1));var l=Date.now(),s=0,c=setInterval(function(){5<s?clearInterval(c):(s++,e.stage&&(t(e.stage,e),clearInterval(c),clearInterval(u)))},10),u=setInterval(function(){0<i&&l-Date.now()>i&&clearInterval(u),e.stage&&(t(e.stage,e),clearInterval(u))},a);return u}t(e.stage,e)}},So.centerReg=function(e,t,o,n){var r;if(r=zob(So.centerReg,arguments,"obj, container, index, add"))return r;if("AC"==e.type&&zdf)return zdf.ac("centerReg",arguments),e.addTo(t,o);if(z_d("48"),zot(e)||!e.getBounds||!e.getBounds())return zog("zim methods - centerReg(): please provide object with bounds set"),e;zot(n)&&(n=!0),zot(t)&&e.parent&&n&&(t=e.parent,zot(o)&&(o=e.parent.getChildIndex(e)),e.parent.removeChild(e)),zot(t)||t!=e.parent||(zot(o)&&(o=e.parent.getChildIndex(e)),e.parent.removeChild(e));var i=e.getBounds();return e.regX=i.x+i.width/2,e.regY=i.y+i.height/2,n?So.center(e,t,o):e},So.center=function(e,t,o,n){var r;if(r=zob(So.center,arguments,"obj, container, index, add"))return r;if("AC"==e.type&&zdf)return zdf.ac("center",arguments),e.addTo(t,o);if(So.centerCheck||(z_d("48.1"),So.centerCheck=!0),zot(e)||!e.getBounds)return zog("zim.center(): please provide object with bounds"),e;if(zot(t)&&(e.parent?t=e.parent:zdf&&(t=zdf.stage)),zot(t)||!t.getBounds)return zog("zim.center(): please provide container with bounds"),e;var i=e.getBounds(),a=t.getBounds();zot(n)&&(n=!0);var l=!1;if(zot(a)&&(t.setBounds(0,0),a=t.getBounds(),l=!0),n&&t.addChild&&(zot(o)||"number"==typeof o&&isNaN(o)?t.contains(e)||t.addChild(e):t.addChildAt(e,o)),zot(i))return e.x=a.x+a.width/2,e.y=a.y+a.height/2,e;var s=!1,c=!1;0==t.scaleX&&(s=!0,t.scaleX=1e-5),0==t.scaleY&&(c=!0,t.scaleY=1e-5);var u,d=e.localToLocal(e.regX,e.regY,t),h=So.boundsToGlobal(e),g=So.boundsToGlobal(t,h,!0);return s&&(t.scaleX=0),c&&(t.scaleY=0),e.x=a.x+a.width/2-g.width/2+(d.x-g.x),e.y=a.y+a.height/2-g.height/2+(d.y-g.y),!n&&t.getStage&&t.stage&&e.parent&&(u=t.localToLocal(e.x,e.y,e.parent),e.x=u.x,e.y=u.y),l&&t.setBounds(null),e},So.place=function(n,e){if(z_d("49"),!zot(n))return zot(e)&&(e="obj"),So.lastPlace=n,So.drag({obj:n,currentTarget:!0,dragCursor:"crosshair"}),n.on("mousedown",function(){So.lastPlace=n}),zdf&&zdf.on("keydown",function(e){var t,o;n!=So.lastPlace||37<=(t=e.keyCode)&&t<=40&&(o=e.shiftKey?10:1,n.mov(37==t?-1*o:39==t?o:0,38==t?-1*o:40==t?o:0),r(),n.stage&&n.stage.update())}),zog("place "+e+" - to get new position"),n.on("click",r),n;function r(){zog(e+".x = "+Math.round(n.x)+"; "+e+".y = "+Math.round(n.y)+";"),zog(e+".loc("+Math.round(n.x)+", "+Math.round(n.y)+");")}},So.placeReg=function(t,o){if(z_d("49.5"),!zot(t)){var e=t.stage;if(zot(e))return zog("zim.placeReg() - add object to stage before calling placeReg()"),t;zot(o)&&(o="obj");var n=t.parent.localToGlobal(t.x,t.y),r=new So.Shape(-25,-25,50,50,null,!1).addTo(e).pos({x:n.x,y:n.y,reg:!0});return r.graphics.s("white").mt(-25,0).lt(25,0).mt(0,-25).lt(0,20),r.compositeOperation="difference",r.expand(0),So.drag({obj:r}),zog("place cursor to get new registration point location"),e.on("stagemouseup",function(){var e=t.globalToLocal(r.x,r.y);zog(o+".regX = "+Math.round(e.x)+"; "+o+".regY = "+Math.round(e.y)+";"),zog(o+".reg("+Math.round(e.x)+", "+Math.round(e.y)+");")}),t}},So.pos=function(m,e,t,o,n,r,i,a,l,s,c){var u;if(u=zob(So.pos,arguments,"obj, x, y, horizontal, vertical, container, index, add, reg, regX, regY"))return u;if("AC"==m.type&&zdf)return zdf.ac("pos",arguments),m.addTo(r,i);z_d("41.5");var d=!1;"right"==o&&(d=!0);var h=!1;"bottom"==n&&(h=!0);var g=So.POSREG;if(null!=window.POSREG&&(g=window.POSREG),zot(l)&&(l=g),!zot(m)){zot(l)&&zot(s)&&(s=!1),zot(l)&&zot(c)&&(c=!1),!zot(l)&&zot(s)&&(s=l),!zot(l)&&zot(c)&&(c=l),zot(a)&&(a=!0),zot(r)||r.addChild||(r=null),m.getBounds||m.getBounds()||(s=c=!1),zot(r)&&(m.parent?r=m.parent:zdf&&(r=zdf.stage)),!m.parent&&zot(e)&&(e=0),!m.parent&&zot(t)&&(t=0);var p=!1;m.getBounds()||(m.setBounds(0,0),p=!0);var f,z,y,b,v=!1;if(r&&!r.getBounds()&&(r.setBounds(0,0),v=!0),!zot(r)&&r.addChild&&a&&(f=r.getBounds().clone(),T(),z=r.getBounds(),f.width==z.width&&f.height==z.height&&f.x==z.x&&f.y==z.y||(m.removeFrom(),r.setBounds(f.x,f.y,f.width,f.height),v=!0,T())),!s&&!c&&!("center"!=o&&"middle"!=o||"center"!=n&&"middle"!=n))return m.center(r),m.mov(e,t),p&&m.setBounds(null),v&&r.setBounds(null),m;if("center"==o||"middle"==o?(s?m.x=r.width/2:(y=m.y,m.center(),m.y=y),m.mov(e),o=e=null):!0===o&&(d=!0),"center"==n||"middle"==n?(c?m.y=r.height/2:(b=m.x,m.center(),m.x=b),m.mov(0,t),n=t=null):!0===n&&(h=!0),m.parent&&m.parent.getBounds){if(r=m.parent,zot(e)&&1==d&&(e=0),zot(t)&&1==h&&(t=0),zot(e)||(m.x=e),zot(t)||(m.y=t),zot(e)&&zot(t)&&!d&&!h)return p&&m.setBounds(null),v&&r.setBounds(null),m;var w,C,x=0,k=0;m.getBounds()&&(w=function(){var e=m.getBounds(),t=e.x,o=e.y,n=e.width,r=e.height,i=m._props.matrix;i=m.getMatrix(i),(t||o)&&i.appendTransform(0,0,1,1,0,0,0,-t,-o);var a=n*i.a,l=n*i.b,s=r*i.c,c=r*i.d,u=i.tx,d=i.ty,h=u,g=u,p=d,f=d;(t=a+u)<h?h=t:g<t&&(g=t);(t=a+s+u)<h?h=t:g<t&&(g=t);(t=s+u)<h?h=t:g<t&&(g=t);(o=l+d)<p?p=o:f<o&&(f=o);(o=l+c+d)<p?p=o:f<o&&(f=o);(o=c+d)<p?p=o:f<o&&(f=o);return{x:h,y:p,width:g-h,height:f-p}}(),zot(e)||(x=(d?new So.Point(w.x+w.width,w.y+w.height):new So.Point(w.x,w.y)).x-e),zot(t)||(k=(h?new So.Point(w.x+w.width,w.y+w.height):new So.Point(w.x,w.y)).y-t),C=r.getBounds(),zot(e)||(d?m.x=s?C.width+C.x-e:C.width+C.x-e-x:(m.x=s?e:e-x,m.x+=C.x)),zot(t)||(h?m.y=c?C.height+C.y-t:C.height+C.y-t-k:(m.y=c?t:t-k,m.y+=C.y)))}return p&&m.setBounds(null),v&&r.setBounds(null),m}function T(){zot(i)||"number"==typeof i&&isNaN(i)?r.contains(m)||r.addChild(m):r.addChildAt(m,i)}},So.loc=function(e,t,o,n,r,i,a,l){var s,c;return(s=zob(So.loc,arguments,"obj, target, y, container, index, add, localToLocal, x"))?s:"AC"==e.type&&zdf?(zdf.ac("loc",arguments),e.addTo(n,r)):(z_d("41.55"),zot(e)?void 0:("number"==typeof t&&(l=t,t=null),zot(t)||(zot(t.x)||(l=t.x),zot(t.y)||(o=t.y)),zot(l)&&zot(t)&&(l=e.x),zot(o)&&zot(t)&&(o=e.y),zot(i)&&(i=!0),zot(n)&&(e.parent?n=e.parent:zdf&&(n=zdf.stage)),i&&n&&(e.parent&&n==e.parent?zot(r)||n.addChildAt(e,r):zot(r)||isNaN(r)?n.addChild(e):n.addChildAt(e,r)),zot(a)&&(a=!0),t&&t.parent&&e.parent&&a&&(l=(c=t.parent.localToLocal(l,o,e.parent)).x,o=c.y),e.x=l,e.y=o,e))},So.mov=function(e,t,o){var n;return(n=zob(So.mov,arguments,"obj, x, y"))?n:"AC"==e.type&&zdf?(zdf.ac("mov",arguments),e):(z_d("41.6"),zot(e)?void 0:(zot(t)||(e.x+=t),zot(o)||(e.y+=o),e))},So.sca=function(e,t,o){return"AC"==e.type&&zdf?(zdf.ac("sca",arguments),e):(z_d("41.97"),zot(e)||zot(e.scaleX)||(zot(t)&&(t=e.scaleX),zot(o)&&(o=t),e.scaleX=t,e.scaleY=o),e)},So.alp=function(e,t){if(z_d("41.7"),!zot(e))return zot(t)||(e.alpha=e.hovOriginal=t,e.tag&&e.tag.style&&("Loader"!=e.type&&(e.tag.style.opacity=t),e.tag.style.display=e.tag.zimDisplay=0==t?"none":"inline-block")),e},So.ble=function(e,t){if(z_d("41.72"),!zot(e))return zot(t)&&(t="difference"),e.compositeOperation=t,e},So.hov=function(e,t,o){if(z_d("41.75"),!zot(e))return zot(t)&&(t=1),zot(o)&&(o="number"==typeof t?"alpha":"color"),e.hovMouseover&&(e.off("mouseover",e.hovMouseover),e.off("mouseout",e.hovMouseout)),-1==t?(e.cur("default"),zot(e.hovOld)||(e[e.hovType]=e.hovOld),e.hovOld=null,e.stage&&e.stage.update()):(e.cur(),e.hovOld=e[o],e.hovNew=t,e.hovType=o,e.hovMouseover=e.on("mouseover",function(){e[o]=e.hovNew,e.stage&&e.stage.update()}),e.hovMouseout=e.on("mouseout",function(){e[o]=e.hovOld,e.stage&&e.stage.update()})),e},So.rot=function(e,t,o,n){var r,i,a;if(z_d("41.8"),!zot(e))return"AC"==e.type&&zdf?zdf.ac("rot",arguments):zot(t)||(!e.parent||zot(o)&&zot(n)?e.rotation=t:(zot(o)&&(o=e.x),zot(n)&&(n=e.y),e.x,e.y,r=e.parent.localToLocal(o,n,e),i=new So.Point(e.x,e.y),e.reg(r.x,r.y),e.rotation=t,e.x=o,e.y=n,a=e.parent.localToLocal(i.x,i.y,e),e.reg(a.x,a.y),e.x=i.x,e.y=i.y)),e},So.siz=function(e,t,o,n){if(z_d("41.85"),!zot(e))return"AC"==e.type&&zdf?zdf.ac("siz",arguments):(zot(n)&&(n=!1),zot(t)||zot(o)?zot(t)?zot(o)||(n?e.heightOnly=o:e.height=o):n?e.widthOnly=t:e.width=t:(e.widthOnly=t,e.heightOnly=o)),e},So.ske=function(e,t,o){if(z_d("41.9"),!zot(e))return"AC"==e.type&&zdf?zdf.ac("ske",arguments):(zot(t)||(e.skewX=t),zot(o)||(e.skewY=o)),e},So.reg=function(e,t,o,n){if(z_d("41.95"),!zot(e)){if("AC"==e.type&&zdf)return zdf.ac("reg",arguments),e;var r,i=e.regX,a=e.regY;return zot(t)||(e.regX=t),zot(o)||(e.regY=o),n&&e.parent&&(r=e.localToLocal(i,a,e.parent),e.x-=r.x-e.x,e.y-=r.y-e.y),e}},So.top=function(e){return z_d("41.62"),zot(e)||!e.parent||e.parent.setChildIndex(e,e.parent.numChildren-1),e},So.bot=function(e){return z_d("41.63"),zot(e)||!e.parent||e.parent.setChildIndex(e,0),e},So.ord=function(e,t){if(z_d("41.64"),!zot(e)&&e.parent)return zot(t)&&(t=0),e.parent.setChildIndex(e,e.parent.getChildIndex(e)+t),e},So.cur=function(e,t){return z_d("41.1"),zot(e)?zog("zim methods - cur(): please provide object"):(zot(t)&&(t="pointer"),e.cursor=t),e},So.sha=function(e,t,o,n,r){return z_d("41.2"),zot(e)?(zog("zim methods - sha(): please provide object"),e):(zot(t)&&(t="rgba(0,0,0,.3)"),t.blur?e.shadow=t:(zot(o)&&(o=e.width?.08*e.width:5),zot(n)&&(n=e.height?.08*e.height:5),zot(r)&&(r=e.width?.16*e.width:10),e.shadow=new createjs.Shadow(t,o,n,r)),e)},So.dep=function(e,t){if(z_d("41.65"),!zot(e))return zot(t)&&(t=0),e.depth=t,e},So.nam=function(e,t){if(z_d("41.67"),!zot(e)&&!zot(t))return e.name=t,So.zimObjectIDs[t]=e},So.movement=function(e,t,o){z_d("47.75");var n=e.stage||zdf.stage;function r(){n=e.stage,e.zimMovementStage=n,e.zimMovementEvent&&n.off("stagemousemove",e.zimMovementEvent),e.zimMovementEvent=n.on("stagemousemove",function(e){t(e)}),e.on("mouseout",function(){e.zimMovementEvent&&n.off("stagemousemove",e.zimMovementEvent)},null,!0)}return So.mobile()?(e.zimMovementEvent&&n.off("pressmove",e.zimMovementEvent),e.zimMovementEvent=e.on("pressmove",function(e){t(e)})):(e.zimMouseoverEvent&&e.off("mouseover",e.zimMouseoverEvent),e.zimMouseoverEvent=e.on("mouseover",r),o&&r()),e},So.noMovement=function(e){if(z_d("47.9"),!zot(e))return e.zimMouseoverEvent&&e.off("mouseover",e.zimMouseoverEvent),e.zimMovementEvent&&e.zimMovementStage&&e.zimMovementStage.off("stagemousemove",e.zimMovementEvent),e},So.tap=function(r,i,a,l,e){if(z_d("47.8"),!zot(r)&&!zot(i)&&"function"==typeof i)return zot(a)&&(a=5),zot(l)&&(l=1e4),zot(e)&&(e=!1),r.cursor="pointer",r.zimClickDownEvent=r.on("mousedown",function(e){if(e.target.stage,"List"==e.currentTarget.type){if("WindowBacking"==e.target.type)return;if(e.currentTarget.globalToLocal(e.stageX/So.scaX,e.stageY/So.scaY).y<=0)return}var t=e.stageX/So.scaX,o=e.stageY/So.scaY,n=Date.now();r.zimClickUpEvent=r.on("pressup",function(e){if(Math.abs(t+o-e.stageX/So.scaX-e.stageY/So.scaY)<a&&Date.now()-n<l){if(r.excludeTap)return;i(e)}},null,!0)},null,e),r},So.noTap=function(e){if(z_d("47.9"),!zot(e))return e.cursor&&(e.cursor="default"),e.off("mousedown",e.zimClickDownEvent),e.off("pressup",e.zimClickUpEvent),e},So.hold=function(r,i,a,l,e){if(z_d("47.87"),!zot(r)&&!zot(i)&&"function"==typeof i){zot(a)&&(a=5);var s,c=Bo(l);return zot(l)&&(l="s"==c?1.5:1500),zot(e)&&(e=!1),r.cursor="pointer",r.zimClickHoldDownEvent=r.on("mousedown",function(e){if(zot((s=e.target.stage).frame)&&(s.frame=zdf),!zot(s.frame)&&s.frame.mouseEvent||(s.frame={},s.frame.mouseX=e.stageX/So.scaX,s.frame.mouseY=e.stageY/So.scaY,s.frame.mouseEvent=s.on("stagemousemove",function(e){s.frame.mouseX=e.stageX/So.scaX,s.frame.mouseY=e.stageY/So.scaY})),"List"==e.currentTarget.type){if("WindowBacking"==e.target.type)return;if(e.currentTarget.globalToLocal(e.stageX/So.scaX,e.stageY/So.scaY).y<=0)return}var t=e.stageX/So.scaX,o=e.stageY/So.scaY;Date.now();clearInterval(r.zimHoldInterval);var n=0;r.zimHoldInterval=setInterval(function(){if(n<10)Math.abs(t+o-s.frame.mouseX-s.frame.mouseY)>a&&clearInterval(r.zimHoldInterval);else{if(Math.abs(t+o-s.frame.mouseX-s.frame.mouseY)<a){if(r.excludeHold)return;i(e)}clearInterval(r.zimHoldInterval)}n++},l/10*("s"==c?1e3:1)),r.zimClickHoldUpEvent=r.on("pressup",function(e){clearInterval(r.zimHoldInterval)},null,!0)},null,e),r}},So.noHold=function(e){if(z_d("47.88"),!zot(e))return e.cursor&&(e.cursor="default"),e.off("mousedown",e.zimClickHoldDownEvent),e.off("pressup",e.zimClickHoldUpEvent),clearInterval(e.zimHoldTimeout),e},So.change=function(e,t,o){if(z_d("47.85"),!zot(e)&&!zot(t)&&"function"==typeof t)return zot(o)&&(o=!1),e.zimChangeEvent=e.on("change",function(e){t(e)},null,o),e},So.noChange=function(e){if(z_d("47.95"),!zot(e))return e.off("mousedown",e.zimChangeEvent),e},So.drag=function(s,r,l,i,e,t,a,c,u,d,h,g,p,f,m,o,z,y){var n;if(n=zob(So.drag,arguments,"obj, boundary, overCursor, dragCursor, all, swipe, localBounds, onTop, surround, slide, slideDamp, slideSnap, reg, removeTweens, startBounds, rect, currentTarget, offStage"))return n;if(z_d("31"),!zot(s)&&s.on){var b=So.DRAGALL;if(null!=window.DRAGALL&&(b=window.DRAGALL),zot(e)&&zot(z)&&(e=b),zot(e)&&zot(z)?z=!1:zot(e)?zot(z)&&(z=!1):z=e,"Tag"!=s.type&&"TextArea"!=s.type&&"Loader"!=s.type||(z=!0),r&&r.getBounds&&s.numChildren&&1<s.numChildren&&1==s.mouseChildren&&!e){var v=Array.prototype.slice.call(arguments);return v[4]=!0,s.loop(function(e){v[0]=e,So.drag.apply(null,v)}),s}s.zimDown&&s.noDrag(),s.cursor=zot(l)?"pointer":l,zot(t)&&(t=!1),zot(a)&&(a=!1),zot(c)&&(c=!0),zot(u)&&(u=!1),zot(d)&&(d=!1),zot(h)&&(h=.3),zot(g)&&(g=!0);var w,C,x,k,T,A,P,S,B,I,E,O,M,j,L;!0!==g&&["horizontal","vertical","auto"].indexOf(g)<0&&(g=!1),zot(p)&&(p=!1),zot(f)&&(f=!0),zot(m)&&(m=!0),zot(r)&&!zot(o)&&(r=o),d||(s.zimDragTicker=function(){}),s._draggable=!0,So.setSwipe(s,t),s.zimBoundary=r,s.zimLocalBounds=a;var Y,_,D,X,R,W,H=!1,F=!1;return s.zimAdded=s.on("added",V,null,!0),s.zimRemoved=s.on("removed",function(){s.zimDragTicker&&So.Ticker.remove(s.zimDragTicker)},null,!0),s.parent&&V(),s.pointers={},s.zimDown=s.on("mousedown",function(e){var t,o,n;s.stage&&(W=s.stage,s.dragMouseX=Math.round(e.stageX/So.scaX)+W.x,s.dragMouseY=Math.round(e.stageY/So.scaY)+W.y,t="id"+Math.abs(e.pointerID+1),s.pointers[t]=!0,R=z?e.currentTarget:e.target,!s.zimBoundary||R.getBounds()?(H=!0,s.stage.mouseMoveOutside=!0,So.Ticker.has(s.zimDragTicker)||So.Ticker.add(s.zimDragTicker,s.stage),f&&createjs.Tween.removeTweens(R),R.parent&&(c&&(o=R.parent.numChildren-1,"Keyboard"==R.parent.getChildAt(o).type&&o--,R.parent.setChildIndex(R,o),R.ZIMoutlineShape&&R.outline()),n=R.parent==s.stage?new So.Point(e.stageX/So.scaX,e.stageY/So.scaY):R.parent.globalToLocal(e.stageX/So.scaX,e.stageY/So.scaY),p&&(R.x=n.x,R.y=n.y),Y=n.x-R.x,_=n.y-R.y,s.zimBoundary&&(a?(D=So.boundsToGlobal(R.parent,s.zimBoundary),u&&(X=s.zimBoundary)):(D=s.zimBoundary,u&&(X=So.boundsToGlobal(R.parent,s.zimBoundary,!0)))),s.cursor=zot(i)?"pointer":i,d&&(s.slideStartX=s.x,s.slideStartY=s.y,L=s.zimDragMoving,k=0,T=[n.x],A=[n.y],j=M=-1e4,s.zimDragMoving=!0),"Pen"==s.type&&(s.zimDragCheck=!0,F=!1))):zog("zim.drag() - drag object needs bounds set"))},!0),s.zimMove=s.on("pressmove",function(e){var t,o;H&&(t=(y?e.rawX:e.stageX)/So.scaX+W.x,o=(y?e.rawY:e.stageY)/So.scaY+W.y,s.dragMouseX=Math.round(t),s.dragMouseY=Math.round(o),N(R,t,o),R.ZIMoutlineShape&&R.outline(),"Pen"==s.type&&!F&&s.drawing?F=!0:"Tag"!=s.type&&"TextArea"!=s.type&&"Loader"!=s.type||s.resize())},!0),s.zimPosition=N,s.zimUp=s.on("pressup",function(e){var t,o,n,r="id"+Math.abs(e.pointerID+1);if(delete s.pointers[r],H){if(s.cursor=zot(l)?"pointer":l,d){R.dispatchEvent("slidestart"),n=R.parent?(t=y?e.rawX:e.stageX,o=y?e.rawY:e.stageY,R.parent.globalToLocal(t/So.scaX,o/So.scaY)):new So.Point(0,0),H=!1,P=n.x,S=n.y,B=R.x,I=R.y,w.immediate(R.x),C.immediate(R.y)}else{var i=0;for(var a in s.pointers)i++;0==i&&So.Ticker.remove(s.zimDragTicker),"Pen"==s.type&&(s.zimDragCheck=!1,F&&s.stopCheck())}s.stage&&s.stage.update()}},!0),s}function V(){var e,t,o,n;s.off("added",s.zimAdded),(r=s.zimBoundary)&&r.getBounds&&"Blob"!=r.type&&(s.zimLocalBounds=!1,r="Stage"!=r.type&&"StageGL"!=r.type?r.boundsToGlobal():new So.Boundary(0,0,r.width,r.height),e=s.boundsToGlobal(),t=s.localToGlobal(s.regX,s.regY),o=new So.Point(t.x-e.x,t.y-e.y),n=s.borderWidth?s.borderWidth:0,r.x+=o.x+n/2,r.y+=o.y+n/2,r.width-=e.width+n,r.height-=e.height+n,s.zimBoundary=r),_=Y=0,s.zimBoundary&&"Blob"!=s.zimBoundary.type&&(a?(D=So.boundsToGlobal(s.parent,s.zimBoundary),u&&(X=s.zimBoundary)):(D=s.zimBoundary,u&&(X=So.boundsToGlobal(s.parent,s.zimBoundary,!0)))),D&&m&&(t=s.parent.localToGlobal(s.x,s.y),N(s,t.x,t.y)),d&&setTimeout(function(){w=new So.Damp(s.x,h),C=new So.Damp(s.y,h),s.zimDragImmediate=function(e,t){I=t,P=E=S=O=0,zot(B=e)||w.immediate(e),zot(t)||C.immediate(t)},x=3,k=0,T=[],A=[],P=s.x,S=s.y,B=s.x,I=s.y,E=s.x,O=s.y,j=M=-1e4,s.zimDragMoving=!0,function(){s.stage;function r(e,t,o,n,r){Math.abs(e.x-M)<.1&&Math.abs(e.y-j)<.1?(s.zimDragMoving=!1,e.x=n,e.y=r,e.slideStartX=null,e.slideStartY=null,L&&(e.dispatchEvent("slidestop"),So.Ticker.remove(s.zimDragTicker)),"Pen"==s.type&&(s.zimDragCheck=!1,F&&s.stopCheck())):(M=t,j=o)}s.zimDragTicker=function(){if(!zot(s.slideStartX))if(R=R||s,H){var e;e=R.parent?R.parent.globalToLocal(s.dragMouseX,s.dragMouseY):new So.Point(0,0),k++,T.push(e.x),A.push(e.y),O=x<=k?(E=T.shift(),A.shift()):(E=T[0],A[0])}else{if(!s.zimDragMoving)return;var t,o=B+P-E,n=I+S-O;D&&(o=(t=G(R,o,n)).x,n=t.y),g?(R.x=w.convert(o),R.y=C.convert(n),r(R,R.x,R.y,o,n)):(t=G(R,w.convert(o),C.convert(n)),R.x=t.x,R.y=t.y,r(R,R.x,R.y,R.x,R.y))}}}()},50),zot(s.zimMaskDynamic)||s.zimMaskApply()}function N(e,t,o){var n,r,i;zot(e)&&(e=R||s),e.parent&&((zot(t)||zot(o))&&(n=e.parent.localToGlobal(e.x,e.y),Y=_=0,s.zimBoundary&&(a?(D=So.boundsToGlobal(e.parent,s.zimBoundary),u&&(X=e.zimBoundary)):(D=s.zimBoundary,u&&(X=So.boundsToGlobal(e.parent,s.zimBoundary,!0)))),t=n.x,o=n.y,d&&(B=e.x,I=e.y,R=e,w&&w.immediate(B),C&&C.immediate(I))),r=W&&W.type?e.parent.globalToLocal(t,o):e.parent.globalToLocal(t*So.scaX,o*So.scaY),d&&g?"vertical"==g?(i=G(e,r.x-Y,r.y-_),e.x=i.x,e.y=r.y-_):"horizontal"==g?(i=G(e,r.x-Y,r.y-_),e.x=r.x-Y,e.y=i.y):(e.x=r.x-Y,e.y=r.y-_):(i=G(e,r.x-Y,r.y-_),e.x=i.x,e.y=i.y),!d||L||e.slideStartX==e.x&&e.slideStartY==e.y||(L=!0))}function G(e,t,o){if(!e.parent)return{x:t,y:o};if(D)if(u){var n=e.getBounds().width,r=e.getBounds().height,i=e.getBounds().x,a=e.getBounds().y;n<X.width?t=X.x+(X.width-n)/2+(e.regX-i):(t-(e.regX-i)>X.x&&(t=X.x+(e.regX-i)),t-(e.regX-i)+n<X.x+X.width&&(t=X.x+X.width+(e.regX-i)-n)),e.height<X.height?o=X.y+(X.height-r)/2+(e.regY-a):(o-(e.regY-a)>X.y&&(o=X.y+(e.regY-a)),o-(e.regY-a)+r<X.y+X.height&&(o=X.y+X.height+(e.regY-a)-r))}else{if("Blob"==D.type)return D.shape.hitTestPoint(t,o)?{x:t,y:o}:{x:s.x,y:s.y};var l=e.parent.localToGlobal(t,o);t=Math.max(D.x,Math.min(D.x+D.width,l.x)),o=Math.max(D.y,Math.min(D.y+D.height,l.y)),t=(l=e.parent.globalToLocal(t,o)).x,o=l.y}return{x:t,y:o}}},So.noDrag=function(e,t){if(z_d("32"),!zot(e)&&e.on){if(zot(t)&&(t=!0),t&&e.numChildren&&1<e.numChildren)for(var o=0;o<e.numChildren;o++){n(e.getChildAt(o))}return n(e),e}function n(e){e.cursor=null,e._draggable=!1,So.setSwipe(e,!0),e.off("added",e.zimAdded),e.off("removed",e.zimRemoved),e.off("mousedown",e.zimDown),e.off("pressmove",e.zimMove),e.off("pressup",e.zimUp),So.Ticker&&(e.zimDragSlide&&So.Ticker.remove(e.zimDragSlide),e.zimDragTicker&&So.Ticker.remove(e.zimDragTicker)),e.zimDragMoving=e.zimAdded=e.zimRemoved=e.zimDown=e.zimMove=e.zimUp=e.zimBoundary=e.zimDragSlide=null,e.slideStartX=e.slideStartY=e.zimDragImmediate=null,e.dragMouseX=e.zimPosition=e.dragMouseY=e.zimDown=e.zimUp=null,e.zimDragTicker=e.zimDragSlide=null}},So.dragBoundary=function(e,t,o){if(z_d("33"),!zot(e)&&e.on&&!zot(t))return e.zimBoundary=t,e.zimDragMoving=!0,e.zimPosition&&e.zimPosition(),e},So.dragRect=So.dragBoundary,So.mouse=function(e){return z_d("33.1"),e.zimLastMouse&&(e.mouseChildren=e.zimLastMouse),e.mouseEnabled=!0,e},So.noMouse=function(e){return z_d("33.15"),e.zimLastMouse=e.mouseChildren,e.mouseChildren=!1,e.mouseEnabled=!1,e},So.wire=function(e,t,o,n,r,i,a,l){var s;if(s=zob(So.wire,arguments,"source, target, prop, twoWay, setSource, filter, call, input"))return s;if(z_d("33.2"),zot(So.Ticker)&&zon)return zog("wire() - requires ZIM Frame"),e;if(zot(t)&&zon)return zog("wire() - requires a target"),e;var c=So.DEFAULTWIRE;return null!=window.DEFAULTWIRE&&(c=window.DEFAULTWIRE),zot(l)&&(l=c&&"currentValue"!=c&&"selectedIndex"!=c||c&&e.hasOwnProperty(c)?c:e.hasOwnProperty("currentValue")?"currentValue":e.hasOwnProperty("selectedIndex")?"selectedIndex":o),zot(o)&&(o=l),e.addChild&&(e.zimWire=!0),t.addChild&&(t.zimWired=!0),So.Ticker.addWire(e,[t,o,n,r,i,a,l]),e},So.noWire=function(e,t,o,n){var r;return(r=zob(So.noWire,arguments,"source, target, prop, input"))?r:(z_d("33.25"),zot(So.Ticker)&&zon?zog("noWire() - requires ZIM Frame"):So.Ticker.removeWire(e,t,o,n),e)},So.wired=function(e,t,o,n,r,i,a,l){var s;return(s=zob(So.wired,arguments,"target, source, prop, twoWay, setSource, filter, call, input"))?s:(z_d("33.3"),zot(So.Ticker)&&zon?zog("wired() - requires ZIM Frame"):So.wire(t,e,o,n,r,i,a,l),e)},So.noWired=function(e,t,o,n){var r;return(r=zob(So.noWire,arguments,"target, source, prop, input"))?r:(z_d("33.35"),zot(So.Ticker)&&zon?zog("noWired() - requires ZIM Frame"):So.Ticker.removeWire(t,e,o,n),e)},So.bind=function(e,t,o,n,r,i){var a;return(a=zob(So.bind,arguments,"obj, id, props, extra, filter, bindObj"))?a:(z_d("33.17"),c?zot(t)?zon&&zogy("bind() - needs a unique id"):(i||c).add(t,e,o,n,r):zon&&zogy("bind() - needs a Bind() object created first"),e)},So.noBind=function(e,t,o,n,r){var i;return(i=zob(So.noBind,arguments,"obj, props, removeConnectionData, call, bindObj"))?i:(z_d("33.18"),c&&(r||c).remove(e,t,o,n),e)},So.transform=function(d,t,e,o,n,r,i,a,l,h,s,c,g,p,f,m,z,u,y,b,v,w,C,x,k,T,A,P,S){var B;if(B=zob(So.transform,arguments,"obj, move, stretchX, stretchY, scale, rotate, allowToggle, visible, onTop, showStretch, showRotate, showScale, showReg, showBorder, borderColor, borderWidth, dashed, customCursors, handleSize, regSize, snapDistance, snapRotation, cache, events, ghostColor, ghostWidth, ghostDashed, ghostHidden, frame"))return B;if(z_d("33.5"),zot(d)||!d.getBounds)return zog("zim methods - transform(): please provide object with bounds set"),d;if(!d.getBounds())return zog("zim methods - transform(): please setBounds() on object"),d;if(!d.parent)return zog("zim methods - transform(): object should be on stage first"),d;zot(t)&&(t=!0),zot(e)&&(e=!0),zot(o)&&(o=!0),0==d.width&&(e=!1),0==d.height&&(o=!1),zot(n)&&(n=!0),zot(r)&&(r=!0);var I=So.mobile();zot(i)&&(i=!0),zot(a)&&(a=!0),zot(l)&&(l=!0),zot(h)&&(h=!!I),zot(s)&&(s=!!I),zot(c)&&(c=!0),zot(g)&&(g=!0),zot(p)&&(p=!0),zot(f)&&(f="brown"),zot(m)&&(m=1),zot(k)&&(k=null),zot(T)&&(T=null),k<0||T<0?k=T=null:null!=k&&null==T&&(T=1),zot(A)&&(A=!0),zot(P)&&(P=!1),zot(S)&&(S=zdf),zot(u)&&(u=!I),zot(y)&&(y=I?20:10),zot(b)&&(b=16),zot(v)&&(v=10),zot(w)&&(w=5),zot(C)&&(C=!0),zot(x)&&(x=!1),d.mouseChildren=!1;var E=d.getConcatenatedMatrix().decompose(),O=d.stage?d.stage:S.stage;zot(S.eventRemove)&&(O.enableMouseOver(),S.ctrlKey=!1,S.shiftKey=!1,window.addEventListener("keydown",function(e){S.altKey=e.altKey,S.ctrlKey=e.ctrlKey}),window.addEventListener("keyup",function(e){S.altKey=e.altKey,S.ctrlKey=e.ctrlKey}));var M=d.getBounds(),j=new So.Shape({style:!1}),L=new So.Shape({style:!1}),Y=new So.Shape({style:!1});L.mouseEnabled=!1,Y.controlType="reg";var _,D,X,R,W,H,F,V,N,G=d.parent,q=j.graphics,Q=L.graphics,U=Y.graphics,K=new So.Container({style:!1});K.type="TransformControls";var Z,J,$,ee,te,oe,ne,re,ie=new So.Container({style:!1}),ae=new So.Container({style:!1}),le=new So.Container({style:!1}),se=new So.Container({style:!1});function ce(e){e==oe&&new So.Triangle(16,12,12,"white").addTo(e).mov(0,-13.5),new So.Triangle(16,12,12,"white").addTo(e).mov(13.5).rot(90),e==oe&&new So.Triangle(16,12,12,"white").addTo(e).mov(0,13.5).rot(180),new So.Triangle(16,12,12,"white").addTo(e).mov(-13.5).rot(-90),e==oe&&new So.Triangle(10,7,7,"black").addTo(e).mov(0,-13),new So.Triangle(10,7,7,"black").addTo(e).mov(13).rot(90),e==oe&&new So.Triangle(10,7,7,"black").addTo(e).mov(0,13).rot(180),new So.Triangle(10,7,7,"black").addTo(e).mov(-13).rot(-90),C&&e.cache(-20,-20,40,40)}function ue(){var e=d;for($=J=1,te=ee=Z=0;e.parent;)Z+=e.rotation,J*=e.scaleX,$*=e.scaleY,ee+=e.skewX,te+=e.skewY,e=e.parent}zot(d.zimMaskDynamic)||d.zimMaskApply(),u&&(oe=new So.Container({style:!1}),ne=new So.Container({style:!1}),ce(oe),ce(ne),re={"nw-resize":45,"ne-resize":-45,"n-resize":90,"e-resize":0}),ue();for(var de=Z,he=["nw-resize","ne-resize","nw-resize","ne-resize"],ge=[2,3,0,1],pe=0;pe<4;pe++){c?((be=new So.Rectangle(y,y,"#e472c4","#333",2,null,null,null,!1)).centerReg(ie),C&&be.cache(-1,-1,y+2,y+2)):((be=new So.Rectangle(y,y,"rgba(0,0,0,0)","rgba(0,0,0,0)",2,null,null,null,!1)).centerReg(ie),be.expand(0)),be.rotation=Z,F=u?"none":he[pe],be.drag({overCursor:F,dragCursor:F,onTop:!1}),be.controlType="corner",be.cu=he[pe]}for(pe=0;pe<ge.length;pe++)ie.getChildAt(pe).op=ie.getChildAt(ge[pe]);for(var fe=["n-resize","e-resize","n-resize","e-resize"],ge=[1,1,0,0],pe=0;pe<4;pe++){var me=pe%2==0?d.width/2:y,ze=pe%2==0?y:d.height/2;h?((be=new So.Rectangle(y,y,"#AAA","#333",2,null,null,null,!1)).centerReg(pe%2==0?le:ae),C&&be.cache(-1,-1,y+2,y+2)):((be=new So.Rectangle(me,ze,"rgba(0,0,0,0)",null,null,null,null,null,!1)).centerReg(pe%2==0?le:ae),be.expand(0)),be.rotation=Z,F=u?"none":fe[pe],be.drag({overCursor:F,dragCursor:F,onTop:!1}),be.controlType="side",be.cu=fe[pe]}for(pe=0;pe<ge.length;pe++){var ye=pe%2==0?le:ae;ye.getChildAt(Math.floor(pe/2)).op=ye.getChildAt(ge[pe])}for(var be,ve=["ne-resize","nw-resize","ne-resize","nw-resize"],pe=0;pe<4;pe++){s?((be=new So.Circle(y,"#e472c4",null,null,null,null,null,null,!1)).addTo(se),C&&be.cache(-y,-y,2*y,2*y)):((be=new So.Circle(y,"rgba(0,0,0,0)",null,null,null,null,null,null,!1)).addTo(se),be.expand(0)),F=u?"none":ve[pe],be.drag({overCursor:F,dragCursor:F,onTop:!1}),be.controlType="rotate",be.cu=ve[pe]}var we=1.8;function Ce(){var e=y*we*So.sign(J),t=y*we*So.sign($);se.getChildAt(0).reg(e,t),se.getChildAt(1).reg(-e,t),se.getChildAt(2).reg(-e,-t),se.getChildAt(3).reg(e,-t),O.update()}function xe(){q.c(),Q.c(),U.c(),_=d.localToGlobal(M.x,M.y),D=d.localToGlobal(M.x+M.width,M.y),X=d.localToGlobal(M.x+M.width,M.y+M.height),R=d.localToGlobal(M.x,M.y+M.height);var e=d.localToGlobal(M.x+M.width/2,M.y),t=d.localToGlobal(M.x+M.width,M.y+M.height/2),o=d.localToGlobal(M.x+M.width/2,M.y+M.height),n=d.localToGlobal(M.x,M.y+M.height/2);W=d.localToGlobal(d.regX,d.regY),H=d.localToGlobal(M.x+M.width/2,M.y+M.height/2),N=[_,D,X,R],V=[e,t,o,n],p&&(q.s(f),z&&q.sd([10,5],0),q.ss(m).mt(_.x,_.y).lt(D.x,D.y).lt(X.x,X.y).lt(R.x,R.y).lt(_.x,_.y).cp()),zot(k)||(Q.s(k),A&&Q.sd([10,5],0),Q.ss(T).mt(_.x,_.y).lt(D.x,D.y).lt(X.x,X.y).lt(R.x,R.y).lt(_.x,_.y).cp()),j.setBounds(_.x,_.y,D.x-_.x,R.y-_.y),g&&(U.s("#eee").ss(m).f("rgba(0,0,0,.1)").dc(0,0,b),U.s("#222").ss(m).dc(0,0,.3*b)),ue();for(var r=Math.min(50,Math.abs(ee))*So.sign(ee),i=Math.min(50,Math.abs(te))*So.sign(te),a=Z*So.sign(J*$)*So.sign(d.scaleX*d.scaleY),l=0;l<N.length;l++){var s=N[l];ie.getChildAt(l).loc(s.x,s.y).ske(r,i).rot(a),se.getChildAt(l).loc(s.x,s.y).rot(a);var c=V[l],u=l%2==0?le:ae;u.getChildAt(Math.floor(l/2)).loc(c.x,c.y).ske(r,i).rot(a),h||u.getChildAt(Math.floor(l/2)).sca(l%2==0?J/2:1,l%2==0?1:$/2)}Y.x=W.x,Y.y=W.y}se.alpha=.5,Ce(),xe();var ke=new So.Shape(1e3,1e3,null,null,null,!1);function Te(){ke.x=0,ke.y=0,ke.graphics.c().f("rgba(0,0,0,.01)").mt(_.x,_.y).lt(D.x,D.y).lt(X.x,X.y).lt(R.x,R.y).lt(_.x,_.y).cp(),ke.reg(W.x,W.y),ke.x=W.x,ke.y=W.y}Te(),K.on("dblclick",function(e){S.ctrlKey&&d.transformControls.visible&&(d.scaleX=1,d.scaleY=1,d.rotation=0,xe(),Te(),O.update()),$e(e,!0)});var Ae=K.on("mousedown",Se),Pe=d.on("mousedown",Se);function Se(e){var t=O.getObjectUnderPoint(e.stageX,e.stageY,1);I||t&&(d.contains&&d.contains(t)||!d.contains&&d==t)?d.transformControls.visible||(u?(it=!1,ke.mouseEnabled=!1):S.canvas.style.cursor="move",d.transformControls.show(),d.dispatchEvent("transformshow")):!d.transformControls.visible||t&&K.contains(t)||(d.transformControls.hide(),d.dispatchEvent("transformhide"))}var Be,Ie,Ee,Oe,Me,je,Le,Ye,_e,De,Xe,Re,We,He=O.on("stagemousedown",function(e){var t=O.getObjectUnderPoint(e.stageX,e.stageY,1),o=t&&t.parent&&t.parent.layer&&t.parent.layer==d;!d.transformControls.visible||t&&(K.contains(t)||o)||(d.dispatchEvent("transformhide"),d.transformControls.hide())});i||(K.off("mousedown",Ae),d.off("mousedown",Pe),O.off("stagemousedown",He));var Fe,Ve,Ne,Ge,qe=!1,Qe=!1,Ue=d.cursor,Ke=new So.Circle(30,"rgba(0,0,0,0)",null,null,null,null,null,null,!1).expand(20);function Ze(e){var t,o,n;Qe=!0,l&&nt(),Fe&&O.off("stagemousemove",Fe),Be=e.target.x,Ie=e.target.y,De=d.x,Xe=d.y,Ee=d.scaleX,Oe=d.scaleY,"rotate"==e.target.controlType&&(qe=!0,Me=d.rotation,t=e.stageX/So.scaX,o=e.stageY/So.scaY,n=G.localToGlobal(De,Xe),Re=n.x,We=n.y,je=180*Math.atan2(o-We,t-Re)/Math.PI),Ye=S.ctrlKey||"rotate"==e.target.controlType?(Le=Math.abs(Be-d.x),Math.abs(Ie-d.y)):(Le=Math.abs(Be-e.target.op.x),Math.abs(Ie-e.target.op.y)),"rotate"!=e.target.controlType&&(_e=e.target.op.parent.localToLocal(e.target.op.x,e.target.op.y,d.parent)),Ke.stage?O.setChildIndex(Ke,O.getChildIndex(K)):Ke.addTo(O,O.getChildIndex(K)+1),Ke.x=e.stageX/So.scaX,Ke.y=e.stageY/So.scaY,Ke.cursor=u?"none":e.target.cu,u&&(d.getConcatenatedMatrix().decompose(E),E.rotation||(E.rotation=0),ne.rotation=E.rotation*So.sign(J*$)*So.sign(d.scaleX*d.scaleY)+re[e.target.cu]+de,"side"!=e.target.controlType&&J*$<0&&(ne.rotation+=90),Ge.addTo(O,1).pos({x:e.stageX/So.scaX,y:e.stageY/So.scaY,reg:!0})),ke.visible=!1,d.cursor="none"}function Je(e){var t,o=1;S.ctrlKey&&"corner"==e.target.controlType?o=Ye<Le?(e.target.x-De)/(Be-De):(e.target.y-Xe)/(Ie-Xe):Ye<Le?Be-e.target.op.x&&(o=(e.target.x-e.target.op.x)/(Be-e.target.op.x)):Ie-e.target.op.y&&(o=(e.target.y-e.target.op.y)/(Ie-e.target.op.y)),"corner"==e.target.controlType?(d.scaleX=o*Ee,d.scaleY=o*Oe):(d.scaleX="e-resize"==e.target.cu?o*Ee:Ee,d.scaleY="n-resize"==e.target.cu?o*Oe:Oe),xe(),Ke.x=e.stageX/So.scaX,Ke.y=e.stageY/So.scaY,u&&(Ge.x=e.stageX/So.scaX,Ge.y=e.stageY/So.scaY),S.ctrlKey&&"side"!=e.target.controlType||(t=e.target.op.parent.localToLocal(e.target.op.x,e.target.op.y,d.parent),d.x-=(t.x-_e.x)*So.sign(J)*So.sign(d.scaleX),d.y-=(t.y-_e.y)*So.sign($)*So.sign(d.scaleY)),xe(),d.transformControls.events&&et(e,e.target.controlType)}function $e(e,t){Ce();var o=e?e.target.controlType:"move";t&&(o="reset"),u&&Ge.removeFrom(O),et(e,o,!0),O.update()}function et(e,t,o,n){null==n&&(n=!0);var r=!1;Ne=null,"move"==t?(d.x==at.x&&d.y==at.y||((Ne=new createjs.Event("transformed")).transformType="move"),n&&(r=ke.hitTestPoint(e.stageX/So.scaX,e.stageY/So.scaY))):"corner"==t?(d.scaleX==at.scaleX&&d.scaleY==at.scaleY||((Ne=new createjs.Event("transformed")).transformType="size"),n&&(r=ie.hitTestPoint(e.stageX/So.scaX,e.stageY/So.scaY))):"side"==t?(d.scaleX==at.scaleX&&d.scaleY==at.scaleY||((Ne=new createjs.Event("transformed")).transformType="stretch"),n&&(r=ae.hitTestPoint(e.stageX/So.scaX,e.stageY/So.scaY)||le.hitTestPoint(e.stageX/So.scaX,e.stageY/So.scaY))):"rotate"==t?(d.rotation!=at.rotation&&((Ne=new createjs.Event("transformed")).transformType="rotate"),n&&(r=se.hitTestPoint(e.stageX/So.scaX,e.stageY/So.scaY))):"reg"==t?d.regX==at.regX&&d.regY==at.regY||((Ne=new createjs.Event("transformed")).transformType="reg"):(Ne=new createjs.Event("transformed")).transformType="reset"==t?"reset":"unknown",n&&!r&&(Ke.removeFrom(O),S.canvas.style.cursor="default",d.cursor=Ue),Ne&&(Ne.pressup=o,d.dispatchEvent(Ne))}function tt(e){Qe||(Ke.stage?O.setChildIndex(Ke,O.getChildIndex(K)):Ke.addTo(O,O.getChildIndex(K)+1),Ge.addTo(O,1),Ke.x=e.stageX/So.scaX,Ke.y=e.stageY/So.scaY,Ge.x=e.stageX/So.scaX,Ge.y=e.stageY/So.scaY,d.getConcatenatedMatrix().decompose(E),E.rotation||(E.rotation=0),ne.rotation=E.rotation*So.sign(J*$)*So.sign(d.scaleX*d.scaleY)+re[e.target.cu]+de,"side"!=e.target.controlType&&J*$<0&&(ne.rotation+=90),O.update(),Fe&&O.off("stagemousemove",Fe),Fe=O.on("stagemousemove",function(e){Ke.x=e.stageX/So.scaX,Ke.y=e.stageY/So.scaY,O.update()}))}function ot(e){O.off("stagemousemove",Fe),Qe||(d.cursor=Ue,Ke.removeFrom(O),Ge.removeFrom(O),O.update())}function nt(){var e;l&&(e=G.numChildren-1,"Keyboard"==G.getChildAt(e).type&&e--,G.setChildIndex(d,e),rt())}function rt(){if(G==O)K.removeFrom(),O.addChildAt(K,O.getChildIndex(d)+1);else{for(var e=G;e.parent&&e.parent!=O;)e=e.parent;d.stage&&(K.parent==O&&O.removeChild(K),O.addChildAt(K,O.getChildIndex(e)+1))}}u&&(Ke.mouseEnabled=!1,Ke.mouseChildren=!1,Ke.addChild(ne),ie.on("mouseover",tt),ie.on("mouseout",ot),ae.on("mouseover",tt),ae.on("mouseout",ot),le.on("mouseover",tt),le.on("mouseout",ot),se.on("mouseover",tt),se.on("mouseout",ot),(Ge=new So.Circle(30,"rgba(0,0,0,0)",null,null,null,null,null,null,!1).expand(20)).cursor="none"),ie.on("mousedown",Ze),ie.on("pressmove",Je),ie.on("pressup",$e),ae.on("mousedown",Ze),ae.on("pressmove",Je),ae.on("pressup",$e),le.on("mousedown",Ze),le.on("pressmove",Je),le.on("pressup",$e),se.on("mousedown",Ze),se.on("pressmove",function(e){var t=180*Math.atan2(e.stageY/So.scaY-We,e.stageX/So.scaX-Re)/Math.PI;S.shiftKey?d.rot(45*Math.round((Me+(t-je)*So.sign(J)*So.sign(d.scaleX))/45)):d.rot(Me+(t-je)*So.sign(J)*So.sign(d.scaleX));xe(),Ke.x=e.stageX/So.scaX,Ke.y=e.stageY/So.scaY,u&&(d.getConcatenatedMatrix().decompose(E),E.rotation||(E.rotation=0),ne.rotation=E.rotation*So.sign(J*$)*So.sign(d.scaleX*d.scaleY)+re[e.target.cu]+de,"side"!=e.target.controlType&&J*$<0&&(ne.rotation+=90),Ge.x=e.stageX/So.scaX,Ge.y=e.stageY/So.scaY);{var o;xe(),d.transformControls.events&&(o=e.target.controlType,et(e,o,null,!1))}}),se.on("pressup",$e),Y.drag(),Y.on("mousedown",nt),Y.on("pressup",function(e){if(!S.ctrlKey){for(var t=0;t<N.length;t++)if(So.dist(Y.x,Y.y,N[t].x,N[t].y)<v){Y.x=N[t].x,Y.y=N[t].y;break}So.dist(Y.x,Y.y,H.x,H.y)<v&&(Y.x=H.x,Y.y=H.y)}var o,n=d.rotation,r=d.globalToLocal(Y.x,Y.y);o=G==O?new So.Point(Y.x,Y.y):G.globalToLocal(Y.x,Y.y),d.reg(r.x,r.y),d.rotation=0,d.x=d.x+o.x-d.x,d.y=d.y+o.y-d.y,d.rotation=n,xe(),Te(),$e(e),O.update()});var it=!0;F=u?"none":"move",ke.drag({overCursor:F,dragCursor:F,onTop:!1}),ke.controlType="move",u&&(ke.on("mouseover",function(e){if(Qe||!u||!it)return;oe.addTo(K).pos({x:e.stageX/So.scaX,y:e.stageY/So.scaY,reg:!0}),O.update(),Ve&&O.off("stagemousemove",Ve);Ve=O.on("stagemousemove",function(e){oe.x=e.stageX/So.scaX,oe.y=e.stageY/So.scaY,O.update()})}),ke.on("mouseout",function(){if(O.off("stagemousemove",Ve),Qe)return;oe.removeFrom(K),O.update()})),ke.on("mousedown",nt),ke.on("pressmove",function(e){var t;d.transformControls.visible&&(t=G==O?new So.Point(ke.x,ke.y):G.globalToLocal(ke.x,ke.y),d.x=t.x,d.y=t.y,xe(),d.transformControls.events&&et(e,"move"))}),ke.on("pressup",function(e){d.transformControls.visible&&$e(e)});var at,lt=O.on("stagemouseup",function(){Qe=!1,ke.mouseEnabled=!0,it||(Ne=new createjs.Event("transformed"),d.x!=at.x||d.y!=at.y?Ne.transformType="move":Ne.transformType="select",Ne.pressup=!0,d.dispatchEvent(Ne)),it=!0,ke.visible=!0,qe&&!S.ctrlKey&&1<w&&(d.rotation=Math.round(d.rotation/w)*w,xe()),Te(),ke.mouseEnabled=!0,qe=!1,O.update()});function st(){at={x:d.x,y:d.y,rotation:d.rotation,regX:d.regX,regY:d.regY,scaleX:d.scaleX,scaleY:d.scaleY}}st();var ct,ut=d.on("mousedown",st);K.on("mousedown",st);K.addChild(j),t&&K.addChild(ke),n&&K.addChild(ie),e&&K.addChild(ae),o&&K.addChild(le),r&&K.addChild(se),K.addChild(Y),t&&(d.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),ct=d.on("pressmove",function(e){xe(),Te(),Ce(),d.transformControls.events&&et(e,"move")}));var dt=i;return d.transformControls={visible:a,events:x,ghost:!zot(k),ghostEnabled:!zot(k),show:function(){return l&&nt(),rt(),d.toggled=!0,d.transformControls.visible=!0,L.parent&&L.removeFrom(),O.update(),d},hide:function(){var e;return d.transformControls.ghost&&(e=O.getChildIndex(K)),O.removeChild(K),d.transformControls.ghost&&d.transformControls.ghostEnabled&&O.addChildAt(L,e),d.toggled=!1,d.transformControls.visible=!1,u&&(Fe&&O.off("stagemousemove",Fe),Ve&&O.off("stagemousemove",Ve),Qe=!1,Ke.removeFrom(O),Ge.removeFrom(O)),t||(d.cursor=Ue),O.update(),d},remove:function(e){e||d.transformControls.hide(),i=!1,t&&(d.noDrag(),d.off("pressmove",ct))},add:function(e){e||d.transformControls.show(),i=dt,t&&(d.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),ct=d.on("pressmove",ct))},allowToggleOn:function(){i=dt=!0,Ae=K.on("mousedown",Ae),Pe=d.on("mousedown",Pe),He=O.on("stagemousedown",He)},allowToggleOff:function(){i=dt=!1,K.off("mousedown",Ae),d.off("mousedown",Pe),O.off("stagemousedown",He)},disable:function(){K.mouseChildren=!1,K.mouseEnabled=!1,t&&(d.noDrag(),d.off("pressmove",ct))},enable:function(){K.mouseChildren=!0,K.mouseEnabled=!0,t&&(d.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),ct=d.on("pressmove",ct))},recordData:function(e){var t={type:d.type,index:G.getChildIndex(d),x:d.x,y:d.y,scaleX:d.scaleX,scaleY:d.scaleY,rotation:d.rotation,skewX:d.skewX,skewY:d.skewY,regX:d.regX,regY:d.regY,controls:d.transformControls.visible};return e?JSON.stringify(t):t},setData:function(e,t){if(!zot(e)){t&&(e=JSON.parse(e));e.controls;delete e.controls;var o=e.index;for(var n in zot(o)&&(o=0),delete e.index,e)d[n]=e[n];return setTimeout(function(){xe(),Te(),Ce(),G.setChildIndex(d,o),d.transformControls.visible&&"Layer"!=d.type?d.transformControls.show():d.transformControls.hide(),!d.transformControls.ghost||d.transformControls.ghostEnabled||d.transformControls.visible||O.addChild(L)},90),d}},hideGhost:function(){d.transformControls.ghost=!1,L.removeFrom()},showGhost:function(){if(d.transformControls.ghost=!0,d.transformControls.ghostEnabled&&!d.transformControls.visible){for(var e=G;e.parent&&e.parent!=O;)e=e.parent;L.stage?O.setChildIndex(L,O.getChildIndex(e)+1):O.addChildAt(L,O.getChildIndex(e)+1)}},addGhost:function(){0<T?(d.transformControls.ghostEnabled=!0,d.transformControls.showGhost()):zon&&zogy("transform() - ghostWidth must be > 0 when making transform")},removeGhost:function(){d.transformControls.ghostEnabled=!1,d.transformControls.hideGhost()},resize:function(e){var t;return G=d.parent,xe(),Te(),Ce(),a&&d.transformControls.show(),e&&((t=new createjs.Event("transformed")).pressup=!0,t.transformType="resize",d.dispatchEvent(t)),d},dispose:function(){d.transformControls.hide(),i=!1,t&&(d.noDrag(),d.off("pressmove",ct)),d.transformControls.hideGhost(),ke.removeAllEventListeners(),se.removeAllEventListeners(),Y.removeAllEventListeners(),ae.removeAllEventListeners(),le.removeAllEventListeners(),ie.removeAllEventListeners(),K.removeAllEventListeners(),Pe&&d.off("mousedown",Pe),Ae&&d.off("mousedown",Ae),He&&O.off("stagemousedown",He),Fe&&O.off("stagemousemove",Fe),Ve&&O.off("stagemousemove",Ve),lt&&O.off("stagemouseup",lt),ut&&d.off("mousedown",ut),ct&&d.off("pressmove",ct),K=Ke=Ge=null,d.transformControls=null},controls:K,scaleControls:ie,stretchXControls:ae,stretchYControls:le,rotateControls:se},d.toggle=function(e){return!0!==e&&(!1===e||d.transformControls.visible)?d.transformControls.hide():d.transformControls.show(),d},d.transformControls.ghost&&(d.transformControls.toggleGhost=function(e){return!0!==e&&(!1===e||d.transformControls.visible)?d.transformControls.hideGhost():d.transformControls.showGhost(),d}),a?d.transformControls.show():!P&&d.transformControls.ghost&&d.transformControls.showGhost(),d},So.gesture=function(x,e,t,s,o,k,T,c,n,u,d,A,r,i,a,l){var h,g,p,f,m;if(h=zob(So.gesture,arguments,"obj, move, scale, rotate, boundary, minScale, maxScale, snapRotate, localBounds, slide, slideEffect, regControl, onTop, surround, circularBounds, rect"))return h;if(z_d("34.5"),!zot(x)&&x.on){zot(e)&&(e=!0),zot(t)&&(t=!0),zot(s)&&(s=!0),zot(n)&&(n=!1),zot(c)&&(c=1),zot(u)&&(u=!1),zot(d)&&(d=5),zot(A)&&(A=!1),zot(r)&&(r=!0),zot(i)&&(i=!1),i&&s&&(i=l=null,zon&&zogy("gesture() - does not support surround when rotate is true")),zot(a)&&(a=!1),zot(o)&&!zot(l)&&(o=l);var P,S,B,z,I,E,O,M,j,L,Y,y,b=Bo();return zot(x.zimMaskDynamic)||x.zimMaskApply(),x.zimTouch||(P=new So.Damp(x.scaleX,.05),S=new So.Damp(x.scaleY,.05),B=x.scaleX/x.scaleY,x.zimTouch={move:e,scale:t,rotate:s,pointers:{},checkBounds:function(e,t){var o,n;return x.zimTouch.boundary&&(o=x.zimTouch.boundary,n=x.parent.localToLocal(e,t,x.parent),t=i?(e=Math.min(o.x,Math.max(o.x+o.width,n.x)),Math.min(o.y,Math.max(o.y+o.height,n.y))):(e=Math.max(o.x,Math.min(o.x+o.width,n.x)),Math.max(o.y,Math.min(o.y+o.height,n.y))),e=(n=x.parent.globalToLocal(e,t)).x,t=n.y),{x:e,y:t}}},o&&(x.zimTouch.boundary=o,n&&(x.zimTouch.boundary=So.boundsToGlobal(x.parent,o)),x.zimTouch.boundaryStartX=x.zimTouch.boundary.x,x.zimTouch.boundaryStartY=x.zimTouch.boundary.y,x.zimTouch.boundaryStartW=x.zimTouch.boundary.width,x.zimTouch.boundaryStartH=x.zimTouch.boundary.height,z=x.zimTouch.checkBounds(x.x,x.y),x.x=z.x,x.y=z.y),u&&(f=10,m=5,p=0,g=[],x.zimTouch.slideInterval=So.interval(f/("s"==b?1e3:1),function(){g[p++%m]=[x.x,x.y]}),x.zimTouch.slideInterval.pause(),x.animate({x:x.x,y:x.y},10/("s"==b?1e3:1),"quadOut")),x.zimTouch.mousedown=x.on("mousedown",function(e){zot(y)?y=1:y++;var t;x.stage;r&&(t=x.parent.numChildren-1,"Keyboard"==x.parent.getChildAt(t).type&&t--,x.parent.setChildIndex(x,t),x.ZIMoutlineShape&&x.outline()),A||(Y=null,E=x.scaleX,O=x.scaleY,M=x.rotation,j=x.regX,L=x.regY,x.reg(0,0),I=x.getMatrix(),x.regX=j,x.regY=L);var o="id"+Math.abs(e.pointerID+1),n=x.parent.globalToLocal(e.stageX/So.scaX,e.stageY/So.scaY);x.zimTouch.pointers[o]={startX:n.x,startY:n.y,x:n.x,y:n.y},(x.zimTouch.move||x.zimTouch.rotate)&&(x.zimTouch.total=0,So.loop(x.zimTouch.pointers,function(e){x.zimTouch.total++})),u&&1==x.zimTouch.total&&x.zimTouch.slideInterval.pause(!1),v()}),x.zimTouch.pressmove=x.on("pressmove",function(e){x.stage;var t="id"+Math.abs(e.pointerID+1),o=x.parent.globalToLocal(e.stageX/So.scaX,e.stageY/So.scaY);x.zimTouch.pointers[t]&&(x.zimTouch.pointers[t].x=o.x,x.zimTouch.pointers[t].y=o.y);var n,r,i=0,a=0,l=0,s=0;So.loop(x.zimTouch.pointers,function(e,t){i+=t.x-t.startX,a+=t.y-t.startY,l+=t.x,s+=t.y}),n=i/x.zimTouch.total,r=a/x.zimTouch.total,i=x.zimTouch.startX+n,a=x.zimTouch.startY+r,l/=x.zimTouch.total,s/=x.zimTouch.total;var c,u,d,h,g,p,f,m,z,y,b,v,w,C={x:x.x,y:x.y,scaleX:x.scaleX,scaleY:x.scaleY,rotation:x.rotation};x.zimTouch.move&&(c=x.zimTouch.checkBounds(i,a),C.x=c.x,C.y=c.y),2==x.zimTouch.pair.length?(u=x.zimTouch.pair[0],d=x.zimTouch.pair[1],x.zimTouch.scale&&(h=Math.sqrt(Math.pow(d.startX-u.startX,2)+Math.pow(d.startY-u.startY,2)),g=Math.sqrt(Math.pow(d.x-u.x,2)+Math.pow(d.y-u.y,2)),p=x.zimTouch.startSX+(g/h-1),f=x.zimTouch.startSY+(g/h-1),C.scaleX=p,C.scaleY=f,C.scaleX=P.convert(p),C.scaleY=S.convert(f),m=!zot(k)&&Math.min(p,f)<k,z=!zot(T)&&Math.max(p,f)>T,(m||z)&&(m?1<B?(C.scaleY=k,C.scaleX=k*B):(C.scaleX=k,C.scaleY=k/B):z&&(1<B?(C.scaleX=T,C.scaleY=T/B):(C.scaleY=T,C.scaleX=T*B)),P.immediate(C.scaleX),S.immediate(C.scaleY))),x.zimTouch.rotate&&(y=Math.atan2(u.startY-d.startY,u.startX-d.startX)*(180/Math.PI),b=Math.atan2(u.y-d.y,u.x-d.x)*(180/Math.PI)-y,C.rotation=x.zimTouch.startR+b),A?(x.scaleX=C.scaleX,x.scaleY=C.scaleY,x.rotation=C.rotation,x.zimTouch.move&&(x.x=C.x,x.y=C.y)):(x.reg(0,0),v=x.parent.localToGlobal(l,s),l=v.x,s=v.y,w=zot(Y)?x.globalToLocal(l,s):x.globalToLocal(Y.x,Y.y),I.clone().translate(w.x,w.y).rotate(C.rotation-M).scale(C.scaleX/E,C.scaleY/O).translate(-w.x,-w.y).decompose(x),x.zimTouch.move&&(x.x+=n,x.y+=r),Y=x.localToGlobal(w.x,w.y),x.reg(j,L)),x.zimTouch.scale&&x.dispatchEvent("scale"),x.zimTouch.rotate&&x.dispatchEvent("rotate")):(x.x=C.x,x.y=C.y),x.zimTouch.move&&x.dispatchEvent("move"),"Tag"!=x.type&&"TextArea"!=x.type&&"Loader"!=x.type||x.resize(),x.ZIMoutlineShape&&x.outline(),x.getStage&&x.stage&&x.stage.update()}),x.on("mousedown",function(){var e=1;x.stage.on("stagemousedown",function(){e++}),x.stage.on("stagemouseup",function(){0==--e&&setTimeout(function(){x.zimTouch&&(x.zimTouch.total=0),x.zimTouch&&(x.zimTouch.pointers={}),y=null},50)})},null,!0),x.zimTouch.pressup=x.on("pressup",function(e){var t,o,n,r,i,a,l="id"+Math.abs(e.pointerID+1);delete x.zimTouch.pointers[l],(x.zimTouch.move||x.zimTouch.rotate)&&x.zimTouch.total--,s&&!zot(c)&&0==x.zimTouch.total&&(0<c?x.rotation=Math.round(x.rotation/c)*c:0==c&&(x.rotation=Math.round(x.rotation))),u&&0==x.zimTouch.total&&1==y&&(x.zimTouch.slideInterval.pause(),t=g[(p+1)%g.length],o=g[p%g.length],n=x.x+(t[0]-o[0])*d,r=x.y+(t[1]-o[1])*d,i=x.zimTouch.checkBounds(n,r),a=m*f*d*Math.min((x.x-i.x)/(x.x-n)||1,(x.y-i.y)/(x.y-r)||1),x.animate({x:i.x,y:i.y},a/("s"==b?1e3:1),"quadOut",function(){x.dispatchEvent("slidestop")})),0==x.zimTouch.total&&(y=null),x.getStage&&x.stage&&x.stage.update(),v()}),o&&(w(),x.on("move",w))),x}function v(){x.zimTouch.pair=[],So.loop(x.zimTouch.pointers,function(e,t,o){t.startX=t.x,t.startY=t.y,o<=1&&x.zimTouch.pair.push(t)}),x.zimTouch.startX=x.x,x.zimTouch.startY=x.y,x.zimTouch.startSX=x.scaleX,x.zimTouch.startSY=x.scaleY,x.zimTouch.startR=x.rotation}function w(){var e,t,o,n=x.localToGlobal(x.regX,x.regY);o=a?(e=x.parent.localToGlobal(x.x-x.width/2,x.y-x.height/2),t=x.parent.localToGlobal(x.x+x.width/2,x.y+x.height/2),{x:e.x,y:e.y,width:t.x-e.x,height:t.y-e.y}):x.boundsToGlobal();var r={x:x.zimTouch.boundaryStartX+n.x-o.x,y:x.zimTouch.boundaryStartY+n.y-o.y,width:x.zimTouch.boundaryStartW-o.width,height:x.zimTouch.boundaryStartH-o.height};x.gestureBoundary(r,!1)}},So.noGesture=function(e,t,o,n){var r;return(r=zob(So.noGesture,arguments,"obj, move, scale, rotate"))?r:(z_d("34.6"),!zot(e)&&e.on&&e.zimTouch?(zot(t)&&(t=!0),zot(o)&&(o=!0),zot(n)&&(n=!0),e.zimTouch.move=!t,e.zimTouch.scale=!o,e.zimTouch.rotate=!n,e.zimTouch.move||e.zimTouch.scale||e.zimTouch.rotate||(e.off("mousedown",e.zimTouch.mousedown),e.off("pressmove",e.zimTouch.pressmove),e.off("pressup",e.zimTouch.pressup),delete e.zimTouch),e):void 0)},So.gestureBoundary=function(e,t,o){if(z_d("34.7"),!zot(e)&&e.on&&!zot(t)&&e.zimTouch){e.zimTouch.localBounds&&e.parent?e.zimTouch.boundary=So.boundsToGlobal(e.parent,t):e.zimTouch.boundary=t,zot(o)&&(o=!0),o&&(e.zimTouch.boundaryStartX=t.x,e.zimTouch.boundaryStartY=t.y,e.zimTouch.boundaryStartW=t.width,e.zimTouch.boundaryStartH=t.height);var n=e.zimTouch.checkBounds(e.x,e.y);return e.x=n.x,e.y=n.y,e}},So.addPhysics=function(e,t,o,n,r,i,a,l,s,c,u,d,h){var g;if(g=zob(So.addPhysics,arguments,"obj, dynamic, contract, shape, friction, linear, angular, density, bounciness, maskBits, categoryBits, physics, restitution"))return g;if(z_d("34.8"),zot(d)){if("undefined"==typeof zimPhysics)return zon&&zog("ZIM Physics module must be imported"),e;zot(zimDefaultPhysics)&&(zimDefaultPhysics=new So.Physics),d=zimDefaultPhysics}e.physics=d;var p="rectangle";return"Circle"==e.type||"Dial"==e.type?p="circle":"Triangle"==e.type&&(p="triangle"),zot(n)&&(n=p),zot(s)&&(s=h),function(g,e,t,o,n,r,i,a,l,s,c){z_d("69.97"),zot(t)&&(t=0);"rectangle"==o?g.body=g.physics.makeRectangle(g.width-t,g.height-t,e,n,i,a,l,s,c,r):"circle"==o?g.body=g.physics.makeCircle(g.width/2-t,e,n,i,a,l,s,c,r):"triangle"==o&&(zot(g.a)&&(g.a=g.width,g.b=g.c=Math.sqrt(Math.pow(g.a/2,2)+Math.pow(g.height,2))),g.body=g.physics.makeTriangle(g.a-t,g.b-t,g.c-t,e,n,i,a,l,s,c,r));function u(){zimContactListener=new b2ContactListener,f=new So.Dictionary(!0),m=new So.Dictionary(!0),zimContactListener.BeginContact=function(e){var t=f.at(e.m_fixtureB.GetBody());t&&t(e.m_fixtureA.GetBody().zimObj,e.m_fixtureA.GetBody());(t=f.at(e.m_fixtureA.GetBody()))&&t(e.m_fixtureB.GetBody().zimObj,e.m_fixtureB.GetBody())},zimContactListener.EndContact=function(e){var t=m.at(e.m_fixtureB.GetBody());t&&t(e.m_fixtureA.GetBody().zimObj,e.m_fixtureA.GetBody());(t=m.at(e.m_fixtureB.GetBody().zimObj,e.m_fixtureB.GetBody()))&&t(e.m_fixtureB.GetBody())},g.physics.world.SetContactListener(zimContactListener)}g.body.x=g.x,g.body.y=g.y,g.body.rotation=g.rotation,g.physics.addMap(g.body,g),g.impulse=function(e,t,o,n){zot(e)&&(e=0),zot(t)&&(t=0);var r=g.body.GetWorldCenter();return zot(o)&&(o=r.x*g.physics.scale),zot(n)&&(n=r.y*g.physics.scale),g.body.ApplyImpulse(new b2Vec2(e,t),new b2Vec2(o/g.physics.scale,n/g.physics.scale)),g},g.force=function(e,t,o,n){zot(e)&&(e=0),zot(t)&&(t=0);var r=g.body.GetWorldCenter();return zot(o)&&(o=r.x*g.physics.scale),zot(n)&&(n=r.y*g.physics.scale),g.body.ApplyForce(new b2Vec2(e,t),new b2Vec2(o/g.physics.scale,n/g.physics.scale)),g},g.setLinearVelocity=function(e,t){return g.body.SetLinearVelocity(new b2Vec2(e,t)),g},g.setAngularVelocity=function(e){return g.body.SetAngularVelocity(e),g},g.spin=function(e){return zot(e)&&(e=10),g.body.ApplyTorque(1e3*e),g},g.torque=function(e){return zot(e)&&(e=10),g.body.ApplyTorque(e),g},g.follow=function(e,t,o,n,r,i,a,l,s,c,u,d){var h;return(h=zob(g.follow,arguments,"damp, dampY, leftOffset, rightOffset, upOffset, downOffset, offsetDamp, offsetDampY, horizontal, vertical, borderLock, borderOriginal"))?h:(g.physics.follow(g,e,t,o,n,r,i,a,l,s,c,u,d),g)},g.noFollow=function(){return g.physics.follow(null),g},g.control=function(e,t,o,n,r){var i;return(i=zob(g.control,arguments,"type, speed, speedY, horizontal, vertical"))?i:(g.physics.control(g,e,t,o,n,r),g)},g.noControl=function(){return g.physics.noControl(g),g},g.sleep=function(){return zog(g.body),g.body.SetAwake(!1),g},g.wake=function(){return g.body.SetAwake(!0),g},g.contact=function(e){return zimContactListener||u(),f.add(g.body,e),g},g.noContact=function(){return f.remove(g.body),g},g.contactEnd=function(e){return zimContactListener||u(),m.add(g.body,e),g},g.noContactEnd=function(){return m.remove(g.body),g},Object.defineProperty(g,"dynamic",{get:function(){return 2==g.body.GetType()},set:function(e){g.body.SetType(1==e?2:0)}})}(e,t,o,n,r,i,a,l,s,c,u),e},So.removePhysics=function(e){return z_d("34.85"),zot(e.physics)||(e==e.physics.followObj&&e.physics.follow(null),e.follow=e.noFollow=e.control=e.noControl=e.sleep=e.wake=null,e.impulse=e.force=e.spin=e.torque=null,e.physics.remove(e.body),e.physics=null),e},So.hitTestPoint=function(e,t,o,n){if(So.zimhtp||(z_d("35"),So.zimhtp=!0),!e.stage||zot(t)||zot(o))return!1;e.stage;if(!zot(e)&&e.globalToLocal){if(zot(n)&&(n=!0),n){var r=e.getBounds();if(r){var i=e.globalToLocal(t,o);if(i.x>r.x+r.width||i.x<r.x)return!1;if(i.y>r.y+r.height||i.y<r.y)return!1}}var a={x:t,y:o},a=e.image||e.spriteSheet||"Shape"==e.type?e.globalToLocal(a.x,a.y):e.globalToLocal(a.x*So.scaX,a.y*So.scaY);return e.hitTest(a.x,a.y)}},So.hitTestReg=function(e,t,o){if(So.zimhtr||(z_d("36"),So.zimhtr=!0),!e.stage||!t.stage)return!1;e.stage;if(!zot(e)&&!zot(t)&&e.localToLocal&&t.localToLocal){zot(o)&&(o=!0);var n=t.localToGlobal(t.regX,t.regY),r=e.getBounds();if(o&&r){var i=e.globalToLocal(n.x,n.y);if(i.x>r.x+r.width||i.x<r.x)return!1;if(i.y>r.y+r.height||i.y<r.y)return!1}return n=e.image||e.spriteSheet||"Shape"==e.type?e.globalToLocal(n.x,n.y):e.globalToLocal(n.x*So.scaX,n.y*So.scaY),e.hitTest(n.x,n.y)}},So.hitTestRect=function(t,e,o,n){if(So.zimhtr||(z_d("37"),So.zimhtr=!0),!t.stage||!e.stage)return!1;t.stage;if(!zot(t)&&!zot(e)&&t.hitTest&&e.getBounds){zot(o)&&(o=0),zot(n)&&(n=!0);var r=e.getBounds();if(r){if(n)if(t.getBounds()&&!So.hitTestBounds(t,e))return!1;var i,a,l=r.x+r.width/2,s=r.y+r.height/2,c=e.localToGlobal(l,s);if(d(c))return!0;for(var u=0;u<=o;u++){if(i=r.width*(u+1)/(o+1),a=r.height*(u+1)/(o+1),d(c=e.localToGlobal(r.x+i,r.y)))return!0;if(d(c=e.localToGlobal(r.x+r.width,r.y+a)))return!0;if(d(c=e.localToGlobal(r.x+r.width-i,r.y+r.height)))return!0;if(d(c=e.localToGlobal(r.x,r.y+r.height-a)))return!0}}else zon&&zogy("zim methods - hitTestRect():\n please setBounds() on param b object")}function d(e){return e=t.image||t.spriteSheet||"Shape"==t.type?t.globalToLocal(e.x,e.y):t.globalToLocal(e.x*So.scaX,e.y*So.scaY),t.hitTest(e.x,e.y)?1:void 0}},So.hitTestCircle=function(t,e,o,n){if(So.zimhtc||(z_d("38"),So.zimhtr=!0),z_d("38"),t.stage&&e.stage){t.stage;if(!zot(t)&&!zot(e)&&t.hitTest&&e.getBounds){zot(o)&&(o=8),zot(n)&&(n=!0);var r=e.getBounds();if(r){var i=t.getBounds();if(n&&i&&!So.hitTestBounds(t,e))return!1;var a=r.x+r.width/2,l=r.y+r.height/2,s=e.localToGlobal(a,l);if(p(s))return!0;for(var c,u,d,h=(r.width+r.height)/2/2,g=0;g<o;g++)if(c=g/o*2*Math.PI,u=a+h*Math.cos(c),d=l+h*Math.sin(c),p(s=e.localToGlobal(u,d)))return!0;return!1}zon&&zogy("zim methods - hitTestCircle():\n please setBounds() on param b object")}}function p(e){return e=t.image||t.spriteSheet||"Shape"==t.type?t.globalToLocal(e.x,e.y):t.globalToLocal(e.x*So.scaX,e.y*So.scaY),t.hitTest(e.x,e.y)?1:void 0}},So.hitTestCircleRect=function(e,t,o){if(So.zimhtcr||(z_d("38.2"),So.zimhtcr=!0),e.stage&&t.stage){e.stage;if(!zot(e)&&!zot(t)&&e.getBounds&&t.getBounds){var n=e.getBounds(),r=t.getBounds();if(n&&r){zot(o)&&(o=0);var i=(e.radius?e.radius:(n.width+n.height)/2)+o,a=t.boundsToGlobal(),l=e.localToGlobal(0,0),s=l.x,c=l.y,u=a.x,d=a.y,h=a.x+a.width,g=a.y+a.height,p=(s<u?u:h<s?h:s)-s,f=(c<d?d:g<c?g:c)-c;return p*p+f*f<=i*i}zon&&zogy("hitTestCircleRect():\n please setBounds() on both objects")}}},So.hitTestCircles=function(e,t,o){if(So.zimhtcs||(z_d("38.5"),So.zimhtcs=!0),e.stage&&t.stage){var n=e.stage;if(!zot(e)&&!zot(t)&&e.hitTest&&e.getBounds&&t.getBounds){var r=e.getBounds(),i=t.getBounds();if(r&&i){zot(o)&&(o=0);var a=e.localToGlobal(r.x+r.width/2,r.y+r.height/2),l=t.localToGlobal(i.x+i.width/2,i.y+i.height/2),s=e.getConcatenatedMatrix(),c=t.getConcatenatedMatrix(),u=Math.sqrt(s.a/n.scaleX*s.a/n.scaleX+s.c/n.scaleX*s.c/n.scaleX),d=Math.sqrt(s.b/n.scaleY*s.b/n.scaleY+s.d/n.scaleY*s.d/n.scaleY),h=Math.sqrt(c.a/n.scaleX*c.a/n.scaleX+c.c/n.scaleX*c.c/n.scaleX),g=Math.sqrt(c.b/n.scaleY*c.b/n.scaleY+c.d/n.scaleY*c.d/n.scaleY),p=Math.sqrt(Math.abs(Math.pow(a.x-l.x,2)+Math.pow(a.y-l.y,2)));return r.width*Math.max(u,d)/2+i.width*Math.max(h,g)/2>=p-o}zon&&zogy("zim methods - hitTestCircles():\n please setBounds() on both objects")}}},So.hitTestBounds=function(e,t,o,n){if(So.zimhtb||(z_d("39"),So.zimhtb=!0),e.stage&&t.stage&&!zot(e)&&!zot(t)&&e.getBounds&&t.getBounds){var r=!1;n&&n.graphics&&(r=!0);var i=e.getBounds(),a=t.getBounds();if(i&&a){zot(o)&&(o=0);var l,s=So.boundsToGlobal(e),c=So.boundsToGlobal(t);return r&&((l=n.graphics).c(),l.ss(1).s("blue"),l.r(s.x,s.y,s.width,s.height),l.s("green"),l.r(c.x,c.y,c.width,c.height),n.stage.update()),So.rectIntersect(s,c,o)}zon&&zogy("zim methods - hitTestBounds():\n please setBounds() on both objects")}},So.hitTestPath=function(e,t,o,n){if(So.zimhtpa||(z_d("37.5"),So.zimhtpa=!0),e.stage&&t.stage){e.stage;if(!zot(e)&&!zot(t)&&e.hitTest&&("Squiggle"==t.type||"Blob"==t.type)){var r=e.getBounds();zot(o)&&(o=2),zot(n)&&(n=!1);var i=t.interpolate(o,null,!0,null,!0);if(n){t.hitPathPoints?t.hitPathPoints.removeAllChildren():t.hitPathPoints=(new So.Container).addTo(),t.hitPathPoints.top();for(var a=0;a<i.length;a++){var l=i[a];l=t.localToGlobal(l.x,l.y),new So.Circle(3).loc(l.x,l.y,t.hitPathPoints)}}if(r){var s=So.boundsAroundPoints(i);if(!So.rectIntersect(e.boundsToGlobal(r),t.boundsToGlobal(s)))return}for(var c,a=0;a<i.length;a++){l=i[a];if(l=t.localToGlobal(l.x,l.y),c=l,c=e.image||e.spriteSheet||"Shape"==e.type?e.globalToLocal(c.x,c.y):e.globalToLocal(c.x*So.scaX,c.y*So.scaY),!!e.hitTest(c.x,c.y))return!0}return!1}}},So.hitTestGrid=function(e,t,o,n,r,i,a,l,s,c,u,d,h){if(So.zimhtg||(z_d("41"),So.zimhtg=!0),!e.stage)return!1;var g;zot(e)||d||(i=(g=e.globalToLocal(i,a)).x,a=g.y),zot(l)&&(l=0),zot(s)&&(s=0),zot(c)&&(c=0),zot(u)&&(u=0);var p=(t+=c)/n,f=(o+=u)/r,m=Math.min(n-1,Math.max(0,Math.floor((i-l)/p))),z=Math.min(r-1,Math.max(0,Math.floor((a-s)/f)));if(!(p*(m+1)-c<i-l||i-l<p*m||f*(z+1)-u<a-s||a-s<f*z)){var y=z*n+m;return zot(h)||"index"==h?y:"col"==h?m:"row"==h?z:"array"==h?[y,m,z]:void 0}},So.animate=function(u,e,t,d,h,g,l,o,n,r,i,a,s,c,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,I,E,O,M,j,L,Y,_,D,X,R,W,H,F,V,N,G,q,Q,U,K,Z,J){var $;if(u&&(u.props||u.obj)&&($=zob(So.animate,arguments,"target, props, time, ease, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, loopPick, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, rewindTime, rewindEase, sequence, sequenceCall, sequenceParams, sequenceReverse, ticker, cjsProps, css, protect, override, from, set, id, events, sequenceTarget, dynamic, drag, clamp, startPaused, clean, obj, seriesWait, sequenceWait, rate, pauseOnBlur, easeAmount, easeFrequency, timeUnit, timeCheck")))return $;if("AC"==u.type&&zdf)return zdf.ac("animate",arguments),u;if(So.animateCheck||(z_d("45"),So.animateCheck=!0),u){var ee=So.ANIMATE;if(null!=window.ANIMATE&&(ee=window.ANIMATE),!ee)return u;zot(J)&&(J=!0);var te=Bo(null,Z,null,null,!zot(J)&&!J);0<i&&(r=!0);var oe=arguments,ne=Array.prototype.slice.call(arguments);if(zot(e)&&!zot(V)&&(e=V),zot(V=e))return zon&&zog("animate() - need props"),u;if("BeadsContainer"==u.type&&zot(T)&&(T=0),zot(Q)&&(Q=!0),"Tone"==u.type&&(Q=!1),Q&&(zot(So.blurCheck)&&So.setBlurDetect(),So.pauseAnimateOnBlur=!0),zot(T)||!u.addChild){t=So.Pick.choose(t),d=So.Pick.choose(d),l=So.Pick.choose(l),i=So.Pick.choose(i),a=So.Pick.choose(a),z=So.Pick.choose(z),y=So.Pick.choose(y),x=zot(x)?t:So.Pick.choose(x),S=So.Pick.choose(S),j=So.Pick.choose(j),L=So.Pick.choose(L);var re=["loopCount","loopWait","rewind","rewindWait"];for(var ie in I)0<=re.indexOf(ie)&&(I[ie]=So.Pick.choose(I[ie]))}var ae={override:!zot(u)&&!zot(u.zimX)&&!zot(V.x)||!zot(u)&&!zot(u.zimY)&&!zot(V.y)};if(zot(r)||(ae.loop=r),zot(i)||(ae.count=i),zot(a)||(ae.loopWait=a),zot(s)||(ae.loopCall=s),zot(f)||(ae.loopWaitParams=f),zot(p)||(ae.loopWaitCall=p),zot(c)||(ae.loopParams=c),zot(m)||(ae.loopPick=m),zot(z)||(ae.rewind=z),zot(y)||(ae.rewindWait=y),zot(b)||(ae.rewindCall=b),zot(v)||(ae.rewindParams=v),zot(w)||(ae.rewindWaitCall=w),zot(C)||(ae.rewindWaitParams=C),zot(e)||(ae=So.merge(ae,I)),I=ae,So.loop(V,function(e,t){var o,n;"string"==typeof e&&(1<(o=e.split(".")).length&&"."!=e.substr(0,1)&&(V["."+e]=t,delete V[e],e="."+e),1<o.length&&"string"==typeof t&&("+"!=(n=t.substr(0,1))&&"-"!=n&&(V[e]="+"+t)))}),u.zimTweenOriginals={},!zot(T)&&u.addChild){for(var le=[],se=0;se<u.numChildren;se++)le.push(u.getChildAt(se));D=u,u=le}var ce=["extra","zoom","speed","layer","fade"],ue={zoom:"Pen"==u.type?"size":"scale",speed:"percentSpeed",layer:"layer",fade:"alpha"};if(u instanceof Array){S&&u.reverse();for(se=0;se<u.length;se++){var de,he=u[se];if(j)for(var ie in he.zimObj={},V){de=0<=ce.indexOf(ie)?V[ie]:So.Pick.choose(V[ie]),he.zimObj[ie]=he[ie],"string"==typeof de&&(de=(he.zimLastObj&&!zot(he.zimLastObj[ie])?he.zimLastObj[ie]:he[ie])+Number(de.replace(/\s/g,""))),he.zimLastObj&&(he.zimLastObj[ie]=z?he.zimTweenOriginals[ie]:V[ie]),he[ie]=de}else for(var ie in he.zimObj={},V)ce.indexOf(ie),he.zimObj[ie]=V[ie];var ge=0==se&&0!=T?"s"==te?.02:20:se*T;So.animate(he,he.zimObj,t,d,se==u.length-1?h:null,se==u.length-1?g:null,l,null,null,null,null,null,null,null,null,null,m,null,null,null,null,null,null,x,k,null,se==u.length-1?A:null,se==u.length-1?P:null,null,B,So.copy(I),E,O,M,null,L,Y,_,D,X,R,W,H,F,V,N,ge,q,Q,U,K,Z,J)}return D}var pe,fe,me,ze=t,ye=x;if(zot(ze)&&(ze="s"==te?1:1e3),zot(x)&&(x=ye=ze),zot(d)&&(d="quadInOut"),zot(l)&&(l=0),zot(y)&&(y=0),zot(I)&&(I={override:!zot(u.zimX)&&!zot(V.x)||!zot(u.zimY)&&!zot(V.y)}),zot(g)&&(g=u),zot(B)&&(B=!0),zot(E)&&(E=!1),zot(O)&&(O=!1),zot(j)&&(j=!1),zot(L)&&(L={}),L.scale&&(L.scaleX=L.scaleY=L.scale,delete L.scale),zot(M)||(I.override=M),zot(R)&&(R=!1),zot(H)&&(H=!!R),zot(X)&&(X=!1),zot(W)&&(W=!0),zot(F)&&(F=!0),zot(q)&&(q=1),u.futureRate=q,V instanceof Array){var be,ve,we=1;if(0==V.length)return this;function Ce(){var e;u.zimLastObj&&So.loop(u.zimLastObj,function(e){zot(u.zimTweenOriginals[e])||(u[e]=u.zimTweenOriginals[e],u.zimLastObj[e]=u.zimTweenOriginals[e])});for(var t,o,n,r=l,i=0,a=0;a<V.length;a++){zot((e=V[a]).target)||(zot(e.time)&&(e.time=ze),r+=e.wait?e.wait:0,t=e.time,o=zot(e.rewindTime)?t:e.rewindTime,e.rewind&&(t=t+o+(e.rewindWait?e.rewindWait:0)),e.loop&&(t*=e.loopCount,t+=(e.loopCount-1)*(e.loopWait?e.loopWait:0)),zot(e.params)&&(e.params=e.target),ve=e.target,n={target:e.target,obj:So.copy(e.obj),seriesWait:i,wait:r,waitedCall:e.waitedCall,waitedParams:e.waitedParams,time:e.time,ease:e.ease,from:e.from,rewind:e.rewind,call:e.call,params:e.params,loop:e.loop,loopCount:e.loopCount,loopWait:e.loopWait,loopCall:e.loopCall,loopParams:e.loopParams,loopWaitCall:e.loopWaitCall,loopWaitParams:e.loopWaitParams,loopPick:e.loopPick,rewindWait:e.rewindWait,rewindCall:e.rewindCall,rewindParams:e.rewindParams,rewindWaitCall:e.rewindWaitCall,rewindWaitParams:e.rewindWaitParams,rewindTime:e.rewindTime,rewindEase:e.rewindEase,set:So.copy(e.masterSet),events:_,rate:u.futureRate,pauseOnBlur:e.pauseOnBlur,easeAmount:e.easeAmount,easeFrequency:e.easeFrequency,override:!1,id:Y},a==V.length-1&&function(e){var t=e.call,o=e.params;I.loop&&(!I.count||we<I.count)?e.call=function(){function e(){for(var e=0;e<be.objects.length;e++)be.objects[e].set&&be.objects[e].set(be.values[e]);I.loopWaitCall&&"function"==typeof I.loopWaitCall&&I.loopWaitCall(I.loopWaitParams),Ce()}I.loopCall&&"function"==typeof I.loopCall&&I.loopCall(I.loopParams),I.loopWait?(zot(u.zimTweens)&&(u.zimTweens={}),(pe=u.zimTweens[Y]=u.zimTween=createjs.Tween.get(u,{override:I.override}).wait(I.loopWait,!0).call(e)).timeScale=u.futureRate):e()}:e.call=function(){t&&"function"==typeof t&&t(o),zot(g)&&(g=ve),h&&"function"==typeof h&&h(g),ko(Y),u.zimLastObj=null};we++}(n),So.animate(n),i+=r+t,r=0)}}return function(){u&&!u.seriesTweens&&(u.seriesTweens=[],u.seriesCalls=[],u.seriesParams=[]);for(var e,o,t=0;t<V.length;t++)(e=V[t]).target?(e.target.seriesTweens||(e.target.seriesTweens=[]),e.target.seriesCalls||(e.target.seriesCalls=[]),e.target.seriesParams||(e.target.seriesParams=[]),e.target.seriesTweens.push(e.props),e.target.seriesCalls.push(e.call),e.target.seriesParams.push(e.params)):(u.seriesTweens.push(e.props),u.seriesCalls.push(e.call),u.seriesParams.push(e.params));u.seriesCalls.push(h),u.seriesParams.push(g),e=V[0],o=u||e.target;for(o.zimSeriesOriginals={},t=V.length-1;0<=t;t--)zot((e=V[t]).props)&&!zot(e.obj)&&(e.props=e.obj),e.obj=e.props,So.loop(e.obj,function(e,t){o.zimSeriesOriginals[e]="path"==e?V[e]:io(o,e)});var n=new So.Dictionary;be=new So.Dictionary;for(t=0;t<V.length;t++)if(e=V[t],u=u||e.target,zot(e.target)&&(e.target=u),zot(e.ease)&&(e.ease=d),!zot(e.target)){var r,i,a;0==t&&(e.target.zimSeriesArgs=oe),zot(e.props)&&!zot(e.obj)&&(e.props=e.obj),e.obj=e.props,e.loop&&(zot(e.loopCount)||e.loopCount<=0)&&(e.loopCount=0,V.splice(t+1,V.length)),zot(e.obj.scale)||(e.obj.scaleX=e.obj.scaleY=e.obj.scale,delete e.obj.scale),e.from&&((r=n.at(e.target))?(e.set?(i=So.copy(e.obj),a=So.merge(r,e.set),e.obj=uo(e.target,e.obj,a),e.set=So.merge(e.set,i)):(e.set=So.copy(e.obj),e.obj=uo(e.target,e.obj,r)),e.from=!1):n.add(e.target,uo(e.target,e.obj,e.set)));var l={};for(var s in e.obj)l[s]=e.set&&e.set[s]?e.set[s]:e.target[s];zot(be.at(e.target))&&be.add(e.target,{});var c=So.merge(be.at(e.target),l);be.remove(e.target),be.add(e.target,c),e.masterSet=So.copy(e.set)}zot(u.zimTweens)&&(u.zimTweens={})}(),lo(),Ce(),u}if(V&&(V.x&&(u.zimX=!0),V.y&&(u.zimY=!0)),!zot(V.shape)&&V.shape.type==u.type&&("Blob"==u.type||"Squiggle"==u.type)){var xe=u.pointObjects,ke=V.shape.pointObjects;if(xe.length!=ke.length)zon&&zogy("animate() - shapes must be of same number of points"),delete V.shape;else{V.shape;delete V.shape;var Te=zot(V.blobShift)?0:V.blobShift;delete V.blobShift;for(var Ae=!0,se=0;se<xe.length;se++)for(var Pe,Se,Be=xe[se],Ie=ke[(2e4*xe.length+se+Te)%xe.length],Ee=0;Ee<4;Ee++){1!=Ee&&(Pe=Be[Ee],Ie[Ee],(Se=So.copy(ne))[0]=Pe,Se[1]={x:Ie[Ee].x,y:Ie[Ee].y,rotation:Ie[Ee].rotation},Ae&&(Se[37]=!0,Pe.animateEvent&&Pe.off("animation",Pe.animateEvent),Pe.animateEvent=Pe.on("animation",function(){u.update()})),Ae=!1,So.animate.apply(So.animate,Se))}if(So.isEmpty(V))return u}}if(!zot(u)){u.tweenStates||(u.tweenStates={all:!0});var Oe,Me,je,Le,Ye=!1;if(V.note){if(Array.isArray(V.note))So.loop(V.note,function(e,t){"string"==typeof e&&(V.note[t]=So.Synth.note(e))});else if(V.note.min)V.note.min=So.Synth.note(V.note.min),V.note.max=So.Synth.note(V.note.max);else if(V.note.array)So.loop(V.note.array,function(e,t){"string"==typeof e&&(V.note.array[t]=So.Synth.note(e))});else if("function"==typeof V.note){if(zon)return zog("animate() - use frequency in ZIM VEE functions not note"),u}else V.note=So.Synth.note(V.note);V.frequency=V.note,delete V.note}"Sprite"!=u.type&&u.hasOwnProperty("paused")||Object.defineProperty(u,"paused",{get:function(){return u.animatePaused},set:function(e){u.animatePaused=e}}),u.endTween=function(n,e){var t;return u.stopAnimate(e),"all"!=n&&"main"!=n&&"none"!=n&&(n="all"),u.seriesTweens?(So.loop(u.seriesTweens,function(t,e,o){So.loop(t,function(e){"string"==typeof t[e]&&(t[e]=u[e]+Number(t[e].replace(/\s/g,""))),ao(u,e,t[e])}),"all"==n&&u.seriesCalls[e]&&u.seriesCalls[e](u.seriesParams[e])}),"none"==n||(t=u.seriesCalls[u.seriesCalls.length-1])&&t(u.seriesParams[u.seriesParams.length-1]),u.seriesTweens=null,u.seriesCalls=null,u.seriesParams=null):(So.loop(u.zimLastObj,function(e){"string"==typeof u.zimLastObj[e]&&(u.zimLastObj[e]=u[e]+Number(u.zimLastObj[e].replace(/\s/g,""))),ao(u,e,u.zimLastObj[e])}),"none"!=n&&h&&h(g)),u.stage&&u.stage.update(),u},So.loop(V,function(e,t){u.zimTweenOriginals[e]="path"==e?V[e]:io(u,e)}),u.resetTween=function(e){zot(e)&&(e=!0),u.pauseAnimate();var o=u.zimSeriesOriginals?u.zimSeriesOriginals:u.zimTweenOriginals;return So.loop(o,function(e){var t;"path"==e?(u.percentComplete=0,u.zimPath=o[e],t=(u.zimStartPercent,u.zimPath.getCurvePoint(u.zimStartPercent/100)),u.loc(t.x,t.y)):ao(u,e,o[e])}),u.zimLastObj=null,u.stage&&u.stage.update(),u.stopAnimate(),u.zimPath&&(ne[1].path=u.zimPath),zot(u.zimStartRotation)||(u.rotation=u.zimStartRotation),u.zimStartRotation=null,zot(u.zimStartScaleX)||(u.scaleX=u.zimStartScaleX),u.zimStartScaleX=null,zot(u.zimStartScaleY)||(u.scaleY=u.zimStartScaleY),u.zimStartScaleY=null,So.animate.apply(null,u.zimSeriesArgs?u.zimSeriesArgs:ne),u.pauseAnimate(e),u},u.replayTween=function(){return u.resetTween(!1),u},(V.path||X)&&(u.requestedPercentComplete?Oe=u.requestedPercentComplete:u.percentComplete&&(Me=u,je="percentComplete",!Object.getOwnPropertyDescriptor(Me,je).get)&&(Oe=u.percentComplete),u.requestedPercentComplete=null,zot(Oe)&&(Oe=0),u.pathRatio=0,u.zimStartRotation=u.rotation),E&&(B=!1),zot(u.zimTweens)&&(u.zimTweens={}),E||(u.stage?Ke=u.stage:zdf?Ke=zdf.stage:E=!0),u.setColorRange&&!zot(V.color)&&(Le=V.color,delete V.color,V.colorRange=1,u.setColorRange(u.color,Le),u.colorRange=0);var _e,De,Xe={};for(var se in V)0<=ce.indexOf(se)||(Xe[se]=So.copy(V[se]),V[se]=So.Pick.choose(V[se]));for(var Re in zot(V.scale)||(V.scaleX=V.scaleY=So.Pick.choose(V.scale),delete V.scale),V){if(!u.zimBusy)break;u.zimBusy[Re]&&delete V[Re]}if(!So.isEmpty(V)){for(se in"Sprite"!=u.type&&(u.paused=!1),(O||I.loop||I.rewind)&&(u.zimMouseEnabledCheck||(u.zimMouseEnabledCheck=!0,u.zimLastMouseEnabled=u.mouseEnabled),u.mouseEnabled=!1,setTimeout(function(){for(var e in u.zimBusy||(u.zimBusy={}),V)u.zimBusy[e]=!0;u.zimMouseEnabledCheck=null,u.mouseEnabled=u.zimLastMouseEnabled},70)),lo(),ce.shift(),L)L[se]=So.Pick.choose(L[se]);for(se in I)"waitedCall"!=se&&"waitedParams"!=se&&"loopCall"!=se&&"rewindCall"!=se&&"loopWaitCall"!=se&&"rewindWaitCall"!=se&&(I[se]=So.Pick.choose(I[se]));u.getBounds&&zot(u.percentCompleteCheck)&&(u.percentCompleteCheck=!0,Object.defineProperty(u,"percentComplete",{get:function(){return this.zimTween&&this.zimTween.duration?this.zimTween.position/this.zimTween.duration*100:0},set:function(e){this.zimTween?co(e,st=!0):this.requestedPercentComplete=e}}),Object.defineProperty(u,"percentCompleteNoAngle",{get:function(){return this.zimTween&&this.zimTween.duration?this.zimTween.position/this.zimTween.duration*100:0},set:function(e){this.zimTween?co(e,!1):this.requestedPercentComplete=e}})),Object.defineProperty(u,"rate",{get:function(){return u.futureRate},set:function(o){u.futureRate=o,So.loop(u.zimTweens,function(e,t){t.timeScale=o})},configurable:!0}),!zot(V.path)&&V.path.segmentPoints&&(zot(V.orient)&&(V.orient=!0),V.orient&&zot(V.flip)&&(V.flip=!0),"Pen"==u.type&&(u.infinite=!0),u.zimOnPath=!0,zot(u.pathRatio)&&(u.pathRatio=0),V.orient&&(V.orient=V.path,V.startOrient=V.rotation),_e=V.path,R?(delete V.path,delete V.percent,!zon||zot(u.startPercent)&&zot(u.percent)||zog("ZIM.animate() - percentStart and percent currently not supported with drag on path"),(Fe=_e.getCurvePoint(u.pathRatio,We,Ze))&&(Fe.z,Ve=u.parent.globalToLocal(Fe.x,Fe.y),u.x=Ve.x,u.y=Ve.y)):(zot(u.startPercent)&&(u.startPercent=So.Pick.choose(zot(V.startPercent)?0:V.startPercent)),zot(u.percent)&&(u.percent=So.Pick.choose(zot(V.percent)?100:V.percent)),delete V.path,delete V.percent),De=!_e.lockControls,delete V.path,V.pathRatio=1);u.percentComplete;var We,He,Fe,Ve,Ne,Ge,qe,Qe,Ue,Ke,Ze,Je,$e,et,tt,ot,nt,rt,it,at,lt,st,ct,ut,dt,ht,gt,pt,ft,mt,zt=!0,yt=!1,bt=!0,vt=!0;zot(V.redirect)||(vt=V.redirect,delete V.redirect),_e&&(De||(Ze=So.copy(_e.segmentPoints),We=So.copy(_e.segmentRatios)),u.currentPercent=u.startPercent+u.percent*u.pathRatio,He=(1e6+u.currentPercent)%100/100,Fe=_e.getCurvePoint(He,We,Ze),u.parent&&Fe&&(Ve=u.parent.globalToLocal(Fe.x,Fe.y),u.x=Ve.x,u.y=Ve.y),R&&(d="linear",u.cursor="pointer",Ne=u.percentComplete,Ge=!1,H||u.paused,Qe=qe=!0,Ue=Ne,Ze=So.copy(_e.segmentPoints),Je=0,So.loop(Ze,function(e){Je+=So.distanceAlongCurve(e)}),$e=Math.round(Je/Ze.length/10),et=_e.interpolate($e,null,!0,null,!0),ot=tt=(Ne||0)/100*Je,_e.zimAnimateChanged=!1,So.copy(_e.segmentRatios),u.zimAnimatePathChange=_e.on("change",function(){_e.zimAnimateChanged=!0}),u.zimAnimatePathDown=_e.on("mousedown",function(){Ge=!0,1==u.paused&&(yt=!0)}),u.zimAnimatePathUp=_e.on("pressup",function(){yt=!1}),u.zimAnimateDragDown=u.on("mousedown",function(e){(Ke=e.target.stage).mouseMoveOutside=!0,bt=!(zt=!1),setTimeout(function(){zt=!0},50),yt=!0,_e.zimAnimateChanged&&(Ze=So.copy(_e.segmentPoints),Je=0,So.loop(Ze,function(e){Je+=So.distanceAlongCurve(e)}),$e=Math.round(Je/Ze.length/10),et=_e.interpolate($e,null,!0,null,!0),So.copy(_e.segmentRatios)),_e.zimAnimateChanged=!1,Ne=u.percentComplete,rt.immediate(Ne);var t=Ne;z&&(t=pe.position>pe.duration/2?2*(100-Ne):2*Ne),ot=tt=(t||0)/100*Je}),nt=!1,u.zimAnimateDragPress=u.on("pressmove",function(e){nt=!0,function(e){var t=_e.globalToLocal(e.rawX/So.scaX,e.rawY/So.scaY),o=tt;"Blob"==_e.type&&(lt[0]<lt[4]?Qe=!0:lt[0]>lt[4]&&(Qe=!1),o<10&&!Qe?(ot=tt=o=Je-5,rt.immediate(ot/Je*100),lt=[Je-1,Je-2,Je,Je-3,Je-4]):Je-10<o&&Qe&&(ot=tt=o=5,rt.immediate(ot/Je*100),lt=[0,0,0,0,0]));var s=t.x,c=t.y,u=o;et.sort(function(e,t){var o=e.x,n=e.y,r=e.r*Je,i=t.x,a=t.y,l=t.r*Je;return Math.sqrt(Math.pow(s-o,2)+Math.pow(c-n,2)+Math.pow(u-r,2))-Math.sqrt(Math.pow(s-i,2)+Math.pow(c-a,2)+Math.pow(u-l,2))}),ot=et[0].r*Je,Ne=ot/Je*100,Ne=So.constrain(Ne,0,99.95),z&&(Ne/=2,pe.position>pe.duration/2&&(Ne=100-Ne))}(e)}),u.animateReturn=function(){z?(Qe=qe=!1,u.percentComplete<50&&(u.percentComplete=100-u.percentComplete),u.pauseAnimate(!1)):zon&&zogy("animate() - animateReturn() needs rewind set to true")},u.zimAnimateDragUp=u.on("pressup",function(){0==u.paused&&(yt=!1),zt=!1,setTimeout(function(){zt=!0},50),lt[0]<lt[4]?Qe=!0:lt[0]>lt[4]&&(Qe=!1),!u.paused&&z&&vt&&Qe!=qe&&(u.percentComplete=100-u.percentComplete,qe=Qe)}),rt=new So.Damp(Ne,.15),st=!(lt=[at=it=0,0,0,0,0]),u.zimDragAnimateTicker=So.Ticker.add(function(){var e;R&&(++at%20&&(lt.push(ot),lt.shift()),tt=ot,Ge&&(Ne=u.percentComplete),yt||bt&&1==u.paused?(Ge||st||"Blob"==_e.type&&Math.abs(it-Ne)>(z?45:90)?(Ge=!1,e=Ne,rt.immediate(e),st=!1):e=rt.convert(Ne),.1<Math.abs(it-e)?(u.percentCompleteNoAngle=e,it=e):(u.percentCompleteNoAngle=e,nt=bt=!1)):bt=!1)},Ke))),V.orient&&(!0===V.orient&&(ut=u.parent.localToGlobal(zot(V.x)?u.x:V.x,zot(V.y)?u.y:V.y),V.orient={x:ut.x,y:ut.y}),ct=V.orient,delete V.orient,dt=u.rotation,u.rotation=_e.getPointAngle(0)+dt,ct!=_e&&(ht=ct.parent?ct.parent.localToLocal(ct.x,ct.y,u.parent):u.parent.globalToLocal(ct.x,ct.y),u.rotation=So.angle(u.x,u.y,ht.x,ht.y)+dt)),V.flip&&(gt=V.flip,delete V.flip,pt=u.scaleX),V.flipVertical&&(ft=V.flipVertical,delete V.flipVertical,mt=u.scaleY);var wt=u.x,Ct=u.y,xt=0;I.loop&&(zot(I.count)||(xt=I.count,delete I.count,we=1));var kt,Tt=0;I.loopWait&&(Tt=I.loopWait,a=I.loopWait,delete I.loopWait),I.loopCall&&(kt=I.loopCall,delete I.loopCall);var At,Pt=u;I.loopParams&&(Pt=I.loopParams,delete I.loopParams),TIMECHECK&&J&&(ze&&Io(ze,te),ye&&Io(ye,te),l&&Io(l,te),Ot&&Io(Ot,te),Tt&&Io(Tt,te),a&&Io(a,te),I.rewindWait&&Io(I.rewindWait,te),N&&Io(N,te),G&&Io(G,te)),"s"==te&&(ze&&(ze*=1e3),ye&&(ye*=1e3),l&&(l*=1e3),Ot&&(Ot*=1e3),Tt&&(Tt*=1e3),a&&(a*=1e3),I.rewindWait&&(I.rewindWait*=1e3),N&&(N*=1e3),G&&(G*=1e3)),I.loopWaitCall&&(At=I.loopWaitCall,delete I.loopWaitCall);var St,Bt=u;I.loopWaitParams&&(Bt=I.loopWaitParams,delete I.loopWaitParams),I.rewind&&(d&&-1==(St=d).indexOf("InOut")&&(-1!=St.indexOf("Out")?St=St.replace("Out","In"):-1!=St.indexOf("In")&&(St=St.replace("In","Out"))),k&&(St=k));var It,Et,Ot,Mt,jt,Lt,Yt,_t,Dt="get"+d.charAt(0).toUpperCase()+d.slice(1),Xt=zik(U),Rt=zik(K);It=zot(Xt)&&zot(Rt)||!createjs.Ease[Dt]?createjs.Ease[d]:(!zot(Rt)&&zot(Xt)&&(Xt=1),!zot(Xt)&&zot(Rt)&&(Rt=.3*1.5),createjs.Ease[Dt](Xt,Rt)),St&&(Dt="get"+St.charAt(0).toUpperCase()+St.slice(1),Xt=zik(U),Rt=zik(K),Et=zot(Xt)&&zot(Rt)||!createjs.Ease[Dt]?createjs.Ease[St]:(!zot(Rt)&&zot(Xt)&&(Xt=1),!zot(Xt)&&zot(Rt)&&(Rt=.3*1.5),createjs.Ease[Dt](Xt,Rt))),I.rewind?(Ot=0,delete I.rewind,z=!0,y=I.rewindWait,I.rewindWait&&(Ot=I.rewindWait,delete I.rewindWait),I.rewindCall&&(Mt=I.rewindCall,zot(jt=I.rewindParams)&&(jt=u),delete I.rewindCall,delete I.rewindParams),I.rewindWaitCall&&(Lt=I.rewindWaitCall,zot(Yt=I.rewindWaitParams)&&(Yt=u),delete I.rewindWaitCall,delete I.rewindWaitParams),0<N||0<G||0<l?0<N||0<G?(pe=u.zimTweens[Y]=u.zimTween=createjs.Tween.get(u,{override:I.override}).wait(0<N?N:0,!0).wait(0<G?G:0,!0).call(function(){G=N=0,mo(pe)})).timeScale=u.futureRate:mo():(so(),zo())):0<N||0<G||0<l?0<N||0<G?(pe=u.zimTweens[Y]=u.zimTween=createjs.Tween.get(u,{override:I.override}).wait(0<N?N:0,!0).wait(0<G?G:0,!0).call(function(){G=N=0,yo(pe)})).timeScale=u.futureRate:yo():(so(),bo()),pe.startPaused=H,pe.rewinding=!1,zot(q)||(pe.timeScale=So.Pick.choose(q)),!E&&B&&(Oe&&(u.pathRatio=u.percentComplete&&100!=Math.round(u.percentComplete)?u.percentComplete/100:0,u.percentCompleteNoAngle=100!=Math.round(Oe)?Oe:0),_t=_&&!zot(D)&&D.dispatchEvent?So.Ticker.add(function(){(_e||ct||gt||ft)&&Ht(),D.dispatchEvent("animation")},Ke):_&&u.dispatchEvent?So.Ticker.add(function(){(_e||ct||gt||ft)&&Ht(),u.dispatchEvent("animation")},Ke):So.Ticker.add(function(){(_e||ct||gt||ft)&&Ht()},Ke));var Wt=[1,1,1],Ht=function(){var e,t,o,n,r,i,a,l;!u.parent||pe.passive||pe.startPaused||(R&&z&&(Ue<50&&50<u.percentComplete||50<Ue&&u.percentComplete<50)&&(qe=u.percentComplete<50),Ue=u.percentComplete,_e&&(De&&(Ze=_e.segmentPoints,We=_e.segmentRatios),(t=R?_e.getCurvePoint(u.pathRatio,We,Ze):(u.currentPercent=u.startPercent+u.percent*u.pathRatio,e=(1e6+u.currentPercent)%100/100,1==u.pathRatio&&(e+=0<u.percent?1:0),_e.getCurvePoint(e,We,Ze)))&&(t.z,o=u.parent.globalToLocal(t.x,t.y),u.x=o.x,u.y=o.y)),n=90==dt||270==dt||-90==dt,gt&&zt&&(wt>u.x&&So.sign(n?u.scaleY:u.scaleX)==So.sign(pt)&&(n?u.scaleY*=-1:u.scaleX*=-1),wt<u.x&&So.sign(n?u.scaleY:u.scaleX)!=So.sign(pt)&&(n?u.scaleY*=-1:u.scaleX*=-1)),ft&&zt&&(Ct>u.y&&So.sign(n?u.scaleX:u.scaleY)==So.sign(mt)&&(n?u.scaleX*=-1:u.scaleY*=-1),Ct<u.y&&So.sign(n?u.scaleX:u.scaleY)!=So.sign(mt)&&(n?u.scaleX*=-1:u.scaleY*=-1)),ct&&0!=(i=_e==ct?So.angle(wt,Ct,u.x,u.y)+dt:(r=ct.parent?ct.parent.localToLocal(ct.x,ct.y,u.parent):u.parent.globalToLocal(ct.x,ct.y),So.angle(u.x,u.y,r.x,r.y)+dt))&&(u.paused&&!nt||(gt&&0<wt-u.x&&(i+=180),a=i,!gt&&0<wt-u.x&&(a=i-180),u.rotation=a==dt?u.rotation:a)),R&&(l=u.x-wt+u.y-Ct,2<Math.abs(l)&&(Wt.push(So.sign(l)),Wt.shift(),pe.forward=function(e){if(Array.isArray(e)){for(var t=0,o=0,n=e.length;o<n;o++)t+=e[o];return t}}(Wt))),wt=u.x,Ct=u.y)};_e&&(u.handlePath=Ht),zot(u.zimMaskDynamic)||u.zimMaskApply();var Ft,Vt=!1;xo(),u.stopAnimate&&u.stopAnimate.real||(u.stopAnimate=function(e,t,o,n,r){if(!r||!R){if(zot(e)&&(u.tweenStates={}),t)return u.endTween(null,e),u;if(zot(n)&&(n=!0),null==u.pan&&(u.paused=!0),"Pen"==u.type&&u.zimOnPath&&(u.stop(),u.zimOnPath=!1),zot(o)&&(o=!0),n&&R&&(_e&&_e.off("change",u.zimAnimatePathChange),u.off("mousedown",u.zimAnimateDragDown),u.off("pressmove",u.zimAnimateDragPress),u.off("pressup",u.zimAnimateDragUp),So.Ticker.remove(u.zimDragAnimateTicker)),zot(e)){if(!o)return u;for(var i in u.zimBusy=null,createjs.Tween.removeTweens(u),u.zimTweens)To(i);u.zimTweens=null,u.zimIdSets=null,u.zimTween=null,So.idSets&&So.idSets[fe||i]&&(delete So.idSets[fe||i],So.isEmpty(So.idSets)&&delete So.idSets),So.animatedObjects.remove(u)}else{Array.isArray(e)||(e=[e]);var a=Po(e);for(var i in u.zimTweens)u.zimTweens[i].requestID&&cancelAnimationFrame(u.zimTweens[i].requestID),o&&0<=a.indexOf(i)&&ko(i),!o&&a.indexOf(i)<0&&ko(i)}return u}u.pauseAnimate()},u.stopAnimate.real=!0,u.pauseAnimate=function(e,t,o,n){if("pauseOnBlur"==t?t=null:zot(t)&&(u.tweenStates={all:!1===e}),"Pen"==u.type&&(!1===e?u.zimOnPath&&(u.infinite=!0):u.stop()),Qt&&!n)return u.pause(e,t),u;if(zot(e)&&(e=!0),yt=!1,u.paused=e,zot(o)&&(o=!0),zot(t)&&!o)return u;if(zot(t))for(var r in u.zimTweens)Ao(r,e);else{Array.isArray(t)||(t=[t]);var i=Po(t);for(var r in u.zimTweens)o&&0<=i.indexOf(r)&&(Ao(r,e),u.tweenStates[r]=!e),!o&&i.indexOf(r)<0&&(Ao(r,e),u.tweenStates[r]=!e)}return"Sprite"==u.type&&(u.running||u.stop()),u}),H&&u.pauseAnimate(!0,Y,null,!0),V.extra&&(Ft=V.extra,delete V.extra,Array.isArray(Ft)||(Ft=[Ft]));for(var Nt,Gt,qt,Qt,Ut,Kt,Zt,Jt,$t,eo,to,se=0;se<ce.length;se++){var oo=ce[se];V[oo]&&(zot(Ft)&&(Ft=[]),!0===(Gt=V[Nt=oo])?Ft.push({outputProp:ue[Nt]}):Array.isArray(Gt)?Ft.push({outputProp:ue[Nt],outputMin:Gt[0],outputMax:Gt[1],inputMin:Gt[2],inputMax:Gt[3]}):Ft.push({outputProp:ue[Nt],outputMax:Gt}),delete V[oo])}if(Ft){u.zimStartScaleX=u.scaleX,u.zimStartScaleY=u.scaleY,pe.extraTickers=[];for(se=0;se<Ft.length;se++){var no=Ft[se];for(var Ee in zot(no.inputObj)&&(no.inputObj=u),zot(no.inputProp)&&(no.inputProp="y"),zot(no.inputMin)&&(no.inputMin=0),zot(no.inputMax)&&(no.inputMax="x"==no.inputProp?Ke.width:Ke.height),zot(no.outputObj)&&(no.outputObj=u),zot(no.outputProp)&&(no.outputProp="scale"),zot(no.outputMin)&&(no.outputMin=0),zot(no.outputMax)&&(no.outputMax=no.outputMin+1),zot(no.constrain)&&(no.constrain=!0),no)V[Ee]=So.Pick.choose(V[Ee]);"percentSpeed"==no.outputProp&&(X=!0),qt=new So.Proportion(no.inputMin,no.inputMax,no.outputMin,no.outputMax,no.factor,no.outputRound);var ro=function(){var r=no,i=qt;return function(){var e,t=r.outputObj,o=r.inputObj[r.inputProp];if("x"!=r.inputProp&&"y"!=r.inputProp||r.inputObj.parent&&(o=r.inputObj.parent.localToGlobal(o,o)[r.inputProp]),e=r.constrain?So.constrain(i.convert(o),r.outputMin,r.outputMax):i.convert(o),Number.isNaN(e)&&(e=null!=r.outputMin?r.outputMin:0),"scale"==r.outputProp)t.scaleX=So.sign(t.scaleX)*e,t.scaleY=So.sign(t.scaleY)*e;else if("scaleX"==r.outputProp)t.scaleX=So.sign(t.scaleX)*e;else if("scaleY"==r.outputProp)t.scaleY=So.sign(t.scaleY)*e;else if("layer"==r.outputProp){if(!t.parent)return;var n=So.constrain(Math.round(e),0,t.parent.numChildren-1);n!=t.parent.getChildIndex(t)&&t.parent.setChildIndex(t,n)}else"percentSpeed"==r.outputProp?t[r.outputProp]=100*e:t[r.outputProp]=e}}();ro(),pe.extraTickers.push(So.Ticker.add(ro,Ke))}}return(X||u.zimAnimateDragDown)&&(X&&(Qt=!0,u.pauseAnimate(!0,Y,null,!0),u.paused=!1,pe.currentTime=0,Ut=pe,zot(u.percentSpeed)&&(u.percentSpeed=pe.startPaused?0:100),Kt=1e3/60,pe.currentTime=0,Zt=!G&&!N&&!l&&!xt&&I.loop,W&&I.loop&&!xt&&(W=!1),Jt=t+(z?x||t:0)+(y||0)+(a||0),Jt*="s"==te?1e3:1,$t=1,I.loop&&xt&&($t=xt),W&&(eo=Jt*$t),function e(){var t;pe.requestID=requestAnimationFrame(e),!X||pe.startPaused&&0==u.percentSpeed||(pe.startPaused=!1,pe!=Ut&&((Ut=pe).currentTime=0,u.pauseAnimate(!0,Y,null,!0),u.paused=!1,Zt=!G&&!N&&!l&&!xt&&I.loop),Zt&&(pe.currentTime+=1e4*Jt,pe.setPosition(pe.currentTime,!0),Zt=!1),t=pe.currentTime+Kt*u.percentSpeed/100,eo&&0==l&&(t=So.constrain(t,0,eo)),pe.currentTime=t,pe.setPosition(pe.currentTime),(_e||ct||gt||ft)&&Ht(),Ke.update())}()),u.pause=function(e,t){if(zot(e)&&(e=!0),zot(t)&&(t=0),e){if(u.zimAnimateDragDown&&(R=!1,u.cursor="default",_e&&_e.off("change",u.zimAnimatePathChange),u.off("mousedown",u.zimAnimateDragDown),u.off("pressmove",u.zimAnimateDragPress),u.off("pressup",u.zimAnimateDragUp),!X))return;to=u.percentSpeed,0<t?So.animate({target:u,props:{percentSpeed:0},override:!1,ticker:!1,time:t,call:function(){u.percentSpeed=0,u.paused=!0,X=!1,u.dispatchEvent("pause")}}):(pe.startPaused=!1,u.percentSpeed=0,u.paused=!0,X=!1,setTimeout(function(){u.dispatchEvent("pause")},10))}else{if(u.zimAnimateDragDown&&(R=!0,u.cursor="pointer",_e&&(u.zimAnimatePathChange=_e.on("change",u.zimAnimatePathChange)),u.zimAnimateDragDown=u.on("mousedown",u.zimAnimateDragDown),u.zimAnimateDragPress=u.on("pressmove",u.zimAnimateDragPress),u.zimAnimateDragUp=u.on("pressup",u.zimAnimateDragUp),!X))return;yt=!1,pe.currentTime=pe.position,0<t?So.animate({target:u,props:{percentSpeed:to},override:!1,ticker:!1,time:t,call:function(){u.percentSpeed=to,u.paused=!1,X=!0}}):(u.percentSpeed=to,u.paused=!1,X=!0)}return u}),u}}}function io(e,t){if("."!=t.substr(0,1))return e[t];for(var o=t.split("."),n=e,r=1;r<o.length;r++)n=n[o[r]];return n}function ao(e,t,o){if("."==t.substr(0,1)){for(var n=t.split("."),r=e,i=1;i<n.length-1;i++)r=r[n[i]];r[n[n.length-1]]=o}else e[t]=o}function lo(){zot(Y)?Y=So.makeID(10):(Y=String(Y),me=Y),zot(u.zimIdSets)&&(u.zimIdSets={}),zot(u.zimIdSets[Y])?zot(u.zimTweens[Y])||(fe=Y,Y=So.makeID(10),u.zimIdSets[fe]=[fe],u.zimTweens[fe].zimIdSet=fe,u.zimIdSets[fe].push(Y)):(fe=Y,Y=So.makeID(10),u.zimIdSets[fe].push(Y))}function so(){var e;for(se in u.zimLastObj||(u.zimLastObj={}),V){if("string"==typeof V[se]){if("+"==V[se].substr(0,1))continue;e=u.zimLastObj&&!zot(u.zimLastObj[se])?u.zimLastObj[se]:u[se],V[se]=e+Number(V[se].replace(/\s/g,""))}u.zimLastObj[se]=z?u.zimTweenOriginals[se]:V[se]}for(se in L){if("string"==typeof L[se]){if("+"==L[se].substr(0,1))continue;e=u.zimLastObj&&!zot(u.zimLastObj[se])?u.zimLastObj[se]:u[se],L[se]=e+Number(L[se].replace(/\s/g,""))}u.zimLastObj[se]=z?u.zimTweenOriginals[se]:V[se]}u.seriesTweens&&(u.seriesTweens[0]=V),j&&!Ye&&(V=uo(u,V,L,!0))}function co(e,t){u.zimTween.startPaused=!1,X?zot(u.zimTween.currentTime)||(u.zimTween.currentTime=u.zimTween.currentTime-u.zimTween.position+e*u.zimTween.duration/100):u.zimTween.setPosition(Math.round(e*u.zimTween.duration/100)),t&&_e&&!1!==V.orient&&_e.getCurvePoint&&(u.rotation=_e.getCurvePoint(e/100,null,null,!0).angle+(dt||0)),st&&void 0!==Ne&&(Ne=e),u.handlePath&&u.handlePath()}function uo(e,t,o,n){Ye=!0,_e&&(!zot(e.percentComplete)||o&&!zot(o.percentComplete))&&zot((o=o||{}).pathRatio)&&(o.pathRatio=zot(o.percentComplete)?e.percentComplete/100:o.percentComplete/100);var r={};for(se in t)o&&!zot(o[se])?r[se]=o[se]:r[se]=e[se],n&&(e[se]=t[se]);return r}function ho(){if(A&&"function"==typeof A&&A(P),kt&&"function"==typeof kt&&kt(Pt),m){var e,t,o=So.Pick.choose(u.futureRate);if(zot(u.futureRate)||(pe.timeScale=o),zot(Xe.scale)||(e=So.Pick.choose(Xe.scale)),!j&&pe.step&&pe.step.prev&&pe.step.prev.props)for(var n in pe.step.prev.props){0<=ce.indexOf(n)||("string"==typeof(t=So.Pick.choose(Xe[n]))&&"+"!=t.substr(0,1)&&(t=(u.zimLastObj&&!zot(u.zimLastObj[n])?u.zimLastObj[n]:u[n])+Number(t.replace(/\s/g,""))),u.zimLastObj[n]=z?u.zimTweenOriginals[n]:t,zot(Xe[n])||(pe.step.prev.props[n]=t),"scaleX"!=n||zot(e)||(pe.step.prev.props.scaleX=e),"scaleY"!=n||zot(e)||(pe.step.prev.props.scaleY=e))}}}function go(){At&&"function"==typeof At&&At(Bt)}function po(){Mt&&"function"==typeof Mt&&Mt(jt)}function fo(){Lt&&"function"==typeof Lt&&Lt(Yt)}function mo(e){so(),(pe=u.zimTweens[Y]=u.zimTween=createjs.Tween.get(u,{override:I.override}).wait(l,!0).call(function(){o&&"function"==typeof o&&o(zot(n)?u:n),l=0,zo(pe)})).timeScale=u.futureRate,e&&vo(e,pe)}function zo(e){var t=Co();u.set&&!j&&u.set(L),(pe=u.zimTweens[Y]=u.zimTween=createjs.Tween.get(u,I).to(V,ze,It).call(fo).wait(Ot,!0).call(po).to(t,ye,Et).call(wo).wait(Tt,!0).call(ho)).timeScale=u.futureRate,e&&vo(e,pe),xo()}function yo(e){so(),(pe=u.zimTweens[Y]=u.zimTween=createjs.Tween.get(u,{override:I.override}).wait(l,!0).call(function(){l=0,o&&"function"==typeof o&&o(zot(n)?u:n),bo(pe)})).timeScale=u.futureRate,e&&vo(e,pe)}function bo(e){u.set&&!j&&u.set(L),(pe=u.zimTweens[Y]=u.zimTween=createjs.Tween.get(u,I).to(V,ze,It).call(wo).wait(Tt,!0).call(ho)).timeScale=u.futureRate,e&&vo(e,pe),xo()}function vo(e,t){t.zimIdSet=e.zimIdSet,t.zimObj=e.zimObj,t.zimTicker=e.zimTicker,t.zimExtraTickers=e.zimExtraTickers,t.requestID=e.requestID}function wo(){if(u.seriesTweens&&u.seriesTweens.shift(),u.seriesCalls&&u.seriesCalls.shift(),u.seriesParams&&u.seriesParams.shift(),u.paused&&"Sprite"!=u.type)h&&"function"==typeof h&&h(g);else{if(I.loop){if(!(0<xt))return void go();if(we<xt)return go(),void we++;z?u.set&&u.set(Co()):u.set&&u.set(V)}F?ko(Y):u.pauseAnimate(!0,Y),A&&"function"==typeof A&&A(P),h&&"function"==typeof h&&h(g)}}function Co(){var e={};for(var t in V)if(E)zot(L[t])||j?e[t]=u.style[t]:e[t]=L[t];else if(zot(L[t])||j)if("."==t.substr(0,1)){for(var o=t.split("."),n=u,r=1;r<o.length;r++)n=n[o[r]];e[t]=n}else e[t]=u[t];else e[t]=L[t];return e}function xo(){pe.zimObj=V,pe.zimTicker=_t,pe.zimPaused=Vt,fe&&(pe.zimIdSet=fe),me&&(zot(So.idSets)&&(So.idSets={}),zot(So.idSets[me])?So.idSets[me]=[u]:So.idSets[me].indexOf(u)<0&&So.idSets[me].push(u)),So.animatedObjects||(So.animatedObjects=new So.Dictionary(!0)),So.animatedObjects.add(u,!0)}function ko(e){var t,o,n;u.tweenStates&&u.tweenStates[e]&&delete u.tweenStates[e],zot(u.zimTweens)||zot(u.zimTweens[e])||(u.zimX=null,u.zimY=null,function(e){if(u.zimBusy){for(var t in e)delete u.zimBusy[t];So.isEmpty(u.zimBusy)&&(u.zimBusy=null)}}(u.zimTweens[e].zimObj),u.zimTweens[e].paused=!0,To(e),!zot(t=u.zimTweens[e].zimIdSet)&&u.zimIdSets&&((o=u.zimIdSets[t])&&o.splice(o.indexOf(e),1),o&&0==o.length&&(delete u.zimIdSets[t],So.isEmpty(u.zimIdSets)&&delete u.zimIdSets)),"Pen"==u.type&&u.zimOnPath&&(u.stop(),u.zimOnPath=!1),delete u.zimTweens[e],So.isEmpty(u.zimTweens)&&u.stopAnimate(null,null,null,!1,!0),u.zimTweens&&u.zimTweens[e]||u.zimIdSets&&u.zimIdSets[t||e]||So.idSets&&So.idSets[t||e]&&(So.idSets[t||e],0<=(n=So.idSets[t||e].indexOf(u))&&So.idSets[t||e].splice(n,1),So.idSets[t||e].length<=0&&(delete So.idSets[t||e],So.isEmpty(So.idSets)&&delete So.idSets)))}function To(o){!function(){var e=u.zimTweens[o].zimTicker;if(u.zimTweens[o].extraTickers)for(var t=0;t<u.zimTweens[o].extraTickers.length;t++)So.Ticker.remove(u.zimTweens[o].extraTickers[t]);e&&setTimeout(function(){e&&So.Ticker.remove(e),e=null},200)}()}function Ao(e,t){var o=u.zimTweens[e];(o.paused=t)!=o.zimPaused&&((o.zimPaused=t)?o.zimTicker&&(o.zimAnimateTimeout=setTimeout(function(){So.Ticker.remove(o.zimTicker)},200)):(o.startPaused=!1,clearTimeout(o.zimAnimateTimeout),o.zimTicker&&(o.zimTicker=So.Ticker.add(o.zimTicker,Ke))))}function Po(e){for(var t=[],o=0;o<e.length;o++)u.zimIdSets&&!zot(u.zimIdSets[e[o]])?t=t.concat(u.zimIdSets[e[o]]):t.push(e[o]);return t}},So.stopAnimate=function(e,t){if(z_d("45.12"),zot(e)){if(So.animatedObjects)for(var o=So.animatedObjects.length-1;0<=o;o--)So.animatedObjects.objects[o].stopAnimate(null,t)}else if(Array.isArray(e)||(e=[e]),So.idSets)for(var n=0;n<e.length;n++){var r=e[n];if(So.idSets[r])for(o=So.idSets[r].length-1;0<=o;o--)So.idSets[r][o].stopAnimate(r,t)}},So.stopZimAnimate=function(e){z_d("45.1"),So.stopAnimate(e)},So.pauseAnimate=function(e,t){if(z_d("45.22"),zot(e)&&(e=!0),zot(t)||"pauseOnBlur"==t){if(So.animatedObjects)for(var o=So.animatedObjects.length-1;0<=o;o--)So.animatedObjects.objects[o].pauseAnimate(e,t)}else if(Array.isArray(t)||(t=[t]),So.idSets)for(var n=0;n<t.length;n++){var r=t[n];if(So.idSets[r])for(o=So.idSets[r].length-1;0<=o;o--)So.idSets[r][o].pauseAnimate(e,r)}},So.pauseZimAnimate=function(e,t){z_d("45.2"),So.pauseAnimate(e,t)},So.wiggle=function(i,a,l,s,c,u,d,e,h,g,p,f,m,t,z){var o;if(o=zob(So.wiggle,arguments,"target, property, baseAmount, minAmount, maxAmount, minTime, maxTime, totalTime, type, ease, integer, id, startType, ticker, wait"))return o;if(z_d("45.25"),zot(i)||zot(l)||zot(s))return i;zot(c)&&(c=s);var n=Bo(u,null,40);zot(u)&&(u="s"==n?1:1e3),zot(d)&&(d=u),Io(d,n,40),zot(g)&&(g="quadInOut"),zot(p)&&(p=!1),zot(f)&&(f=So.makeID()),zot(h)&&(h="both"),zot(m)&&(m="both"),zot(t)&&(t=!0),zot(z)&&(z=0),Io(e,n,40),zot(e)||(i.wiggleTimeout=setTimeout(function(){i.stopAnimate(f),i.dispatchEvent("wigglestop")},e*("s"==n?1e3:1)));var y,b=0;return function e(){var t,o=So.rand(So.Pick.choose(u),So.Pick.choose(d),!1),n={},r={};r[a]=So.Pick.choose(l),t="negative"==h||0==b&&"negative"==m?-So.rand(So.Pick.choose(s),So.Pick.choose(c),p):"positive"==h||0==b&&"positive"==m?So.rand(So.Pick.choose(s),So.Pick.choose(c),p):0==b?So.rand(So.Pick.choose(s),So.Pick.choose(c),p,!0):So.rand(So.Pick.choose(s),So.Pick.choose(c),p)*So.sign(y)*-1,n[a]=So.Pick.choose(l)+t,0==b&&(o/=2),y=t,b++,"negative"==h||"positive"==h?So.animate({target:i,obj:n,set:r,ease:g,time:2*o,wait:zik(z),rewind:!0,override:!1,call:e,id:f,ticker:!!i.stage,timeCheck:!1}):So.animate({target:i,obj:n,ease:g,time:o,wait:zik(z),override:!1,call:e,id:f,ticker:!!i.stage,timeCheck:!1})}(),i},So.loop=function(e,t,o,n,r,i){var a;if(a=zob(So.loop,arguments,"obj, call, reverse, step, start, end"))return a;if(So.zimLoopCheck||z_d("45.3"),So.zimLoopCheck=!0,!zot(e)&&!zot(t)){zot(o)&&(o=!1),(zot(n)||n<=0)&&(n=1);var l="number"==typeof e?"number":e.constructor===Array?"array":e.constructor==={}.constructor?"object":e instanceof NodeList?"nodelist":"string"==typeof e?"string":e instanceof HTMLCollection?"htmlcollection":"invalid";if("container"!=l||e.addChild){if("number"==l||"string"==l||"array"==l||"nodelist"==l||"htmlcollection"==l){if(0==(c=g((u="number"==l?e:e.length)-1)))return;if(o)for(var s=r;i<=s;s-=n){if(void 0!==(h="number"==l?t(s,c,r,i,e):t("array"==l||"string"==l?e[s]:e.item(s),s,c,r,i,e)))return h}else for(s=r;s<=i;s+=n){if(void 0!==(h="number"==l?t(s,c,r,i,e):t("array"==l||"string"==l?e[s]:e.item(s),s,c,r,i,e)))return h}return!0}if("object"==l){var c,u=0,d=[];for(var s in e)u++,d.push(s);if(0==(c=g(u-1)))return;if(o)for(s=r;i<=s;s-=n){if(void 0!==(h=t(d[s],e[d[s]],s,c,r,i,e)))return h}else for(s=r;s<=i;s+=n){if(void 0!==(h=t(d[s],e[d[s]],s,c,r,i,e)))return h}return!0}if(0!=(c=g(e.numChildren-1))){if(o)for(s=r;i<=s;s-=n){if(void 0!==(h=t(e.getChildAt(s),s,c,r,i,e)))return h}else for(var h,s=r;s<=i;s+=n){if(void 0!==(h=t(e.getChildAt(s),s,c,r,i,e)))return h}return!0}}}function g(e){return zot(r)&&(r=o?e:0),zot(i)&&(i=o?0:e),o&&r<i||!o&&i<r||(r<0&&i)<0||e<r&&e<i?0:(r=Math.max(0,Math.min(r,e)),i=Math.max(0,Math.min(i,e)),Math.floor((o?r-i:i-r)/n)+1)}},So.scaleTo=function(e,t,o,n,r,i){var a;if(a=zob(So.scaleTo,arguments,"obj, boundObj, percentX, percentY, type, boundsOnly"))return a;if("AC"==e.type&&zdf)return zdf.ac("scaleTo",arguments),e;if(z_d("43"),zot(e)||!e.getBounds||!e.getBounds())return zog("zim methods - scaleTo(): please provide an object (with setBounds) to scale"),e;if(zot(t)||!t.getBounds||!t.getBounds())return zog("zim methods - scaleTo(): please provide a boundObject (with setBounds) to scale to"),e;zot(o)&&(o=-1),zot(n)&&(n=-1),-1==o&&-1==n&&(o=n=100),zot(r)&&(r="smallest"),zot(i)&&(i=!1);var l,s=t.getBounds().width*o/100*(i?1:t.scaleX),c=t.getBounds().height*n/100*(i?1:t.scaleY);return"Stage"!=t.type&&"StageGL"!=t.type||(s=t.width*o/100,c=t.height*n/100),-1!=o&&-1!=n||"both"==r||"stretch"==r?"both"==r||"stretch"==r?(e.scaleX=-1!=o?s/e.getBounds().width:e.scaleX,e.scaleY=-1!=n?c/e.getBounds().height:e.scaleY):(l="biggest"==r||"largest"==r||"outside"==r?Math.max(s/e.getBounds().width,c/e.getBounds().height):Math.min(s/e.getBounds().width,c/e.getBounds().height),So.sca(e,l)):-1==o?So.sca(e,c/e.getBounds().height):So.sca(e,s/e.getBounds().width),e},So.fit=function(e,t,o,n,r,i){var a;if(a=zob(So.fit,arguments,"obj, left, top, width, height, inside"))return a;if("AC"==e.type&&zdf)return zdf.ac("fit",arguments),e;if(z_d("46"),!zot(e)&&e.getBounds){if(e.getBounds()){if(zot(t)){if(!e.stage)return void zog("zim methods - fit(): please add boundary dimensions or add obj to stage first");if(!e.stage.getBounds())return void zog("zim methods - fit(): please add boundary dimensions or add obj with bounds to stage first");o=t=0,n=e.stage.getBounds().width,r=e.stage.getBounds().height}zot(i)&&(i=!0),e.scaleX=e.scaleY=1;var l=n,s=r,c=e.getBounds().width,u=e.getBounds().height,d=i?c/u<=l/s?s/u:l/c:c/u<=l/s?l/c:s/u,h=c*(e.scaleX=e.scaleY=d),g=u*d;return e.x=(e.regX-e.getBounds().x)*d+t+(l-h)/2,e.y=(e.regY-e.getBounds().y)*d+o+(s-g)/2,{x:e.x,y:e.y,width:h,height:g,scale:d,bX:t,bY:o,bWidth:n,bHeight:r}}zog("zim methods - fit(): please setBounds() on object")}},So.boundsCheck=!1,So.boundsToGlobal=function(e,t,o){if(So.boundsCheck||(z_d("40"),So.boundsCheck=!0),!zot(e)&&e.getBounds){zot(o)&&(o=!1);var n,r,i,a,l=e.getBounds();if(l||!zot(t)){t&&(l=t),a=o?(n=e.globalToLocal(l.x,l.y),r=e.globalToLocal(l.x+l.width,l.y),i=e.globalToLocal(l.x+l.width,l.y+l.height),e.globalToLocal(l.x,l.y+l.height)):(n=e.localToGlobal(l.x,l.y),r=e.localToGlobal(l.x+l.width,l.y),i=e.localToGlobal(l.x+l.width,l.y+l.height),e.localToGlobal(l.x,l.y+l.height));var s=Math.min(n.x,r.x,i.x,a.x),c=Math.min(n.y,r.y,i.y,a.y),u=Math.max(n.x,r.x,i.x,a.x),d=Math.max(n.y,r.y,i.y,a.y);return new createjs.Rectangle(s,c,u-s,d-c)}zog("zim methods - boundsToGlobal():\n please setBounds() on object (or a rectangle)")}},So.resetBounds=function(e,t,o,n,r){var i,a,l,s;return z_d("40.5"),s=zot(n)?(a=t,l=i=0,o):(i=t,a=n,l=o,r),zot(s)&&(s=a),zot(t)?e.setBounds(null):e.setBounds(i,l,a,s),e},So.copyMatrix=function(e,t){return z_d("45.5"),e.x=t.x,e.y=t.y,e.scaleX=t.scaleX,e.scaleY=t.scaleY,e.regX=t.regX,e.regY=t.regY,e.rotation=t.rotation,e.skewX=t.skewX,e.skewY=t.skewY,e},So.duplicate=function(e,t){z_d("45.6");var o=e.clone(t);for(var n in e)if(e.hasOwnProperty(n)&&null==o[n]){if("parent"==n)continue;o[n]=e[n]}return o},So.expand=function(e,t,o,n,r){var i,a,l;if(i=zob(So.expand,arguments,"padding, paddingVertical, paddingRight, paddingBottom"))return i;if(z_d("50"),zot(e)||!e.getBounds||!e.getBounds())return zog("zim methods - expand(): please provide object with bounds set"),e;zot(t)&&(t=20),zot(o)&&(o=t),l=zot(n)&&zot(r)?(a=n=t,r=o):(zot(n)&&(n=t),zot(r)&&(r=o),a=t,o);var s=e.getBounds(),c=new createjs.Shape;return c.graphics.f("0").r(s.x-a,s.y-l,s.width+a+n,s.height+l+r),e.hitArea=c,e},So.setSwipe=function(i,e){if(z_d("34"),!zot(i)&&i.on)return i.zimNoSwipe=!e||null,i instanceof createjs.Container&&function e(t){var o=t.numChildren;var n;for(var r=0;r<o;r++)(n=t.getChildAt(r)).zimNoSwipe=i.zimNoSwipe,n instanceof createjs.Container&&e(n)}(i),i},So.setMask=function(n,r,i){if(z_d("50.1"),zot(n)&&zog("zim methods - setMask(): please provide obj"),zot(r))return e(),n;var a,l=n.stage||(zdf?zdf.stage:null);function e(){n.zimMask&&n.zimMask.parent&&n.zimMask.parent.removeChild(n.zimMask),n.zimMask=null,n.zimMaskTicker&&So.Ticker.remove(n.zimMaskTicker),n.mask=null}function t(){if(i&&(!l||!r.stage))return n;var e,t,o;a&&a.dispose&&a.dispose(),a=null,n.zimMask=r.zimMask=a=r.shape.clone(),So.copyMatrix(a,r),r.addChildAt(a,0),a.alpha=0,n.parent&&(e=r.getConcatenatedMatrix().decompose(),t=n.parent.getConcatenatedMatrix().decompose(),a.scaleX=e.scaleX/t.scaleX,a.scaleY=e.scaleY/t.scaleY,a.rotation=(e.rotation?e.rotation:0)-(t.rotation?t.rotation:0),o=r.localToLocal(r.shape.x+r.regX,r.shape.y+r.regY,n.parent),a.x=o.x,a.y=o.y),n.mask=a}return n.zimMaskOriginal&&n.zimMaskOriginal!=r&&e(),zot(i)&&(i=!("Blob"!=r.type&&zot(r.zimDown)&&zot(r.transformControls)&&zot(r.zimTouch)&&zot(r.zimTweens)),r.zimMaskDynamic=i),(n.zimMaskOriginal=r).zimMaskApply=function(){n.zimMaskTicker&&So.Ticker.remove(n.zimMaskTicker),n.zimMaskTicker=So.Ticker.add(t)},r&&r.shape?(t(),i&&r.zimMaskApply()):(a=r,n.mask=a),n},So.outline=function(t,e,o,n){var r;if(r=zob(So.outline,arguments,"obj, color, size, boundsOnly"))return r;if(z_d("47"),t.type&&"zimOultineShape"==t.type)return zon&&zogy("zim.outline() - warning, you are trying to outline an outline - do not outline in a loop"),t;if(zot(t)||!t.getBounds)return zog("zim methods - outline(): please provide object with bounds set"),t;if(!t.getBounds())return zog("zim methods - outline(): please setBounds() on object"),t;if(!t.parent)return zog("zim methods - outline(): object should be on stage first"),t;if(zot(e)&&(e="brown"),zot(o)&&(o=2),o<=0)return t.ZIMoutlineShape&&t.ZIMoutlineShape.parent.removeChild(t.ZIMoutlineShape),t.ZIMoutlineShapeC&&t.ZIMoutlineShapeC.parent.removeChild(t.ZIMoutlineShapeC),void(t.ZIMoutlineShape=t.ZIMoutlineShapeC=null);var i=t.getBounds(),a=t.ZIMoutlineShape=t.ZIMoutlineShape?t.ZIMoutlineShape:new So.Shape;a.type="zimOutlineShape";var l=t.ZIMoutlineShapeC=t.ZIMoutlineShapeC?t.ZIMoutlineShapeC:new So.Shape;l.type="zimOutlineShape";var s=t.parent;t.outlineToggled=!0,t.outlineToggle=function(e){return!0===e?(t.ZIMoutlineShape.visible=!0,t.ZIMoutlineShapeC.visible=!0):!1===e?(t.ZIMoutlineShape.visible=!1,t.ZIMoutlineShapeC.visible=!1):(t.ZIMoutlineShape.visible=!t.ZIMoutlineShape.visible,t.ZIMoutlineShapeC.visible=!t.ZIMoutlineShapeC.visible),t.outlineToggled=t.ZIMoutlineShape.visible,t};var c=t.localToLocal(i.x,i.y,s),u=t.localToLocal(i.x+i.width,i.y,s),d=t.localToLocal(i.x+i.width,i.y+i.height,s),h=t.localToLocal(i.x,i.y+i.height,s),g=t.localToLocal(0,0,s),p=a.graphics.c(),f=l.graphics.c();p.s(e).ss(o).mt(c.x,c.y).lt(u.x,u.y).lt(d.x,d.y).lt(h.x,h.y).lt(c.x,c.y).cp(),n||(f.s("white").ss(o+2),f.mt(-11,0).lt(11,0),f.mt(0,-11).lt(0,11),f.s(e).ss(o),f.mt(-10,0).lt(10,0),f.mt(0,-10).lt(0,10),f.cp(),l.x=g.x,l.y=g.y,l.rotation=t.rotation,p.s("white").ss(o+2).dc(t.x,t.y,16),p.s(e).ss(o).dc(t.x,t.y,16)),t.parent.removeChild(a),t.parent.removeChild(l);var m=t.parent.getChildIndex(t);return t.parent.addChildAt(l,m+1),t.parent.addChildAt(a,m+1),a.mouseEnabled=!1,l.mouseEnabled=!1,t},So.STYLE=null,So.ignore="ignore",So.getStyle=function(e,t,o){So.STYLECHECK||(z_d("50.34"),So.STYLECHECK=!0);var n=["pos","addTo","center","centerReg","mov","drag","transform","gesture","outline","bounds","animate","wiggle","cache"],r=So.STYLE;if(void 0!==STYLE&&(r=STYLE),r=zot(r)?{}:So.copy(r),zot(o))o={};else for(var i=0;i<n.length;i++)delete o[n[i]];var a,l=o,s=r.type;if(s&&delete r.type,!zot(t)&&!zot(r.group)){for(var c=t.split(","),u={},i=0;i<c.length;i++){var d=c[i].trim();zot(r.group[d])||(u=So.merge(u,r.group[d]))}delete r.group}for(var h in zot(e)||zot(s)||zot(s[e])||(r=So.merge(r,s[e])),zot(t)||zot(u)||(r=So.merge(r,u)),r)!l[h]&&"ignore"!=(a=-1!=n.indexOf(h)||r.delayPick?r[h]:So.Pick.choose(r[h]))?(a&&a.constructor==={}.constructor&&(a=So.copy(a,!0,!1)),r[h]=a):delete r[h];return!1===(r=So.merge(r,l)).style?{}:r},So.styleTransforms=function(t,o){var e=["visible","x","y","scale","scaleX","scaleY","rotation","alpha","skewX","skewY","regX","regY"];if(o){o.add&&t.addTo(),o.addTo&&t.addTo(!0===o.addTo?null:o.addTo),o.center&&t.center(!0===o.center?null:o.center),o.centerReg&&t.centerReg(!0===o.centerReg?null:o.centerReg);for(var n,r=0;r<e.length;r++)null!=o[e[r]]&&(t[e[r]]=So.Pick.choose(o[e[r]]));if(o.bounds&&o.bounds.constructor==={}.constructor&&t.setBounds(o.bounds.x?o.bounds.x:0,o.bounds.y?o.bounds.y:0,o.bounds.width?o.bounds.width:100,o.bounds.height?o.bounds.height:100),null!=o.x&&(o.loc?null==o.loc.x&&(o.loc.x=o.x):o.loc={x:o.x}),null!=o.y&&(o.loc?null==o.loc.y&&(o.loc.y=o.y):o.loc={y:o.y}),o.loc&&(o.loc.constructor==={}.constructor?t.loc(So.Pick.choose(o.loc.x),So.Pick.choose(o.loc.y)):t.loc(So.Pick.choose(o.loc))),o.pos&&(o.pos.constructor==={}.constructor?t.pos(So.Pick.choose(o.pos.x),So.Pick.choose(o.pos.y),So.Pick.choose(o.pos.right),So.Pick.choose(o.pos.bottom),So.Pick.choose(o.pos.index),o.pos.add,So.Pick.choose(o.pos.reg),So.Pick.choose(o.pos.regX),So.Pick.choose(o.pos.regY)):("left"!=(n=So.Pick.choose(o.pos))&&"top"!=n||t.pos(),"right"==n&&t.pos({right:!0}),"bottom"==n&&t.pos({bottom:!0}),"rightbottom"!=n&&"bottomright"!=n||t.pos({right:!0,bottom:!0}),"center"==n&&t.center())),(o.mov||o.move)&&(o.move&&(o.mov=o.move),o.mov.constructor==={}.constructor?t.mov(So.Pick.choose(o.mov.x),So.Pick.choose(o.mov.y)):t.mov(So.Pick.choose(o.mov))),o.outline&&setTimeout(function(){t.outline(o.outline.constructor==={}.constructor?o.outline:null),t.stage&&t.stage.update()},20),o.drag&&t.drag(o.drag.constructor==={}.constructor?o.drag:{currentTarget:!0}),o.gesture&&t.gesture(o.gesture.constructor==={}.constructor?o.gesture:null),o.transform&&setTimeout(function(){t.transform(o.transform.constructor==={}.constructor?o.transform:null)},20),o.animate){Array.isArray(o.animate)||(o.animate=[o.animate]);for(r=0;r<o.animate.length;r++)!function(){var e=o.animate[r];e.constructor==={}.constructor&&setTimeout(function(){t.animate(e)},20)}()}if(o.wiggle){Array.isArray(o.wiggle)||(o.wiggle=[o.wiggle]);for(r=0;r<o.wiggle.length;r++)!function(){var e=o.wiggle[r];e.constructor==={}.constructor&&setTimeout(function(){t.wiggle(e)},20)}()}o.expand&&t.expand(!0===o.expand?null:o.expand),o.cache&&(o.cache.constructor==={}.constructor?o.cache.x?t.cache(So.Pick.choose(o.cache.x),So.Pick.choose(o.cache.y),So.Pick.choose(o.cache.x),So.Pick.choose(o.cache.y)):t.cache(So.Pick.choose(o.cache.width),So.Pick.choose(o.cache.height)):t.cache())}},So.Style={remembered:{},clear:function(){return STYLE={},So.Style},clearTypes:function(){return delete(STYLE={}).types,So.Style},clearGroups:function(){return delete(STYLE={}).groups,So.Style},remember:function(e){return STYLE=STYLE||{},zot(e)&&(e="default"),So.Style.remembered[e]=So.copy(STYLE,!0),So.Style},clearRemembered:function(e){return zot(e)?So.Style.remembered={}:delete So.Style.remembered[e],So.Style},recall:function(e){return zot(e)&&(e="default"),STYLE=So.Style.remembered[e],So.Style},add:function(e){return STYLE=STYLE||{},STYLE=So.merge(STYLE,e),So.Style},addType:function(e,t){return(STYLE=STYLE||{}).type||(STYLE.type={}),STYLE.type[e]=t,So.Style},addGroup:function(e,t){return(STYLE=STYLE||{}).group||(STYLE.group={}),STYLE.group[e]=t,So.Style},remove:function(e){return delete(STYLE=STYLE||{})[e],So.Style},removeType:function(e){return(STYLE=STYLE||{}).type&&delete STYLE.type[e],So.Style},removeGroup:function(e){return(STYLE=STYLE||{}).group&&delete STYLE.group[e],So.Style}},So.TIME="seconds",So.TIMECHECK=!0,So.ANIMATE=!0,So.OPTIMIZE=!1,So.ACTIONEVENT="mousedown",So.DEFAULTWIRE="currentValue",So.KEYFOCUS=null,So.POSREG=!1,So.DRAGALL=!1,So.MOBILE="default",So.Ticker={stages:null,myUpdate:null,alwaysList:new So.Dictionary,list:new So.Dictionary,wire:new So.Dictionary,setFPS:function(e,t){zot(e)&&zot(t)?(e=30,t=60):zot(e)?e=30:zot(t)&&(t=e),So.Ticker.framerate=createjs.Ticker.framerate=So.mobile()?e:t},setTimingMode:function(e){createjs.Ticker.timingMode=createjs.Ticker.RAF,"synched"==e&&(createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNCHED),"timeout"==e&&(createjs.Ticker.timingMode=createjs.Ticker.TIMEOUT)},add:function(e,t,o){z_d("30");var n=So.Ticker;return n.has(e,t)?e:(!zot(t)&&t.update||(t=zdf.stage),zot(e)||"function"!=typeof e?void zog("zim.Ticker.add() - only add functions"):(n.list.at(t)?n.list.at(t).push(e):n.list.add(t,[e]),n.ticker||(n.ticker=createjs.Ticker.on("tick",n.call)),n.framerate||n.setFPS(),e))},addWire:function(e,t){if(z_d("30"),zot(t[0]))return e;var o=So.Ticker;o.wire.add(e,t);var n=t[0][t[1]];return t[4]&&(n=t[4](n,"from")),t[3]&&(e[t[6]]=t[7]=n),o.ticker||(o.ticker=createjs.Ticker.on("tick",o.call)),o.framerate||o.setFPS(),e},rawID:{},raw:function(o){z_d("30");var n=So.makeID(7,"letters");return function e(t){o(t),So.Ticker.rawID[n]=requestAnimationFrame(e)}(),n},removeRaw:function(e){cancelAnimationFrame(So.Ticker.rawID[e]),delete So.Ticker.rawID[e]},call:function(e){for(var t,o,n=So.Ticker,r=[],i=0;i<n.list.length;i++){t=n.list.objects[i],o=n.list.values[i];for(var a=0;a<o.length;a++)o[a](e);var l=!1;(n.alwaysList.at(t)||0<o.length&&(zot(n.update)&&!So.OPTIMIZE&&(zns||!OPTIMIZE)||n.update))&&(l=!0),l&&r.indexOf(t)<0&&r.push(t)}for(i=n.wire.length-1;0<=i;i--){var s,c=n.wire.objects[i],u=n.wire.values[i];u&&((s=c[u[6]])!=u[7]&&(u[4]&&(s=u[4](s,"to",u[7])),u[0][u[1]]=u[7]=s,u[5]&&u[5](s),(t=u[0].stage)&&r.indexOf(t)<0&&r.push(t)),u[2]&&u[0]&&(s=u[0][u[1]],u[7]!=s&&(u[4]&&(s=u[4](s,"from",u[7])),c[u[6]]=u[7]=s,u[5]&&u[5](s),(t=c.stage)&&r.indexOf(t)<0&&r.push(t))))}if(0==n.list.length)for(i=0;i<n.alwaysList.length;i++)t=n.alwaysList.objects[i],r.indexOf(t)<0&&r.push(t);for(var d=r.length,i=0;i<d;i++)r[i].update()},always:function(e){z_d("30");var t=So.Ticker;t.framerate||t.setFPS(),!zot(e)&&e.update||(e=zdf.stage),t.alwaysList.add(e,!0),t.ticker||(t.ticker=createjs.Ticker.on("tick",t.call))},alwaysOff:function(e){var t=So.Ticker;!zot(e)&&e.update||(e=zdf.stage),t.alwaysList.remove(e)},remove:function(e){var t=So.Ticker;if(zot(e)||"function"!=typeof e)zog("zim.Ticker - only remove functions");else{for(var o=0;o<t.list.length;o++){t.list.objects[o];var n=t.list.values[o].indexOf(e);-1<n&&t.list.values[o].splice(n,1),t.list.values[o].length}0<t.alwaysList.length||0<t.list.length||0<t.wire.length||(createjs.Ticker.off("tick",t.ticker),t.ticker=null)}},removeAll:function(e){for(var t,o=So.Ticker,n=0;n<o.list.length;n++)t=o.list.objects[n],!zot(e)&&e!==t||(o.list.values[n]=[]),o.list.values[n].length;0<o.alwaysList.length||0<o.list.length||0<o.wire.length||(createjs.Ticker.off("tick",o.ticker),o.ticker=null)},removeWire:function(e,t,o,n){var r=So.Ticker;if(zot(e)&&zot(t)&&zot(o)&&zot(n))r.wire.clear();else for(var i=r.wire.length-1;0<=i;i--){var a=r.wire.objects[i],l=r.wire.values[i];l&&(e&&a!=e||t&&l[0]!=t||o&&l[1]!=o||n&&l[6]!=n||(r.wire.objects.splice(i,1),r.wire.values.splice(i,1)))}0<r.alwaysList.length||0<r.list.length||0<r.wire.length||(createjs.Ticker.off("tick",r.ticker),r.ticker=null)},has:function(e,t){return!zot(t)&&t.update||(t=zdf.stage),So.Ticker.list&&So.Ticker.list.at(t)&&0<=So.Ticker.list.at(t).indexOf(e)},dispose:function(e){for(var t,o=So.Ticker,n=0,r=o.list.length-1;0<=r;r--)t=o.list.objects[r],zot(e)||e===t?(o.list.remove(e),o.alwaysList.remove(e)):n+=o.list.values[r].length;if(!(0<o.alwaysList.length))return 0==n&&(createjs.Ticker.off("tick",o.ticker),o.ticker=null),!0}},So.Ticker.setFPS(),Object.defineProperty(So.Ticker,"update",{get:function(){return So.Ticker.myUpdate},set:function(e){var t=So.Ticker;"boolean"!=typeof e&&(e=null),t.myUpdate=e,!1===t.myUpdate&&(cancelAnimationFrame(t.ticker),t.alwaysList=new So.Dictionary)}}),So.Pages=function(o,C,x,e,k,t,n,r){var i;if(i=zob(So.Pages,arguments,"pages, transition, speed, transitionTable, holder, style, group, inherit",this))return i;z_d("71"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pages",this.group=n;var a=!1===t?{}:So.getStyle(this.type,this.group,r),l=Bo(x);if(zot(o)&&(o=null!=a.pages?a.pages:[]),this.pages=o,zot(C)&&(C=null!=a.transition?a.transition:"none"),zot(x)&&(x=null!=a.speed?a.speed:"s"==l?.2:200),zot(e)&&(e=null!=a.transitionTable?a.transitionTable:[]),this.transitionTable=e,zot(k)&&(k=null!=a.holder?a.holder:null),zot(k)&&zdf&&(k=zdf.stage),k.getBounds&&k.getBounds()){this.speed=x,this.active=!0;var T=this;T.transitioning=!1;var A,P,S=k.getBounds().width,B=k.getBounds().height;"none"==C&&e==[]||m();for(var s,I=["left","right","up","down"],c=!0,u=0;u<o.length;u++)(g=o[u]).constructor!={}.constructor&&(g=o[u]={page:o[u]}),g.swipe&&(c=!1);for(var d,h,g,u=0;u<o.length;u++){(g=o[u]).constructor!=={}.constructor&&(g=o[u]={page:o[u]}),c&&(d=o[u-1],h=o[u+1],g.swipe=[d?d.page:null,h?h.page:null]),z(g.page,g.swipe)}var p,E=this.page=o[0]?o[0].page:null;zot(this.page)||(this.index=0),this.addChild(E),j(E),this.swipe=new So.Swipe(k);var O=!1,f=this.swipe.on("swipe",function(e){var t,o,n;!T.active||"none"!=(t=e.currentTarget.direction)&&(o="","left"==t?o="right":"right"==t?o="left":"up"==t?o="down":"down"==t&&(o="up"),t=o,n=I.indexOf(t),s=E.zimSwipeArray[n],p=[s,t,null,null,!0],T.page=E,T.nextPage=s,T.direction=t,T.dispatchEvent("swipe"),setTimeout(function(){O||T.go(s,t,null,null,!0)},50))});this.addPage=function(e,t){z(e,t),T.pages.push({page:e}),E?e.parent&&e.parent.removeChild(e):(E=T.page=e,T.addChild(E))},this.removePage=function(o){L(o),T.currentPage==o&&(T.removeChild(o),k.stage&&k.stage.update()),So.loop(T.pages,function(e,t){e.page!=o&&e!=o||T.pages.splice(t,1)},!0),o.zimSwipeArray=null},this.setSwipeArray=function(e,t){zot(t)&&(t=[]);var o={page:e,swipe:t};o.page.zimSwipeArray=o.swipe?o.swipe:[]},this.pause=function(){O=!0},this.unpause=function(){O&&T.go(p[0],p[1],p[2],p[3],p[4])};var M=!0;this.go=function(e,t,o,n,r){if("number"==typeof e){var i=T.pages[e];if(zot(i))return;e=i.page}setTimeout(function(){O=!1},200);for(var a=[{x:S},{x:-S},{y:B},{y:-B}],l=[{x:S/2,alpha:0},{x:-S/2,alpha:0},{y:B/2,alpha:0},{y:-B/2,alpha:0}],s=C,c=x,u=0;u<T.transitionTable.length;u++)if(T.transitionTable[u][0]==E&&T.transitionTable[u][1]==e){s=T.transitionTable[u][2],zot(T.transitionTable[u][3])||(c=T.transitionTable[u][3]);break}if(zot(o)&&(o=s),zot(n)&&(n=c),T.speed=n,T.direction=t,""==e||null==e)T.page=E,T.dispatchEvent("nothing");else if("string"==typeof e)T.page=E,T.dispatchEvent(e);else{if(e==E)return;zot(t)&&(t="right");var d=I.indexOf(t);if(!M)return;function h(e){e[0].uncache(),e[1].uncache(),T.transitioning=!1,T.dispatchEvent("pagetransitioned"),T.removeChild(T.lastPage),"fan"==o&&("right"==t||"down"==t?(T.lastPage.rotation=0,T.lastPage.regY=0,T.lastPage.mov(0,-T.lastPage.height)):(T.page.rotation=0,T.page.regY=0,T.page.mov(0,-T.lastPage.height))),T.removeChild(A),T.removeChild(P),j(E),M=!0}function g(e){T.removeChild(T.lastPage),So.animate(e.shift(),{alpha:0},T.speed/2,null,h,e)}M=!1,e.x=0,e.y=0,e.alpha=e.zimOriginalAlpha;var p,f;0<=["pixelDark","pixelLight","pixelZIM","bubbleDark","bubbleLight","bubbleZIM","lineDark","lineLight","lineZIM"].indexOf(o)&&(p=o,f=!0,o="slide");var m,z,y,b,v,w;0<=["explodeDark","explodeLight","explodeZIM"].indexOf(o)&&(m=o,f=!0,o="fade"),"Emitter"==o.type&&(o=(f=o).horizontal||o.vertical?"slide":"fade"),T.transitioning=!0,"slide"==o?(e.x=-(0|a[d].x),e.y=-(0|a[d].y),e.cache(0,0,(S+1)/e.scaleX,(B+1)/e.scaleY),E.cache(0,0,(S+1)/E.scaleX,(B+1)/E.scaleY),T.addChild(e),T.addChild(E),So.animate(E,a[d],T.speed,null,h,[E,e]),So.animate(e,[{x:0},{x:0},{y:0},{y:0}][d],T.speed)):"reveal"==o?(e.cache(0,0,(S+1)/e.scaleX,(B+1)/e.scaleY),E.cache(0,0,(S+1)/E.scaleX,(B+1)/E.scaleY),T.addChild(e),T.addChild(E),So.animate(E,l[d],T.speed,null,h,[E,e])):"fade"==o?(e.cache(0,0,(S+1)/e.scaleX,(B+1)/e.scaleY),E.cache(0,0,(S+1)/E.scaleX,(B+1)/E.scaleY),e.alpha=1,T.addChild(e),T.addChild(E),So.animate(E,{alpha:0},T.speed,null,h,[E,e])):"black"==o?(e.cache(0,0,(S+1)/e.scaleX,(B+1)/e.scaleY),E.cache(0,0,(S+1)/E.scaleX,(B+1)/E.scaleY),e.alpha=1,T.addChild(e),T.addChild(E),A.alpha=0,T.addChild(A),So.animate(A,{alpha:1},T.speed/2,null,g,[A,E,e])):"clear"==o?(e.cache(0,0,(S+1)/e.scaleX,(B+1)/e.scaleY),E.cache(0,0,(S+1)/E.scaleX,(B+1)/E.scaleY),e.alpha=0,T.addChild(e),T.addChild(E),So.animate(E,{alpha:0},T.speed/2),So.animate(e,{alpha:1},T.speed/2,null,h,[E,e],T.speed/2)):"white"==o?(e.cache(0,0,(S+1)/e.scaleX,(B+1)/e.scaleY),E.cache(0,0,(S+1)/E.scaleX,(B+1)/E.scaleY),e.alpha=1,T.addChild(e),T.addChild(E),P.alpha=0,T.addChild(P),So.animate(P,{alpha:1},T.speed/2,null,g,[P,E,e])):"fan"==o?(e.cache(0,0,(S+1)/e.scaleX,(B+1)/e.scaleY),E.cache(0,0,(S+1)/E.scaleX,(B+1)/E.scaleY),e.alpha=1,"right"==t||"down"==t?(T.addChild(e),T.addChild(E),E.regY=E.height,E.mov(0,E.height),So.animate(E,{rotation:-90},T.speed,null,h,[E,e])):(T.addChild(E),T.addChild(e),e.regY=E.height,e.mov(0,E.height),e.rotation=-90,So.animate(e,{rotation:0},T.speed,null,h,[E,e]))):(T.transitioning=!1,T.addChild(e),T.removeChild(E),M=!0),f&&(z=d<2,p||"slide"==o?(b=p?("lineDark"==p||"lineLight"==p?y=new So.Rectangle(z?30:S+5,z?B+5:30,"lineDark"==p?So.dark:So.white).alp(.2):"lineZIM"==p?y=new So.Rectangle(z?50:S+5,z?B+5:50,[So.green,So.yellow,So.orange,So.pink,So.blue]).alp(.5):"pixelDark"==p||"pixelLight"==p?y=new So.Rectangle(40,40,So.clear,"pixelDark"==p?So.dark:So.white,2).alp(.7):"pixelZIM"==p?y=new So.Rectangle(40,40,[So.green,So.yellow,So.orange,So.pink,So.blue]).alp(.7):"bubbleDark"==p||"bubbleLight"==p?y=new So.Circle(30,So.clear,"bubbleDark"==p?So.dark:So.white,2).alp(.7):"bubbleZIM"==p&&(y=new So.Circle(30,[So.green,So.yellow,So.orange,So.pink,So.blue]).alp(.7)),y.centerReg({add:!1}),"lineDark"==p||"lineLight"==p||"lineZIM"==p?new So.Emitter({obj:y,life:.5,decayTime:.5,shrink:!1,force:0,gravity:0,width:0,startPaused:!0}):new So.Emitter({obj:y,num:6,life:.5,decayTime:.5,width:z?0:S,height:z?B:0,vertical:z,horizontal:!z,startPaused:!0})):f,v=[{x:0,y:B/2},{x:S,y:B/2},{x:S/2,y:0},{x:S/2,y:B}],w=[{x:S,y:B/2},{x:0,y:B/2},{x:S/2,y:B},{x:S/2,y:0}],b.centerReg(k).spurt(null,T.speed),b.x=v[d].x,b.y=v[d].y,So.animate(b,w[d],T.speed,null,function(){p&&b.dispose()})):!m&&"fade"!=o||((b=m?("explodeDark"==m||"explodeLight"==m?y=new So.Circle(150,"explodeDark"==m?So.dark:So.white).alp(.5):"explodeZIM"==m&&(y=new So.Circle(130,[So.green,So.yellow,So.orange,So.pink,So.blue]).alp(.7)),new So.Emitter({obj:y,num:5,gravity:0,force:{min:20,max:40},life:.5,shrink:!1,decayTime:.5,startPaused:!0})):f).centerReg(k).spurt(null,.35*T.speed),b.on("fizzed",function(){m&&b.dispose()}))),L(E),T.lastPage=E,T.page=e,T.index=-1;for(u=0;u<T.pages.length;u++){T.pages[u].page==T.page&&(T.index=u)}"none"==o&&j(e),zot(r)&&(r=!1),T.fromSwipe=r,T.dispatchEvent("page"),E=e,k.stage&&k.stage.update()}},this.resize=function(){S=k.getBounds().width,B=k.getBounds().height,"none"==C&&e==[]||m()},this.puff=function(e){for(var t=0;t<o.length;t++)T.addChild(o[t].page);T.addChild(E),0<e&&setTimeout(function(){T.settle()},e*("s"==l?1e3:1))},this.settle=function(){T.removeAllChildren(),T.addChild(E),T.dispatchEvent("puffed")},this.disable=function(){T.active=!1},!(this.enable=function(){T.active=!0})!==t&&So.styleTransforms(this,a),this.dispose=function(e,t,o){return T.swipe.off("swipe",f),o||this.zimContainer_dispose(!0),!0}}else zog("zim controls - Pages():\nholder object must have bounds set");function m(){(A=new createjs.Shape).graphics.f("black").r(0,0,S,B+1),(P=new createjs.Shape).graphics.f("white").r(0,0,S,B+1)}function z(e,t){e.zimHTMLList=new So.Dictionary,L(e),e.zimSwipeArray=t||[],e.zimOriginalAlpha=e.alpha,e.parent&&e.parent.removeChild(g.page)}function j(e){if(!zot(e))for(var t=0;t<e.zimHTMLList.length;t++)e.addChildAt(e.zimHTMLList.values[t].obj,e.zimHTMLList.values[t].depth)}function L(e){e.zimHTMLList.clear();for(var t,o=0;o<e.numChildren;o++){"TextArea"!=(n=e.getChildAt(o)).type&&"Loader"!=n.type&&"Tag"!=n.type||(t={obj:n,depth:e.getChildIndex(n)},e.zimHTMLList.add(n,t))}for(var n,o=e.numChildren-1;0<=o;o--){"TextArea"!=(n=e.getChildAt(o)).type&&"Loader"!=n.type&&"Tag"!=n.type||e.removeChild(n)}}},So.extend(So.Pages,So.Container,["clone","dispose"],"zimContainer",!1),So.HotSpots=function(a,o,r){var e;if(e=zob(So.HotSpots,arguments,"spots, local, mouseDowns",this))return e;z_d("72"),this.zimContainer_constructor(null,null,null,null,!1),this.type="HotSpots",zot(o)&&(o=!0),zot(r)&&(r=!1);var l,i,s=(zns?"mousedown"==So.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",c=this.hotSpots=[];zot(a)&&(a=[]);for(var t=0;t<a.length;t++)u(a[t]);function u(e){var t=null;if(!Array.isArray(e.rect)){if(!(t=e.rect))return void zog("zim controls - HotSpots(): HotSpot "+e.page+" "+e.rect+" button does not exist");e.rect=[t.x,t.y,t.width||1,t.height||1]}(i=new So.HotSpot(e.page,e.rect[0],e.rect[1],e.rect[2],e.rect[3],e.call,e.callOver,e.callOut,o,e.talk)).zimHSpage=e.page,i.button=t,c.push(i),i.on(s,d),t&&zot(e.callOver)&&zot(e.callOut)&&(i.spot.mouseEnabled=!1,i.spot.mouseChildren=!1,t.zimHScall=e.call,t.zimHSEvent=t.on(s,d,!0),r||(t.zimHSMDEvent=t.on("mousedown",function(e){e.stopImmediatePropagation()})),t.cursor="pointer")}function d(e){e.stopImmediatePropagation&&e.stopImmediatePropagation(),window.event&&(window.event.cancelBubble=!0),"function"==typeof e.currentTarget.zimHScall&&e.currentTarget.zimHScall(e)}this.add=this.addHotSpot=function(e,t,o,n,r,i){l={page:e,rect:t,call:o,callOver:n,callOut:r,talk:i},a.push(l),u(l)},this.show=function(){for(var e=0;e<c.length;e++)(i=c[e]).button||(i.spot.alpha=.2)},this.hide=function(){for(var e=0;e<c.length;e++)(i=c[e]).spot.alpha=0},this.remove=this.removeHotSpots=function(e,t){for(var o=a.length-1;0<=o;o--)l=a[o],i=c[o],t&&!Array.isArray(t)&&(t=[t.x,t.y,t.getBounds().width,t.getBounds().height]),(zot(e)&&zot(t)||zot(t)&&e==l.page||zot(e)&&So.arraysEqual(t,l.rect)||e==l.page&&So.arraysEqual(t,l.rect))&&(a.splice(o,1),i.button&&(i.button.off(s,i.button.zimHSEvent),i.button.zimHSEvent=null,r||(i.button.off("mousedown",i.button.zimHSMDEvent),i.button.zimHSMDEvent=null)),i.off(s,d),i.dispose(),c.splice(o,1))},this.dispose=function(e,t,o){for(var n=0;n<c.length;n++)(i=c[n]).button&&(i.button.off(s,i.button.zimHSEvent),i.button.zimHSCall=null,i.button.zimHSEvent=null,r||(i.button.off("mousedown",i.button.zimHSMDEvent),i.button.zimHSMDEvent=null)),i.off(s,d),i.dispose();return!0}},So.extend(So.HotSpots,So.Container,"clone","zimContainer",!1),So.HotSpot=function(n,e,t,o,r,i,a,l,s,c){var u,d,h,g,p,f,m,z,y,b,v,w;if(u=zob(So.HotSpot,arguments,"obj, x, y, width, height, call, callOver, callOut, local, talk",this))return u;z_d("73"),this.zimContainer_constructor(null,null,null,null,!1),this.type="HotSpot",!zot(n)&&n.addChild?n instanceof createjs.Container!=0?zot(e)||zot(t)||zot(o)||zot(r)?zog("zim controls - HotSpot():\nPlease pass in x, y, width, height"):(zot(s)&&(s=!0),d=(zns?"mousedown"==So.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",h=o,g=r,z=s?(p=new So.Point(e,t),m=o,r):(p=n.globalToLocal(e,t),m=(f=n.globalToLocal(e+h,t+g)).x-p.x,f.y-p.y),(y=new So.Shape(o,r)).talk=zot(c)?"HotSpot":c,y.alpha=0,y.graphics.f("black").dr(0,0,m,z),y.x=p.x,y.y=p.y,y.cursor="pointer",y.expand(0),this.spot=y,"function"==typeof i&&(b=y.on(d,function(e){i(e)})),"function"==typeof a&&(v=y.on("mouseover",function(e){a(e)})),"function"==typeof l&&(w=y.on("mouseout",function(e){l(e)})),n.addChild(y),this.show=function(){y.alpha=.5,n.stage&&n.stage.update()},this.hide=function(){y.alpha=0,n.stage&&n.stage.update()},this.dispose=function(e,t,o){return b&&y.off(d,v),v&&y.off("mouseover",v),w&&y.off("mouseout",w),n.removeChild(y),!(y=null)}):zog("zim controls - HotSpot():\nObjects passed in should be Containers"):zog("zim controls - HotSpot():\nPlease pass in container object for obj")},So.extend(So.HotSpot,So.Container,"clone","zimContainer",!1),So.Guide=function(n,r,i,t,o,e,a,l){var s;if(s=zob(So.Guide,arguments,"obj, vertical, percent, hideKey, pixelKey, style, group, inherit",this))return s;z_d("76"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Guide",this.group=a;var c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A=!1===e?{}:So.getStyle(this.type,this.group,l);function P(e,t,o){var n=new So.Container({style:!1});return n.shape=new createjs.Shape,n.shape.graphics.s(t).ss(1).f(e).r(0,0,d,h),n.shape.alpha=.9,n.addChild(n.shape),n.label=new createjs.Text("10","16px arial",o),n.label.textAlign="center",n.label.textBaseline="middle",n.addChild(n.label),n.mouseChildren=!1,n.mouseEnabled=!1,n}function S(e){var t,o;e?(t=n.globalToLocal(e.rawX/So.scaX,e.rawY/So.scaY),T=t):t={x:T.x,y:T.y},i?r?(o=Math.round(Math.abs(t.x-x.x)/w*100),z.label.text="x:"+Math.max(0,Math.min(o,100))+"%",z.y=Math.max(p,Math.min(t.y,m))):(o=Math.round(Math.abs(t.y-x.y)/C*100),z.label.text="y:"+Math.max(0,Math.min(o,100))+"%",z.x=Math.max(g,Math.min(t.x,f))):r?(o=Math.round(Math.abs(t.x-x.x)),z.label.text="x:"+Math.max(0,Math.min(o,Math.round(w))),z.y=Math.max(p,Math.min(t.y,m))):(o=Math.round(Math.abs(t.y-x.y)),z.label.text="y:"+Math.max(0,Math.min(o,Math.round(C))),z.x=Math.max(g,Math.min(t.x,f))),y&&y.update()}function B(){var e;v=!0,w=n.getBounds().width,C=n.getBounds().height,k=r?(e="ew-resize",new createjs.Rectangle(0,0,w,0)):(e="ns-resize",new createjs.Rectangle(0,0,0,C)),So.noDrag(x),setTimeout(function(){So.drag(x,k,e,e,null,null,!0)},500),y.mouseMoveOutside=!0,y.enableMouseOver(10),f=w-2*d/3,m=C-h-h,x.uncache();var t=x.graphics;r?(t.c().s("rgba(0,255,255,.1)").ss(20).mt(0,0).lt(0,C),t.f().s("white").ss(2).mt(0,0).lt(0,C),t.s("#00c5af").sd([20,20]).mt(0,0).lt(0,C).sd(),x.cache(-10,0,20,C)):(t.c().s("rgba(255,0,255,.1)").ss(20).mt(0,0).lt(w,0),t.f().s("white").ss(2).mt(0,0).lt(w,0),t.s("#d61fa0").sd([20,20]).mt(0,0).lt(w,0).sd(),x.cache(0,-10,w,20)),r?z.x=w:z.y=C,c.addChild(z)}function I(e){e=e||event,y&&(String.fromCharCode(e.keyCode)==t.toUpperCase()&&c.toggle(),String.fromCharCode(e.keyCode)==o.toUpperCase()&&(c.pixels=!c.pixels))}!zot(n)||null!=A.obj&&A.obj,zot(n)&&(n=zdf?zdf.stage:"stage"),zot(r)&&(r=null==A.vertical||A.vertical),"stage"==n||n.addChild&&n.getBounds&&n.getBounds()?(zot(i)&&(i=null==A.percent||A.percent),zot(t)&&(t=null!=A.hideKey?A.hideKey:"G"),zot(o)&&(o=null!=A.pixelKey?A.pixelKey:"P"),c=this,g=(d=80)/6+d/2,p=2*(h=26),r?((z=P("#00c5af","white","white")).shape.regX=d+d/6,z.shape.regY=h/2,z.label.x=-d/2-d/6):((z=P("#d61fa0","white","white")).shape.regX=d/2,z.shape.regY=h+h/4,z.label.y=3*-h/4),"stage"!=n&&n.addChild(c),b=So.added(c,function(){"stage"==n?(y=c.stage,n=y):y=n.stage;n.addChild(c),w=n.getBounds().width,C=n.getBounds().height,r?(z.y=C/2,z.label.text="x:"+(c.percent?"70%":Math.round(70*w/100))):(z.x=w/2,z.label.text="y:"+(c.percent?"70%":Math.round(70*C/100)));x=new createjs.Shape,c.addChild(x),r?x.x=.7*w:x.y=.7*C,v||(n.addChild(c),B());y.off("stagemousemove",u),u=y.on("stagemousemove",S),y.update()}),v=!1,T={x:0,y:0},Object.defineProperty(this,"pixels",{get:function(){return!i},set:function(e){i=!e,c.resize()}}),window.addEventListener("keydown",I),this.toggled=!0,this.toggle=function(e){return!0===e?c.visible=c.toggled=!0:!1===e?c.visible=c.toggled=!1:(c.visible=!c.visible,c.toggled=c.visible),y&&(y.off("stagemousemove",u),c.visible&&(u=y.on("stagemousemove",S,c)),y.update()),c},!(this.resize=function(){return!!c&&(y&&(B(),S()),!0)})!==e&&So.styleTransforms(this,A),this.dispose=function(e,t,o){return!!c&&(So.noDrag(x),clearInterval(b),c.removeAllChildren(),window.removeEventListener("keydown",I),c.parent&&c.parent.removeChild(c),!(c=null))}):zog("zim controls - Guide(): Please provide container with bounds for the obj (setBounds())")},So.extend(So.Guide,So.Container,"clone","zimContainer",!1),So.Grid=function(r,i,a,t,o,e,n,l){var s;if(s=zob(So.Grid,arguments,"obj, color, percent, hideKey, pixelKey, style, group, inherit",this))return s;z_d("78"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Grid",this.group=n;var c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P=!1===e?{}:So.getStyle(this.type,this.group,l);function S(e,t,o){var n=new So.Container({style:!1});return n.shape=new createjs.Shape,n.shape.graphics.s(t).ss(1).f(e).r(0,0,h,g),n.shape.alpha=.9,n.addChild(n.shape),n.label=new createjs.Text("10","16px arial",o),n.label.textAlign="center",n.label.textBaseline="middle",n.addChild(n.label),n.mouseChildren=!1,n.mouseEnabled=!1,n}function B(e){var t;e?(t=r.globalToLocal(e.rawX/So.scaX,e.rawY/So.scaY),x=t):t={x:x.x,y:x.y},a?(p.label.text="x:"+Math.max(0,Math.min(Math.round(t.x/k*100),100))+"%",p.x=Math.max(m,Math.min(t.x,y)),f.label.text="y:"+Math.max(0,Math.min(Math.round(t.y/T*100),100))+"%"):(p.label.text="x:"+Math.max(0,Math.min(Math.round(t.x),Math.round(k))),p.x=Math.max(m,Math.min(t.x,y)),f.label.text="y:"+Math.max(0,Math.min(Math.round(t.y),Math.round(T)))),f.y=Math.max(z,Math.min(t.y,b)),v&&v.update()}function I(){C=!0,r&&r.getBounds&&(k=r.getBounds().width,T=r.getBounds().height),v&&(v.mouseMoveOutside=!0,v.enableMouseOver(10)),y=k-2*h/3,b=T-g-g,A=new So.Container({style:!1}),c.addChild(A);var e=new createjs.Shape;A.addChild(e);var t=e.graphics;t.s(i).ss(1);var o=new createjs.Shape;if(A.addChild(o),a){for(n=1;n<22;n++)t.mt(n*k/20,0).lt(n*k/20,T);for(n=1;n<20;n++)t.mt(0,n*T/20).lt(k,n*T/20);e.alpha=.3,(t=o.graphics).s(i).ss(1);for(n=1;n<10;n++)t.mt(n*k/10,0).lt(n*k/10,T);for(n=1;n<10;n++)t.mt(0,n*T/10).lt(k,n*T/10)}else{for(var n=0;n<k/u;n++)t.mt(n*u,0).lt(n*u,T);for(var n=0;n<T/u;n++)t.mt(0,n*u).lt(k,n*u);e.alpha=.3,(t=o.graphics).s(i).ss(1);for(var n=0;n<k/(10*u);n++)t.mt(n*(10*u),0).lt(n*(10*u),T);for(var n=0;n<T/(10*u);n++)t.mt(0,n*(10*u)).lt(k,n*(10*u))}t.s("#FFFFFF").ss(8),t.mt(k/2,T/2-40).lt(k/2,T/2+40),t.mt(k/2-40,T/2).lt(k/2+40,T/2),t.s("#000000").ss(4),t.mt(k/2,T/2-40).lt(k/2,T/2+40),t.mt(k/2-40,T/2).lt(k/2+40,T/2),t.s(i).ss(3),t.dr(0,0,k,T),o.alpha=.5,A.cache(0,0,k,T),c.addChild(p),c.addChild(f),v&&v.update()}function E(e){e=e||event,v&&(String.fromCharCode(e.keyCode)==t.toUpperCase()&&c.toggle(),String.fromCharCode(e.keyCode)==o.toUpperCase()&&(c.removeChild(A),A=null,c.pixels=!c.pixels))}!zot(r)||null!=P.obj&&P.obj,zot(r)&&(r=zdf?zdf.stage:"stage"),zot(i)&&(i=null!=P.color?P.color:"black"),"stage"==r||r.addChild&&r.getBounds&&r.getBounds()?(zot(a)&&(a=null==P.percent||P.percent),zot(t)&&(t=null!=P.hideKey?P.hideKey:"G"),zot(o)&&(o=null!=P.pixelKey?P.pixelKey:"P"),u=10,(c=this).mouseChildren=!1,this.mouseEnabled=!1,h=80,g=26,(p=S("#dddddd",i,"#333333")).shape.regX=h/2,p.shape.regY=-g/4,p.label.y=3*g/4,(f=S("#dddddd",i,"#333333")).shape.regX=-h/6,f.shape.regY=g/2,f.label.x=h/2+h/6,m=h/6+h/2,z=2*g,p.x=m,f.y=z,p.label.text="x:0",f.label.text="y:0","stage"!=r&&r.addChild(c),w=So.added(c,function(){"stage"==r?(v=c.stage,r=v):v=r.stage;C||(I(),r.addChild(c));v.off("stagemousemove",d),d=v.on("stagemousemove",B),v.update()}),C=!1,x={x:0,y:0},Object.defineProperty(this,"pixels",{get:function(){return!a},set:function(e){a=!e,c.resize()}}),window.addEventListener("keydown",E),this.toggled=!0,this.toggle=function(e){return!0===e?c.visible=c.toggled=!0:!1===e?c.visible=c.toggled=!1:(c.visible=!c.visible,c.toggled=c.visible),v.off("stagemousemove",d),c.visible&&(d=v.on("stagemousemove",B,c)),v&&v.update(),c},!(this.resize=function(){return!!c&&(c.removeChild(A),A=null,v&&(I(),B(),setTimeout(function(){c.removeChild(A),A=null,I()},200)),!0)})!==e&&So.styleTransforms(this,P),this.dispose=function(e,t,o){return clearInterval(w),c.removeAllChildren(),window.removeEventListener("keydown",E),c.parent&&c.parent.removeChild(c),!(c=null)}):zog("zim controls - Grid(): Please provide container with bounds for the obj (setBounds())")},So.extend(So.Grid,So.Container,"clone","zimContainer",!1),So.Wrapper=function(e,P,w,C,x,S,k,B,I,E,T,O,A,M,j,t,L,Y,_,D,X,o,n,r){var i;if(i=zob(So.Wrapper,arguments,"items, width, spacingH, spacingV, wrapperType, align, valign, alignInner, valignInner, flip, reverse, bottomFull, colSize, rowSize, height, minSpreadNum, minStretchNum, percentVoidH, offsetVoidH, percentVoidV, offsetVoidV, style, group, inherit",this))return i;z_d("78.5"),this.group=n;var a=!1===o?{}:So.getStyle("Wrapper",this.group,r);zot(P)&&(P=null!=a.width?a.width:300),zot(j)&&(j=null!=a.height?a.height:null),zot(w)&&(w=null!=a.spacingH?a.spacingH:null),zot(C)&&(C=null!=a.spacingV?a.spacingV:null),zot(x)&&(x=null!=a.wrapperType?a.wrapperType:"spacing"),zot(S)&&(S=null!=a.align?a.align:"left"),zot(k)&&(k=null!=a.valign?a.valign:"top"),zot(B)&&(B=null!=a.alignInner?a.alignInner:"left"),zot(I)&&(I=null!=a.valignInner?a.valignInner:"bottom"),zot(E)&&(E=null!=a.flip&&a.flip),zot(T)&&(T=null!=a.reverse&&a.reverse),zot(O)&&(O=null!=a.bottomFull&&a.bottomFull),zot(A)&&(A=null!=a.colSize?a.colSize:100),zot(M)&&(M=null!=a.rowSize?a.rowSize:null),zot(w)&&(w=0),zot(C)&&(C=0),zot(t)&&(t=null!=a.minSpreadNum?a.minSpreadNum:2),zot(L)&&(L=null!=a.minStretchNum?a.minStretchNum:3),zot(Y)&&(Y=null!=a.percentVoidH?a.percentVoidH:0),zot(_)&&(_=null!=a.offsetVoidH?a.offsetVoidH:0),zot(D)&&(D=null!=a.percentVoidV?a.percentVoidV:0),zot(X)&&(X=null!=a.offsetVoidV?a.offsetVoidV:0);var R,W,H=0,F=0,V=0,N=P;this.items=[],"spread"==x?R=!0:"stretch"==x&&(W=!0),this.zimContainer_constructor(P,200),this.type="Wrapper","middle"==S&&(S="center"),"middle"==k&&(k="center"),"middle"==B&&(B="center"),"middle"==I&&(I="center");var G=this;function q(r,t,o,e,i,n,a,l){var s=So.Pick.choose(S),c=So.Pick.choose(R),u=So.Pick.choose(W),d=So.Pick.choose(E),h=So.Pick.choose(B),g=So.Pick.choose(I);zot(s)&&(s="left"),zot(g)&&(g="top"),zot(h)&&(h="left"),d&&r.reverse();var p,f,m,z,y,b,v,w,C,x=((100-n)/100/2+a/100)*P,k=P*n/100,T=0,A=!1;i?((O||E)&&r.reverse(),p=N%i,f=N/2+a/100*N,m=0,z=Math.floor(N/i),0!=G.rows&&l&&(A=!0),So.loop(r,function(e,t){T=0,m="right"==h?i*t+0+i-e.wrapWidth:"center"==h||"middle"==h?i*t+0+(i-e.wrapWidth)/2:i*t+0;var o,n=e.x;e.pos(m),w=e.x-n,e.centerX+=w,e.marginLeft&&(T+=e.marginLeft),e.marginRight&&(T-=e.marginRight),"center"==s||"middle"==s?(o=Math.floor(N/i)-r.length,T+=(p+(o?o*i:0))/2):"right"==s&&(o=Math.floor(N/i)-r.length,T+=p+(o?o*i:0)),e.mov(T),e.centerX+=T}),"center"==s&&A&&(r.length+z)%2!=0&&(T=(f<=N/2?-1:1)*i/2,So.loop(r,function(e,t){e.mov(T),e.centerX+=T}))):c||u?(c?y=r.length?(N-e)/(r.length+1):0:u&&(y=0<r.length-1?(N-e)/(r.length-1):0),r.length<L&&0!=G.rows&&l&&(y=V,A=!0),V=y,b=0,(O||E)&&r.reverse(),So.loop(r,function(e,t,o){T=0;var n=e.x;e.pos(y*(t+(c?1:0))+b),w=e.x-n,e.centerX+=w,A||(e.marginLeft&&(T+=e.marginLeft),e.marginRight&&(T-=e.marginRight),e.mov(T),e.centerX+=T),b+=e.wrapWidth}),A&&(T=0,v=c?y:0,w=0,So.loop(r,function(e,t){var o,n;"right"==s?(n=e.x,e.pos(v,null,So.RIGHT),w=e.x-n,v+=e.wrapWidth+y):"center"==s&&(o=(N-(b+(r.length-1)*y))/2-(c?y:0),n=e.x,e.pos(v+o,null,So.RIGHT),w=e.x-n,v+=e.wrapWidth+y),e.marginLeft&&(T+=e.marginLeft),e.marginRight&&(T-=e.marginRight),e.mov(T),e.centerX+=w+T},!0))):"center"==s?So.loop(r,function(e){T=((O||E?0:P)-t.x)/2,(c||u)&&(e.marginLeft&&(T+=e.marginLeft),e.marginRight&&(T-=e.marginRight)),e.mov(T),e.centerX+=T}):(O||E)&&"left"==s?(C=r[r.length-1].marginLeft,So.loop(r,function(e){T=-t.x+(C||0),c&&(T+=F),e.mov(T),e.centerX+=T})):O||E||"right"!=s?c&&c&&So.loop(r,function(e){T=F*("right"==s?-1:1),e.mov(T),e.centerX+=T}):(C=r[r.length-1].marginRight,So.loop(r,function(e){T=P-t.x-(C||0),c&&(T-=F),e.mov(T),e.centerX+=T})),n&&(x=(.5+a/100)*N,k=P*n/100,So.loop(r,function(e){i||u||c?"right"==s?e.centerX>N-x&&e.mov(k):"center"==s?Math.round(e.centerX)==Math.round(N/2+a/100*N)?e.mov(k/2):Math.round(e.centerX)>Math.round(N/2+a/100*N)&&e.mov(k):e.centerX>x&&e.mov(k):O||E||"right"!=s?O||E||"center"!=s?(O||E)&&"right"==s?e.centerX>N-x&&e.mov(k):(O||E)&&"center"==s?e.centerX>N/2+a/100*N&&e.mov(k):e.centerX>x&&e.mov(k):e.centerX>P/2+a/100*N?e.mov(k/2):e.mov(-k/2):e.centerX<P-x&&e.mov(-k)})),c&&(F=(H+=y)/(G.rows+1)),"center"==g?So.loop(r,function(e){e.mov(0,(o-e.wrapHeight)/2*(O?-1:1))}):O||"bottom"!=g?O&&"top"==g&&So.loop(r,function(e){e.mov(0,-(o-e.wrapHeight)+(e.marginTop?e.marginTop:0))}):So.loop(r,function(e){e.mov(0,o-e.wrapHeight-(e.marginBottom?e.marginBottom:0))})}this.add=function(e){return this.addAt(e,this.numChildren-1),G},this.addAt=function(e,o){return zot(e)||((zot(o)||o<0)&&(o=0),Array.isArray(e)||(e=[e]),So.loop(e,function(e,t){G.addChildAt(e,o+t)}),G.resize()),G},this.remove=function(e){return Array.isArray(e)||(e=[e]),So.loop(e,function(e){e&&e.removeFrom&&e.removeFrom()},!0),G.resize(),G},this.convert=function(e,t){var o=[];return e.loop(function(e){o.push(e),t&&e.cache()}),G.add(o),e.removeFrom(),G},this.resize=function(e,t){if(!G.preventResize){zot(e)||(P=e),zot(t)||(j=t),this.items2D=[],this.items=[],V=F=H=0,zot(Y)&&(Y=0),zot(_)&&(_=0);var s=So.Pick.choose(Y),c=So.Pick.choose(_);N=P*(100-s)/100,this.setBounds(N,200);var u=0,d=0,h=0;G.cols=0,G.rows=0;var g=[],p=[0],f=null,m=0,z=null,y=So.Pick.choose(A);"column"!=x&&(y=null);var b=So.Pick.choose(M),v=0;So.loop(this,function(e,t,o){O||E?e.pos(u+(e.marginRight?e.marginRight:0),d+(e.marginTop?e.marginTop:0),So.RIGHT,E?So.TOP:So.BOTTOM):e.pos(u+(e.marginLeft?e.marginLeft:0),d+(e.marginTop?e.marginTop:0)),v++,z=e.boundsToGlobal();var n,r,i,a=G.globalToLocal(z.x,z.y),l=G.globalToLocal(z.x+z.width,z.y+z.height);n=O||E?G.globalToLocal(z.x,z.y):G.globalToLocal(z.x+z.width,z.y+z.height),e.wrapHeight=l.y-a.y,e.wrapWidth=l.x-a.x,s&&(r=G.globalToLocal(z.x+e.wrapWidth/2,z.y+e.wrapHeight/2),e.centerX=r.x,e.centerY=r.y,r=null),i=y?y*v:O||E?N-n.x+(e.marginLeft?e.marginLeft:0)+w:n.x+(e.marginRight?e.marginRight:0)+w,Math.round(i)-w>N&&(q(g,f,h,m,y,s,c,!1),(m=0)==G.cols&&(G.cols=t),u=0,d+=h+(b?0:So.Pick.choose(C)),h=0,b=So.Pick.choose(M),s=So.Pick.choose(Y),c=So.Pick.choose(_),v=0,G.items2D.push(So.copy(g)),G.rows++,p.push(d),g=[],O||E?e.pos(u+(e.marginRight?e.marginRight:0),d+(e.marginTop?e.marginTop:0),So.RIGHT,E?So.TOP:So.BOTTOM):e.pos(u+(e.marginLeft?e.marginLeft:0),d+(e.marginTop?e.marginTop:0)),s&&(z=e.boundsToGlobal(),r=G.globalToLocal(z.x+e.wrapWidth/2,z.y+e.wrapHeight/2),e.centerX=r.x,e.centerY=r.y,r=null),v++,y?i=0:(i=(e.marginLeft?e.marginLeft:0)+e.wrapWidth+(e.marginRight?e.marginRight:0)+So.Pick.choose(w),n.x=O||E?N-((e.marginRight?e.marginRight:0)+e.wrapWidth):(e.marginLeft?e.marginLeft:0)+e.wrapWidth)),g.push(e),m+=e.wrapWidth,u=i,h=b||Math.max(h,e.wrapHeight+(e.marginTop?e.marginTop:0)+(e.marginBottom?e.marginBottom:0)),f=new So.Point(n.x,d+h)},(!T||!O)&&(T||O)),0<G.numChildren&&(0==G.cols&&(G.cols=G.numChildren),G.items2D.push(So.copy(g)),p.push(d),q(g,f,h,m,y,s,c,!0),G.rows+=1),zot(So.Pick.choose(k))&&0,O&&(i=d+h-200,So.loop(this,function(e){e.mov(0,i)}),G.items2D.reverse(),So.loop(G.items2D,function(e){e.reverse()}));var o,n,r,i,a=So.Pick.choose(D),l=So.Pick.choose(X);return zot(a)||(zot(l)&&(l=0),n=(o=d+h)*a/100,r=o/2+l/100*o,So.loop(p,function(e,t){if(r<=e)return So.loop(G.items2D,function(e,t){So.loop(e,function(e){e.mov(0,n)})},null,1,t),"break"})),zot(j)||("bottom"==k?(i=j-(d+h),So.loop(this,function(e){e.mov(0,i)})):"center"!=k&&"middle"!=k||(i=(j-(d+h))/2,So.loop(this,function(e){e.mov(0,i)}))),G.setBounds(null),(z=G.getBounds())&&G.setBounds(0,z.y,P,z.height),So.loop(G.items2D,function(e){So.loop(e,function(e){G.items.push(e)})}),this.stage&&this.stage.update(),G}},Object.defineProperty(G,"spacingH",{get:function(){return w},set:function(e){w=e,this.resize()}}),Object.defineProperty(G,"spacingV",{get:function(){return C},set:function(e){C=e,this.resize()}}),Object.defineProperty(G,"wrapperType",{get:function(){return x},set:function(e){R="spread"==e,W="stretch"==e,x=e,this.resize()}}),Object.defineProperty(G,"align",{get:function(){return S},set:function(e){"middle"==(S=e)&&(S="center"),this.resize()}}),Object.defineProperty(G,"valign",{get:function(){return k},set:function(e){"middle"==(k=e)&&(k="center"),this.resize()}}),Object.defineProperty(G,"alignInner",{get:function(){return B},set:function(e){"middle"==(B=e)&&(B="center"),this.resize()}}),Object.defineProperty(G,"valignInner",{get:function(){return I},set:function(e){"middle"==(I=e)&&(I="center"),this.resize()}}),Object.defineProperty(G,"colSize",{get:function(){return A},set:function(e){A=e,"column"==x&&this.resize()}}),Object.defineProperty(G,"rowSize",{get:function(){return M},set:function(e){M=e,this.resize()}}),Object.defineProperty(G,"flip",{get:function(){return E},set:function(e){E=e,this.resize()}}),Object.defineProperty(G,"reverse",{get:function(){return T},set:function(e){T=e,this.resize()}}),Object.defineProperty(G,"bottomFull",{get:function(){return O},set:function(e){O=e,this.resize()}}),Object.defineProperty(G,"percentVoidH",{get:function(){return Y},set:function(e){Y=e,this.resize()}}),Object.defineProperty(G,"offsetVoidH",{get:function(){return _},set:function(e){_=e,this.resize()}}),Object.defineProperty(G,"percentVoidV",{get:function(){return D},set:function(e){D=e,this.resize()}}),Object.defineProperty(G,"offsetVoidV",{get:function(){return X},set:function(e){X=e,this.resize()}}),zot(e)||G.add(e),!1!==o&&So.styleTransforms(this,a),this.clone=function(){return G.cloneProps(new So.Wrapper(e,P,w,C,x,S,k,B,I,E,T,O,A,M,j,t,L,Y,_,D,X,this.style,this.group))}},So.extend(So.Wrapper,So.Container,"clone","zimContainer",!1),So.Tile=function(n,s,c,e,t,r,u,d,o,i,h,g,p,f,m,a,l,z,y,b,v,w,C){var x;if(x=zob(So.Tile,arguments,"obj, cols, rows, spacingH, spacingV, unique, width, height, squeezeH, squeezeV, colSize, rowSize, align, valign, count, mirrorH, mirrorV, snapToPixel, clone, events, group, style, inherit",this))return x;z_d("66.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Tile",this.group=v;var k,T=!1===w?{}:So.getStyle(this.type,this.group,C);zot(n)&&(n=null!=T.obj?T.obj:new So.Circle),zot(s)&&(s=null!=T.cols?T.cols:1121),zot(c)&&(c=null!=T.rows?T.rows:1121),1121==s&&1121==c?s=c=k=3:1121==s?s=1:1121==c&&(c=1),zot(r)&&(r=null!=T.unique&&T.unique),zot(u)&&(u=null!=T.width?T.width:null),zot(d)&&(d=null!=T.height?T.height:null),zot(h)&&(h=null!=T.colSize?T.colSize:null),zot(g)&&(g=null!=T.rowSize?T.rowSize:null),zot(u)||(h=null),zot(d)||(g=null),zot(e)&&(e=null!=T.spacingH?T.spacingH:k?3:null),zot(t)&&(t=null!=T.spacingV?T.spacingV:k?3:null),!zot(e)&&zot(h)||(e=0),!zot(t)&&zot(g)||(t=0),zot(o)&&(o=null!=T.squeezeH&&T.squeezeH),zot(i)&&(i=null!=T.squeezeV&&T.squeezeV),zot(p)&&(p=null!=T.align?T.align:"left"),zot(f)&&(f=null!=T.valign?T.valign:"top"),zot(m)&&(m=null!=T.count?T.count:r&&Array.isArray(n)?n.length:null),0===m&&(m=null,zon&&zog("ZIM Tile() - count parameter of 0 is ignored - see docs")),zot(a)&&(a=null!=T.mirrorH&&T.mirrorH),zot(l)&&(l=null!=T.mirrorV&&T.mirrorV),zot(z)&&(z=null==T.snapToPixel||T.snapToPixel),z&&(n&&n.stage?n.stage.snapToPixelEnabled=!0:"undefined"!=typeof elem&&zdf&&(zdf.stage.snapToPixelEnabled=!0)),zot(y)&&(y=null!=T.clone?T.clone:!r),zot(b)&&(b=null==T.events||T.events);var A=this;A.cols=s=Math.round(s),A.rows=c=Math.round(c),A.spacingH=e,A.spacingV=t,A.squeezeH=o,A.squeezeV=i;var P,S="function"==typeof p,B="function"==typeof f;A.align=S?"left":p,A.valign=B?"top":f,A.mirrorH=a,A.mirrorV=l,A.items=[];var I,E,O,M,j,L,Y,_,D,X,R,W,H,F,V,N,G,q,Q=0;e:for(var U=0;U<c;U++)for(var K=0;K<s;K++){if(Q++,!zot(m)&&m<Q)break e;"string"==typeof(P=r?n[Q-1]:So.Pick.choose(n))&&(P=window.asset(P).centerReg({add:!1}).clone()),zot(P)&&(P=new So.Container(0,0,0,0)),y&&(0==U&&0==K||(P=P.clone())),b&&P.on("change",function(e){var t=new createjs.Event("change");t.item=e.currentTarget,A.dispatchEvent(t)}),A.items.push(P),P.tileNum=Q-1,P.tileCol=K,P.tileRow=U}function Z(){A.removeAllChildren(),I=[],E=[],O=[],M=[],j=[],D=_=Y=L=0,X=[],R=[],W=[],F=[],H=[],A.items&&A.items.length||(A.items=[]),m=A.items.length;for(var e,t,o,n=0,r=0,i=0,a=0;a<m;a++)r=Math.floor(a/A.cols),i=a%A.cols,zot(I[r])&&(I[r]=[]),zot(A.items[a])&&(A.items[a]=new So.Container(0,0,0,0)),I[r][i]=A.items[a];A.rows=Math.max(1,I.length),A.cols=Math.max(1,zot(I[0])?0:I[0].length);e:for(r=0;r<A.rows;r++){X.push([]),R.push([]),F.push([]),g&&zot(d)&&(t=So.Pick.choose(g));for(a=0;a<A.cols;a++){if(n++,!zot(m)&&m<n)break e;(e=I[r][a]).snapToPixel=z,A.addChild(e),X[r].push(e.scaleX),R[r].push(e.scaleY),0==r&&h&&zot(u)&&(o=So.Pick.choose(h)),0==r&&H.push(So.Pick.choose(p)),h&&zot(u)||(o=Math.abs(e.width)),g&&zot(d)||(t=Math.abs(e.height)),F[r][a]=[o,t],zot(M[a])&&(M[a]=0),zot(j[r])&&(j[r]=0),o>M[a]&&(M[a]=o),t>j[r]&&(j[r]=t),zot(E[r])&&(E[r]=0),zot(O[a])&&(O[a]=0),E[r]+=o,O[a]+=t,E[r]>L&&(L=E[r]),O[a]>Y&&(Y=O[a]),zot(W[a])&&(W[a]=0),W[a]++}}if(!1===A.squeezeH)for(a=0;a<M.length;a++){var l=M[a];_+=l}if(!1===A.squeezeV)for(a=0;a<j.length;a++){l=j[a];D+=l}}function J(e,t){var o,n;e<=0&&(e=null),t<=0&&(t=null),V=zot(e)||"full"!=A.squeezeH?zot(e)?0<_?_+(A.cols-1)*A.spacingH:L+(A.cols-1)*A.spacingH:Math.max(L+(A.cols-1)*A.spacingH,e):e,N=zot(t)||"full"!=A.squeezeV?zot(t)?0<D?D+(A.rows-1)*A.spacingV:Y+(A.rows-1)*A.spacingV:Math.max(Y+(A.rows-1)*A.spacingV,t):t,A.setBounds(0,0,V,N),G=[],q=[];var r,i,a,l=[];for(U=0;U<I.length;U++)for(o=I[U],n=0,zot(e)||0,K=0;K<o.length;K++){P=o[K],0==U&&(G[K]=0,zot(t)||("full"==A.squeezeV?q[K]=1<W[K]?(t-O[K])/(W[K]-1):0:A.squeezeV?q[K]=1<W[K]?Math.max(A.spacingV,(t-O[K])/(W[K]-1)):0:q[K]=1<W[K]?Math.max(A.spacingV,(N-O[K])/(W[K]-1)):0),A.squeezeV?"center"==A.valign||"middle"==A.valign?l[K]=(N-(O[K]+(W[K]-1)*(zot(t)?A.spacingV:q[K])))/2:"bottom"==A.valign?l[K]=N-(O[K]+(W[K]-1)*(zot(t)?A.spacingV:q[K])):l[K]=0:l[K]=0),P.getBounds(),0==K&&(zot(e)||(i="full"==A.squeezeH?1<o.length?(e-E[U])/(o.length-1):0:A.squeezeH?1<o.length?Math.max(A.spacingH,(e-E[U])/(o.length-1)):0:1<o.length?Math.max(A.spacingH,(V-E[U])/(o.length-1)):0),r=A.squeezeH?"center"==A.align||"middle"==A.align?(V-(E[U]+(o.length-1)*(zot(e)?A.spacingH:i)))/2:"right"==A.align?V-(E[U]+(o.length-1)*(zot(e)?A.spacingH:i)):0:0,a=So.Pick.choose(f)),p=H[K];var s=F[U][K][0],c=F[U][K][1];A.mirrorH&&K%2==1&&(P.scaleX=-X[U][K]),P.pos(n,null),!A.squeezeH&&S?!zot(e)||"center"!=p&&"middle"!=p?zot(e)&&"right"==p&&(P.x+=M[K]-P.width):P.x+=(M[K]-P.width)/2:A.squeezeH?!zot(e)||"center"!=A.align&&"middle"!=A.align?zot(e)&&"right"==A.align&&(P.x+=s-P.width):P.x+=(s-P.width)/2:!zot(e)||"center"!=A.align&&"middle"!=A.align?zot(e)&&"right"==A.align&&(P.x+=M[K]-P.width):P.x+=(M[K]-P.width)/2,A.mirrorV&&U%2==1&&(P.scaleY=-R[U][K]),P.pos(null,G[K]),!A.squeezeV&&B?!zot(t)||"center"!=a&&"middle"!=a?zot(t)&&"bottom"==a&&(P.y+=j[U]-P.height):P.y+=(j[U]-P.height)/2:A.squeezeV?!zot(t)||"center"!=A.valign&&"middle"!=A.valign?zot(t)&&"bottom"==A.valign&&(P.y+=c-P.height):P.y+=(c-P.height)/2:!zot(t)||"center"!=A.valign&&"middle"!=A.valign?zot(t)&&"bottom"==A.valign&&(P.y+=j[U]-P.height):P.y+=(j[U]-P.height)/2,!0!==A.squeezeH&&zot(e)?n+=M[K]+(zot(e)?A.spacingH:i):n+=s+(zot(e)?A.spacingH:i),P.x+=r,P.y+=l[K],!0!==A.squeezeV&&zot(t)?G[K]+=j[U]+(zot(t)?A.spacingV:q[K]):G[K]+=c+(zot(t)?A.spacingV:q[K])}}function $(e){for(var t,o=[],n=0;n<e.length;n++)n%A.cols==0&&(t=[],o.push(t)),t.push(e[n]);return o}function ee(e){for(var t=[],o=0;o<A.cols;o++)t.push([]);for(o=0;o<e.length;o++)t[o%A.cols][Math.floor(o/A.cols)]=e[o];return t}Z(),J(u,d),this.itemUnderPoint=function(o,n,r){if(zot(r)&&(r=!0),!zot(o)&&!zot(n)){var e=A.globalToLocal(o,n);o=e.x,n=e.y;var i=0,t=So.loop(M,function(e,t){return i+=e+A.spacingH,!((!r||"vertical"==r)&&o>i-A.spacingH&&o<i)&&(o<i-A.spacingH/2?t:void 0)});if(!1!==t&&(!0===t&&(t=s-1),!(o<0||V<o||n<0||N<n))){var a=0,l=So.loop(j,function(e,t){var o=zot(d)?A.spacingV:q[K];return!((!r||"horizontal"==r)&&a-o<n&&n<a)&&(n<(a+=e+o)-o/2?t:void 0)});if(!1!==l)return!0===l&&(l=c-1),A.items2D[l][t]}}},this.remake=function(e){return zot(e)||(A.items=e),Z(),J(u,d),A},this.resize=function(e,t){return zot(e)&&(e=u),zot(t)&&(t=d),J(u=e,d=t),A},Object.defineProperty(this,"items2D",{get:function(){return $(A.items)},set:function(e){zon&&zogy("Tile() - items2D is read only")}}),Object.defineProperty(this,"items2DCols",{get:function(){return ee(A.items)},set:function(e){zon&&zogy("Tile() - items2DCols is read only")}}),Object.defineProperty(this,"current",{get:function(){var i=[];A.width,A.cols,A.spacingH,A.cols,A.height,A.rows,A.spacingV,A.rows;return So.loop(A.items,function(e){var t=e.getBounds(),o=e.x-e.regX+t.x+t.width/2,n=e.y-e.regY+t.y+t.height/2,r=A.hitTestGrid(A.width,A.height,A.cols,A.rows,o,n,null,null,null,null,!0);null!=r&&(i[r]=e)}),i},set:function(e){zon&&zogy("Tile() - current is read only")}}),Object.defineProperty(this,"current2D",{get:function(){return $(A.current)},set:function(e){zon&&zogy("Tile() - current2D is read only")}}),Object.defineProperty(this,"current2DCols",{get:function(){return ee(A.current)},set:function(e){zon&&zogy("Tile() - current2DCols is read only")}}),!1!==w&&So.styleTransforms(this,T),this.clone=function(e){if(e)for(var t=[],o=0;o<A.items.length;o++)t.push(A.items[o].clone(!0));return A.cloneProps(new So.Tile(e?So.series(t):n.clone?n.clone():n,A.cols,A.rows,A.spacingH,A.spacingV,r,u,d,A.squeezeH,A.squeezeV,h,g,p,f,A.items.length,A.mirrorH,A.mirrorV,z,!e&&y,b,this.style,this.group))}},So.extend(So.Tile,So.Container,"clone","zimContainer",!1),So.Beads=function(i,n,e,a,r,l,s,c,u,d,h,g,t,o,p){var f;if(f=zob(So.Beads,arguments,"path, obj, count, angle, startPercent, endPercent, percents, onTop, showControls, visible, interactive, clone, group, style, inherit",this))return f;z_d("66.7"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Beads",this.group=t;var m=!1===o?{}:So.getStyle(this.type,this.group,p);zot(c)&&(c=null!=m.onTop&&m.onTop),zot(u)&&(u=null!=m.showControls&&m.showControls),zot(d)&&(d=null==m.visible||m.visible),zot(h)&&(h=null==m.interactive||m.interactive),zot(i)&&(i=null!=m.path?m.path:new So.Blob({color:null,borderWidth:3,borderColor:So.blue})),i.visible=d,i.interactive=h,i.toggle(u),i.onTop=c,zot(n)&&(n=null!=m.obj?m.obj:new So.Circle(10)),zot(e)&&(e=null!=m.count?m.count:10),zot(a)&&(a=null!=m.angle?m.angle:null),zot(r)&&(r=null!=m.startPercent?m.startPercent:0),zot(l)&&(l=null!=m.endPercent?m.endPercent:100),zot(s)&&(s=null!=m.percents?m.percents:null);var z=l<r?100+l:l;if(zot(s)){var y="Squiggle"==i.type?(z-r)/(e-1):(z-r)/(e-(r!=z%100?1:0));s=[];for(var b=r-y,v=0;v<e;v++)s.push(b+y),100<(b+=y)&&(b-=100)}zot(g)&&(g=null==m.clone||m.clone);var w,C=this;C.count=e,C.percents=s,C.items=[];for(v=0;v<e;v++)w=So.Pick.choose(n),g&&0!=v&&(w=w.clone()),w.beadNum=v,w.startPercent=s[v],C.items.push(w);C.path=i.addTo(C),C.beads=(new So.Container).addTo(C,c?0:null),C.beads.type="BeadsContainer",this.resize=function(){for(var e=i.segmentRatios,t=i.segmentPoints,o=0;o<C.count;o++){var n,r=i.getCurvePoint(Math.max(0,Math.min(.9999,s[o]/100)),e,t,!0);r&&((n=C.beads.globalToLocal(r.x,r.y))&&C.items[o].loc(n,null,C.beads).rot((zot(a)?180<r.angle?r.angle-360:r.angle:a)+C.items[o].rotation))}return this},C.resize(),h&&(i.on("pressmove",C.resize),i.on("update",C.resize)),!1!==o&&So.styleTransforms(this,m),this.clone=function(e){if(e)for(var t=[],o=0;o<C.items.length;o++)t.push(C.items[o].clone(!0));return C.cloneProps(new So.Beads(i.clone(),e?So.series(t):n.clone?n.clone():n,C.count,a,r,l,s,c,u,d,h,g,this.style,this.group))}},So.extend(So.Beads,So.Container,"clone","zimContainer",!1),So.Layout=function(v,w,C,x,k,T,A,t,e,o,n){var r;if(r=zob(So.Layout,arguments,"holder, regions, lastMargin, backgroundColor, vertical, regionShape, scalingObject, hideKey, style, group, inherit",this))return r;z_d("80"),this.cjsEventDispatcher_constructor(),this.type="Layout",this.group=o;var i=!1===e?{}:So.getStyle(this.type,this.group,n);if(zot(v)&&(v=null!=i.holder?i.holder:null),zot(A)&&(A=null!=i.scalingObject?i.scalingObject:null),!zot(v)&&v.getBounds)if((A=zot(A)?v:A).getBounds&&A.getBounds()){var P=A.getBounds();v.setBounds(0,0,P.width,P.height),zot(C)&&(C=null!=i.lastMargin?i.lastMargin:0),zot(k)&&(k=null==i.vertical||i.vertical),zot(x)&&(x=null!=i.backgroundColor?i.backgroundColor:""),zot(t)&&(t=null!=i.hideKey?i.hideKey:"B"),zot(T)&&(T=null!=i.regionShape?i.regionShape.clone():null);var S,B=new createjs.Shape,I=this;if(this.active=!0,zot(w)&&(w=null!=i.regions?So.copy(i.regions):null),!zot(w)){this.regions=w;var E=0,O="minWidth",M="width",j="height",L="marginLeft",Y="maxHeight";k&&(O="minHeight",M="height",j="width",L="marginTop",Y="maxWidth",0);for(var _,a=0;a<w.length;a++){if(!(S=w[a]).object||!S.object.getBounds())return void zog("zim controls - Layout(): each region object must have an object with setBounds() set");S[O]||(S[O]=0),S[M]||(S[M]=0),S.backgroundColor||(S.backgroundColor=""),S.given=0,S.maxGiven=0,zot(S[L])&&(S[L]=1e-4),S[Y]||(S[Y]=100),k?(S.align||(S.align="middle"),S.valign||(0==a?S.valign="top":a==w.length-1?S.valign="bottom":S.valign="middle",1==w.length&&(S.valign="middle"))):(S.valign||(S.valign="top"),S.align||(0==a?S.align="left":a==w.length-1?S.align="right":S.align="middle",1==w.length&&(S.align="middle"))),S[M]&&(S[O]=0),E+=S[M]+S[L]}100<(E+=C)?zog("zim controls - Layout(): cannot fit regions into 100% bounds"):(_=100-E,D(),this.resize=function(){if(I.active){P=A.getBounds(),v.setBounds(0,0,P.width,P.height),B.graphics.clear(),""!=x&&B.graphics.f(x).r(0,0,P.width,P.height);for(var e=0;e<w.length;e++)(S=w[e]).maxGiven=0,S.marginGiven=0;for(var t,o,n,r=!0,i=_;r;){t=!(r=!1);for(e=0;e<w.length;e++)0<(S=w[e]).given&&0==S.maxGiven&&(h=S.object.getBounds()[M],g=S.object.getBounds()[j],o=S.given*P[M]/100,(n=S[Y]*P[j]/100)<g/h*o&&"Window"!=S.object.type?(S.maxGiven=h/g*n*100/P[M],S.given,S.maxGiven,i-=S.maxGiven):t=!1);if(t)break;for(var a=0,e=0;e<w.length;e++)0==(S=w[e])[M]&&0==S.maxGiven&&(a+=S.object.getBounds()[M]);for(e=0;e<w.length;e++)0==(S=w[e])[M]&&0==S.maxGiven&&(S.given=S.object.getBounds()[M]/a*i)}var l=!0;if(0<(S=w[0]).maxGiven?S.maxGiven<S[O]&&(S[M]=S[O],l=!1):0<S.given&&S.given<S[O]&&(S[M]=S[O],l=!1),0<(S=w[w.length-1]).maxGiven?S.maxGiven<S[O]&&(S[M]=S[O],l=!1):0<S.given&&S.given<S[O]&&(S[M]=S[O],l=!1),!l){for(e=E=0;e<w.length;e++)S=w[e],E+=S[M]+S[L];return 100<(E+=C)?void zog("zim display - Layout(): cannot fit regions into 100% bounds"):(_=100-E,D(),void I.resize())}for(var s=!0,c=0,u=0,e=0;e<w.length;e++)c+=(S=w[e])[L],0<S[M]?u+=S[M]:0<S.maxGiven?u+=S.maxGiven:0<S.given&&(u+=S.given),0==S[M]&&(s=!1);if(s||t){var d=100-u-(c+=C);if(c-=C+w[0][L],0!=d&&0!=c)for(e=0;e<w.length;e++)0!=e&&((S=w[e]).marginGiven=S[L]/c*(c+d))}var h,g,p,f,m,z,y=0,b=0;T&&T.graphics&&(z=T.graphics).c();for(e=0;e<w.length;e++)0<(S=w[e]).marginGiven?y+=S.marginGiven*P[M]/100:y+=S[L]*P[M]/100,h=(h=0<S[M]?S[M]:0<S.maxGiven?S.maxGiven:0<S.given?S.given:0)*P[M]/100,g=S[Y]*P[j]/100,b=(P[j]-g)/2,p=k?("Wrapper"==S.object.type&&S.object.resize(g),"Window"==S.object.type&&S.object.resize(g,h),"Region"==S.object.type&&S.object.setBounds(g,h),So.fit(S.object,b,y,g,h)):("Wrapper"==S.object.type&&S.object.resize(h),"Window"==S.object.type&&S.object.resize(h,g),"Region"==S.object.type&&S.object.setBounds(h,g),So.fit(S.object,y,b,h,g)),"top"==S.valign?S.object.y=p.bY:"bottom"==S.valign&&(S.object.y=p.bY+p.bHeight-p.height),"left"==S.align?S.object.x=p.bX:"right"==S.align&&(S.object.x=p.bX+p.bWidth-p.width),T&&T.graphics&&(z.s("white").ss(2).r(p.bX,p.bY,p.bWidth,p.bHeight),z.s("#ff8203").sd([20,20]).r(p.bX,p.bY,p.bWidth,p.bHeight).sd()),(m=f=0)!=y&&y+h!=P[M]||(k?m=1:f=1),g==P[j]&&(k?f=1:m=1),""!=S.backgroundColor&&B.graphics.f(S.backgroundColor).r(p.bX,p.bY,p.bWidth+f,p.bHeight+m),y+=h}},this.resize(),T&&v.addChild(T),v.addChildAt(B,0),window.addEventListener("keydown",l),this.disable=function(){I.active=!1,window.removeEventListener("keydown",l),T&&(T.alpha=0)},this.enable=function(){I.active=!0,window.addEventListener("keydown",l),I.resize(),T&&(T.alpha=1)},this.removeShape=function(){T&&(T.graphics.clear(),v.removeChild(T),T=null,T=!1),window.removeEventListener("keydown",l)},this.toggled=!0,this.toggle=function(e){return T.visible=!0===e||!1!==e&&!T.visible,I.toggled=T.visible,I},!(this.addShape=function(e,t){I.removeShape(),T=e,window.addEventListener("keydown",l),v.addChild(T),I.resize()})!==e&&So.styleTransforms(this,i),this.dispose=function(e,t,o){return I.removeShape(),!0})}}else zog("zim controls - Layout(): holder must have bounds set or provide a scalingObject with bounds");else zog("zim controls - Layout(): please provide an object with bounds set that holds the objects being laid out");function D(){for(var e=0,t=0;t<w.length;t++)((S=w[t]).given=0)==S[M]&&(e+=S.object.getBounds()[M]);for(t=0;t<w.length;t++)0==(S=w[t])[M]&&(S.given=S.object.getBounds()[M]/e*_)}function l(e){e=e||event,T&&String.fromCharCode(e.keyCode)==t.toUpperCase()&&(I.toggle(),T.stage&&T.stage.update())}},So.extend(So.Layout,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),So.Accessibility=function(u,e,o,t,n,g,p,r,i,a,l,s,c,d,h){var f;if(f=zob(So.Accessibility,arguments,"appName, tabOrder, tabIndex, cycle, decimals, frame, application, alwaysHighlight, AHTime, AHColor, AHBorderWidth, AHBorderPadding, AHAlpha, AHObject, AHObjectScale",this))return f;z_d("30.5"),this.cjsEventDispatcher_constructor(),this.type="Accessibility",zot(u)&&(u="application"),zot(t)&&(t=!1),zot(n)&&(n=2),zot(g)&&(g=zdf),zot(p)&&(p=!So.mobile()),zot(r)&&(r=!1);var m,z,y,b,v,w,C,x,k,T,A,P,S,B,I,E,O,M,j,L,Y,_,D,X,R,W,H,F,V=Bo(i);function N(e){var t=e.currentTarget.boundsToGlobal(),o=t.x+t.width/2,n=t.y+t.height/2;(e.stageX/So.scaX<o-5||e.stageX/So.scaX>o+5||e.stageY/So.scaY<n-5||e.stageY/So.scaY>n+5?Q:q)()}function G(){O&&(O.innerHTML="")}function q(){var e,t;S=!0,J(),O&&O.setAttribute("aria-hidden",!1),So.ACTIONEVENT="click",zns||(ACTIONEVENT="click"),g.stage.removeChild(k),A&&(y.alwaysHighlight=!1),g.stage.update();for(var o=0;o<b.length;o++)(t=(e=b[o]).obj.zimTabTag).disabled=!1,e.title=e.title.replace(/\s\(use arrow keys\)/,""),t.setAttribute("aria-label",e.title),t.addEventListener("focus",U)}function Q(){S=!1;for(var e=0;e<b.length;e++)b[e].obj.zimTabTag.disabled=!1;J(),r&&function(){for(var e=0;e<w.length;e++){var t=w[e];t.zimObject&&("Loader"==t.zimObject.type||"TextArea"==t.zimObject.type||"Tag"==t.zimObject.type)||(w[e].style.left="-2000px")}}()}function U(e){var t=e.currentTarget,o=t.zimObject;v=o.zimTabIndex,o.focus=!0;var n=new createjs.Event("change");n.title=t.getAttribute("aria-label"),y.dispatchEvent(n)}function K(e){S=!1,e.target.focusTab.focus()}function Z(){(zot(S)||S?q:Q)()}function J(){P=!0,I.removeEventListener("focus",Z),E.removeEventListener("focus",Z),M.removeEventListener("focus",K),j.removeEventListener("focus",K),M.parentNode&&(M.parentNode.removeChild(M),j.parentNode.removeChild(j)),L.removeEventListener("focus",K),Y.removeEventListener("focus",K),L.parentNode&&(L.parentNode.removeChild(L),Y.parentNode.removeChild(Y));for(var e=0;e<B.length;e++)B[e][0].off("mousedown",B[e][1])}function $(e){var t=e.currentTarget;if("RadioButton"==t.type||"TabsButton"==t.type||"PadButton"==t.type)for(var o=0;o<t.zimTabParent.buttons.length;o++){var n=t.zimTabParent.buttons[o];n.zimTabTag.setAttribute("aria-label",n.zimTabTag.getAttribute("aria-label").split(" - currently")[0]+(t.zimTabParent.selectedIndex==n.tabIndex?" - currently selected.":" - currently not selected."))}y.tabIndex=e.currentTarget.zimTabIndex,y.activatedObject=t}function ee(e){return e.talk?e.talk:"TextArea"==e.type||"RadioButtons"==e.type||"Tabs"==e.type||"Pad"==e.type?e.type:"Waiter"==e.type?"Waiter active - please wait":e.text?e.type+" - "+("a"==e.text||"A"==e.text?"eh":e.text):e.type+("Dial"==e.type||"Slider"==e.type||"ColorPicker"==e.type||"Stepper"==e.type?" (use arrow keys)":"")+("TextArea"==e.type?" (press ENTER to edit)":"")}function te(e){var t=e.obj;e.title=e.title.replace(/\.$/,""),"RadioButton"==t.type||"TabsButton"==t.type||"PadButton"==t.type?e.title=e.title+(t.tabIndex==t.zimTabParent.selectedIndex?" - currently selected":" - currently not selected"):"CheckBox"==t.type?e.title=e.title+(t.checked?" - currently checked":" - currently not checked"):"Stepper"==t.type?e.title=e.title+" - currently displaying "+t.currentValue:"Slider"==t.type||"Dial"==t.type?e.title=e.title+" - currently at "+So.decimals(t.currentValue,y.decimals):"ColorPicker"==t.type?e.title=e.title+" - currently at "+t.selectedColor:"TextArea"==t.type?e.title=e.title+(""!=t.tag.value?"":" - placeholder: "+t.tag.placeholder):"Indicator"==t.type&&(e.title=e.title+" - currently "+(0<=t.selectedIndex?"at "+(t.selectedIndex+1)+" of "+t.num:"not indicating")),e.title+="."}function oe(e,t,o,n,r){var i,a,l;if(n&&(a=n.obj),n&&("TextArea"==a.type||"Loader"==a.type))return(i=a.tag).setAttribute("aria-label",t),a&&i.setAttribute("aria-hidden",!a.stage),"before"==r?o.parentNode.insertBefore(i,o):o.parentNode.insertBefore(i,o.nextSibling),i.style.zIndex=-5,i.zimObject=a,n.obj.zimTabTag=i,w.push(i),i;if(!n||"Dial"!=a.type&&"Slider"!=a.type&&"Stepper"!=a.type&&"ColorPicker"!=a.type)i=document.createElement("div"),a&&(i.zimObject=a),i.innerHTML="tag",i.setAttribute("role",p?"application":"button"),"android"==A&&i.addEventListener("click",function(e){a.dispatchEvent("click")});else{var s,c,u=[];if("Dial"==a.type||"Slider"==a.type)for(var d=a.step<=0?(a.max-a.min)/20:a.step,h=a.min;h<a.max;h+=d)u.push(a.min+h);else"Stepper"==a.type?u=a.stepperArray:"ColorPicker"==a.type&&(u=a.colors);(i=document.createElement("select")).disabled=!0,i.zimObject=a,i.addEventListener("change",function(e){!S&&"android"==!A||(e.currentTarget.zimObject.zimTabParent.currentValueEvent=e.target.value,g.stage.update())}),i.size=1;for(h=0;h<u.length;h++)s=u[h],(c=document.createElement("option")).setAttribute("aria-label",s),c.innerHTML=s,i.add(c),s==a.zimTabParent.currentValue&&c.setAttribute("selected","selected");i.setAttribute("role","button")}return i.setAttribute("id",e),i.setAttribute("tabindex",0),i.setAttribute("aria-label",t),a&&i.setAttribute("aria-hidden",!a.stage),"before"==r?o.parentNode.insertBefore(i,o):o.parentNode.insertBefore(i,o.nextSibling),i.style.position="absolute",n?(l=(a=n.obj).boundsToGlobal(),g.retina?(i.style.left=g.x+l.x*g.scale/z+"px",i.style.top=g.y+l.y*g.scale/z+"px",i.style.width=l.width*g.scale/z+"px",i.style.height=l.height*g.scale/z+"px"):(i.style.left=g.x+l.x*g.scale+"px",i.style.top=g.y+l.y*g.scale+"px",i.style.width=l.width*g.scale+"px",i.style.height=l.height*g.scale+"px"),n.obj.zimTabTag=i):(i.style.left="-1000px",i.style.top=g.y+"px"),i.style.overflow="hidden",i.style.zIndex=-5,i.style.fontSize="20px",i.style.color="rgba(0,0,0,.01)",w.push(i),i}function ne(e){e.ctrlKey?re(e.shiftKey?-1:1):(e.shiftKey?y.tab(-1):y.tab(1),e.preventDefault())}function re(e){D=!1,zid(T+(1==e?"SuffixTab":"PrefixTab")).focus(),g.stage.removeChild(d),g.stage.update(),y.tabIndex=-1}zot(i)&&(i="s"==V?.7:700),zot(a)&&(a="brown"),zot(l)&&(l=3),zot(s)&&(s=5),zot(c)&&(c=.8),zot(h)&&(h=.8),zot(d)?(m=new So.Shape({style:!1})).mouseEnabled=!1:d.mouseEnabled&&(d.mouseEnabled=!1),zot(g=zdf)?zon&&zogy("ZIM Accessibility - needs a Frame"):(z=g.retina&&window.devicePixelRatio||1,(y=this).cycle=t,y.decimals=n,y.alwaysHighlight=r,y.AHTime=i,y.AHColor=a,y.AHBorderWidth=l,y.AHBorderPadding=s,y.AHAlpha=c,y.AHObjectScale=h,v=b=-1,w=[],C=[],x={RadioButtons:"option",Tabs:"tab",Pad:"key"},T=g.canvas.id,A=So.mobile(),P=!1,S=null,B=[],Object.defineProperty(this,"tabOrder",{get:function(){return b},set:function(e){I&&I.removeEventListener("focus",G),E&&E.removeEventListener("focus",G);for(var t,o,n=0;n<w.length;n++)w[n].parentElement&&(w[n].outerHTML="");for(w=[],n=0;n<C.length;n++)(t=b[n])&&C[n][0].off("mousedown",C[n][1]);C=[],b=[];var r=[];_=g.shim?document.body:g.canvas,H=!1;for(var i=0,n=0;n<e.length;n++){if("HotSpots"==(t=e[n]).type&&(e.splice.apply(e,[n,1].concat(t.hotSpots)),t=t.hotSpots[0]),"HotSpot"==t.type&&(t=t.spot),t.constructor=={}.constructor){if(!(o=t.obj)||!o.getStage)continue;t.title||(t.title=ee(o))}else t={obj:o=t,title:ee(t)};if("RadioButtons"==o.type||"Tabs"==o.type||"Pad"==o.type){var a=[];i--;for(var l=0;l<o.buttons.length;l++){i++;var s=o.buttons[l],c={obj:s,title:t.title+" - "+x[o.type]+": "+("a"==s.text||"A"==s.text?"eh":s.text)};a.push(c),s.zimTabParent=o,s.zimTabParent.zimAccessibility=y,s.zimTabIndex=n+i,s.tabIndex=l,s.zimAccessibility=y,te(c),_=oe(T+"Tab"+(n+i),c.title,_,c),C.push([s,s.on("mousedown",$)]),P||B.push([s,s.on("mousedown",N)])}r=r.concat(a)}else o.zimTabIndex=n+i,o.zimTabParent=o,te(t),o.zimAccessibility=y,C.push([o,o.on("mousedown",$)]),P||B.push([o,o.on("mousedown",N)]),r.push(t),_=oe(T+"Tab"+(n+i),t.title,_,t)}(I=y.startAppTag=oe(T+"PrefixTab",u+" start",g.shim?document.body:g.canvas,null,"before")).addEventListener("focus",G),P||(I.addEventListener("focus",Z),(M=oe(T+"noAriaTab","",I,null,"before")).setAttribute("aria-hidden",!0),M.focusTab=I,M.addEventListener("focus",K),(L=oe(T+"noAriaTab","",I)).setAttribute("aria-hidden",!0),L.focusTab=I,L.addEventListener("focus",K)),_=oe(T+"BufferTab","",_),A&&_.setAttribute("aria-hidden",!0),_=E=y.endAppTag=oe(T+"SuffixTab",u+" end",_),E.addEventListener("focus",G),P||(E.addEventListener("focus",Z),_=j=oe(T+"noAriaTab","",E),j.setAttribute("aria-hidden",!0),j.focusTab=E,j.addEventListener("focus",K),(Y=oe(T+"noAriaTab","",E,null,"before")).setAttribute("aria-hidden",!0),Y.focusTab=E,Y.addEventListener("focus",K)),b=r}}),Object.defineProperty(this,"tabIndex",{get:function(){return v},set:function(e){var t,o,n,r,i,a,l,s;function c(){if(v&&-1<v)b&&b[v]&&(b[v].obj.focus=!1);else for(var e=0;e<b.length;e++)b[e].obj.focus=!1}function u(){c(),D=!1,y.AHObject&&g.stage.removeChild(y.AHObject),y.alwaysHighlightShape&&g.stage.removeChild(y.alwaysHighlightShape),g.stage.update(),v=-1}F&&(e<0||e>=b.length?u():(e!=v&&c(),(t=b[e].obj).stage?(v=e,t.focus=!0,X=!(D=!0),y.changeTitle(t),t.zimTabTag.focus(),setTimeout(function(){t.zimTabTag.focus();var e=new createjs.Event("change");e.title=t.zimTabTag.getAttribute("aria-label"),y.dispatchEvent(e)},150),!y.alwaysHighlight||S&&A||(y.AHObject?(k=y.AHObject,o=So.boundsToGlobal(t),y.AHObject.alp(y.AHAlpha).addTo(g.stage,null,!1),y.AHObject.fit(o.x,o.y,o.width,o.height),y.AHObject.sca(y.AHObject.scaleX*y.AHObjectScale),0<y.AHTime&&(W=setTimeout(function(){g.stage.removeChild(y.AHObject),g.stage.update()},y.AHTime*("s"==V?1e3:1)))):(k=m,n=t.getBounds(),r=t.localToGlobal(n.x-5,n.y-5),i=t.localToGlobal(n.x+n.width+5,n.y-5),a=t.localToGlobal(n.x+n.width+5,n.y+n.height+5),l=t.localToGlobal(n.x-5,n.y+n.height+5),(s=m.graphics).clear(),s.s(y.AHColor).ss(y.AHBorderWidth).mt(r.x-y.AHBorderPadding,r.y-y.AHBorderPadding).lt(i.x+y.AHBorderPadding,i.y-y.AHBorderPadding).lt(a.x+y.AHBorderPadding,a.y+y.AHBorderPadding).lt(l.x-y.AHBorderPadding,l.y+y.AHBorderPadding).lt(r.x-y.AHBorderPadding,r.y-y.AHBorderPadding).cp(),m.alpha=y.AHAlpha,0<y.AHTime&&(W=setTimeout(function(){g.stage.removeChild(m),g.stage.update()},y.AHTime*("s"==V?1e3:1)))),g.stage.addChild(k),g.stage.update())):u()))}}),Object.defineProperty(this,"aria",{get:function(){return S},set:function(e){(S=e)&&q()}}),"android"==A&&(So.ACTIONEVENT="click",zns||(ACTIONEVENT="click")),zot(e)?setTimeout(function(){var t;-1==b&&(b=[],t=[],So.loop(g.stage,function(e){e.type&&t.push(e)}),y.tabOrder=t,zot(o)||(y.tabIndex=o))},50):(b=[],y.tabOrder=e,zot(o)||(y.tabIndex=o)),X=!(D=!1),R=g.on("keydown",function(e){var t,o,n,r,i;9==e.keyCode&&(!function(){for(var e=!1,t=0;t<w.length;t++)if(document.activeElement==w[t]){e=!0;break}return!(document.activeElement!=g.canvas&&!e)}()&&(D=!1,-1!=y.tabIndex&&(y.tabIndex=-1)),D?ne(e):(t=e,g.shiftKey||zid(T+"PrefixTab")!=document.activeElement&&g.canvas!=document.activeElement?!g.shiftKey||zid(T+"SuffixTab")!=document.activeElement&&zid(T+"BufferTab")!=document.activeElement||(0<b.length&&(b[0].obj.focus=!0),D=X=!0,ne(t)):(0<b.length&&(b[b.length-1].obj.focus=!0),D=X=!0,ne(t)))),D&&0<b.length&&0<=y.tabIndex&&13==e.keyCode&&(n=(o=b[y.tabIndex]).obj,o&&n.stage&&(r=new createjs.Event("mousedown"),i=new createjs.Event("click"),r.fromEnter=i.fromEnter=!0,"Pane"==n.type?(n.backdrop.dispatchEvent(r),n.backdrop.dispatchEvent(i)):(n.dispatchEvent(r),n.dispatchEvent(i))))}),this.tab=function(e){if(clearTimeout(W),k&&g.stage.removeChild(k),zot(e)&&(e=1),0!=b.length)for(var t=0;t<b.length;t++){if((i=b[t].obj).focus){i.focus=!1;for(var o=t+e,n=(o+1e4*b.length)%b.length,r=b[n],i=r.obj,a=0,l=!1;!i.stage||!(!i.zimTabParent&&(zot(i.enabled)||i.enabled)||i.zimTabParent&&(zot(i.zimTabParent.enabled)||i.zimTabParent.enabled));)if(a++,n=((o+=e)+100*b.length)%b.length,i=(r=b[n]).obj,a==b.length){l=!0;break}if(l||!y.cycle&&o!=n&&!X)return void re(e);X=!1,y.tabIndex=n;break}}else re(e)},H=!(this.changeTitle=function(e,t,o){var n,r;"number"!=typeof e&&(e=e.zimTabIndex),zot(e)||(o&&zot(t)?y.tabIndex=e:(r=(n=b[e]).obj,zot(t)&&(t=r.zimTabTag.getAttribute("aria-label").split(" - currently")[0]),n.title=t,te(n),r.zimTabTag.setAttribute("aria-label",n.title),o&&(y.tabIndex=e)))}),this.talk=function(e){H||((O=oe(T+"TalkTab","",E)).setAttribute("role","alert"),H=!0),O.removeAttribute("role"),O.setAttribute("aria-label",e),O.setAttribute("role","alert");var t=new createjs.Event("change");t.title=e,y.dispatchEvent(t)},this.resize=function(e){if(zot(e))for(var t=0;t<b.length;t++)n(b[t].obj);else{if("number"!=typeof e&&(e=e.zimTabIndex),e<0)return;var o=b[e].obj;!o.stage&&k&&o==y.currentObject&&(g.stage.removeChild(k),g.stage.update()),n(o)}function n(e){var t,o;"TextArea"!=e.type&&"Loader"!=e.type?(t=e.boundsToGlobal(),o=e.zimTabTag,g.retina?(o.style.left=g.x+t.x*g.scale/z+"px",o.style.top=g.y+t.y*g.scale/z+"px",o.style.width=t.width*g.scale/z+"px",o.style.height=t.height*g.scale/z+"px"):(o.style.left=g.x+t.x*g.scale/z/z+"px",o.style.top=g.y+t.y*g.scale/z/z+"px",o.style.width=t.width*g.scale/z/z+"px",o.style.height=t.height*g.scale/z/z+"px"),o.setAttribute("aria-hidden",!e.stage),o.hidden=!e.stage):e.resize()}},Object.defineProperty(this,"currentObject",{get:function(){return b[v]&&b[v].obj?b[v].obj:null},set:function(e){for(var t=0;t<b.length;t++)if(b[t].obj==e){y.tabIndex=t;break}}}),F=!0,Object.defineProperty(this,"enabled",{get:function(){return F},set:function(e){F=e}}),this.dispose=function(e,t,o){m&&m.graphics.clear(),y.tabOrder=[];for(var n=0;n<w.length;n++)w[n].parentElement&&(w[n].outerHTML="");I&&(I.removeEventListener("focus",G),I.removeEventListener("focus",Z),I.parentNode&&(I.outerHTML="")),M&&(M.removeEventListener("focus",K),M.parentNode&&(M.outerHTML="")),L&&(L.removeEventListener("focus",K),L.parentNode&&(L.outerHTML="")),_&&_.parentNode&&(_.outerHTML=""),E&&(E.removeEventListener("focus",G),E.removeEventListener("focus",Z),E.parentNode&&(E.outerHTML="")),j&&(j.removeEventListener("focus",K),j.parentNode&&(j.outerHTML="")),Y&&(Y.removeEventListener("focus",K),Y.parentNode&&(Y.outerHTML="")),y.removeAllEventListeners(),g.off("keydown",R)})},So.extend(So.Accessibility,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),So.Manager=function(e){z_d("75");var r=this;this.type=e,this.items=[],this.add=function(e){return Array.isArray(e)?r.items=r.items.concat(e):r.items.push(e),r},this.remove=function(e){if(!zot(e)){var t;Array.isArray(e)||(e=[e]);for(var o=0;o<e.length;o++){t=e[o];var n=r.items.indexOf(t);-1!=n&&r.items.splice(n,1)}return r}r.items=[]},this.resize=function(){if(r){for(var e=0;e<r.items.length;e++)r.items[e].resize?r.items[e].resize():r.items.splice(e);return r}},this.toggle=function(e){if(r){for(var t=0;t<r.items.length;t++)r.items[t].toggle?r.items[t].toggle(e):r.items.splice(t);return r}},this.dispose=function(e,t,o){for(var n=r.items.length-1;0<=n;n--)r.items[n].dispose();return r.items=[],!(r=null)}},So.ResizeManager=function(){z_d("75.5"),So.Manager.call(this,"ResizeManager")},So.ResizeManager.prototype=new So.Manager,So.ResizeManager.prototype.constructor=So.ResizeManager,So.TransformManager=function(e,r){z_d("75.7");var a=this;function t(e){!localStorage||e&&!e.pressup||a.savePersist(e)}this.type="TransformManager",this.persistID=r,this.items=[],this.add=function(e){for(var t,o,n=[],n=Array.isArray(e)?e:[e],r=!1,i=0;i<n.length;i++){(o=n[i]).transformControls&&(o.originalVisible=o.transformControls.visible),o.toggle&&o.toggle(!1),0==a.items.length&&0==i&&(r=!0),"Blob"==o.type||"Squiggle"==o.type?(a.persistID||r&&(r=!1,o.controlsVisible=!0,a.currentObject=o),o.on("change",function(e){var t=new createjs.Event("transformed");t.transformObject=e.target,t.transformType=e.controlType,a.dispatchEvent(t)}),o.on("controlsshow",function(e){var t=new createjs.Event("transformshow");a.currentObject=t.transformObject=e.target,a.dispatchEvent(t)}),o.on("controlshide",function(e){var t=new createjs.Event("transformhide");t.transformObject=e.target,a.currentObject=null,a.dispatchEvent(t)}),o.on("update",function(e){var t=new createjs.Event("transformed");t.transformObject=e.target,t.transformType=e.controlType,a.dispatchEvent(t)})):(t=o.transformControls,a.persistID||r&&"Layer"!=o.type&&(r=!1,o.originalVisible&&(t.show(),a.currentObject=o)),o.on("transformed",function(e){var t=new createjs.Event("transformed");t.transformObject=e.target,t.transformType=e.transformType,a.dispatchEvent(t)}),o.on("transformshow",function(e){var t=new createjs.Event("transformshow");a.currentObject=t.transformObject=e.target,a.dispatchEvent(t)}),o.on("transformhide",function(e){var t=new createjs.Event("transformhide");t.transformObject=e.target,a.currentObject=null,a.dispatchEvent(t)}))}a.items=a.items.concat(e),a.persist&&!zot(a.persistID)&&a.persist(a.persistID)},this.remove=function(e){if(zot(e))a.items=[];else{var t;Array.isArray(e)||(e=[e]);for(var o=0;o<e.length;o++){t=e[o],a.currentObject==t&&(a.currentObject=null),t.transformedEvent&&(t.off("transformed",t.transformedEvent),t.transformedEvent=null),"Blob"==t.type||"Squiggle"==t.type?t.controlsVisible=!1:t.transformControls.remove();var n=a.items.indexOf(t);-1!=n&&a.items.splice(n,1)}r&&a.savePersist()}},this.show=function(e){if(!zot(e)){if("Blob"==e.type||"Squiggle"==e.type)e.controlsVisible||(e.controlsVisible=!0);else{var t=e.transformControls;if(!t||t.visible)return;t.show()}a.currentObject=e}},this.hide=function(e){if(!zot(e))if(a.currentObject==e&&(a.currentObject=null),"Blob"==e.type||"Squiggle"==e.type)e.controlsVisible&&(e.controlsVisible=!1);else{var t=e.transformControls;if(!t||t.visible)return;t.hide()}},this.hideAll=function(e){for(var t,o,n=0;n<a.items.length;n++)if((o=a.items[n])&&(o.transformControls||o.update)){if(a.items[n]==e)continue;"Blob"==o.type||"Squiggle"==o.type?o.controlsVisible&&(o.controlsVisible=!1):(t=a.items[n].transformControls).visible&&t.hide()}else a.items.splice(n);a.currentObject=null},this.resize=function(){if(a){for(var e,t=0;t<a.items.length;t++)(e=a.items[t])&&(e.transformControls||e.update)?"Blob"==e.type||"Squiggle"==e.type?e.update():e.transformControls.resize():a.items.splice(t);r&&a.savePersist()}},zot(e)||a.add(e);var l="TransformManager persist(persistID) - sorry, must provide id";this.persist=function(e){var o;if(zot(e)&&zon)zog(l);else{a.persistID=e;var n=0;if(localStorage&&localStorage[e]){var r=a.persistData=JSON.parse(localStorage[e]);if(r.length==a.items.length)for(var i=0;i<a.items.length;i++)r[i].controls&&(a.currentObject=a.items[i]),!r[i]||"Blob"!=r[i].type&&"Squiggle"!=r[i].type?r[i]&&(zot(a.items[i].transformControls)?function(){o=a.items[i];var t=r[i];So.interval(50,function(e){o.transformControls&&(o.transformControls.setData(t),o.dispatchEvent("persistset"),++n==r.length&&(setTimeout(function(){o==a.currentObject&&a.currentObject.toggle(!0),a.dispatchEvent("persistcomplete")},100),e.clear()))},20,null,null,"ms")}():(a.items[i].transformControls.setData(r[i]),o=a.items[i],So.interval(50,function(e){o.dispatchEvent("persistset"),++n==r.length&&(setTimeout(function(){o==a.currentObject&&a.currentObject.toggle(!0),a.dispatchEvent("persistcomplete")},100),e.clear())},20,null,null,"ms"))):(a.items[i].points.length!=r[i].points.length&&(a.items[i].points=r[i].points),a.items[i].setData(r[i]),a.items[i]==a.currentObject&&a.currentObject.toggle(!0))}for(i=0;i<a.items.length;i++)(o=a.items[i]).transformedEvent||("Blob"==o.type||"Squiggle"==o.type?(o.transformedEvent=o.on("change",function(e){e.pressup=!0,t(e)}),o.transformedEvent=o.on("update",function(e){e.pressup=!0,t(e)}),o.transformedEvent=o.on("controlsshow",function(e){e.pressup=!0,t(e)}),o.transformedEvent=o.on("controlshide",function(e){e.pressup=!0,t(e)})):(o.transformedEvent=o.on("transformed",t),o.transformedEvent=o.on("transformshow",t),o.transformedEvent=o.on("transformhide",t)))}},this.savePersist=function(e){for(var t=[],o=0;o<a.items.length;o++){var n=a.items[o];"Blob"==n.type||"Squiggle"==n.type?n.recordData&&t.push(n.recordData()):n.transformControls&&n.transformControls.recordData&&t.push(n.transformControls.recordData())}a.persistData=t,localStorage[a.persistID]=JSON.stringify(t)},this.clearPersist=function(e){zot(e)&&zon?zog(l):(a.persistData=null,localStorage&&localStorage.removeItem(e))},this.stopPersist=function(){for(var e=0;e<a.items.length;e++){var t=a.items[e];t.transformedEvent&&("Blob"==t.type||"Squiggle"==t.type?t.off("change",t.transformedEvent):t.off("transformed",t.transformedEvent),t.transformedEvent=null)}a.persistData=null},zot(r)||a.persist(r),this.dispose=function(e,t,o){if(zot(e)&&(e=!0),a.removeAllEventListeners(),a.persistID&&e&&a.stopPersist(),t)for(var n=0;n<a.items.length;n++){var r=a.items[n];"Blob"==r.type||"Squiggle"==r.type?r.dispose():r.transformControls.dispose()}}},So.extend(So.TransformManager,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),So.GuideManager=function(){z_d("77"),So.Manager.call(this,"GuideManager")},So.GuideManager.prototype=new So.Manager,So.GuideManager.prototype.constructor=So.GuideManager,So.GridManager=function(){z_d("79"),So.Manager.call(this,"GridManager")},So.GridManager.prototype=new So.Manager,So.GridManager.prototype.constructor=So.GridManager,So.LayoutManager=function(){z_d("81"),this.type="LayoutManager";var r=this;this.items=[],this.add=function(e){return r.items.push(e),r},this.resize=function(){for(var e=0;e<r.items.length;e++)r.items[e].resize();return r},this.disable=function(){for(var e=0;e<r.items.length;e++)r.items[e].disable();return r},this.enable=function(){for(var e=0;e<r.items.length;e++)r.items[e].enable();return r},this.dispose=function(e,t,o){for(var n=0;n<r.items.length;n++)r.items[n].removeShape();return!0}},So.SelectionSet=function(e){z_d("81.5"),this.type="SelectionSet",zot(e)&&(e=[]),this.selections=e,this.clear=function(){this.selections=[]},this.isSelected=function(e){return 0<=this.selections.indexOf(e)},this.add=function(e,t,o,n){if(!zot(e)&&(zot(t)&&(zot(this.selectionManager)||(t=this.selectionManager.multiple)),zot(this.selectionManager)||(this.selectionManager.setCurrent(this),!t&&this.selectionManager.multipleSets&&this.selectionManager.clear()),t||this.clear(),!(0<=this.selections.indexOf(e)))){if(this.selections.push(e),!zot(o)){Array.isArray(o)||(o=[o]);for(var r=0;r<=o.length;r++)o[r].add(e,t)}if(!zot(n))for(Array.isArray(n)||(n=[n]),r=0;r<=n.length;r++)n[r].remove(e,t)}},this.remove=function(e,t,o,n){if(!zot(e)){zot(t)&&(zot(this.selectionManager)||(t=this.selectionManager.multiple)),zot(this.selectionManager)||this.selectionManager.setCurrent(this),t||this.clear();var r=this.selections.indexOf(e);if(zot(this.selectionManager)||(this.selectionManager.setCurrent(this),!t&&this.selectionManager.multipleSets&&this.selectionManager.clear()),t||this.clear(),t?0<=r&&this.selections.splice(r,1):this.clear(),!zot(o)){Array.isArray(o)||(o=[o]);for(var i=0;i<=o.length;i++)o[i].remove(e,t)}if(!zot(n))for(Array.isArray(n)||(n=[n]),i=0;i<=n.length;i++)n[i].add(e,t)}},this.toggle=function(e,t,o,n){this.isSelected(e)?this.remove(e,t,o,n):this.add(e,t,o,n)},this.dispose=function(e,t,o){return this.clear(),!(this.selections=null)}},So.SelectionManager=function(o,e,t){z_d("81.6"),this.cjsEventDispatcher_constructor(),this.type="SelectionManager",zot(o)&&(o=[]),zot(t)&&(t=!0),Array.isArray(o)||(o=[o]),this.sets=o,this.multipleKey=e,this.multipleSets=t,this.multiple=!1;for(var n=this,r=0;r<o.length;r++)o[r].selectionManager=this;this.clear=function(){this.currentSet=null;for(var e=0;e<o.length;e++)o[e].clear()},this.setCurrent=function(e){this.currentSet=e;for(var t=0;t<o.length;t++)o[t]!=e&&(this.multipleSets||o[t].clear())};var i=new createjs.Event("keydown");this.eventRemove=i.remove,this.keydownEvent=function(e){e.remove=n.eventRemove,n.multipleKey&&(n.multiple=e[n.multipleKey+"Key"]),n.ctrlKey=e.ctrlKey,n.shiftKey=e.shiftKey,n.metaKey=e.metaKey,n.dispatchEvent(e),90==e.keyCode&&(n.ctrlKey||n.metaKey)&&n.dispatchEvent("undo")},window.addEventListener("keydown",this.keydownEvent),this.keyupEvent=function(e){n.multipleKey&&(n.multiple=e[n.multipleKey+"Key"]),n.ctrlKey=e.ctrlKey,n.shiftKey=e.shiftKey,n.metaKey=e.metaKey,e.remove=n.eventRemove,n.dispatchEvent(e)},window.addEventListener("keyup",this.keyupEvent),this.dispose=function(){window.removeEventListener("keydown",this.keydownEvent),window.removeEventListener("keyup",this.keyupEvent)}},So.extend(So.SelectionManager,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),So.Bind=function(e,t,y,o,b,n,v,r){var i;if(i=zob(So.Bind,arguments,"connection, bindType, master, masterFilter, couple, smartDecimals, report, setDefault",this))return i;z_d("81.8"),this.type="Bind";var w=this;function C(i,e,t){var a=[];if(zot(e)&&zot(t)){if("from"==i&&w.bindType!=LOCALSTORAGE)return So.loop(w.bindings,function(e){e.filter&&a.push(e.filter)}),[a,"full"];var o=w.ids}else{zot(e)||Array.isArray(e)||(e=[e]),zot(t)||Array.isArray(t)||(t=[t]),e&&(o=[],So.loop(e,function(e){var t;"string"==typeof e?o.indexOf(e)<0&&o.push(e):(t=w.objIDs.at(e))&&So.loop(t,function(e){o.indexOf(e)<0&&o.push(e)})}))}var l,s,c={};return o?(s=t,So.loop(o,function(n){var r,e=w.bindings[n];e&&(e.filter&&a.push(e.filter),r=e.obj,So.loop(s||e.props,function(e){var t,o=w.toIDs[e];o&&0<=o.indexOf(n)&&("from"==i?(c[n]||(c[n]=[]),c[n].push(e)):(c[n]||(c[n]={}),"number"==typeof(t=r[e])&&w.smartDecimals&&(t=1<t?So.decimals(t,1):So.decimals(t,2)),c[n][e]=So.copy(t)))}))})):t&&(l=[],So.loop(t,function(r){So.loop(w.toIDs[r],function(e){var t=w.bindings[e];l.indexOf(e)<0&&(t.filter&&a.push(t.filter),l.push(e));var o,n=t.obj;"from"==i?(c[e]||(c[e]=[]),c[e].push(r)):(c[e]||(c[e]={}),"number"==typeof(o=n[r])&&w.smartDecimals&&(o=1<o?So.decimals(o,1):So.decimals(o,2)),c[e][r]=So.copy(o))})})),[a,c]}zot(e)&&localStorage&&zot(c)&&(zot(t)||t==LOCALSTORAGE)?(e="zimBind",t=LOCALSTORAGE):e&&e.match(/\/|\./)?(zot(t)&&(t=GET),e.match(/\?/)?e+="&":e+="?"):e&&zot(t)&&(t=LOCALSTORAGE),zot(n)&&(n=!0),t!=LOCALSTORAGE||localStorage||(zon&&zogy("Bind() - no localStorage"),w.error="error - no localStorage"),this.connection=e,this.bindType=t,this.master=y,this.masterFilter=o,this.smartDecimals=n,zot(v)&&(v=!1),c&&!r||(c=this),Object.defineProperty(w,"default",{get:function(){return w==c},set:function(e){e||c!=w?e&&(c=w):c=null}}),this.bindType==POST&&(w.ajax=new So.Ajax),this.bindings={},this.ids=[],this.data={},this.objIDs=new So.Dictionary(!0),this.toIDs={},this.fromIDs={},this.add=function(o,e,t,n,r){if(zot(t)||zot(e)||zot(o))return w;if(w.bindings[o]){if(w.bindings[o].obj!=e)return zon&&zogy("Bind() - id can be used with only one object"),w}else{w.ids.indexOf(o)<=0&&w.ids.push(o),w.bindings[o]={obj:e,props:[]},zot(r)||"function"!=typeof r||(w.bindings[o].filter=r);var i=w.objIDs.at(e);i?i.indexOf(o)<0&&i.push(o):w.objIDs.add(e,[o])}Array.isArray(t)||t.constructor=={}.constructor||(t=[t]);var a=w.bindings[o].props;function l(e,t,o){zot(e[t])?e[t]=[o]:e[t].indexOf(o)<0&&e[t].push(o)}return Array.isArray(t)?So.loop(t,function(e){l(w.toIDs,e,o),l(w.fromIDs,e,o),a.indexOf(e)<0&&a.push(e)}):So.loop(t,function(e,t){t!=So.BOTH&&t!=So.TO||l(w.toIDs,e,o),t!=So.BOTH&&t!=So.FROM||l(w.fromIDs,e,o),a.indexOf(e)<0&&a.push(e)}),v&&k("Bind Report: ADD ["+o+"]",(t?" "+t:"")+(n?" "+n:"")),w.bindType==LOCALSTORAGE?(w.from(null,o,t,n),w.data&&!So.isEmpty(w.data)||w.to(o,t)):(x("bind",null,[r],w.data,n),w.applyData()),w},this.updatefilter=function(e,t){var o=w.bindings[e];return o&&(zot(t)?o.filter&&delete o.filter:"function"==typeof t&&(o.filter=t)),w},this.remove=function(e,t,o,n,r,i){var a;zot(e)||Array.isArray(e)||(e=[e]),zot(e)||(s=[],a=[],So.loop(e,function(e){"string"==typeof e?s.push(e):a.push(e)})),zot(t)||Array.isArray(t)||(t=[t]),zot(r)&&(r=!0),0==(e=s.concat(a)).length&&(e=null);var l=C("from",e,t);if("stop"!=(u=x("remove",n,l[0],l=l[1],o))){var s,c,u,d=So.copy(l);return zot(t)||0==t.length?(0<s.length&&So.loop(s,function(e){p(e,!0)}),0<a.length&&So.loop(a,function(e){0<(s=w.objIDs.at(e)).length&&So.loop(s,function(e){p(e,!1)}),w.objIDs.remove(e)})):(s=[],So.loop(l,function(o,e){var n=w.bindings[o].props;So.loop(e,function(e){var t=n.indexOf(e);0<=t&&n.splice(t,1),g(e,o)}),0==n.length&&s.push(o)}),0<s.length&&w.remove(s)),r&&(c="type="+w.bindType+"&",w.bindType==LOCALSTORAGE?(w.to(),h("success")):w.bindType==GET?(u=JSON.stringify(d),b&&(u=So.couple(u)),So.async(w.connection+c+"remove="+u,h,"callbackRemove")):w.bindType==POST?w.ajax.post(w.connection+c,d,h,"remove"):w.bindType),w}function h(e){i&&"function"==typeof i&&(b&&(e=So.couple(e)),i(e)),v&&k("Bind Report: REMOVE"+(o?" ["+o+"]":""),e)}function g(e,t){var o,n=w.fromIDs[e];n&&(0<=(o=n.indexOf(t))&&n.splice(o,1),0==n.length&&delete w.fromIDs[e]),(n=w.toIDs[e])&&(0<=(o=n.indexOf(t))&&n.splice(o,1),0==n.length&&delete w.toIDs[e])}function p(t,e){var o=w.bindings[t].obj,n=w.bindings[t].props,r=w.objIDs.at(o),i=r.indexOf(t);0<=i&&r.splice(i,1),e&&0==r.length&&a.push(o),0<=(i=w.ids.indexOf(t))&&w.ids.splice(i,1),So.loop(n,function(e){g(e,t)}),delete w.bindings[t]}},this.stopProcess=!1,this.stop=function(){w.stopped=!0};var l=function(){var e=this;e.stop=function(){e.stopped=!0}};function x(t,e,o,n,r){var i=new l,a=null!=n&&!So.isEmpty(n)&&w.data;return s(i,r)?["stop",n]:(w.masterFilter&&"function"==typeof w.masterFunction&&(n=w.data=w.masterFilter(n,t,r,i)),"stop"==So.loop(o,function(e){if("function"==typeof e){if(s(i,r))return"stop";n=w.data=e(n,t,r,i)}})||s(i,r)?["stop",n]:(e&&"function"==typeof e&&(n=w.data=e(n,t,r,i)),s(i,r)?["stop",n]:(a&&!w.data&&zon&&zogy("Bind()"+(t?" ["+t+"]":"")+(r?" ["+r+"]":"")+" - warning, a filter may not have returned data"),["go",n])))}function s(e,t){return(w.stopped||e.stopped)&&(k("STOP"+(t?" ["+t+"]":""),e.stopped?"process stopped":"bind stopped"),e.stopped?e.stop=null:w.stopped=!1,1)}function k(e,t){(w==c?zogl:zogd)(e,t)}return this.to=function(e,t,o,n,r,i,a,l){var s;if(s=zob(w.to,arguments,"targets, props, extra, filter, smartDecimals, call, lock, unique"))return s;var c=C("to",e,t),u=x("to",n,c[0],c=c[1],o);if(c=u[1],"stop"!=u[0]){if(w.bindType==LOCALSTORAGE)localStorage[w.connection]=JSON.stringify(c),z(c);else{var d,h,g,p,f,m="type="+w.bindType+"&";if(!c||So.isEmpty(c))return w;w.bindType==GET?(d=c,So.isJSON(d)||(d=JSON.stringify(d)),b&&(d=So.couple(d)),d=So.urlEncode(d),h=zot(w.master)?"":"&master="+So.urlEncode(y),g=zot(a)?"":"&lock="+So.urlEncode(a),p=zot(l)?"":"&unique="+So.urlEncode(l),f=zot(o)?"":"&extra="+So.urlEncode(o),So.async(w.connection+m+"command=to&data="+d+h+g+p+f,z,"callbackTo")):w.bindType==POST?(w.ajax.master=y,w.ajax.couple=b,w.ajax.lock=a,w.ajax.unique=l,w.ajax.post(w.connection+m,c,"to",o,z)):w.bindType}return w}function z(e){b&&(e=So.decouple(e)),i&&"function"==typeof i&&i(e),v&&k("Bind Report: TO"+(o?" ["+o+"]":" -"),e)}},this.toLock=function(t,o,n,r,i,a){var e;if(e=zob(w.toLock,arguments,"targets, props, extra, filter, smartDecimals, call"))return e;if("localstorage"==w.bindType.toLowerCase())return w.to(t,o,n,r,i,a),w;var l=So.makeID();w.from(function(e){w.to(t,o,n,r,i,a,l)},t,o,n,r,l)},this.toUnique=function(e,t,o,n,r,i){var a;if(a=zob(w.toUnique,arguments,"targets, props, extra, filter, smartDecimals, call"))return a;w.to(e,t,o,n,r,i,null,!0)},this.toggleReport=function(e){return v=zot(e)?!v:e,w},v&&k("Bind Report: CREATE ["+t.toUpperCase()+"]",e+(y?" "+y:"")),this.report=function(){var e="Bind {DATA} Report:",t=So.copy(w.data);(w==c?zogl:zogd)(e,t)},this.from=function(n,e,t,r,i,a){var o;if(o=zob(w.from,arguments,"call, targets, props, extra, filter, lock"))return o;var l=(s=C("from",e,t))[0],s=s[1],c=x("fromTo",i,l,s,r);if(s=c[1],"stop"!=c[0]){var u,d,h,g,p="type="+w.bindType+"&";return w.bindType==LOCALSTORAGE?(localStorage[w.connection]&&null!=localStorage[w.connection]||(localStorage[w.connection]="{}"),w.data=JSON.parse(localStorage[w.connection]),f(w.data)):w.bindType==GET?(u=s,So.isJSON(u)||(u=JSON.stringify(u)),b&&(u=So.couple(u)),u=So.urlEncode(u),d=zot(w.master)?"":"&master="+So.urlEncode(y),h=zot(a)?"":"&lock="+So.urlEncode(a),g=zot(r)?"":"&extra="+So.urlEncode(r),So.async(w.connection+p+"data="+u+"&command=from"+d+h+g,f,"callbackFrom")):w.bindType==POST?(w.ajax.master=y,w.ajax.couple=b,w.ajax.lock=a,w.ajax.post(w.connection+p,s,"from",r,f)):w.bindType,w}function f(e){var t,o;w.data=e,b&&(w.data=So.decouple(w.data)),zot(a)||(t=JSON.stringify(w.data)),"stop"!=x("from",i,l,w.data,r)[0]&&(o=!1,!zot(a)&&t==JSON.stringify(w.data)||(o=!0,w.applyData()),v&&k("Bind Report: FROM"+(r?" ["+r+"]":" -"),o?w.data:"data not applied in toLock()"),n&&"function"==typeof n&&n(w.data))}},this.applyData=function(){return So.loop(w.data,function(e,t){var o;w.bindings[e]&&(o=w.bindings[e].obj,So.loop(t,function(e,t){o[e]=t}))}),w},this.clear=function(){return w.bindType==LOCALSTORAGE&&(localStorage[w.connection]=null),w},this.removeAllBindings=function(e,t){function o(e){t&&"function"==typeof t&&t(e),v&&k("Bind Report: REMOVEALL",e)}var n,r;return zot(e)&&(e=!0),this.bindings={},this.ids=[],this.data={},this.objIDs=new So.Dictionary(!0),this.toIDs={},this.fromIDs={},e&&(n="type="+w.bindType+"&",w.bindType==LOCALSTORAGE?(w.clear(),o("success")):w.bindType==GET?(r=zot(w.master)?"":"&master="+encodeURI(y),So.async(w.connection+n+"command=removeAll"+r,o,"callbackRemoveAll")):w.bindType==POST?(w.ajax.master=y,w.ajax.post(w.connection+n,{},"removeAll",null,o,"removeAll")):w.bindType),w},w},So.Swipe=function(e,t,o,n,r){var i,a,l,s,c,u,d,h,g,p,f,m;if(i=zob(So.Swipe,arguments,"obj, distance, duration, isometric, overrideNoSwipe",this))return i;z_d("70"),this.cjsEventDispatcher_constructor(),this.type="Swipe",!zot(e)&&e.on?(zot(t)&&(t=30),a=Bo(o),zot(o)&&(o="s"==a?.08:80),this.distance=t,this.duration=o,this.active=!0,g=this,m=e.on("mousedown",function(o){function t(){var e,t=new createjs.Event("swipe");t.obj=g.obj,t.stageX=o.stageX/So.scaX,t.stageY=o.stageY/So.scaY,t.rawX=o.rawX/So.scaX,t.rawY=o.rawY/So.scaY,t.swipeX=t.swipeY=0,g.direction="none",n?(Math.abs(c-l)>g.distance||Math.abs(u-s)>g.distance)&&(270<=(e=((e=180*Math.atan2(u-s,c-l)/Math.PI)+360)%360)&&e<360?(t.swipeY=-1,g.direction="up"):0<=e&&e<90?(t.swipeX=1,g.direction="right"):90<=e&&e<180?(t.swipeY=1,g.direction="down"):180<=e&&e<270&&(t.swipeX=-1,g.direction="left")):Math.abs(c-l)>Math.abs(u-s)?(c-l>g.distance&&(t.swipeX=1,g.direction="right"),l-c>g.distance&&(t.swipeX=-1,g.direction="left")):(u-s>g.distance&&(t.swipeY=1,g.direction="down"),s-u>g.distance&&(t.swipeY=-1,g.direction="up")),g.dispatchEvent(t)}!g.active||!r&&o.target.zimNoSwipe||(g.obj=o.target,o.target.stage,c=l=o.stageX/So.scaX,u=s=o.stageY/So.scaY,d=!0,g.dispatchEvent("swipedown"),clearTimeout(h),h=setTimeout(function(){d&&(t(),d=!1)},g.duration*("s"==a?1e3:1)),p=e.on("pressmove",function(e){c=e.stageX/So.scaX,u=e.stageY/So.scaY}),f=e.on("pressup",function(e){d&&(t(),d=!1,clearTimeout(h))}))}),this.disable=function(){g.active=!1},this.enable=function(){g.active=!0},this.dispose=function(){m&&e.off("mousedown",m),p&&e.off("pressmove",p),f&&e.off("pressup",f)}):zog("zim controls - Swipe():\nPlease pass in object")},So.extend(So.Swipe,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),So.Swiper=function(e,t,o,n,i,a,l,r,s,c,u,d,h){var g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,I,E,O;if(g=zob(So.Swiper,arguments,"swipeOn, target, property, sensitivity, horizontal, min, max, damp, integer, factor, loop, pauseTime, swiperType",this))return g;function M(e){k=e.target.stage,P=m.parent.localToGlobal(m.x,m.y),x=!0,"radial"==h?(startPosX=e.stageX/So.scaX,startPosY=e.stageY/So.scaY,T=Math.atan2(startPosY-P.y,startPosX-P.x)*DEG):z=i?e.stageX/So.scaX:e.stageY/So.scaY,y=f.target[f.property],f.dispatchEvent("swipedown")}function j(e){if("radial"==h){if(!x)return;var t=So.dist(startPosX,startPosY,e.stageX/So.scaX,e.stageY/So.scaY);A=Math.atan2(e.stageY/So.scaY-P.y,e.stageX/So.scaX-P.x)*DEG;var o=So.sign(T-A);if(180<Math.abs(A-T))return void(x=!1);t*=o;var n=Math.max(10,So.dist(P.x,P.y,e.stageX/So.scaX,e.stageY/So.scaY));t*=(S-n)/S}else t=z-(i?e.stageX/So.scaX:e.stageY/So.scaY);var r;0<Math.abs(t)&&(f.swiperMoving=!0),b=y-t*f.sensitivity*c,zot(a)||zot(l)||!u?(zot(a)||(b=Math.max(b,a)),zot(l)||(b=Math.min(b,l))):(b=((r=b)+1e4*(l-a)-a)%(l-a)+a,Math.abs(r-b)>.8*Math.abs(l-a)&&(f.immediate(b),z=i?e.stageX/So.scaX:e.stageY/So.scaY,y=f.target[f.property])),f.desiredValue=b,f.dispatchEvent("swipemove")}function L(){m.off("mousedown",v),m.off("pressmove",w),m.off("pressup",C)}function Y(){m.canvas?(m.off("stagemousedown",v),m.off("stagemousemove",w),m.off("stagemouseup",C)):L(),So.Ticker.remove(f.target.swiperTicker)}z_d("69.5"),this.cjsEventDispatcher_constructor(),this.type="Swiper",!zot(e)&&e.getStage&&e.stage?zot(t)||(zot(n)&&(n=1),zot(i)&&(i=!0),zot(r)&&(r=.1),zot(s)&&(s=!1),zot(c)&&(c=1),zot(u)&&(u=!1),p=Bo(d),zot(d)&&(d="s"==p?.2:200),zot(h)&&(h=h==i?"horizontal":"vertical"),m=e,b=(f=this).desiredValue=t[o],this.target=t,this.property=o,this.sensitivity=n,x=!1,m.canvas?(v=m.on("stagemousedown",function(e){x=!0,M(e),w=m.on("stagemousemove",j),C=m.on("stagemouseup",function(){x=!1,m.off("stagemousemove",w),m.off("stagemouseup",C),f.dispatchEvent("swipeup")})}),k=m):(k=m.stage,L(),v=m.on("mousedown",M),w=m.on("pressmove",j),C=m.on("pressup",function(){x=!1,f.dispatchEvent("swipeup")})),S=Math.sqrt(Math.pow(m.width,2)+Math.pow(m.height,2)),B=new So.Damp(f.target[f.property],r),f.target[f.property],E=I=b,f.target.swiperTicker=So.Ticker.add(function(){b==I?b!=E&&(f.pauseTimeout&&f.pauseTimeout.clear(),E=b,f.pauseTimeout=So.timeout(d,function(){x&&f.dispatchEvent("swipepause"),f.pauseTimeout=null})):(E=null,I=b,f.pauseTimeout&&f.pauseTimeout.clear()),f.swiperMoving&&(f.target[f.property]=s?Math.round(B.convert(b)):B.convert(b),!x&&Math.abs(f.target[f.property]-b)<(zot(l)||zot(a)?.5:Math.abs(l-a)/1e3)?(f.swiperMoving=!1,f.target[f.property]=b,f.immediate(f.target[f.property]),f.dispatchEvent("swipestop")):f.target[f.property])},k),this.immediate=function(e){B.immediate(e),f.target[f.property]=s?Math.round(e):e,f.desiredValue=b=e},O=!0,Object.defineProperty(f,"enabled",{get:function(){return O},set:function(e){O!=e&&((e?function(){m.canvas?v=m.on("stagemousedown",v):(v=m.on("mousedown",v),w=m.on("pressmove",w),C=m.on("pressup",C));f.immediate(f.target[f.property]),f.target.swiperTicker=So.Ticker.add(f.target.swiperTicker,k)}:Y)(),O=Boolean(e))}}),Object.defineProperty(f,"desiredValue",{get:function(){return b},set:function(e){b=e}}),Object.defineProperty(f,"damp",{get:function(){return r},set:function(e){r=e,B.damp=r}}),this.dispose=function(e,t,o){Y(),B=null}):zog("zim.Swiper() - please provide container on stage")},So.extend(So.Swiper,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),So.MotionController=function(s,c,e,u,t,r,i,o,a,n,l,d,h,g,p,f,m,z,y,b,v,w,C){var x;if(x=zob(So.MotionController,arguments,"target, type, speed, axis, boundary, map, diagonal, damp, flip, orient, constant, firstPerson, turnSpeed, moveThreshold, stickThreshold, container, localBounds, mouseMoveOutside, mousedownIncludes, minPercentSpeed, maxPercentSpeed, dampKeyup, rotate",this))return x;z_d("69.7"),this.cjsEventDispatcher_constructor(),this.type="MotionController";var k,T=this,A="zim MotionController(): Please pass in a reference to the stage or a container on the stage";if(zot(f)){if(!zdf)return void zog(A);k=f=zdf.stage}else if(zot(f.stage)){if(!zdf)return void zog(A);k=zdf.stage}else k=f.stage;var P=k.frame;zot(n)||(C=n),zot(s)&&(s=new So.Container(1,1,null,null,!1));var S,B="Accelerator"==s.type;zot(e)&&(e=7),zot(c)||"DPad"!=c.type||(S=c,c="manual",zot(u)&&(u=S.axis),"all"==u&&(u="both"),s.x,s.y,S.on("change",function(){T.convert(s.x+S.dirX*e,s.y+S.dirY*e)})),(zot(c)||"mousemove"!=c&&"pressmove"!=c&&"pressdrag"!=c&&"keydown"!=c&&"gamebutton"!=c&&"gamestick"!=c&&"swipe"!=c&&"follow"!=c&&"manual"!=c)&&(c="mousedown"),zot(u)&&(u=B?"horizontal":"both"),"keydown"==c&&zot(r)&&(r=[[65,37],[68,39],[87,38],[83,40]]),"gamebutton"==c&&zot(r)&&(r=d?[14,15,So.GamePad.RT,So.GamePad.LT]:[14,15,12,13]),"gamestick"==c&&zot(r)&&(r=d?[[0,2],[0,2],[1],[1]]:[0,0,1,1]),"gamestick"==c&&zot(r)&&(r=[0,0,1,1]),zot(i)&&(i=!0),"horizontal"!=u&&"vertical"!=u||(i=!1),zot(o)&&(o="keydown"==c||"gamebutton"==c?1:"pressmove"==c?.2:.1),zot(d)&&(d=!1),zot(h)&&(h=.4*e),zot(g)&&(g=4),zot(p)&&(p=.2),zot(z)&&(z=!1),k.mouseMoveOutside=z,zot(y)&&(y=[]),Array.isArray(y)||(y=[y]),"Pen"!=s.type||s.move?y.push(s):y.push(s,s.paper),(s.motionController=this).mousedownIncludes=y,zot(w)&&(w=.3),T.dampKeyup=w,this.dirX=0,this.dirY=0,this.speed=e,this.turnSpeed=h,this.axis=u,this.target=s,this.moveThreshold=g,this.stickThreshold=p,this.boundary=t,s.zimMCStartAngle=s.rotation;var I,E,O,M=T.speed,j=T.speed,L=0;T.rotation=s.zimMCStartAngle,B?(O=!(E=f.getBounds())||"vertical"==u&&!E.height||"vertical"!=u&&!E.width?1e3:"vertical"==u?E.height:E.width,zot(b)&&(b=0),zot(v)&&(v=100),zot(this.target.percentSpeed)&&(this.target.percentSpeed=(v-b)/2),T.x=O/2,T.y=O/2,I=new So.Proportion(0,O,b,v)):(T.x=this.target.x,T.y=this.target.y);var Y,_,D,X,R,W,H,F=T.scaleX=s.scaleX,V=T.scaleY=s.scaleY,N=!1,G=!1;if("keydown"==c||"gamebutton"==c){for(var q=0;q<4;q++)Array.isArray(r[q])||(r[q]=[r[q]]);var Q,U,K,Z,J=[0,0,0,0],$=[],ee=["X","X","Y","Y"],te=[-1,1,-1,1],oe={dirX:0,dirY:0};function ne(e){var t,o="keydown"==c?e.keyCode:e.buttonCode;for(q=0;q<4;q++)if(-1<r[q].indexOf(o)){if(i||"both"!=T.axis||(oe.dirX=oe.dirY=0),oe["dir"+ee[q]]=te[q],J[q]=1,0==(t=$.indexOf(q)))return;return 0<t&&$.splice(t,1),void $.unshift(q)}}function re(e){var t,o,n="keydown"==c?e.keyCode:e.buttonCode;for(q=0;q<4;q++){if(-1<r[q].indexOf(n))return(J[q]=0)<=(t=$.indexOf(q))&&$.splice(t,1),void("both"!=T.axis||i?oe["dir"+ee[q]]=-J[2*Math.floor(q/2)]+J[2*Math.floor(q/2)+1]:0<$.length?(oe["dir"+ee[q]]=0,o=$[0],oe["dir"+ee[o]]=te[o]):oe.dirX=oe.dirY=0)}}"keydown"==c?Q=P.on("keydown",ne):U=(se=T.gamepad=new So.GamePad).on("buttondown",ne),zot(l)&&("keydown"==c?K=P.on("keyup",re):Z=se.on("buttonup",re));var ie={rotation:0,speedX:T.speed,speedY:T.speed},ae=So.Ticker.add(function(){var e,t,o;d?ue(oe):(t=T.speed,o=T.speed,"both"==T.axis&&0!=oe.dirX&&0!=oe.dirY&&(t=(e=ge(oe.dirX,oe.dirY)).speedX,o=e.speedY),"horizontal"!=T.axis&&"both"!=T.axis||(T.x+=t*oe.dirX),"vertical"!=T.axis&&"both"!=T.axis||(T.y+=o*oe.dirY),de())},k)}else if("mousedown"==c||"mousemove"==c)Y=k.on("stage"+c,function(e){if(k=e.target.stage,"mousedown"==c){if(Array.isArray(T.mousedownIncludes)||(T.mousedownIncludes=[T.mousedownIncludes]),T.mousedownIncludes.indexOf(f)<0)for(var t=0;t<f.numChildren;t++){var o=f.getChildAt(t);if(-1==T.mousedownIncludes.indexOf(o)&&o.mouseEnabled&&o.hitTestPoint&&o.hitTestPoint(e.stageX/So.scaX,e.stageY/So.scaY))return}T.dispatchEvent("mousedown")}var n=f.globalToLocal(z?e.rawX/So.scaX:e.stageX/So.scaX,z?e.rawY/So.scaY:e.stageY/So.scaY);T.x=n.x,T.y=n.y,de()});else if("pressmove"==c||"pressdrag"==c||"follow"==c){function le(){var e=f.globalToLocal(T.moveX,T.moveY);T.x=e.x,T.y=e.y,de(),"Pen"==s.type&&!G&&s.drawing&&(G=!0)}"Pen"==s.type&&(s.write=!1),Y=k.on("stagemousedown",function(e){if("Pen"==s.type&&T.boundary){var t=e.stageX/So.scaX,o=e.stageY/So.scaY;if(t<T.boundary.x||t>T.boundary.x+T.boundary.width||o<T.boundary.y||o>T.boundary.y+T.boundary.height)return}if("pressdrag"!=c||s.hitTestPoint(e.stageX/So.scaX,e.stageY/So.scaY)){G=!1,Array.isArray(T.mousedownIncludes)||(T.mousedownIncludes=[T.mousedownIncludes]);var n,r=!1;T.mouseDownIncludes&&(n=k.getObjectUnderPoint(e.stageX,e.stageY,1));for(var i=0;i<T.mousedownIncludes.length;i++)n&&T.mousedownIncludes[i].hitTestPoint&&T.mousedownIncludes[i].hitTestPoint(e.stageX/So.scaX,e.stageY/So.scaY)&&T.mousedownIncludes[i].contains(n)&&(r=!0);if(!r)for(i=0;i<f.numChildren;i++){var a=f.getChildAt(i);if(-1==T.mousedownIncludes.indexOf(a)&&a.mouseEnabled&&a.hitTestPoint&&a.hitTestPoint(e.stageX/So.scaX,e.stageY/So.scaY))return}var l=f.globalToLocal(z?e.rawX/So.scaX:e.stageX/So.scaX,z?e.rawY/So.scaY:e.stageY/So.scaY);"follow"!=c&&"pressdrag"!=c&&T.immediate("both"==u||"horizontal"==u?l.x:null,"both"==u||"vertical"==u?l.y:null),de(),T.dispatchEvent("mousedown"),N=!0,T.moveX=z?e.rawX/So.scaX:e.stageX/So.scaX,T.moveY=z?e.rawY/So.scaY:e.stageY/So.scaY,_=k.on("stagemousemove",function(e){T.moveX=z?e.rawX/So.scaX:e.stageX/So.scaX,T.moveY=z?e.rawY/So.scaY:e.stageY/So.scaY,"follow"!=c&&le()}),X&&So.Ticker.remove(X),"follow"==c&&(X=So.Ticker.add(le)),"Pen"==s.type&&(s.write=!0,s.zimDragCheck=!0)}}),D=k.on("stagemouseup",function(e){"Pen"==s.type&&(s.write=!1,s.zimDragCheck=!1,G&&s.stopCheck()),X&&So.Ticker.remove(X),k.off("stagemousemove",_),N=!1})}else if("gamestick"==c){for(var se=this.gamepad=new So.GamePad,q=0;q<4;q++)Array.isArray(r[q])||(r[q]=[r[q]]);var ie={rotation:s.zimMCStartAngle,speedX:T.speed,speedY:T.speed},ce=se.on("data",function(e){oe={dirX:0,dirY:0};for(var t=0;t<r[0].length;t++){var o=e.axes[r[0][t]];if(Math.abs(o)>T.stickThreshold){oe.dirX=o;break}}for(t=0;t<r[2].length;t++){o=e.axes[r[2][t]];if(Math.abs(o)>T.stickThreshold){oe.dirY=o;break}}d?ue(oe):(T.x+=T.speed*oe.dirX,T.y+=T.speed*oe.dirY,de())})}else{"swipe"==c&&(R=new So.Swiper(k,T,"x",.8),W=new So.Swiper(k,T,"y",.8,!1),H=R.on("swipemove",function(){de()}))}function ue(e){ie.rotation+=e.dirX*T.turnSpeed,T.rotation=ie.rotation,ie.speedX=Math.sin(ie.rotation*Math.PI/180)*T.speed*-e.dirY,ie.speedY=-Math.cos(ie.rotation*Math.PI/180)*T.speed*-e.dirY,T.x+=ie.speedX,T.y+=ie.speedY}function de(){var e,t,o=ge(T.x-(B?T.target.percentSpeed:T.target.x),T.y-(B?T.target.percentSpeed:T.target.y));M=o.speedX,j=o.speedY,C&&(zot(o.angle)||(T.rotation=o.angle+s.zimMCStartAngle),zot(T.rotation)?T.rotation=T.target.rotation:(T.rotation+=L,e=he(T.rotation),t=T.target.rotation=he(T.target.rotation),180<Math.abs(e-t)&&(e<t?t-=360:e-=360),T.dampR.immediate(t),T.target.rotation=t,T.rotation=e))}function he(e){return(e%360+360)%360}function ge(e,t){var o,n=T.speed,r=T.speed,i=Math.sqrt(Math.pow(e,2)+Math.pow(t,2));return 0<i&&(n=Math.abs(e)/i*T.speed,r=Math.abs(t)/i*T.speed,o=90-180*Math.atan2(e,t)/Math.PI),{speedX:n,speedY:r,angle:o}}var pe=this.x,fe=this.y,me=this.x=B?O/2:this.target.x,ze=this.y=B?O/2:this.target.y;this.dampX=new So.Damp(me,o),this.dampY=new So.Damp(ze,o),this.dampR=new So.Damp(this.target.rotation,o);var ye,be=0,ve=0,we=So.Ticker.add(function(){var e,t,o,n,r;"manual"==c&&de(),T.boundary&&"Blob"!=T.boundary.type&&(T.x=So.constrain(T.x,T.boundary.x,T.boundary.x+T.boundary.width),T.y=So.constrain(T.y,T.boundary.y,T.boundary.y+T.boundary.height)),"horizontal"!=T.axis&&"both"!=T.axis||(T.dirX=So.sign(T.x-me),Math.abs(T.x-me)<M?me=T.x:me+=T.dirX*M,oe&&0==oe.dirX&&(t=T.boundary?T.boundary.width/2:k.width/2,e=T.x-(T.x-t)*(B?T.dampKeyup:0),me=e,T.x=me),B&&E&&E.width?T.target.percentSpeed=I.convert(T.dampX.convert(me)):T.target.x=T.dampX.convert(me)),"vertical"!=T.axis&&"both"!=T.axis||(T.dirY=So.sign(T.y-ze),Math.abs(T.y-ze)<j?ze=T.y:ze+=So.sign(T.y-ze)*j,oe&&0==oe.dirY&&(t=T.boundary?T.boundary.height/2:k.height/2,o=T.y-(T.y-t)*(B?T.dampKeyup:0),ze=o,T.y=ze),B&&E&&E.height?T.target.percentSpeed=I.convert(T.dampY.convert(ze)):T.target.y=T.dampY.convert(ze)),T.boundary&&"Blob"==T.boundary.type&&(T.boundary.shape.hitTestPoint(T.target.x,T.target.y)?(pe=T.target.x,fe=T.target.y):(T.target.x=T.x=pe,T.target.y=T.y=fe,T.immediate(pe,fe))),"pressmove"==c&&N&&T.dispatchEvent("pressing"),T.movingX=Math.abs(me-(B?T.target.percentSpeed:T.target.x))>T.moveThreshold,T.movingY=Math.abs(ze-(B?T.target.percentSpeed:T.target.y))>T.moveThreshold,!T.moving||T.movingX||T.movingY?T.moving||!T.movingX&&!T.movingY||T.dispatchEvent("startmoving"):T.dispatchEvent("stopmoving"),T.moving=T.movingX||T.movingY,T.moving&&T.dispatchEvent("moving"),T.dirX==be&&T.dirY==ve||(n=new createjs.Event("change"),T.dirX!=be?(r=["left",null,"right"],n.dir=r[T.dirX+1],be=T.dirX,s.zimMCStartAngle||"horizontal"!=a&&"both"!=a||(T.scaleX=s.scaleX=T.dirX?Math.abs(s.scaleX)*T.dirX:s.scaleX,L=0!=F&&-1==Math.round(T.scaleX/F)?180:0)):(r=["up",null,"down"],n.dir=r[T.dirY+1],ve=T.dirY,s.zimMCStartAngle||"vertical"!=a&&"both"!=a||(T.scaleY=s.scaleY=T.dirY?Math.abs(s.scaleY)*T.dirY:s.scaleY,L=0!=V&&-1==Math.round(T.scaleY/V)?180:0)),T.dispatchEvent(n)),C&&!zot(T.rotation)&&(T.target.rotation=T.dampR.convert(T.rotation))},k);this.immediate=function(e,t,o){return!zot(e)&&T.dampX&&(T.dampX.immediate(e),T.x=B?T.target.percentSpeed=me=e:T.target.x=me=e,R&&R.immediate(e)),!zot(t)&&T.dampY&&(T.dampY.immediate(t),T.y=B?T.target.percentSpeed=ze=t:T.target.y=ze=t,W&&W.immediate(t)),!zot(o)&&T.dampR&&(T.dampR.immediate(o),T.rotation=T.target.rotation=o),pe=T.x,fe=T.y,T},this.convert=function(e,t){zot(e)||(T.x=e),zot(t)||(T.y=t),de()},Object.defineProperty(T,"pausingSpeed",{get:function(){return T.speed},set:function(e){T.speed=e}}),this.paused=!1,this.pause=function(e,t){return zot(e)&&(e=!0),zot(t)&&(t=0),e?(ye=T.speed,0<t?So.animate({target:T,obj:{pausingSpeed:0},ticker:!1,time:t,call:function(){T.speed=0,T.paused=!0,T.enabled=!1,T.immediate(T.target.x,T.target.y),T.dispatchEvent("pause")}}):(T.speed=0,T.paused=!0,T.enabled=!1,T.immediate(T.target.x,T.target.y),setTimeout(function(){T.dispatchEvent("pause")},10))):(T.enabled=!0,0<t?So.animate({target:T,obj:{pausingSpeed:ye},ticker:!1,time:t,call:function(){T.speed=ye,T.paused=!1,0}}):(T.speed=ye,T.paused=!1)),T};var Ce=!0;function xe(){"keydown"==c?(P.off("keydown",Q),P.off("keyup",K),So.Ticker.remove(ae)):"gamebutton"==c?(se.off("buttondown",U),se.off("buttonup",Z),So.Ticker.remove(ae)):"gamestick"==c?se.off("data",ce):"swipe"==c?(R.enabled=!1,W.enabled=!1,R.off("swipemove",H)):"mousedown"==c||"mousemove"==c?k.off("stage"+c,Y):"pressmove"==c&&(k.off("stagemousedown",Y),k.off("stagemousemove",_),k.off("stagemouseup",D)),So.Ticker.remove(we)}Object.defineProperty(T,"enabled",{get:function(){return Ce},set:function(e){Ce!=e&&(e?(function(){"keydown"==c?(Q=P.on("keydown",Q),K=K&&P.on("keyup",K),ae=So.Ticker.add(ae,k)):"gamebutton"==c?(U=se.on("buttondown",U),Z=Z&&se.on("buttonup",Z),ae=So.Ticker.add(ae,k)):"gamestick"==c?ce=se.on("data",ce):"swipe"==c?(R.enabled=!0,W.enabled=!0,H=H&&R.on("swipemove",H)):"mousedown"==c||"mousemove"==c?Y=k.on("stage"+c,Y):"pressmove"==c&&(Y=k.on("stagemousedown",Y),_=_&&k.on("stagemousemove",_),D=D&&k.on("stagemouseup",D));we=So.Ticker.add(we,k)}(),T.paused=!1):(xe(),T.paused=!0),Ce=Boolean(e))}}),this.dispose=function(e,t,o){xe(),se&&se.dispose(),R&&R.dispose(),W&&R.dispose()}},So.extend(So.MotionController,createjs.EventDispatcher,"enabled","cjsEventDispatcher"),So.GamePad=function(){if(z_d("69.8"),this.type="GamePad",this.cjsEventDispatcher_constructor(),!navigator.getGamepads)return this.error=!0,void(zon&&zog("zim.GamePad() - no browswer support"));var a;window.addEventListener("gamepadconnected",n),this.currentIndex=0;var l=this;function n(e){var t,o,n;l.connected=!0,t="gamepadconnected",o=e,(n=new createjs.Event(t)).index=o.gamepad.index,n.id=o.gamepad.id,n.buttons=o.gamepad.buttons,n.axes=o.gamepad.axes,l.dispatchEvent(n);var r=navigator.getGamepads()[l.currentIndex];l.lastData=[];for(var i=0;i<r.buttons.length;i++)l.lastData[i]=r.buttons[i].pressed;!function e(){if(a=requestAnimationFrame(e),l.data=navigator.getGamepads()[l.currentIndex],l.data){for(var t,o=l.buttons=[],n=0;n<l.data.buttons.length;n++)o[n]=l.data.buttons[n].pressed,o[n]!=l.lastData[n]&&(l.lastData[n]=o[n],(t=o[n]?new createjs.Event("buttondown"):new createjs.Event("buttonup")).buttonCode=n,t.button=s[n],l.dispatchEvent(t));(t=new createjs.Event("data")).axes=l.axes=l.data.axes,t.buttons=l.buttons,l.dispatchEvent(t)}}()}var r=setInterval(function(){navigator.getGamepads&&navigator.getGamepads()[0]&&(l.connected||n(),clearInterval(r))},500);function i(e){e.gamepad.index==l.currentIndex&&(cancelAnimationFrame(a),l.connected=!1,l.dispatchEvent("gamepaddisconnected"))}window.addEventListener("gamepaddisconnected",i),this.dispose=function(e,t,o){window.removeEventListener("gamepadconnected",n),window.removeEventListener("gamepaddisconnected",i),cancelAnimationFrame(a),clearInterval(r),l.connected=!1}};for(var s=["A","B","X","Y","LB","RB","LT","RT","BACK","START","LS","RS","DPAD_UP","DPAD_DOWN","DPAD_LEFT","DPAD_RIGHT"],l=0;l<s.length;l++)So.GamePad[s[l]]=l;var f,m,e=["LSX","LSY","RSX","RSY"];for(l=0;l<e.length;l++)So.GamePad[e[l]]=l;So.extend(So.GamePad,createjs.EventDispatcher,null,"cjsEventDispatcher"),So.Portal=function(t,o){var e,n,r,i,a;if(e=zob(So.Portal,arguments,"obj, lands",this))return e;function l(){o.setChildIndex(i,0),i=a,a=o.getChildAt(o.numChildren-2),o.setChildIndex(a,o.numChildren-1),i.setMask(null),a.setMask(t),t.stage.update()}z_d("69.96"),!zot(t)&&t.stage&&(this.type="Portal",n=this,(r=o&&o.numChildren&&0<o.numChildren)&&(i=o.getChildAt(o.numChildren-1),a=o.getChildAt(o.numChildren-2),o.setChildIndex(a,o.numChildren-1),a.setMask(t)),t.on(So.mobile()?"mousedown":"mouseover",function(){n._enabled&&(r&&l(),n.dispatchEvent("enter"))}),t.on(So.mobile()?"pressup":"mouseout",function(){n._enabled&&n.dispatchEvent("exit")}),Object.defineProperty(this,"portal",{get:function(){return t},set:function(e){!zot(e)&&e.stage||!zon?a.setMask(t):zog("zim.Portal() - please provide a Display Object to act as the portal")}}),Object.defineProperty(this,"currentLand",{get:function(){return i},set:function(e){if(o.contains(e))for(;e!=i;)l()}}),Object.defineProperty(this,"nextLand",{get:function(){return a},set:function(e){zon&&zog("zim.Portal() - nextLand is read only - remake Portal to change")}}),this._enabled=!0,Object.defineProperty(n,"enabled",{get:function(){return n._enabled},set:function(e){n._enabled=e}}),this.dispose=function(e,t,o){})},So.extend(So.Portal,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),window.zimContactListener=null,So.Parallax=function(e,t,a,o,n,r,l){var i;if(i=zob(So.Parallax,arguments,"layers, damp, auto, stage, startPaused, mouseMoveOutside, clamp",this))return i;if(z_d("68"),this.type="Parallax",zot(o))if(e&&e[0]&&e[0].obj&&e[0].obj.stage)o=e[0].obj.stage;else{if(!zdf)return;o=zdf.stage}a=!!zot(a),zot(n)&&(n=!1),zot(r)&&(r=!1);var s=o.getBounds().width,c=o.getBounds().height;o.mouseMoveOutside=r;var u=this;o.on("stagemousemove",function(e){u.mouseX=e.rawX/So.scaX,u.mouseY=e.rawY/So.scaY});var d=zot(t)?.1:t;this.addLayer=function(e){if(!(zot(e.obj)||zot(e.prop)||zot(e.propChange))){var t={obj:e.obj,prop:e.prop};t[t.prop]=e.propChange,zot(e.input)&&(e.input="mouseX"),t.input=e.input,t.split=zot(e.split)?!("mouseX"!=e.input||!a):e.split;var o=zot(e.inMin)?0:e.inMin,n=zot(e.inMax)?"mouseX"==e.input||"scrollX"==e.input?s:c:e.inMax,r=zot(e.factor)?1:e.factor,i=!zot(e.integer)&&e.integer;return t["p_"+t.prop]=new So.ProportionDamp(o,n,0,t[t.prop],d,r,i,l),"scale"==t.prop?t["s_"+t.prop]=t.obj.scaleX:"frame"==t.prop?t["s_"+t.prop]=t.obj.currentFrame:t["s_"+t.prop]=t.obj[t.prop],zot(e.immediate)||t["p_"+t.prop].immediate(e.immediate),g.push(t),u}},this.removeLayer=function(e){if(!zot(e)){var t=g[e];return t["p_"+t.prop].dispose(),g.splice(e,1),u}},this.immediate=function(e){for(var t,o=0;o<g.length;o++)(t=g[o])["p_"+t.prop].immediate(e[o]);return u},this.dispose=function(e,t,o){return g=null,a&&So.Ticker.remove(h),!0},e=zot(e)?[]:e;for(var h,g=[],p=0;p<e.length;p++)this.addLayer(e[p]);a&&(h=So.Ticker.add(function(e){u.step()},o),n&&So.Ticker.remove(h)),this.step=function(e){for(var t,o,n=0;n<g.length;n++)t=g[n],zot(e)?"mouseX"==t.input?o=u.mouseX:"mouseY"==t.input?o=u.mouseY:"scrollX"==t.input?o=So.scrollX():"scrollY"==t.input&&(o=So.scrollY()):o=e,"scale"==t.prop?t.obj.scaleX=t.obj.scaleY=t["s_"+t.prop]+t["p_"+t.prop].convert(o):"frame"==t.prop?t.obj.gotoAndStop(t["s_"+t.prop]+t["p_"+t.prop].convert(o)):(t.obj[t.prop]=t["s_"+t.prop]+t["p_"+t.prop].convert(o),t.split&&(t.obj[t.prop]-=t[t.prop]/2));return u},u.paused=n,u.pause=function(e){return zot(e)&&(e=!0),u.paused!=e&&(u.paused=e,h&&(e?So.Ticker.remove(h):h=So.Ticker.add(h))),u},Object.defineProperty(u,"damp",{get:function(){return d},set:function(e){var t;d=e;for(var o=0;o<g.length;o++)(t=g[o])["p_"+t.prop].damp=d}})},So.Flipper=function(o,n,e,a,l,t,s,r,i,c,u,d){var h;if(h=zob(So.Flipper,arguments,"front, back, interactive, time, vertical, flipped, easeRoot, frontPress, backPress, style, group, inherit",this))return h;z_d("68.5"),this.group=u;var g,p=!1===c?{}:So.getStyle("Flipper",this.group,d);zot(o)&&(o=null!=p.front?p.front:zimDefaultFrame.makeIcon().sca(2)),zot(n)&&(n=null!=p.back?p.back:new So.Page(o.width,o.height,So.dark)),this.front=o,this.back=n,t&&(g=o,o=n,n=g);var f=Math.max(o.width,n.width),m=Math.max(o.height,n.height);this.zimContainer_constructor(f,m),this.type="Flipper",zot(a)&&(a=null!=p.time?p.time:.2),zot(l)&&(l=null!=p.vertical&&p.vertical),zot(e)&&(e=null!=p.interactive&&p.interactive),zot(t)&&(t=null!=p.flipped&&p.flipped),zot(s)&&(s=null!=p.easeRoot?p.easeRoot:"quad"),zot(r)&&(r=null==p.frontPress||p.frontPress),zot(i)&&(i=null==p.backPress||p.backPress),this.flipped=t;var z,y=this;function b(e,t,o,n){if(zot(o)&&(o=1),zot(n)&&(n=a),y.flipped=!y.flipped,y.dispatchEvent("flip"),0==n)return y.removeAllChildren(),t.scale=t.oScale,t.skewX=t.skewY=0,t.centerReg(y),void y.dispatchEvent("flipped");var r,i;l?(r={skewX:-90*o,scaleY:e.oScale/2},i={skewX:0,scaleY:t.oScale},t.ske(90*o,0).sca(t.oScale,t.oScale/2)):(r={skewY:-90*o,scaleX:e.oScale/2},i={skewY:0,scaleX:t.oScale},t.ske(0,90*o).sca(t.oScale/2,t.oScale)),e.animate({props:r,time:a,ease:s+"In",call:function(){e.removeFrom(),t.centerReg(y).animate({props:i,time:a,ease:s+"Out",call:function(){y.dispatchEvent("flipped")}})}})}o.centerReg(this),(r&&!t||i&&t)&&((z=e&&o.backing?o.backing:o).on("mousedown",function(){b(o,n)}),z.cur()),(i&&!t||r&&t)&&((z=e&&n.backing?n.backing:n).on("mousedown",function(){b(n,o,-1)}),z.cur()),o.oScale=o.scale,n.oScale=n.scale,o.flipper=y,(o.other=n).flipper=y,n.other=o,e||(o.mouseChildren=n.mouseChildren=!1),!(this.flip=function(e,t){e!=y.flipped&&(y.flipped?b(n,o,-1,t):b(o,n,1,t))})!==c&&So.styleTransforms(this,p),this.clone=function(){return y.cloneProps(new So.Flipper(o.clone(),n.clone(),e,a,l,t,s,r,i,c,this.group,d))}},So.extend(So.Flipper,So.Container,"clone","zimContainer"),So.Book=function(z,y,b,n,v,w,C,x){var e;if(e=zob(So.Book,arguments,"width, height, pages, startPage, rollUp, radius, backgroundColor, arrows",this))return e;z_d("68.7"),zot(z)&&(z=zdf?zdf.stage.width:1024),zot(y)&&(y=zdf?zdf.stage.height:768),this.zimContainer_constructor(z,y),this.type="Book",zot(b)&&(b=[]),zot(n)&&(n=0),zot(v)&&(v=!0),zot(C)&&(C=So.darker),zot(x)&&(x=!0);var k,T=Bo(),A=this;0!=b.length&&(A.backing=new Rectangle(z-2,y-2,C),So.loop(b,function(e,t){"string"==typeof e&&(b[t]=So.asset(e))}),A.added(function(e){var a,l,s,c,u,d,t,r=(k=e).frame,i=new Shape;function h(e){A._currentPage=e,A.removeAllChildren(),A.backing.loc(1,1,A),A.setMask(A.backing),i.addTo(A),i.c().f(black).dr(0,0,0,0),A.moving=!1,b[e-1]?a=b[e-1].rot(0).loc(0,0,A):0<e&&t.reg(0,0).rot(0).loc(0,0,A).setMask(null),b[e-2]?l=b[e-2].reg(z/2,y).loc(0,y,A).rot(-90):(l=new Rectangle(z/2,y,C).reg(z/2,y).loc(0,y,A).rot(-90),0),s=b[e-3]?b[e-3].rot(0).loc(0,0,A).setMask(i):new Rectangle(z/2,y,C).loc(0,0,A).setMask(i),b[e]&&(c=b[e].rot(0).pos(0,0,RIGHT,TOP,A),b[e+1]?u=b[e+1].reg(0,y).loc(z,y,A).rot(90):(u=new Rectangle(z/2,y,C).reg(0,y).loc(z,y,A).rot(90),t=u),d=b[e+2]?b[e+2].rot(0).pos(0,0,RIGHT,TOP,A).setMask(i):new Rectangle(z/2,y,C).pos(0,0,RIGHT,TOP,A).setMask(i)),k.update()}h(A._currentPage=n);var g=!1;function o(){A.stageEvent=k.on("stagemousedown",function(){var e,t,o,n;A.moving||((o=A.globalToLocal(r.mouseX,r.mouseY)).x<0||o.x>z||o.y<0||o.y>y||0<w&&dist(o,new Point(0,y))>w&&dist(o,new Point(z,y))>w||("right"==(n=o.x>z/2?"right":"left")&&A._currentPage>=b.length-1||"left"==n&&A._currentPage<=1||(A.moving=!0,"right"==n?(c.addTo(A),u.addTo(A),d.addTo(A)):(a.addTo(A),l.addTo(A),s.addTo(A),A.rolledUp&&m(0,0,"right")),A.moveEvent=k.on("stagemousemove",function(){p&&(p.clear(),p=null);A.globalToLocal(r.mouseX,r.mouseY);e="right"==n?z-r.mouseX:r.mouseX,t=y-r.mouseY+e,A.currentW=e=constrain(e,0,z/2),A.currentH=t=constrain(t,0,y),m(e,t,n)}),A.upEvent=k.on("stagemouseup",function(){k.off("stagemousemove",A.moveEvent),g||f(0,0,n)},null,!0))))})}{var p;A.currentW=0,A.currentH=0,A.moving=!1,o(),!(A.rollUp=function(e,t,o,n,r){var i;A.moving||"right"==o&&A._currentPage>=b.length-1||"left"==o&&A._currentPage<=1||("right"==o?(c.addTo(A),u.addTo(A),d.addTo(A)):(A.rolledUp&&m(0,0,"right"),a.addTo(A),l.addTo(A),s.addTo(A)),A.moving=!0,zot(n)&&(n="s"==T?.5:5e-4),zot(r)&&(r=null),A.animate({props:{currentW:e,currentH:t},time:n,ease:r,call:function(){Ticker.remove(i),A.moving=!1,m(e,t,o)}}),i=Ticker.add(function(){m(A.currentW,A.currentH,o)}))})!==v&&((A.rolledUp=!0)===v&&(v="s"==T?1:.001),p=timeout(v,function(){A.rollUp(60,130,"right",.5),A.dispatchEvent("rollup")}))}function f(e,t,o,n){A.moving=!0,A.rolledUp=!1,zot(n)&&(n="s"==T?.7:7e-4),A.animate({props:{currentW:0,currentH:0},time:n,call:function(){Ticker.remove(r),m(0,0,o),A.moving=!1}});var r=Ticker.add(function(){m(A.currentW,A.currentH,o)})}function m(e,t,o){var n;"right"==o?(i.c().mt(z,y).lt(z-e,y).lt(z,y-t).cp(),n=Math.atan2(e,t),u.loc(z-(e+e*Math.cos(2*n)),y-e*Math.sin(2*n)).rot(2*n*DEG),!g&&z/2<=e&&y<=t&&function(){g=!0,A.moving=!0,A.moveEvent&&k.off("stagemousemove",A.moveEvent);A.upEvent&&k.off("stagemouseup",A.upEvent);A.currentW=0,A.currentH=0,A.lastPage=So.constrain(A._currentPage),A.direction="right",A.dispatchEvent("pageanimate"),A.animate({ease:"quadOut",props:{currentW:z/2},time:.3,timeUnit:"s",call:function(){Ticker.remove(e),u.reg(0,0),d.setMask(null),h(A._currentPage+2),A.moving=!1,g=!1,A.currentW=0,A.currentH=0,A.dispatchEvent("page")}});var e=Ticker.add(function(){i.c().mt(z,y).lt(z/2,y).lt(z-A.currentW,0).lt(z,0).cp()});u.reg(z/2,y).loc(z/2,y,A).animate({props:{rotation:0},time:.3,ease:"quadOut",timeUnit:"s"})}()):(i.c().mt(0,y).lt(e,y).lt(0,y-t).cp(),n=Math.atan2(e,t),l.loc(e+e*Math.cos(2*n),y-e*Math.sin(2*n)).rot(2*-n*DEG),!g&&z/2<=e&&y<=t&&function(){g=!0,A.moving=!0,A.moveEvent&&k.off("stagemousemove",A.moveEvent);A.upEvent&&k.off("stagemouseup",A.upEvent);A.currentW=0,A.currentH=0,A.lastPage=So.constrain(A._currentPage),A.direction="left",A.dispatchEvent("pageanimate"),A.animate({ease:"quadOut",props:{currentW:z/2},time:.3,timeUnit:"s",call:function(){Ticker.remove(e),l.reg(0,0),s.setMask(null),h(A._currentPage-2),A.moving=!1,g=!1,A.currentW=0,A.currentH=0,A.dispatchEvent("page")}});var e=Ticker.add(function(){i.c().mt(0,y).lt(z/2,y).lt(A.currentW,0).lt(0,0).cp()});l.reg(0,y).loc(z/2,y,A).animate({props:{rotation:0},time:.3,timeUnit:"s",ease:"quadOut"})}()),k.update()}A.rollDown=function(e,t,o,n){A.moving||"right"==o&&A._currentPage>=b.length-1||"left"==o&&A._currentPage<=1||f(0,0,o,n)},x&&(!0===x&&(x=.2),A.keydown=r.on("keydown",function(e){39==e.keyCode?A.nextPage(x):37==e.keyCode&&A.prevPage(x)}));A.changeFrame=function(e){return A.stageEvent&&k.off("stagemousedown",A.stageEvent),A.moveEvent&&k.off("stagemousemove",A.moveEvent),A.upEvent&&k.off("stagemouseup",A.upEvent),k=(r=e).stage,o(),A}}),A.nextPage=function(e){if(zot(A.rollUp))return timeout(.01,function(){A.nextPage(e)}),A;A.moving||A.rollUp(z/2+.1,y+.1,"right",e,"quadIn")},A.prevPage=function(e){if(zot(A.rollUp))return timeout(.01,function(){A.prevPage(e)}),A;A.moving||A.rollUp(z/2+.1,y+.1,"left",e,"quadIn")},A.gotoPage=function(o,n){if(zot(A.rollUp))return timeout(.01,function(){A.gotoPage(o,n)}),A;o=constrain(o,0,A.pages.length-1),zot(n)&&(n="s"==T?.3:300);var r=n+("s"==T?.35:350);A.pageInterval=interval(r,function(e){var t=!1;A._currentPage<o?A.nextPage(n):A._currentPage>o?A.prevPage(n):t=!0,A.dispatchEvent("pageturn"),e.count==e.total-1&&(t?A.dispatchEvent("pagedone"):timeout(r,function(){A.dispatchEvent("pagedone")}))},Math.floor(Math.abs(o-A._currentPage)/2+1),!0)},Object.defineProperty(A,"page",{get:function(){return A._currentPage},set:function(e){A.gotoPage(e,"s"==T?.1:100)}}),Object.defineProperty(A,"pages",{get:function(){return b},set:function(e){zon&&zogy("ZIM Book() - pages is read only")}}),this.dispose=function(e,t,o){return A.stageEvent&&k.off("stagemousedown",A.stageEvent),A.moveEvent&&k.off("stagemousemove",A.moveEvent),A.upEvent&&k.off("stagemouseup",A.upEvent),A.keydown&&frame.off("keydown",A.keydown),A.removeFrom(),disposing||this.zimContainer_dispose(!0),!0})},So.extend(So.Book,So.Container,["clone","dispose"],"zimContainer"),So.Scroller=function(e,t,o,n,r,i,a,l,s,c){var u;if(u=zob(So.Scroller,arguments,"backing, speed, direction, horizontal, gapFix, stage, container, style, group, inherit",this))return u;z_d("69"),this.cjsEventDispatcher_constructor(),this.type="Scroller",this.group=s;var d,h,g,p,f,m,z,y,b,v,w,C=!1===l?{}:So.getStyle(this.type,this.group,c);zot(e)&&(e=null!=C.backing?C.backing:null),zot(e)||!zot(d=this.backing1=e)&&d.getBounds&&(h=this.backing2=e.clone(),zot(n)&&(n=null==C.horizontal||C.horizontal),zot(r)&&(r=null!=C.gapFix?C.gapFix:0),zot(a)&&(a=null!=C.container?C.container:null),zot(i)&&(i=null!=C.stage?C.stage:null),g=this,zot(t)&&(t=null!=C.speed?C.speed:1),this.speed=t,p=this.baseSpeed=this.speed,zot(o)&&(o=null!=C.direction?C.direction:1),this.direction=o,f=n?d.scaleX:d.scaleY,d.getBounds()?i||d.stage?d.parent?(d.parent.addChildAt(h,d.parent.getChildIndex(d)),i=i||d.stage,zot(a)&&(a=i),a.getBounds()?(m=d.getBounds().width*f-r,z=d.getBounds().height*f-r,n?h.x=m:h.y=z,v=!1,w=So.Ticker.add(function(e){y||(y=a.getBounds().width,b=a.getBounds().height);if(0==g.speed||0==g.direction)return;n?(d.x-=g.speed*g.direction,d.x<h.x?h.x=d.x+m:h.x=d.x-m,0<g.direction*g.speed?h.x<0&&d.x<h.x?d.x=h.x+m:d.x<0&&h.x<d.x&&(h.x=d.x+m):h.x>y&&h.x>d.x?h.x=d.x-m:d.x>y&&d.x>h.x&&(d.x=h.x-m)):(d.y-=g.speed*g.direction,d.y<h.y?h.y=d.y+z:h.y=d.y-z,0<g.direction*g.speed?h.y<0&&d.y<h.y?d.y=h.y+z:d.y<0&&h.y<d.y&&(h.y=d.y+z):h.y>b&&h.y>d.y?h.y=d.y-z:d.y>b&&d.y>h.y&&(d.y=h.y-z))},i),this.paused=!1,this.pause=function(e,t){return zot(e)&&(e=!0),zot(t)&&(t=0),e?(p=g.speed,0<t?(v=!0,So.animate({target:g,obj:{pausingSpeed:0},ticker:!1,time:t,call:function(){g.speed=0,g.paused=!0,v=!1,g.dispatchEvent("pause")}})):(v=!1,g.speed=0,g.paused=!0,setTimeout(function(){g.dispatchEvent("pause")},10))):(v=!1,0<t?So.animate({target:g,obj:{pausingSpeed:p},ticker:!1,time:t,call:function(){g.speed=p,g.paused=!1,v=!1}}):(g.speed=p,g.paused=!1)),g},Object.defineProperty(g,"percentSpeed",{get:function(){return 0==g.baseSpeed?NaN:g.speed/g.baseSpeed*100},set:function(e){v||g.paused||(g.speed=g.baseSpeed*e/100)}}),Object.defineProperty(g,"pausingSpeed",{get:function(){return 0==g.baseSpeed?NaN:g.speed/g.baseSpeed*100},set:function(e){g.speed=g.baseSpeed*e/100}}),!1!==l&&So.styleTransforms(this,C),this.dispose=function(e,t,o){return So.Ticker.remove(w),!0}):zog("zim display - Scroller(): please setBounds() on container or stage if no container")):zog("zim display - Scroller(): please add object to container or stage before adding to Scroller"):zog("zim display - Scroller(): please pass in stage parameter or add backing objects to stage to start"):zog("zim display - Scroller(): please setBounds() on backing objects"))},So.extend(So.Scroller,createjs.EventDispatcher,null,"cjsEventDispatcher"),So.Dynamo=function(n,e,t,o,r,i,a,l,s,c,u,d){var h;if(h=zob(So.Dynamo,arguments,"sprite, speed, label, startFrame, endFrame, update, reversible, flip, flipVertical, style, group, inherit",this))return h;z_d("69.2"),this.cjsEventDispatcher_constructor(),this.type="Dynamo",this.group=u;var g,p,f,m,z,y,b,v,w,C,x,k=!1===c?{}:So.getStyle(this.type,this.group,d);zot(n)&&(n=null!=k.sprite?k.sprite:null),zot(n)||0!=(g=this.frames=n.parseFrames(t,o,r,!0)).length&&(this.totalFrames=g.length,p=0,zot(e)&&(e=null!=k.speed?k.speed:30),zot(a)&&(a=null==k.reversible||k.reversible),f=this.baseSpeed=this.speed=e,zot(i)&&(i=null!=k.update&&k.update),zot(l)&&(l=null!=k.flip?k.flip:null),zot(l)&&0==a&&(l=!0),m=this,b=Date.now(),x=!1,m.scaleX=n.scaleX,m.scaleY=n.scaleY,function e(){var t,o;z=requestAnimationFrame(e),y=g[p].s,0!=m.speed&&0!=y&&(w=1e3/Math.abs(m.speed)*y,v=Date.now(),w<v-b&&(b=v,o=!1,(t=m.frame+(0<m.speed||!a?1:-1))>=g.length&&(o=!0,t=0),t<0&&(o=!0,t=g.length-1),m.frame=t,l&&(m.speed<0?n.scaleX=-m.scaleX:n.scaleX=m.scaleX),s&&(m.speed<0?n.scaleY=-m.scaleY:n.scaleY=m.scaleY),o&&m.dispatchEvent("loop"),m.dispatchEvent("change"),i&&n.stage&&n.stage.update(),zot(C)||C!=m.frame||(x=!1,m.speed=0,m.paused=!0,m.dispatchEvent("pause"))))}(),this.paused=!1,this.pause=function(e,t,o){if(zot(e)&&(e=!0),e!=m.paused)return zot(t)&&(t=0),e?(f=m.speed,zot(o)?0<t?(x=!0,So.animate({target:m,obj:{pausingSpeed:0},ticker:!1,time:t,call:function(){x=!1,m.speed=0,m.paused=!0,m.dispatchEvent("pause")}})):(x=!1,m.speed=0,m.paused=!0,setTimeout(function(){m.dispatchEvent("pause")},10)):(x=!0,C=o)):(C=null,0<t?(x=!0,So.animate({target:m,obj:{pausingSpeed:f},ticker:!1,time:t,call:function(){x=!1,m.speed=f,m.paused=!1}})):(x=!1,m.speed=f,m.paused=!1)),m},Object.defineProperty(m,"frame",{get:function(){return p},set:function(e){p=Math.round(e)%g.length;var t=g[p];zot(t)||(n.frame=t.f)}}),Object.defineProperty(m,"percentSpeed",{get:function(){return 0==m.baseSpeed?NaN:x||m.paused?f/m.baseSpeed*100:m.speed/m.baseSpeed*100},set:function(e){x||m.paused?f=m.baseSpeed*e/100:m.speed=m.baseSpeed*e/100}}),Object.defineProperty(m,"pausingSpeed",{get:function(){return 0==m.baseSpeed?NaN:m.speed/m.baseSpeed*100},set:function(e){m.speed=m.baseSpeed*e/100}}),!1!==c&&So.styleTransforms(this,k),this.dispose=function(e,t,o){cancelAnimationFrame(z)})},So.extend(So.Dynamo,createjs.EventDispatcher,null,"cjsEventDispatcher"),So.Accelerator=function(e){z_d("69.3"),this.cjsEventDispatcher_constructor();var l=this;this.type="Accelerator",this.paused=!1,this.items=[],this.paused=!1,this._percentSpeed=100,this.add=function(e){for(var t=Array.isArray(e)?e:[e],o=0;o<t.length;o++)l.items.indexOf(t[o])<0&&l.items.push(t[o]);return l},e&&this.add(e),this.remove=function(e){for(var t,o=Array.isArray(e)?e:[e],n=0;n<o.length;n++)0<=(t=l.items.indexOf(o[n]))&&l.items.splice(t,1);return l},this.pause=function(t,e,o){if(zot(t)&&(t=!0),t!=l.paused){var n=[];if(t){zot(o)||(e=null);for(var r=!1,i=0;i<l.items.length;i++)(zot(e)||!zot(o)||l.items[i].totalFrames)&&(!l.items[i].totalFrames||zot(e)&&zot(o))||(l.items[i].pause(!0,e,o),r=!0,n[i]=1,l.items[i].on("pause",function(){l.paused||(a(),l.paused=!0,l.dispatchEvent("pause"))},null,!0));r||(a(),l.paused=!0,setTimeout(function(){l.dispatchEvent("pause")},10))}else l.paused=!1,a()}function a(){for(var e=0;e<l.items.length;e++)1!=n[e]&&l.items[e].pause(t)}},Object.defineProperty(l,"percentSpeed",{get:function(){return l._percentSpeed},set:function(e){l._percentSpeed=e;for(var t=0;t<l.items.length;t++)l.items[t].percentSpeed=e}}),this.dispose=function(e,t,o){for(var n=0;n<l.items.length;n++)l.items[n].dispose();return!0}},So.extend(So.Accelerator,createjs.EventDispatcher,null,"cjsEventDispatcher"),So.Emitter=function(f,m,z,t,e,o,n,r,i,a,l,s,y,b,c,u,d,h,g,p,v,w,C,x,k,T,A,P,S,B,I,E,O,M){var j;if(j=zob(So.Emitter,arguments,"obj, width, height, interval, num, life, fade, shrink, decayTime, decayStart, trace, traceFadeTime, traceShiftX, traceShiftY, angle, force, gravity, wind, layers, animation, random, horizontal, vertical, sink, sinkForce, cache, events, startPaused, pool, poolMin, particles, style, group, inherit",this))return j;z_d("69.9"),this.type="Emitter",this.group=O;var L=!1===E?{}:So.getStyle(this.type,this.group,M);zot(f)&&(f=null!=L.obj?L.obj:[new So.Circle(20,"#e472c4"),new So.Circle(20,"#acd241"),new So.Circle(20,"#50c4b7")]),zot(m)&&(m=null!=L.width?L.width:300),zot(z)&&(z=null!=L.height?L.height:300);var Y=Bo(t);zot(t)&&(t=null!=L.interval?L.interval:"s"==Y?.02:20),"number"==typeof t&&(t=Math.max("s"==Y?.01:10,t)),zot(e)&&(e=null!=L.num?L.num:1),zot(l)&&(l=null!=L.trace&&l.size),zot(s)&&(s=null!=L.traceFadeTime?L.traceFadeTime:i),zot(y)&&(y=null!=L.traceShiftX?L.traceShiftX:0),zot(b)&&(b=null!=L.traceShiftY?L.traceShiftY:0),Io(o,Y),zot(o)&&(o=null!=L.life?L.life:"s"==Y?1:1e3),zot(n)&&(n=null==L.fade||L.fade),zot(r)&&(r=null!=L.shrink?L.shrink:!l),Io(i,Y),zot(i)&&(i=null!=L.decayTime?L.decayTime:"s"==Y?1:1e3),zot(c)&&(c=null!=L.angle?L.angle:{min:0,max:360}),zot(u)&&(u=null!=L.force?L.force:5),zot(d)&&(d=null!=L.gravity?L.gravity:9.8),zot(h)&&(h=null!=L.wind?L.wind:0),zot(g)&&(g=null!=L.layers?L.layers:"top"),zot(m)&&(m=null!=L.width?L.width:100),zot(z)&&(z=null!=L.height?L.height:100),zot(w)&&(w=null!=L.horizontal&&L.horizontal),zot(C)&&(C=null!=L.vertical&&L.vertical),zot(x)&&(x=null!=L.sink?L.sink:null),!zot(x)&&zot(k)&&(k=null!=L.sinkForce?L.sinkForce:10),zot(A)&&(A=null!=L.events&&L.events),zot(P)&&(P=null!=L.startPaused&&L.startPaused),zot(S)&&(S=null==L.pool||L.pool),zot(B)&&(B=null!=L.poolMin?L.poolMin:0),zot(I)&&(I=null!=L.particles?L.particles:new So.Container),zot(p)&&(p=null!=L.animation?L.animation:null),I.type="Particles",this.zimContainer_constructor(m,z,null,null,!1),this.type="Emitter";var _=this;this.regX=m/2,this.regY=z/2,_.obj=f,_.particles=I,_.interval=t,_.num=e,_.life=o,_.fade=n,_.shrink=r,_.decayTime=i,_.decayStart=a,_.trace=l,_.traceFadeTime=s,_.traceShiftX=y,_.traceShiftY=b,_.angle=c,_.emitterForce=u,_.gravity=d,_.wind=h,_.layers=g,_.animation=p,_.random=v,_.horizontal=w,_.vertical=C,_.sink=x,_.sinkForce=k,_.events=A,_.startEmitterPaused=_.emitterPaused=P,_.pool=S,_.poolMin=B,_.particlesEmitted=0;var D,X,R=[],W=0,H=0;function F(e){if(_.events&&V("fizzed",e),(e.trace?e.getChildAt(0).endSpurt:e.endSpurt)&&(V("spurtfizzed",e),_.spurting=!1),_.pool&&"end"!=e.pooled)return e.pooled||(e.pooled=!0,R.push(e)),void(e.visible=!1);_.removeChild(e),_.trace&&e.uncache(),e=null}function V(e,t){var o=new createjs.Event(e);o.particle=t.trace?t.getChildAt(0):t,_.dispatchEvent(o)}function N(e){_.pauseEmitter(),_.spurtCount=_.spurtNum=null,V("spurted",e),e.endSpurt=!0}So.added(_,function(e){_.emitterPaused=null,_.on("added",function(){_.particles.addTo(_.parent)}),X=e,zot(T)&&(T=!X.isWebGL&&So.mobile());T&&(X.snapToPixelEnabled=!0);{var t,u;X&&(t=_.parent.getChildIndex(_),_.parent.addChildAt(I,t),w||C||_.centerReg(null,null,!1),_.zimInterval=So.interval(_.interval,function(){var g,p;function e(e,t){return e-t}_.startEmitterPaused?_.pauseEmitter():(f=Array.isArray(_.obj)?_.obj:[_.obj]).length<=0||(g=Array.isArray(_.interval)?(_.interval.sort(e),_.interval[0]):_.interval.constructor=={}.constructor?_.interval.min:_.interval,p=Array.isArray(_.num)?(_.num.sort(e),_.num[_.num.length-1]):_.num.constructor=={}.constructor?_.num.max:_.num,So.loop(So.Pick.choose(_.num),function(){var e,o,t,n,r;0<_.decayTime&&(e={},_.shrink&&(e.scale=0),_.fade&&(e.alpha=0)),_.pool&&0<R.length&&H>=Math.max(_.poolMin,(_.life/g+5)*p)?((o=R[W++%R.length]).visible=!0,(r=o.trace?o.getChildAt(0):o).emitShape&&(n=r.template,r.graphics.c().s(n.s?So.Pick.choose(n.s):null).ss(n.ss?So.Pick.choose(n.ss):null).sd(n.sd?So.Pick.choose(n.sd):null,n.offset?So.Pick.choose(n.offset):null)),o.trace&&o.updateCache(),"top"==_.layers?r.emitShape?o.addTo(I,null,!1):o.centerReg(I):r.emitShape?o.addTo(I,"bottom"==_.layers?0:So.rand(I.numChildren),!1):o.centerReg(I,"bottom"==_.layers?0:So.rand(I.numChildren)),o.alpha=1,o.scaleX=1,o.scaleY=1,r.alpha=r.originalAlpha,r.scaleX=r.originalScaleX,r.scaleY=r.originalScaleY,r.endSpurt=!1):(H++,_.trace&&((o=new So.Container(m,z,null,null,!1)).trace=!0),"shape"==(t=So.Pick.choose(So.shuffle(f)[0])).type?(n=t,(r=new So.Shape(1,1,null,null,null,!1)).emitShape=!0,r.template=n,r.graphics.s(n.s?So.Pick.choose(n.s):null).ss(n.ss?So.Pick.choose(n.ss):null).sd(n.sd?So.Pick.choose(n.sd):null,n.offset?So.Pick.choose(n.offset):null),_.trace?r.addTo(o,null,!1):"top"==_.layers?r.addTo(I,null,!1):r.addTo(I,"bottom"==_.layers?0:So.rand(I.numChildren),null,!1)):((r=t.clone()).centerReg||zimify(r),_.trace?r.centerReg(o).pos({x:-1e3,y:-1e3,reg:!0}):"top"==_.layers?r.centerReg(I):r.centerReg(I,"bottom"==_.layers?0:So.rand(I.numChildren))),_.trace&&("top"==_.layers?o.addTo(I,null,!1):o.addTo(I,"bottom"==_.layers?0:So.rand(I.numChildren),!1),o.cache(y,b,m,z)),_.trace||(o=r),(o.particle=r).originalAlpha=r.alpha,r.originalScaleX=r.scaleX,r.originalScaleY=r.scaleY),_.currentParticle=r,_.particlesEmitted++,o.particleNormal=!0,o.particleDecaying=!1,o.particleFizzing=!1;var i=So.Pick.choose(_.angle),a=So.Pick.choose(_.emitterForce),l=a*Math.cos(i*Math.PI/180),s=a*Math.sin(i*Math.PI/180);r.info={position:{x:_.x,y:_.y},velocity:{x:l,y:s}},_.horizontal&&(r.info.position={x:_.x-_.regX+So.rand(0,m),y:_.y-_.regY+(_.vertical?z/2:0)}),_.vertical&&(r.info.position={x:_.x-_.regX+(_.horizontal?m/2:0),y:_.y-_.regY+So.rand(0,z)}),r.emitShape?r.graphics.mt(r.info.position.x,r.info.position.y):(r.x=r.info.position.x,r.y=r.info.position.y),_.random&&So.loop(_.random,function(e,t){var o=So.Pick.choose(t);"scale"==e?r.sca(o):("x"==e?r.info.position.x=_.horizontal||_.vertical?o:o+m/2:"y"==e&&(r.info.position.y=_.horizontal||_.vertical?o:o+z/2),"x"!=e&&"y"!=e||!r.emitShape||r.graphics.mt(r.info.position.x,r.info.position.y),r[e]=o,r.emitShape&&(r.x=0,r.y=0))}),T&&!r.emitShape&&r.cache(r.getBounds().x-10,r.getBounds().y-10,r.getBounds().width+20,r.getBounds().height+20);var c,u,d,h=!r.emitShape&&_.shrink;0<_.decayTime&&(_.fade||h||_.trace&&0<_.traceFadeTime)?(_.trace&&0<_.traceFadeTime&&o.animate({obj:{alpha:0},time:_.traceFadeTime,wait:_.life-_.traceFadeTime,waitedCall:function(e){e.particleNormal=!1,e.particleFizzing=!0},call:F,override:!1,id:"decay"}),(_.fade||h)&&(c={},_.fade&&(c.alpha=0),h&&(c.scaleX=0,c.scaleY=0),r.animate({obj:c,time:_.decayTime,wait:zot(_.decayStart)?_.life-_.decayTime:_.decayStart,waitedCall:function(e){e.parent!=_&&(e=e.parent),e.particleNormal=!1,e.particleDecaying=!0},call:function(e){var t;_.events&&V("decayed",e),e.endSpurt&&V("spurtdecayed",e),_.trace&&0<_.traceFadeTime||(zot(_.decayStart)||_.decayStart+_.decayTime>_.life?e.parent&&F(e.parent.trace?e.parent:e):(t=o,So.timeout(_.life-(_.decayStart+_.decayTime),function(){F(t)})))},override:!1,id:"decay"}))):0<_.life&&((u=o).timeOut=So.timeout(_.life,function(){F(u)})),_.events&&V("emitted",o),function(e){if(zot(_.spurtCount)&&zot(_.spurtNum))return;_.spurtCount++,_.spurtCount>=_.spurtNum&&N(e)}(r),_.animation&&(zot((d=So.Pick.choose(_.animation)).override)&&(d.override=!1),r.animate(So.copy(d)))}))},null,!0,!0),u=0,D=_.emitterTicker=So.Ticker.add(function(){So.loop(I,function(e){var t;e.trace&&(e=(t=e).getChildAt(0));var o,n,r,i=e.info,a=0,l=0;zot(_.sink)||(o=_.particles.localToGlobal(i.position.x,i.position.y),n=_.sink.parent&&_.sink.parent.localToGlobal?_.sink.parent.localToGlobal(_.sink.x,_.sink.y):new createjs.Point(So.Pick.choose(_.sink.x),So.Pick.choose(_.sink.y)),r=So.angle(o.x,o.y,n.x,n.y),a=_.sinkForce*Math.cos(r*Math.PI/180),l=_.sinkForce*Math.sin(r*Math.PI/180));var s=_.wind+a,c=_.gravity+l;i.velocity.x+=s*u,i.velocity.y+=c*u,i.position.x+=i.velocity.x*u*100,i.position.y+=i.velocity.y*u*100,e.emitShape?e.graphics.lt(i.position.x,i.position.y):(e.x=i.position.x,e.y=i.position.y),_.trace&&t&&t.updateCache(e.emitShape?null:"source-over")})},X),u=1/So.Ticker.framerate)}}),_.particles.noMouse(),Object.defineProperty(_,"interval",{get:function(){return t},set:function(e){t=e,_.zimInterval&&(_.zimInterval.time=t)}}),this.removeFrom=function(e){_.parent&&_.parent.removeChild(_),_.particles.removeFrom()},this.spurting=!1,this.spurt=function(e,t,o){var n;return(n=zob(_.spurt,arguments,"num, time, restart"))?n:(zot(t)||(So.timeout(So.Pick.choose(t),function(){N(_.currentParticle)},!0),_.spurting=!0),zot(e)||(_.spurtNum=So.Pick.choose(e),_.spurtCount=0,_.spurting=!0),_.pauseEmitter(!1,o,null,!0),_)},this.clearPool=function(){So.loop(_,function(e){e.pooled="end",e.visible||_.removeChild(e)},!0),W=H=0,R=[]},_.startEmitterPaused||(this.emitterPaused=!1),this.pauseEmitter=function(e,t,o,n){if(_.startEmitterPaused=null,zot(e)&&(e=!0),zot(t)&&(t=!1),zot(o)&&(o=!1),e){if(_.emitterPaused)return _;o&&(D&&So.Ticker.remove(D),So.loop(_,function(e){e.pauseAnimate(),e.trace&&e.getChildAt(0).pauseAnimate(),e.timeOut&&e.timeOut.pause()})),_.zimInterval.pause(),_.emitterPaused=!0}else{if(!_.emitterPaused)return _;t&&(So.loop(_,function(e){e.stopAnimate(),e.timeOut&&e.timeOut.clear(),e.trace&&e.getChildAt(0).pauseAnimate()}),_.removeAllChildren()),X&&D&&!So.Ticker.has(X,D)&&(So.Ticker.add(D,X),So.loop(_,function(e){e.pauseAnimate(!1),e.timeOut&&e.timeOut.pause(!1),e.trace&&e.getChildAt(0).pauseAnimate(!1)})),_.zimInterval&&_.zimInterval.pause(!1,n),_.emitterPaused=!1}return _},!(this.resize=function(e,t){zot(e)||(m=e),zot(t)||(z=t),_.setBounds(0,0,m,z),w||C||_.centerReg(),_.clearPool()})!==E&&So.styleTransforms(this,L),this.clone=function(e){var t=Array.isArray(_.obj)||_.obj.constructor=={}.constructor?So.copy(_.obj):_.obj.clone?_.obj.clone(e):_.obj;return _.cloneProps(new So.Emitter(t,m,z,_.interval,_.num,_.life,_.fade,_.shrink,_.decayTime,_.decayStart,_.trace,_.traceFadeTime,_.traceShiftX,_.traceShiftY,_.angle,_.emitterForce,_.gravity,_.wind,_.layers,_.animation,So.copy(_.random),_.horizontal,_.vertical,_.sink,_.sinkForce,T,_.events,P,_.pool,_.poolMin,E,_.group,M))},this.dispose=function(e,t,o){return D&&So.Ticker.remove(D),So.loop(_.particles,function(e){e&&e.stopAnimate(),e&&e.dispose()}),So.loop(R,function(e){e&&e.dispose()}),_.zimInterval&&_.zimInterval.clear(),I&&I.dispose&&I.dispose(),f&&f.dispose&&f.dispose(),!(I=_.particles=f=_.obj=R=_.poolList=null)}},So.extend(So.Emitter,So.Container,"clone","zimContainer",!1),So.Generator=function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b){var v;if(v=zob(So.Generator,arguments,"color, strokeColor, strokeWidth, draw, stamp, setup, maxCount, boundary, drawCount, drawPause, drawSpacebarPause, startX, startY, cache, recordLinePoints, frame, seed, style, group, inherit",this))return v;z_d("69.92"),this.group=y;var w=!1===z?{}:So.getStyle("Generator",this.group,b);zot(f)&&(f=null!=w.frame?w.frame:zdf);var C=f.stage;zot(e)&&(e=null!=w.color?w.color:null),zot(t)&&(t=null!=w.strokeColor?w.strokeColor:So.white),zot(o)&&(o=null!=w.strokeWidth?w.strokeWidth:1),zot(a)&&(a=null!=w.maxCount?w.maxCount:1e3),zot(l)&&(l=null!=w.boundary?w.boundary:new So.Boundary(0,0,C.width,C.height)),zot(s)&&(s=null!=w.drawCount?w.drawCount:1),zot(c)&&(c=null==w.drawPause||w.drawPause),zot(u)&&(u=null==w.drawSpacebarPause||w.drawSpacebarPause),zot(d)&&(d=null!=w.startX?w.startX:C.width/2),zot(h)&&(h=null!=w.startY?w.startY:C.height/2),zot(g)&&(g=null!=w.cache&&w.cache);var x=this.drawing=new So.Container(l.x,l.y,l.width,l.height).addTo(C),O=this.shape=new So.Shape(l.width,l.height).addTo(x);this.drawCount=s,zot(c)&&(c=!0),g&&O.cache(l.x,l.y,l.width,l.height),this.zimContainer_constructor(l.x,l.y,l.width,l.height),this.type="Generator";var M=this;M.draw=null,this.color=e,this.strokeColor=t,this.strokeWidth=o;var k=d,T=h;this.fill=function(e){return M.color=e,M.currentColor=zik(M.color),O.f(M.currentColor),this},this.stroke=function(e,t){return zot(e)||(M.strokeColor=e,M.currentStrokeColor=zik(M.strokeColor),O.s(M.currentStrokeColor)),zot(t)||(M.strokeWidth=t,M.currentStrokeWidth=zik(M.strokeWidth),O.ss(M.currentStrokeWidth)),this},this.noStroke=function(){return M.strokeColor=M.currentStrokeColor=null,M.strokeWidth=M.currentStrokeWidth=null,O.s(),O.ss(1),this},O.matrix=O.getMatrix(),this.translate=function(e,t){zot(e)&&(e=0),zot(t)&&(t=0),e=zik(e),t=zik(t);var o=O.matrix.transformPoint(e,t);return k=o.x,T=o.y,O.mt(k,T),O.matrix.translate(e,t),this},this.rotate=function(e){return zot(e)&&(e=0),e=zik(e),O.matrix.rotate(e),this},this.scale=function(e,t){return zot(e)&&(e=1),zot(t)&&(t=e),e=zik(e),t=zik(t),O.matrix.scale(e,t),this},this.skew=function(e,t){return zot(e)&&(e=0),zot(t)&&(t=0),e=zik(e),t=zik(t),O.matrix.skew(e,t),this},p&&(M.linePoints=[]),this.line=function(e,t,o,n){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=0),zot(n)&&(n=0),e=zik(e),t=zik(t),o=zik(o),n=zik(n),("zero"==p||"nonzero"==p&&e&&t)&&M.linePoints.push([e,t]),M.translate(e,t);var r=O.matrix.transformPoint(o,n);return k=r.x,T=r.y,O.lt(k,T),p&&M.linePoints.push([k,T]),O.matrix.translate(o,n),this},this.arc=function(e,t,o,n,r,i){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=50),e=zik(e),t=zik(t),o=zik(o),o=Math.abs(o),zot(n)&&(n=0),zot(r)&&(r=180),n=zik(n),r=zik(r),zot(i)&&(i=!1),i=zik(i),M.translate(e,t);var a=O.matrix.transformPoint(0,0);O.decomp||(O.decomp={}),O.matrix.decompose(O.decomp);var l=(Math.abs(O.decomp.scaleX)+Math.abs(O.decomp.scaleY))/2,s=O.decomp.rotation||0,c=o*l;return O.mt(a.x+c*Math.cos((n+s)*Math.PI/180),a.y+c*Math.sin((n+s)*Math.PI/180)),O.a(a.x,a.y,c,(n+s)*Math.PI/180,(r+s)*Math.PI/180,i),this},this.curve=function(e,t,o,n,r,i){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=50),zot(n)&&(n=50),zot(r)&&(r=100),zot(i)&&(i=0),e=zik(e),t=zik(t),o=zik(o),n=zik(n),r=zik(r),i=zik(i),M.translate(e,t);var a=O.matrix.transformPoint(o,n),l=O.matrix.transformPoint(r,i),s=l.x,c=l.y;return O.qt(a.x,a.y,s,c),O.matrix.translate(r,i),this},this.bezier=function(e,t,o,n,r,i,a,l){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=50),zot(n)&&(n=50),zot(r)&&(r=-50),zot(i)&&(i=-50),zot(a)&&(a=100),zot(l)&&(l=0),e=zik(e),t=zik(t),o=zik(o),n=zik(n),r=zik(r),i=zik(i),a=zik(a),l=zik(l),M.translate(e,t);var s=O.matrix.transformPoint(o,n),c=O.matrix.transformPoint(r,i),u=O.matrix.transformPoint(a,l),d=u.x,h=u.y;return O.bt(s.x,s.y,c.x,c.y,d,h),O.matrix.translate(a,l),this},this.rectangle=function(e,t,o,n,r,i,a,l){if(zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=100),zot(n)&&(n=o),e=zik(e),t=zik(t),o=zik(o),n=zik(n),!(r||i||a||l)){M.translate(e,t);var s=O.matrix.transformPoint(0,0),c=O.matrix.transformPoint(o,0),u=O.matrix.transformPoint(o,n),d=O.matrix.transformPoint(0,n);return O.mt(s.x,s.y).lt(c.x,c.y).lt(u.x,u.y).lt(d.x,d.y).lt(s.x,s.y).lt(c.x,c.y),O.mt(s.x,s.y),this}zot(r)&&(r=0),zot(i)&&(i=r),zot(a)&&(a=r),zot(l)&&(l=r),r=zik(r),i=zik(i),a=zik(a),l=zik(l);var h=(o<n?o:n)/2,g=0,p=0,f=0,m=0;r<0&&(r*=g=-1),(h=Math.abs(h))<r&&(r=h),i<0&&(i*=p=-1),h<i&&(i=h),a<0&&(a*=f=-1),h<a&&(a=h),l<0&&(l*=m=-1),h<l&&(l=h),M.translate(e,t),O.decomp||(O.decomp={}),O.matrix.decompose(O.decomp);var z=(Math.abs(O.decomp.scaleX)+Math.abs(O.decomp.scaleY))/2,y=o<0?-1:1,b=n<0?-1:1,v=O.matrix.transformPoint(o-i*y,0),w=O.matrix.transformPoint(o+i*p*y,-i*p*b),C=O.matrix.transformPoint(o,i*b),x=O.matrix.transformPoint(o,n-a*b),k=O.matrix.transformPoint(o+a*f*y,n+a*f*b),T=O.matrix.transformPoint(o-a*y,n),A=O.matrix.transformPoint(l*y,n),P=O.matrix.transformPoint(-l*m*y,n+l*m*b),S=O.matrix.transformPoint(0,n-l*b),B=O.matrix.transformPoint(0,r*b),I=O.matrix.transformPoint(-r*g*y,-r*g*b),E=O.matrix.transformPoint(r*y,0);return O.mt(v.x,v.y).at(w.x,w.y,C.x,C.y,i*z).lt(x.x,x.y).at(k.x,k.y,T.x,T.y,a*z).lt(A.x,A.y).at(P.x,P.y,S.x,S.y,l*z).lt(B.x,B.y).at(I.x,I.y,E.x,E.y,r*z).cp(),this},this.circle=function(e,t,o,n,r){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=50),zot(n)&&(n=100),zot(r)&&(r=!0),e=zik(e),t=zik(t),o=zik(o),n=zik(n),o=Math.abs(o),M.translate(e,t);var i=O.matrix.transformPoint(0,0);O.decomp||(O.decomp={}),O.matrix.decompose(O.decomp);var a,l=(Math.abs(O.decomp.scaleX)+Math.abs(O.decomp.scaleY))/2,s=O.decomp.rotation||0,c=o*l;return M.circleHeight=2*c,"number"==typeof n&&0<=n&&n<100?(a=360*n/100/2,O.mt(i.x+c*Math.cos((-a-90+s)*Math.PI/180),i.y+c*Math.sin((-a-90+s)*Math.PI/180)),O.a(i.x,i.y,c,(-a-90+s)*Math.PI/180,(a-90+s)*Math.PI/180,!1),r&&O.cp(),M.circleHeight=c-Math.cos(a*Math.PI/180)*c):(O.mt(i.x+c,i.y),O.a(i.x,i.y,c,0,2*Math.PI)),this},this.elipse=function(e,t,o,n){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=100),zot(n)&&(n=50),e=zik(e),t=zik(t),o=zik(o),n=zik(n),M.translate(e,t);var r=O.matrix.transformPoint(-o/2,-n/2);O.decomp||(O.decomp={}),O.matrix.decompose(O.decomp);var i=O.decomp.scaleX,a=O.decomp.scaleY;return O.de(r.x,r.y,o*i,n*a),this},this.poly=function(e,t,o,n,r,i){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=100),zot(n)&&(n=5),zot(r)&&(r=0),zot(i)&&(i=0),e=zik(e),t=zik(t),o=zik(o),n=zik(n),r=zik(r),i=zik(i),o=Math.abs(o),M.translate(e,t);var a=O.matrix.transformPoint(0,0);O.decomp||(O.decomp={}),O.matrix.decompose(O.decomp);var l=(Math.abs(O.decomp.scaleX)+Math.abs(O.decomp.scaleY))/2,s=O.decomp.rotation||0,c=o*l;return O.dp(a.x,a.y,c,n,r,s),this},this.closePath=this.close=this.cp=function(){return O.cp(),this},this._noise=new So.Noise(m),this.noise=function(){return 1==arguments.length?(this._noise.simplex1D.apply(null,arguments)+1)/2:2==arguments.length?(this._noise.simplex2D.apply(null,arguments)+1)/2:3==arguments.length?(this._noise.simplex3D.apply(null,arguments)+1)/2:4==arguments.length?(this._noise.simplex4D.apply(null,arguments)+1)/2:void 0};O.matrix.clone();this.stack=[],this.colorStrokeStack=[],this.push=function(){return M.stack.push(O.matrix.clone()),M.colorStrokeStack.push([M.color,M.strokeColor,M.strokeWidth,M.currentColor,M.currentStrokeColor,M.currentStrokeWidth]),this},this.pop=function(){O.matrix=M.stack.pop()||O.matrix;var e=M.colorStrokeStack.pop()||[M.color,M.strokeColor,M.strokeWidth,M.currentColor,M.currentStrokeColor,M.currentStrokeWidth];return M.color=e[0],M.strokeColor=e[1],M.strokeWidth=e[2],M.currentColor=e[3],M.currentStrokeColor=e[4],M.currentStrokeWidth=e[5],O.f(M.currentColor).s(M.currentStrokeColor).ss(M.currentStrokeWidth),O.mt(O.matrix.x,O.matrix.y),this},this.blit=function(){return O.updateCache("source-over"),O.c(),this},this.step=function(){return M.draw&&S(),this},zot(M.color)||this.fill(M.color),!zot(M.strokeColor)&&M.strokeWidth?this.stroke(M.strokeColor,M.strokeWidth):M.noStroke(),this.translate(k,T),"function"==typeof i&&(this.setup=i,So.timeout(.01,function(){i(0,M.count,M),g&&O.updateCache(),C.update()}));var A=0;function P(e){this.stampNum++;var t=So.loop(M.maxCount,function(e,t){if(M.paused)return M.pausedCount=e,!1;if(M.changeCount)return M.changeCount=!1;var o=r(A=e+1,t,M,M.stampNum);return M.currentColor=zik(M.color),O.f(M.currentColor),M.currentStrokeColor=zik(M.strokeColor),O.s(M.currentStrokeColor),M.currentStrokeWidth=zik(M.strokeWidth),O.ss(M.currentStrokeWidth),o||void 0},null,null,e);g&&O.updateCache(),t&&M.dispatchEvent("complete"),C.update()}function S(){M.iterator++,M.iterator%Math.ceil(M.drawCount)==0&&(M.count++,M.draw(M.count,M.maxCount,M),g&&M.blit(),M.currentColor=zik(M.color),O.f(M.currentColor),M.currentStrokeColor=zik(M.strokeColor),O.s(M.currentStrokeColor),M.currentStrokeWidth=zik(M.strokeWidth),O.ss(M.currentStrokeWidth),M.dispatchEvent("drawing"),C.update()),M.maxCount&&M.count>=M.maxCount&&(M.dispatchEvent("complete"),So.Ticker.remove(M.ticker))}this.maxCount=a,this.resetup=function(e){return zot(e)&&(e=!0),A=0,e&&M.shape.c(),zot(M.color)||this.fill(M.color),!zot(M.strokeColor)&&M.strokeWidth?this.stroke(M.strokeColor,M.strokeWidth):M.noStroke(),this.reset(),this.setup&&(i(0,M.count,M),g&&O.updateCache(),C.update()),this},this.stampNum=0,"function"==typeof r&&(this.stamp=r,So.timeout(.015,function(){P(0)})),this.restamp=function(e,t){return zot(e)&&(e=!0),zot(t)&&(t=!0),A=0,e&&M.shape.c(),t&&M.resetup(e),P(0),this},this.reset=function(){return this.fill(e),!zot(t)&&o?this.stroke(t,o):this.noStroke(),O.matrix.identity(),this.translate(d,h),this},this.clear=function(){return this.shape.c(),this},M.iterator=0,"function"==typeof n&&(this.draw=n,i?setTimeout(function(){M.ticker=So.Ticker.add(S)},100):this.ticker=So.Ticker.add(S),M.generatorPaused=!1,c&&(M.pauseEvent=C.on("stagemousedown",function(){M.count>=M.maxCount||M.pauseTimeout||(So.Ticker.has(M.ticker)?(So.Ticker.remove(M.ticker),M.generatorPaused=!0,M.dispatchEvent("generatorpaused")):(So.Ticker.add(M.ticker),M.generatorPaused=!1,M.dispatchEvent("generatorunpaused")))})),u&&(M.pauseSpacebarEvent=f.on("keydown",function(e){M.count>=M.maxCount||M.pauseTimeout||20==e.keyCode&&(So.Ticker.has(M.ticker)?(So.Ticker.remove(M.ticker),M.generatorPaused=!0,M.dispatchEvent("generatorpaused")):(So.Ticker.add(M.ticker),M.generatorPaused=!1,M.dispatchEvent("generatorunpaused")))}))),this.redraw=function(e,t){return zot(e)&&(e=!0),M.reset(),zot(t)&&(t=!0),M.ticker&&So.Ticker.remove(M.ticker),M.iterator=0,M.count=0,e&&M.shape.c(),t?(M.resetup(e),setTimeout(function(){M.ticker&&So.Ticker.add(M.ticker)},100)):M.ticker&&So.Ticker.add(M.ticker),this},this.paused=!1,this.pause=function(e,t){if(zot(e)&&(e=!0),!(M.count>=M.maxCount)){if(e==this.paused)return this;this.paused=e,this.pauseTimeout&&this.pauseTimeout.clear(),this.paused?M.ticker&&So.Ticker.remove(M.ticker):M.ticker?So.Ticker.add(M.ticker):P(M.pausedCount,M.maxCount),setTimeout(function(){C.update()},20),t&&(this.pauseTimeout=So.timeout(t,function(){M.pause(!M.paused),M.pauseTimeout=null})),M.dispatchEvent(M.paused?"paused":"unpaused")}},this.outOfBounds=function(e,t){zot(e)&&(e=0),zot(t)&&(t=e);var o=M.shape.stage;if(o)return M.currentX>o.width-e||M.currentX<0+e||M.currentY>o.height-t||M.currentY<0+t},this.stop=function(){M.pause(),M.pauseEvent&&C.off("stagemousedown",M.pauseEvent),M.pauseSpaceEvent&&f.off("keydown",M.pauseSpaceEvent)},Object.defineProperty(this,"count",{get:function(){return A},set:function(e){A=e,M.stamp&&(M.changeCount=!0,setTimeout(function(){P(A,M.maxCount)}))}}),Object.defineProperty(this,"currentX",{get:function(){return k},set:function(e){zon&&zogy("Generator() - currentX is read only")}}),Object.defineProperty(this,"currentY",{get:function(){return T},set:function(e){zon&&zogy("Generator() - currentY is read only")}}),this.clone=function(){return M.cloneProps(new So.Generator(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,M.group,b))},!(M.dispose=function(){return M.pause(),M.ticker&&So.Ticker.remove(M.ticker),M.pauseEvent&&C.off("stagemousedown",M.pauseEvent),M.pauseSpaceEvent&&f.off("keydown",M.pauseSpaceEvent),M.shape.dispose(),M.drawing.dispose(),M.removeAllEventListeners(),!0})!==z&&So.styleTransforms(this,w)},So.extend(So.Generator,So.Container,"clone, dispose","zimContainer",!1),So.Pen=function(f,m,z,t,y,b,v,w,C,o,r,e,i,a,n,l,s,c,u,d,h,g,p,x,k,T){var A;if(A=zob(So.Pen,arguments,"size, color, penType, damp, spread, borderColor, borderWidth, end, paper, nib, cache, ctrlKey, cropScale, undo, undoKeys, move, onTop, deleteable, doubleClickDelete, immediateStop, lineAlpha, lineBlendMode, frame, style, group, inherit",this))return A;z_d("69.93"),this.zimContainer_constructor(),this.type="Pen",this.group=k;var P=!1===x?{}:So.getStyle(this.type,this.group,T);zot(z)&&(z=null!=P.penType?P.penType:"line");var S={size:2,color:"#333",spread:{min:5,max:20},borderColor:"#111",borderWidth:0},B={line:{size:2},kitetail:{size:{min:5,max:20},color:So.series(So.pink,So.blue,So.green),borderColor:"rgba(0,0,0,.5)",borderWidth:1},grass:{color:"#acd241",size:3,spread:{min:10,max:30}},hair:{color:["#e472c4","#50c4b7"],size:3,spread:{min:20,max:50}},city:{size:{min:30,max:70},spread:{min:50,max:200},color:["#333","#111","#555"]},barbwire:{},splatter:{size:{min:5,max:20},color:"rgba(0,0,0,.5)"}};zot(B[z])&&(z="line"),zot(f)&&(f=null!=P.size?P.size:zot(B[z].size)?S.size:B[z].size),zot(m)&&(m=null!=P.color?P.color:zot(B[z].color)?S.color:B[z].color),zot(t)&&(t=null!=P.damp?P.damp:.1),!1===t&&(t=1),zot(y)&&(y=null!=P.spread?P.spread:zot(B[z].spread)?S.spread:B[z].spread),zot(b)&&(b=null!=P.borderColor?P.borderColor:zot(B[z].borderColor)?S.borderColor:B[z].borderColor),zot(v)&&(v=null!=P.borderWidth?P.borderWidth:zot(B[z].borderWidth)?S.borderWidth:B[z].borderWidth),zot(w)&&(w=null!=P.end?P.end:"butt"),zot(i)&&(i=null!=P.cropScale?P.cropScale:1),zot(r)&&(r=null==P.cache||P.cache),zot(a)&&(a=null!=P.undo?P.undo:0),zot(n)&&(n=null==P.undoKeys||P.undoKeys),zot(l)&&(l=null==P.move||P.move),zot(c)&&(c=null==P.deleteable||P.deleteable),zot(u)&&(u=null==P.doubleClickDelete||P.doubleClickDelete),zot(s)&&(s=null==P.onTop||P.onTop),zot(d)&&(d=null!=P.immediateStop?P.immediateStop:"both"),zot(h)&&(h=null!=P.lineAlpha?P.lineAlpha:1),zot(g)&&(g=null!=P.lineBlendMode?P.lineBlendMode:"normal"),zot(C)&&(C=null!=P.paper?P.paper:new So.Container),zot(o)&&(o=null!=P.nib?P.nib.clone():null),zot(p)&&(p=null!=P.frame?P.frame:zdf);var I=this;this.dampX=new So.Damp(null,t),this.dampY=new So.Damp(null,t);var E=!0;this.drawing=!1,this.immediateStop=d,this.undoLevels=a,this.undoKeys=n,this.move=l,this.draggable=!0,this.lineAlpha=h,this.lineBlendMode=g;var O,M,j,L,Y=I.shape=new So.Shape,_=p.stage.width,D=p.stage.height;I.paperNum=0,I.sizeScale=1,I.spreadScale=1,I.sizeFactor=1,I.spreadFactor=1,I.stop=function(){},this.added(function(){function t(e){I.drawing&&(I.nib.x=e.stageX/So.scaX,I.nib.y=e.stageY/So.scaY)}I.paper=C,_=I.stage.width,D=I.stage.height,zot(o)||(I.zimDown?I.nib=o.addTo(I):(I.nib=o.addTo(I.parent,I.parent.getChildIndex(I)),I.nib.x=I.x,I.nib.y=I.y,I.nib.mouseEnabled=!1,I.stage.on("stagemousedown",function(e){e.target.stage,I.nibEvent=I.stage.on("stagemousemove",t)}),I.stage.on("stagemouseup",function(e){I.stage.off("stagemousemove",I.nibEvent)}))),I.zimDragCheck=!1,I.stop=function(){I.stopCheck(!0)},I.infinite=!1,I.stopCheck=function(e){if(e)I.drawing=!1,I.infinite=!1;else{if(I.infinite)return;if(I.zimDragCheck)return;if(!I.immediateStop&&I.drawing)return}I.immediate(I.x,I.y),setTimeout(function(){var e,t;I.drawing||(r?(Y.cache(-(_*i-_)/2,-(D*i-D)/2,_*i,D*i),e=C.bitmap=new So.Bitmap(Y.cacheCanvas).reg((_*i-_)/2,(D*i-D)/2).addTo(C),Y.graphics.clear(),Y.uncache(),Y.top()):e=Y,0<I.undoLevels&&(t={paper:C,line:e},a.push(t),a.length>I.undoLevels&&a.shift(),I.dispatchEvent("recordUndo")),r||(Y=(new So.Shape).clone().addTo(C)),I.lastSegment=e,(I.lastSelected=e).alpha=I.lineAlpha,e.blendMode=I.lineBlendMode,e.paper=C,I.dispatchEvent("stop"),I.dispatchEvent("change"))},I.immediateStop||e?0:50)};var p=0;I.dampX.immediate(I.x),I.dampY.immediate(I.y),I.lastX=I.x,I.lastY=I.y,I.ticker=So.Ticker.add(function(){var e=I.dampX.convert(E?I.x:I.finishX),t=I.dampY.convert(E?I.y:I.finishY),o=I.parent.localToLocal(e,t,Y),n=So.Pick.choose(f)*I.sizeScale*I.sizeFactor,r=So.Pick.choose(y)*I.spreadScale*I.spreadFactor;if(Math.abs(I.lastX-e)+Math.abs(I.lastY-t)<1)return I.drawing&&(I.drawing=!1,I.zimDown?(I.x=I.lastX=E?I.x:I.finishX,I.y=I.lastY=E?I.y:I.finishY,I.dampX.immediate(I.x),I.dampY.immediate(I.y)):(I.x=I.finishX=I.lastX=e,I.y=I.finishY=I.lastY=t),I.stopCheck()),I.lastX=e,void(I.lastY=t);if(I.drawing||(X=[],C.getChildIndex(Y)!=C.numChildren-1&&Y.top()),I.drawing=!0,I.dispatchEvent("drawing"),"splatter"==z)for(var i=0;i<=3;i++){var a=So.rand(360)*Math.PI/180,l=r,s={x:e+l*Math.cos(a),y:t+l*Math.sin(a)},c=I.parent.localToLocal(s.x,s.y,Y);Y.graphics.mt(c.x,c.y).f(So.Pick.choose(m)).dc(c.x,c.y,n/2)}else"grass"==z||"hair"==z||"city"==z?("grass"!=z&&"hair"!=z||(u=I.lastX+(e-I.lastX)/2,d=I.lastY+(t-I.lastY)/2,h=I.parent.localToLocal(u,d,Y),Y.graphics.s(So.Pick.choose(m)).ss(n,w).mt(h.x,h.y).lt(h.x+So.rand(-r/4,r/4),"hair"==z?h.y+r:h.y-r)),("grass"==z||"hair"==z||"city"==z&&p%3==0)&&Y.graphics.s(So.Pick.choose(m)).ss(n,w).mt(o.x,o.y).lt(o.x+("city"==z?0:So.rand(-r/4,r/4)),"hair"==z?h.y+r:o.y-r),p++):("kitetail"==z&&Y.graphics.s(So.Pick.choose(m)).ss(n,w),d="barbwire"==z?(Y.graphics.s(So.Pick.choose(m)).ss(n,w),u=I.lastX+(e-I.lastX)/2+So.rand(-r,r),I.lastY+(t-I.lastY)/2+So.rand(-r,r)):(u=I.lastX+(e-I.lastX)/2,I.lastY+(t-I.lastY)/2),h=I.parent.localToLocal(u,d,Y),Y.graphics.qt(h.x,h.y,o.x,o.y));var u,d,h,g=I.parent.localToLocal(I.lastX,I.lastY,Y);0<v&&"line"!=z&&(u=I.lastX+(e-I.lastX)/2,d=I.lastY+(t-I.lastY)/2,h=I.parent.localToLocal(u,d,Y),Y.graphics.s(So.Pick.choose(b)).ss(So.Pick.choose(v)).mt(g.x,g.y).qt(h.x,h.y,o.x,o.y),"splatter"==z&&Y.graphics.es()),"splatter"==z?Y.graphics.f(So.Pick.choose(m)):"kitetail"==z||Y.graphics.s(So.Pick.choose(m)).ss(n,w),"grass"!=z&&"hair"!=z&&"city"!=z&&"splatter"!=z&&Y.graphics.mt(g.x,g.y).qt(h.x,h.y,o.x,o.y),I.lastX=e,I.lastY=t}),I.stage.on("stagemouseup",function(){0})}),I.mouseChildren=!1;var a=[],X=[];this.saveState=function(e,t,o){var n="Container"==e.type?"paper":"line",r={paper:I.paper};r[n]=e,r[n+"Transform"]={x:e.x,y:e.y,r:e.rotation,a:e.alpha,rX:e.regX,rY:e.regY,sX:e.scaleX,sY:e.scaleY,skX:e.skewX,skY:e.skewY,v:e.visible},zot(t)||zot(o)||t==o||(r.startLayer=t,r.endLayer=o),a.push(r),I.dispatchEvent("recordUndo"),a.length>I.undoLevels&&a.shift()};var R,W,H={x:0,y:0,r:0,a:1,rX:0,rY:0,sX:1,sY:1,skX:0,skY:0,v:!0};function F(e,t){for(var o,n=a.length-1;0<=n;n--)if(a[n][e]==t&&a[n][e+"Transform"]){o=a[n][e+"Transform"];break}o=o||So.copy(H),t.x=o.x,t.y=o.y,t.alpha=o.a,t.rotation=o.r,t.regX=o.rX,t.regY=o.rY,t.scaleX=o.sX,t.scaleY=o.sY,t.skewX=o.skX,t.skewY=o.skY,t.visible=o.v,"line"==e&&r&&(t.regX=(_*i-_)/2,t.regY=(D*i-D)/2)}this.undo=function(){var e=a.pop();if(e){if(X.push(e),e.clear){for(var t=0;t<e.clear.length;t++)e.paper.addChild(e.clear[t]);e.paper.addChild(Y)}else e.line&&e.lineTransform?(zot(e.startLayer)||(Y.top(),e.paper.setChildIndex(e.line,j)),F("line",e.line)):e.line?e.line.removeFrom():e.paperTransform&&F("paper",e.paper);I.lastPaper=I.paper,e.paper!=I.paper&&(I.paper=e.paper,I.dispatchEvent("paperChange")),I.dispatchEvent("change"),!OPTIMIZE&&I.stage&&I.stage.update()}},this.redo=function(){var e,t,o=X.pop();o&&(a.push(o),o.clear?(o.paper.removeAllChildren(),o.paper.addChild(Y)):o.line&&o.lineTransform?(zot(o.endLayer)||(Y.top(),o.paper.setChildIndex(o.line,L)),e=o.lineTransform,t=o.line):o.line?o.line.addTo(o.paper):o.paperTransform&&(e=o.paperTransform,t=o.paper),t&&(t.x=e.x,t.y=e.y,t.alpha=e.a,t.rotation=e.r,t.regX=e.rX,t.regY=e.rY,t.scaleX=e.sX,t.scaleY=e.sY,t.skewX=e.skX,t.skewY=e.skY,t.visible=e.v),I.lastPaper=I.paper,o.paper!=I.paper&&(I.paper=o.paper,I.dispatchEvent("paperChange")),I.dispatchEvent("change"),!OPTIMIZE&&I.stage&&I.stage.update())},I.ctrlKey=!1,I.shiftKey=!1,I.ctrlKeyCheck=!1,I.zimkeydownEvent=function(e){I.ctrlKey=e.ctrlKey,I.shiftKey=e.shiftKey,17==e.keyCode&&l&&!I.ctrlKeyCheck&&(I.ctrlKeyCheck=!0,C.noDrag(),C.drag({onTop:s,all:!0})),I.undoLevels<=0||I.undoKeys&&(e.ctrlKey&&(e.shiftKey&&90==e.keyCode||89==e.keyCode)?I.redo():e.ctrlKey&&90==e.keyCode&&I.undo())},window.addEventListener("keydown",I.zimkeydownEvent),I.zimkeyupEvent=function(e){17==e.keyCode&&l&&I.ctrlKeyCheck&&(I.ctrlKeyCheck=!1,C.noDrag(),C.drag({onTop:s})),e.ctrlKey||(I.ctrlKey=!1),e.shiftKey||(I.shiftKey=!1)},window.addEventListener("keyup",I.zimkeyupEvent),Object.defineProperty(this,"paper",{get:function(){return C},set:function(e){"Container"==e.type&&(C=e,Y.addTo(C,0,!1),C.shape=Y,I.dampX.immediate(I.x),I.dampY.immediate(I.y),I.lastX=I.finishX=I.x,I.lastY=I.finishY=I.y,"barbwire"==z&&Y.graphics.s(So.Pick.choose(m)).ss(So.Pick.choose(f)*I.sizeScale*I.sizeFactor,w),Y.graphics.mt(I.x,I.y),C.parent||C.addTo(I.parent,I.parent.getChildIndex(I)),zot(C.paperNum)&&(C.paperNum=++I.paperNum,c&&C.on("mousedown",function(e){I.lastSelected=e.target,I.nibEvent&&I.stage.off("stagemousemove",I.nibEvent);var t=e.target.paper;t&&(t!=I.paper&&(I.paper=t,I.dispatchEvent("paperChange")),I.shiftKey&&(I.ctrlKey?I.clear():(e.target.visible=!1,0<I.undoLevels&&I.saveState(e.target),I.dispatchEvent("change"))))}),u&&C.on("dblclick",function(e){e.target.visible=!1,0<I.undoLevels&&I.saveState(e.target)}),l&&(C.on("mousedown",function(e){e.target.stage,I.shiftKey&&c||(O=e.stageX/So.scaX,M=e.stageY/So.scaY,Y.top(),j=C.getChildIndex(e.target))}),C.drag({onTop:s}),C.on("pressup",function(e){c&&I.shiftKey||0!=e.target.visible&&(I.undoLevels<=0||(Math.abs(e.stageX/So.scaX-O)<1&&Math.abs(e.stageY/So.scaY-M)<1?s&&(Y.top(),L=C.getChildIndex(e.target),j!=L&&I.saveState(e.target,j,L)):(I.ctrlKey?(I.saveState(C),I.dispatchEvent("paperChange")):(Y.top(),L=C.getChildIndex(e.target),I.saveState(e.target,j,L)),I.dispatchEvent("change"),Y.top())))}))))}}),Object.defineProperty(this,"write",{get:function(){return E},set:function(e){E&&!1===e&&(I.finishX=I.x,I.finishY=I.y),!E&&e&&(Y.graphics.es(),Y.graphics.ef(),I.dampX.immediate(I.x),I.dampY.immediate(I.y),I.lastX=I.x,I.lastY=I.y),E=e}}),Object.defineProperty(this,"size",{get:function(){return f},set:function(e){Y.graphics.es(),Y.graphics.ef(),f=e,"splatter"!=z&&Y.graphics.ss(So.Pick.choose(f)*I.sizeScale*I.sizeFactor,w)}}),Object.defineProperty(this,"color",{get:function(){return m},set:function(e){m=e,Y.graphics.es(),Y.graphics.ef(),"splatter"!=z&&Y.graphics.s(So.Pick.choose(m))}}),Object.defineProperty(this,"penType",{get:function(){return z},set:function(e){z=e,Y.graphics.ef().es(),"splatter"!=z?Y.graphics.s(So.Pick.choose(m)):Y.graphics.s(So.Pick.choose(m)).ss(So.Pick.choose(f)*I.sizeScale*I.sizeFactor,w)}}),Object.defineProperty(this,"damp",{get:function(){return t},set:function(e){t=e,I.dampX.damp=t,I.dampY.damp=t}}),Object.defineProperty(this,"spread",{get:function(){return y},set:function(e){y=e}}),this.setColorRange=function(e,t){return W=zot(t)?(R=I.color,e):(R=zot(e)?I.color:e,t),I};var V=0;Object.defineProperty(I,"colorRange",{get:function(){return V},set:function(e){V=e,zot(R)||zot(W)||(I.color=So.colorRange(R,W,e))}}),Object.defineProperty(this,"borderColor",{get:function(){return b},set:function(e){b=e}}),Object.defineProperty(this,"borderWidth",{get:function(){return v},set:function(e){v=e}}),p&&(p.on("keydown",function(){p.ctrlKey&&I.write&&(I.lastWrite=I.write,I.write=!1)}),p.on("keyup",function(){p.ctrlKey||0!=I.write||(I.write=I.lastWrite)})),I.setPen=function(e){I.dampX.immediate(I.x),I.dampY.immediate(I.y),I.lastX=I.finishX=I.x,I.lastY=I.finishY=I.y,zot(e)&&(e=z),zot(B[e])&&(e="line"),I.penType=z=e;var t=So.merge(S,B[e]);for(var o in t)I[o]!=t[o]&&(I[o]=t[o]);return I},I.immediate=function(e,t){return zot(e)||(I.x=e,I.dampX.immediate(I.x),I.lastX=I.finishX=I.x),zot(t)||(I.y=t,I.dampY.immediate(I.y),I.lastY=I.finishY=I.y),I},I.clear=function(){for(var e=[],t=0;t<C.numChildren-1;t++)e.push(C.getChildAt(t));return a.push({paper:C,clear:e}),a.length>I.undoLevels&&a.shift(),I.dispatchEvent("recordUndo"),C.removeAllChildren(),Y.graphics.clear(),C.addChild(Y),I.dispatchEvent("change"),I.stage&&I.stage.update(),I},this.delete=function(e){C.getChildAt(e).visible=!1,0<I.undoLevels&&I.saveState(C.getChildAt(e))},this.deleteSegment=function(e){e.visible=!1,0<I.undoLevels&&I.saveState(e)},!(I.dispose=function(e){return zot(e)?(window.removeEventListener("keydown",I.zimkeydownEvent),window.removeEventListener("keyup",I.zimkeyupEvent),So.Ticker.remove(I.ticker),I.removeAllEventListeners(),Y.graphics.clear(),r?I.bitmap&&I.bitmap.removeFrom():Y.removeFrom(),o&&o.removeFrom(),!0):(e.removeAllEventListeners(),e.shape.graphics.clear(),void(r?e.bitmap.removeFrom():e.shape.removeFrom()))})!==x&&So.styleTransforms(this,P)},So.extend(So.Pen,So.Container,"dispose","zimContainer",!1),So.SoundWave=function(e,i,a,t,o,n,l,r,s,c){var u;if(u=zob(So.SoundWave,arguments,"num, input, include, smoothing, min, max, operation, baseline, magnify, reduce",this))return u;z_d("69.95"),this.type="SoundWave",zot(e)&&(e=120),zot(i)&&(i="mic"),zot(a)&&(a=.1171875),zot(t)&&(t=.85),zot(o)&&(o="mic"==i?-80:(i.oscillator,-100)),zot(n)&&(n="mic"==i?-40:(i.oscillator,-10)),zot(l)&&(l=function(e,t){return e*(.5+t/Math.pow(So.SoundWave.bufferLength,.95))}),zot(r)&&(r="mic"==i?0:(i.oscillator,30)),zot(s)&&(s="mic"==i?1:i.oscillator?5:10),zot(c)&&(c=0),So.SoundWave.bufferLength=1024;var d,h=e,g=this;g.baseline=r,g.magnify=s,g.reduce=c,g.input=i,d="Tone"==i.type||"SynthSound"==i.type?i.audioContext:new(window.AudioContext||window.webkitAudioContext);var p,f,m=g.analyser=d.createAnalyser();function z(e){var t,r;f&&f.disconnect(m),(f=e).connect(m),"mic"!=i&&m.connect(d.destination),m.fftSize=2*So.SoundWave.bufferLength,(p=Math.floor(a*So.SoundWave.bufferLength/h))<1?zog("ZIM SoundWave: include param is too small or num param is too big"):(t=m.frequencyBinCount,r=new Uint8Array(t),g.calculate=function(){m.getByteFrequencyData(r);var e=r.map(l);if(1==p)return e;for(var t=[],o=0,n=0;n<=a*So.SoundWave.bufferLength;n++)o+=e[n],0!=n&&n%p==0&&(t.push(Math.max(0,(o/p-g.baseline)*g.magnify-g.reduce)),o=0);return"mic"!=i&&(t[0]*=.75,t[1]*=.85,t[2]*=.9,t[t.length-2]*=.8,t[t.length-1]*=.75),t[t.length-1]*=1.3,t[t.length-2]*=1.2,t[t.length-3]*=1.1,t},setTimeout(function(){g.dispatchEvent("ready")},50))}m.minDecibels=o,m.maxDecibels=n,m.smoothingTimeConstant=t,Object.defineProperty(this,"smoothing",{get:function(){return m.smoothingTimeConstant},set:function(e){m.smoothingTimeConstant=e}}),Object.defineProperty(this,"num",{get:function(){return h},set:function(e){h=e,(p=Math.floor(a*So.SoundWave.bufferLength/h))<1&&zog("ZIM SoundWave: num is too big")}}),this.setInput=function(e){if("mic"==(g.input=e))return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,void(navigator.getUserMedia?navigator.getUserMedia({audio:!0},function(e){z(g.source=d.createMediaStreamSource(e))},function(e){zog("ZIM SoundWave: Error occured: "+e)}):zog("ZIM SoundWave: Sorry, mic not supported"));if("Tone"==e.type)z(e.compressor);else if("SynthSound"==e.type)z(e.gain);else{if(e.type&&"sound"==e.type)return void zog("ZIM SoundWave: pass in the result of a zim.asset('somesound').play() for the input");var t;z((t=e.playbackResource?e.playbackResource:e,d.createMediaElementSource(t)))}},this.setInput(i),this.dispose=function(e){return e&&d&&d.close(),m&&m.disconnect(),!0}},So.extend(So.SoundWave,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),So.Synth=function(e,_){z_d("69.955"),this.type="Synth",zot(e)&&(e=.3),zot(_)&&(_=220),this.volume=e,this.frequency=_;var Z,J=this;this.play=function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,I,E,O,M,j,L,Y,_,D,X,R,W,H,F,V,N,G,q){var Q=Array.prototype.slice.call(arguments);if(Z||!window.AudioContext&&!window.webkitAudioContext||((Z=new(window.AudioContext||window.webkitAudioContext)).z=Z.createBufferSource,Z.createBufferSource=function(e){return null==e&&(e=Z.z()),e.start=e.start||function(e){Z.noteOn(e)},e}),Z){for(e=null!=e?zik(e):.3,t=null!=t?zik(t):.05,o=null!=o?zik(o):220,n=null!=n?zik(n):0,r=null!=r?zik(r):0,i=null!=i?zik(i):.1,a=null!=a?zik(a):0,l=null!=l?zik(l):1,s=null!=s?zik(s):0,c=null!=c?zik(c):0,u=null!=u?zik(u):0,d=null!=d?zik(d):0,h=null!=h?zik(h):0,g=null!=g?zik(g):0,p=null!=p?zik(p):0,f=null!=f?zik(f):0,m=null!=m?zik(m):0,b=null!=b?zik(b):0,z=null!=z?zik(z):1,y=null!=y?zik(y):0,A=null!=A?zik(A):44100,null==P&&(P=99+n*A),null==S&&(S=r*A),null==B&&(B=i*A),null==I&&(I=y*A),null==E&&(E=m*A),null==O&&(O=2*Math.PI),null==M&&(M=function(e){return 0<e?1:-1}),null==j&&(j=P+I+S+B+E),null==L&&(L=s*=500*O/Math.pow(A,2)),null==Y&&(Y=o*=(1+2*t*Math.random()-t)*O/A),null==_&&(_=M(p)*O/4),null==D&&(D=0),null==X&&(X=0),null==R&&(R=0),null==W&&(W=0),null==H&&(H=0),null==F&&(F=0),null==V&&(V=1),null==N&&(N=[]),null==G&&(G=Z.createBufferSource()),null==q&&(q=Z.createBuffer(1,j,A)),G.connect(Z.destination);R<Math.floor(j);N[R++]=F)++H>100*f&&(H=0,F=D*o*Math.sin(X*p*O/A-_),F=a?1<a?2<a?3<a?Math.sin(Math.pow(F%O,3)):Math.max(Math.min(Math.tan(F),1),-1):1-(2*F/O%2+2)%2:1-4*Math.abs(Math.round(F/O)-F/O):Math.sin(F),F=(h?1-b+b*Math.sin(O*R/h):1)*M(F)*Math.pow(Math.abs(F),l)*e*J.volume*(R<P?R/P:R<P+I?1-(R-P)/I*(1-z):R<P+I+S?z:R<j-E?(j-R-E)/B*z:0),F=E?F/2+(R<E?0:(R<j-E?1:(R-j)/E)*N[R-E|0]/2):F),D+=1-g+1e9*(Math.sin(R)+1)%2*g,X+=1-g+1e9*(Math.pow(Math.sin(R),2)+1)%2*g,o+=s+=500*c*O/Math.pow(A,3),V&&++V>d*A&&(o+=u*O/A,Y+=u*O/A,V=0),h&&++W>h*A&&(o=Y,s=L,W=1,V=V||1);q.getChannelData(0).set(N),G.buffer=q;var U,K=new createjs.EventDispatcher;return K.type="SynthSound",K.audioContext=Z,K.gain=Z.createGain(),G.connect(K.gain),K.gain.connect(Z.destination),G.start(),K.duration=N.length/A,K.playing=!0,K.stop=function(){clearTimeout(K.completeID),clearInterval(K.repeatID),K.gain.gain.setTargetAtTime(0,Z.currentTime,.1),K.playing=!1,setTimeout(function(){Z.close()},100)},K.repeat=K.loop=function(e,t){return!(U=0)===e&&(e=null),zot(t)&&(t=0),clearTimeout(K.completeID),K.repeatID=So.interval(function(){return K.duration+zik(t)},function(){U++,e&&e<=U?(K.dispatchEvent("complete"),K.repeatID.clear(),K.playing=!1):(K.dispatchEvent("loop"),J.play.apply(J,Q))}),K},K.play=function(){return J.play.apply(J,Q),K.playing=!0,K},K.completeID=setTimeout(function(){K.dispatchEvent("complete")},1e3*(N.length/A+.1)),K}},this.Tone=function(n,t,o,e,r,i,a,l,s,c,u,d,h,g,p,f,m,z){var y;if(y=zob(J.Tone,arguments,"volume, note, shape, duration, attack, release, wahAmount, wahRate, wahShape, wahThroat, wahNote, vibratoAmount, vibratoRate, vibratoShape, tremeloAmount, tremeloRate, tremeloShape, startTime",this))return y;this.type="Tone";var b,v=this;zot(n)&&(n=J.volume),zot(t)&&(t=J.frequency),zot(o)&&(o=So.SINE),zot(r)&&(r=.02),zot(i)&&(i=.05),zot(z)&&(z=0),window.AudioContext||window.webkitAudioContext?b=this.audioContext=new(window.AudioContext||window.webkitAudioContext):zon&&zogy("Synth tone() needs AudioContext"),n=zik(n),t=zik(t),o=zik(o),e=zik(e),r=zik(r),i=zik(i),a=zik(a),l=zik(l),s=zik(s),c=zik(c),u=zik(u),d=zik(d),h=zik(h),g=zik(g),p=zik(p),f=zik(f),m=zik(m),z=zik(z);var w=Bo(e);(J.duration=e)&&(e*="s"==w?1:.001),z&&(Bo(z),z*="s"==w?1:.001),J.attack=r,J.release=i,J.rampDuration=.02,J.hush=.1;var C=this.note=this.oscillator=b.createOscillator();C.frequency.value=So.Synth.note(t),So.Synth.setShape(C,o);var x=this.filter=b.createBiquadFilter();x.type="bandpass",x.frequency.value=C.frequency.value,x.Q.value=0;var k=this.gain=C.gain=b.createGain();k.type="gain",k.gain.setValueAtTime(0,b.currentTime);var T=this.compressor=b.createDynamicsCompressor();T.threshold.setValueAtTime(-50,b.currentTime),T.knee.setValueAtTime(40,b.currentTime),T.ratio.setValueAtTime(12,b.currentTime),T.attack.setValueAtTime(0,b.currentTime),T.release.setValueAtTime(.25,b.currentTime),C.connect(x),x.connect(k),k.connect(T),T.connect(b.destination),function(e,t){zot(e)&&(e=b.currentTime),zot(t)&&(t=J.attack),C.start(e);var o=zdf&&(new Date).getTime()-zdf.startTime<200?.1:J.attack;k.gain.setValueAtTime(0,b.currentTime+.1),k.gain.linearRampToValueAtTime(n*J.hush,b.currentTime+.1+o)}(z),this.stop=function(e){zot(e)&&(e=J.release),k&&M(k.gain,0,!0,e),E&&M(E.gain,0,!0,e),B&&M(B.gain,0,!0,e),setTimeout(function(){v.dispatchEvent("complete")},1e3*(.6+e+J.rampDuration)),setTimeout(function(){b&&!b.iamClosed&&(b.iamClosed=!0,b.close())},1e3*(e+1)),setTimeout(function(){A&&v.removeWah()},1e3*(e+1))},e&&this.stop(z+e-.1);var A,P,S,B,I,E,O=this.notes=[C];function M(e,t,o,n){zot(t)&&(t=0),zot(n)&&(n=J.rampDuration),o?(e.cancelScheduledValues(b.currentTime),e.linearRampToValueAtTime(e.value,b.currentTime+.02),e.linearRampToValueAtTime(t,b.currentTime+.05+n)):(e.cancelScheduledValues(b.currentTime),e.setTargetAtTime(t,b.currentTime,n))}function j(){zot(a)&&(a=1e3),zot(l)&&(l=1),zot(s)&&(s="sine"),zot(c)&&(c=5),u=zot(u)?v.oscillator.frequency.value:So.Synth.note(u),zot(P)&&(P=200),v.filter.Q.value=c,(A=v.wah=J.oscillator(l,a/2,s,u+a/2+P)).ticker=So.Ticker.add(function(){v.filter.frequency.value=v.wah.amplitude})}function L(){zot(h)&&(h=5),zot(g)&&(g="sine"),zot(d)&&(d=10),S=v.vibrato=b.createOscillator(),(B=v.vibratoGain=b.createGain()).gain.value=0,S.frequency.value=h,So.Synth.setShape(S,g),S.connect(B),B.connect(C.frequency),S.start(0),B.gain.setValueAtTime(0,b.currentTime+.1),B.gain.linearRampToValueAtTime(d,b.currentTime+.1+J.attack)}function Y(){zot(f)&&(f=5),zot(m)&&(m="sine"),I=v.tremelo=b.createOscillator(),(E=v.tremeloGain=b.createGain()).gain.value=0,I.frequency.value=f,So.Synth.setShape(I,m),I.connect(E),E.connect(k.gain),I.start(0);var e=zdf&&(new Date).getTime()-zdf.startTime<200?.1:J.attack;E.gain.setValueAtTime(0,b.currentTime+.1),E.gain.linearRampToValueAtTime(n*J.hush,b.currentTime+.1+e)}this.addNote=function(e,t,o,n,r,i){zot(n)&&(n=!0),zot(r)&&(r=!1),zot(e)&&(e=.1),zot(i)&&(i=0);var a={type:"Note"};a._volume=e,a._note=So.Synth.note(t),O.push(a);var l=a.oscillator=b.createOscillator();l.frequency.value=a._note,l.type=So.Synth.setShape(l,o);var s=a.gain=b.createGain();return M(s.gain,a._volume,!0),s.connect(n?x:k),l.connect(s),B&&r&&B.connect(l.frequency),l.start(b.currentTime+i),Object.defineProperty(a,"volume",{get:function(){return a._volume},set:function(e){zot(e)||(a._volume=zik(e),M(a.gain.gain,a._volume,!0))}}),Object.defineProperty(a,"note",{get:function(){return a._note},set:function(e){zot(e)||(a._note=zik(e),M(a.oscillator.frequency,So.Synth.note(a._note)))}}),a},this.removeNote=function(e){var t=O.indexOf(e);return 0<=t&&O.splice(t,1),e.oscillator.disconnect(),e=null,this},this.ramp=function(e,t){M(k.gain,e*J.hush,!0,t)},this.animate=function(){return arguments[0].props?arguments[0].target=this:Array.prototype.unshift.call(arguments,this),So.animate.apply(null,arguments),this},this.wiggle=function(){return arguments[0].props?arguments[0].target=this:Array.prototype.unshift.call(arguments,this),So.wiggle.apply(null,arguments),this},So.addWires(this),!a&&!l&&zot(s)&&zot(c)||j(),v.removeWah=function(){So.Ticker.remove(A.ticker),A.dispose(),A=J.wah=null,v.filter.Q.value=0},!d&&!h&&zot(g)||L(),v.removeVibrato=function(){M(B.gain,0,!0),setTimeout(function(){B.disconnect(),S.disconnect(),S.stop(),S=null},1e3*(J.rampDuration+1))},!p&&!f&&zot(m)||Y(),v.removeTremelo=function(){M(E.gain,0,!0),setTimeout(function(){E.disconnect(),I.disconnect(),I.stop(),I=null},1e3*(J.rampDuration+1))},Object.defineProperty(this,"volume",{get:function(){return n},set:function(e){var t;zot(e)||(I?(t=k.gain.value?E.gain.value/k.gain.value:n?p/n:0,n=zik(e),n=So.constrain(n,.001),M(E.gain,n*t*J.hush,!0)):n=zik(e),M(k.gain,n*J.hush,!1,J.rampDuration))}}),Object.defineProperty(this,"frequency",{get:function(){return _},set:function(e){zot(e)||(_=zik(e),M(C.frequency,e))}}),Object.defineProperty(this,"note",{get:function(){return t},set:function(e){zot(e)||(t=zik(e),C.frequency.value=So.Synth.note(t))}}),Object.defineProperty(this,"shape",{get:function(){return o},set:function(e){o=zik(e),So.Synth.setShape(C,o)}}),Object.defineProperty(this,"currentTime",{get:function(){return b.currentTime},set:function(e){zon&&zogy("Synth tone() - currentTime is read only")}}),this.wahAmountMin=0,this.wahAmountMax=5e3,Object.defineProperty(this,"wahAmount",{get:function(){return a},set:function(e){zot(e)||(a=zik(e),a=So.constrain(a,J.wahAmountMin,J.wahAmountMax),zot(A)?j():A.gain=a/2)}}),this.wahRateMin=0,this.wahRateMax=30,Object.defineProperty(this,"wahRate",{get:function(){return l},set:function(e){zot(e)||(l=zik(e),l=So.constrain(l,J.wahRateMin,J.wahRateMax),zot(A)?j():A.frequency=l)}}),this.wahThroatMin=0,this.wahThroatMax=100;k.gain.value;Object.defineProperty(this,"wahThroat",{get:function(){return c},set:function(e){c=zik(e),c=So.constrain(c,J.wahThroatMin,J.wahThroatMax),zot(A)?j():x.Q.value=c}}),Object.defineProperty(this,"wahNote",{get:function(){return u},set:function(e){zot(e)||(u=zik(e),zot(A)?j():A.offset=u+a/2+P)}}),Object.defineProperty(this,"wahAdjust",{get:function(){return P},set:function(e){zot(e)||(P=zik(e),zot(A)?j():A.offset=u+a/2+P)}}),Object.defineProperty(this,"wahShape",{get:function(){return s},set:function(e){s=zik(e),zot(A)?j():A.shape=s}}),Object.defineProperty(this,"tremeloAmount",{get:function(){return p},set:function(e){zot(e)||(p=zik(e),zot(I)?Y():E.gain.setValueAtTime(p,b.currentTime))}}),Object.defineProperty(this,"tremeloRate",{get:function(){return f},set:function(e){zot(e)||(f=zik(e),zot(A)?Y():I.frequency.value=f)}}),Object.defineProperty(this,"tremeloShape",{get:function(){return m},set:function(e){m=zik(e),zot(I)?Y():So.Synth.setShape(I,m)}}),Object.defineProperty(this,"vibratoAmount",{get:function(){return d},set:function(e){zot(e)||(d=zik(e),zot(S)?L():B.gain.setValueAtTime(d,b.currentTime))}}),Object.defineProperty(this,"vibratoRate",{get:function(){return h},set:function(e){zot(e)||(h=zik(e),zot(S)?L():S.frequency.value=h)}}),Object.defineProperty(this,"vibratoShape",{get:function(){return g},set:function(e){g=zik(e),zot(S)?L():So.Synth.setShape(S,g)}})},So.extend(this.Tone,createjs.EventDispatcher),this.tone=function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m){return Array.prototype.unshift.call(arguments,null),new(Function.prototype.bind.apply(J.Tone,arguments))},this.Oscillator=function(e,t,o,n){var r;if(r=zob(J.Oscillator,arguments,"frequency, gain, shape, offset",this))return r;this.type="Oscillator",zot(e)&&(e=1),zot(t)&&(t=10),zot(o)&&(o="sine"),zot(n)&&(n=0),this.frequency=zik(e),this.gain=zik(t),this.shape=zik(o),"saw"==this.shape&&(this.shape="sawtooth"),this.offset=zik(n),this.paused=!1;var i=this,a=0,l=So.Ticker.framerate;this.ticker=So.Ticker.add(function(){var e;i.paused||(e=0,"sine"==i.shape?e=Math.sin(i.frequency*(2*Math.PI*(a/l))):"square"==i.shape?e=(e=Math.sin(i.frequency*(2*Math.PI*(a/l))))<=0?0:1:"triangle"==i.shape?e=2/Math.PI*Math.asin(Math.sin(i.frequency*Math.PI*2*a/l)):"sawtooth"==i.shape||"saw"==i.shape?e=-2/Math.PI*Math.atan(1/Math.tan(i.frequency*Math.PI*a/l)):"zap"==i.shape&&(e=2/Math.PI*Math.atan(1/Math.tan(i.frequency*Math.PI*a/l))),i.amplitude=e*i.gain+i.offset,a++)}),this.pause=function(e){i.paused=e},this.dispose=function(){So.Ticker.remove(this.ticker)}},this.oscillator=function(e,t,o,n){return Array.prototype.unshift.call(arguments,null),new(Function.prototype.bind.apply(J.Oscillator,arguments))}},So.Synth.notes=["C",,"D",,"E","F",,"G",,"A",,"B"],So.Synth.major=["C","D","E","F","G","A","B","C4"],So.Synth.minor=["C","D","Eb","F","G","Ab","B","C4"],So.Synth.shapes=["sine","triangle","sawtooth","tan","noise","square"],So.Synth.setShape=function(e,t){if(!zot(e)){if(zot(t)&&(t="sine"),"saw"==t&&(t="sawtooth"),"number"==typeof t)t=(t=So.Synth.shapes[t])||"sine";else if(t.real&&t.imag)var o=e.context.createPeriodicWave(new Float32Array(t.real),new Float32Array(t.imag));else if(t.constructor==PeriodicWave)o=t;else if("string"==typeof t){if(So.Synth.shapes.indexOf(t)<0&&(t="sine"),"noise"==t){for(var n=new Float32Array(4096),r=new Float32Array(4096),i=1;i<4096;i+=2)r[i]=So.shuffle([0,.5,1])[0];o=e.context.createPeriodicWave(n,r)}else"tan"==t&&(t="sawtooth")}else t="sine";o?(e.setPeriodicWave(o),t="custom"):e.type=t}},So.Synth.getNote=function(e,t){return zot(t)&&(t=0),e*Math.pow(2,t/12)},So.Synth.note=function(e){if("string"!=typeof e)return"number"!=typeof e&&(e=220),e;var t=e.substr(0,1).toUpperCase(),o=!0===(o=So.loop(e,function(e){if(!isNaN(e))return Number(e)}))||isNaN(o)?3:o,n=So.Synth.notes.indexOf(t);n<0&&(n=9);var r=e.match(/b/g),i=e.match(/#/g),r=r?r.length:0,a=12*(o-3)+n+(i=i?i.length:0)-r;return So.Synth.getNote(So.Synth.getNote(220,-9),a)},So.Synth.wave=function(e,t){if(window.AudioContext||window.webkitAudioContext){var o=new(window.AudioContext||window.webkitAudioContext);if(e.real)t=e.imag,e=e.real;else if(zot(t)&&zon)return void zogy("Synth.wave() - pass in asset('wave.json') or real and imag properties");return e.constructor!==Float32Array&&(e=new Float32Array(e)),t.constructor!==Float32Array&&(t=new Float32Array(t)),o.createPeriodicWave(e,t)}},So.Synth.drawWave=function(e,t,o,n,r,i,a,l,s){var c;if(c=zob(So.Synth.drawWave,arguments,"shape, color, thickness, backgroundColor, borderColor, borderWidth, corner, padding, paddingVertical"))return c;e=zik(e),zot(o)&&(o=2),zot(t)&&(t=So.darker),zot(l)&&(l=8),zot(s)&&(s=l);var u=l,d=s,h=new So.Container(45,45);h.mouseChildren=!1,zot(n)||(h.backing=new So.Rectangle(45,45,n,r,i,a).addTo(h)),h.shape=new So.Shape(45,45).addTo(h).s(t).ss(o);var g=45-2*u;return"square"==e?h.shape.mt(u,22.5).lt(u,d+3).lt(22.5,d+3).lt(22.5,45-d-3).lt(45-u,45-d-3).lt(45-u,22.5):"triangle"==e?h.shape.mt(u,22.5).lt(u+g/4,d+3).lt(u+3*g/4,45-d-3).lt(45-u,22.5):"sawtooth"==e||"saw"==e?h.shape.mt(u,22.5).lt(22.5,d+2).lt(22.5,45-d-2).lt(45-u,22.5):"zap"==e?h.shape.mt(u,22.5).lt(22.5,45-d-2).lt(22.5,d+2).lt(45-u,22.5):h.shape.mt(u,22.5).bt(22.5,-15,22.5,60,45-u,22.5),h.type=e,h},So.VR=function(o,n,r,i,a,e,l,t,s,c,u,d){var h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,S,B,I,E,O,M,j,L,Y,_,D,X,R;if(h=zob(So.VR,arguments,"content, angle, distance, parallax, parallaxAngle, damp, parallaxDamp, startAngle, negativeParallax, boundaryMarkers, swiper, holder",this))return h;function W(){b.addTo(z,null,!1).setMask(z.getChildAt(0)).pos({y:(d.height-b.height)/2,reg:!0}),v.addTo(y,null,!1).setMask(y.getChildAt(0)).pos({y:(d.height-b.height)/2,reg:!0})}function H(e,o,n,r){((e.vrMatch=o).vrMatch=e).cacheCanvas&&o.cache(),e.dep&&!zot(e.depth)&&(C.push(e),x.push(o),zot(n)||n.push(e),zot(r)||r.push(o),o.dep(e.depth)),So.loop(e,function(e,t){H(e,o.getChildAt(t),n,r)})}function F(e,t){So.loop(e,function(e){e.vrChannel=t,e.vrStartX=e.x,0!=n&&0!=r&&(e.vrAngle=n,e.vrDistance=r),0!=i&&0!=r&&(e.vrParallax=i/100,(e.vrParallaxDistance=0)!=n&&(e.vrParallaxDamp=new So.Damp(0,l))),e.dep(e.depth)})}function V(e){p.currentAngle=e;var t,o=-p.currentAngle*r/n;p.contentLeft.x=o,p.contentRight.x=o,Math.round(p.currentAngle)<=-n/2&&!T?((t=new createjs.Event("boundaryout")).boundary="left",T=!0,p.dispatchEvent(t)):Math.round(p.currentAngle)>=n/2&&!A?((t=new createjs.Event("boundaryout")).boundary="right",A=!0,p.dispatchEvent(t)):Math.round(p.currentAngle)>-n/2&&Math.round(p.currentAngle)<n/2&&(t=new createjs.Event("boundaryin"),T?(t.boundary="left",p.dispatchEvent(t),T=!1):A&&(t.boundary="right",p.dispatchEvent(t),A=!1))}function N(e){var t=e.parent.localToLocal(e.vrStartX,0,d),o=e.vrParallaxDamp.convert("left"==e.vrChannel?p.contentLeft.x+t.x-f/4:p.contentRight.x+t.x-f/2-f/4);e.depth<=0&&!s&&(o=0),e.vrParallaxDistance=Math.max(-r/n*a/2,Math.min(r/n*a/2,o)),e.dep(e.depth)}function G(e,t){e.vrParallaxDistance=e.depth<=0&&!s?0:t,e.dep(e.depth)}function q(t){0!=n&&0!=r?(So.loop(C,N),So.loop(x,N)):(So.loop(C,function(e){G(e,t)}),So.loop(x,function(e){G(e,t)}))}function Q(){var e=R.convert(_.currentValue);b.regX=b.startRegX+e,v.regX=v.startRegX-e}z_d("69.98"),this.type="VR",zdf?(g=zdf,!zot(d)&&d.getBounds&&d.getBounds().width||(d=g.stage),zot(n)&&(n=0),zot(r)&&(r=100),zot(e)&&(e=.5),zot(i)&&(i=0),zot(a)&&(a=60),zot(l)&&(l=.1),zot(t)&&(t=0),zot(s)&&(s=!1),zot(c)&&(c=!0),zot(u)&&(u=!0),this.angle=n,this.currentAngle=t,So.mobile()&&(u=!1),p=this,f=d.width,m=d.height,p.zimContainer_constructor(),z=p.left=new So.Container(f/2,m,null,null,!1),O=new So.Rectangle(f/2,m,"rgba(0,0,0,.01)",null,null,null,null,null,!1),z.addChild(O),y=p.right=z.clone(),p.addChild(z,y),y.x=f/2,b=p.contentLeft=p.content=o,v=p.contentRight=o.clone(),0!=t?w=setTimeout(W,100):W(),C=[],x=[],H(b,v),F(C,"left"),F(x,"right"),0!=n&&0!=r&&((k=new So.Damp(180+t,e)).immediate(180+t),A=T=!1,g.on("deviceorientation",function(e){V(k.convert((180<e.rotation.z?-180:180)+e.rotation.z+t)-180)}),So.Ticker.always()),0!=i&&0!=r&&((P=new So.ProportionDamp(180-a/2,180+a/2,-a/2,a/2,l)).immediate(180),g.on("deviceorientation",function(e){var t=0;0==n&&0!=i&&0!=r&&(t=P.convert((180<e.rotation.z?-180:180)+e.rotation.z)),q(t)}),So.Ticker.always()),!u||0==r||0==n&&0==i||p.added(function(){var e={swipeAngle:0};p.swiper=new So.Swiper({swipeOn:p,target:e,property:"swipeAngle",sensitivity:.2,damp:.05,factor:-1,min:-330,max:330});So.Ticker.add(function(){0!=n&&0!=r&&V(e.swipeAngle),0!=i&&0!=r&&q(P.convert(e.swipeAngle+180))})}),S=localStorage&&localStorage.zimEyeAdjust?Number(localStorage.zimEyeAdjust):0,B=S,I=!1,b.startRegX=b.regX,v.startRegX=v.regX,O=(E=this.adjuster=new So.Container(800,300,null,null,!1)).backing=new So.Rectangle(E.width,E.height,So.lighter,null,null,null,null,null,!1).center(E).alp(1).sha("rgba(0,0,0,.2)",0,0,30),E.strip=new So.Rectangle(E.width,E.height/3,So.white,null,null,null,null,null,!1).center(E).alp(1),E.label=new So.Label({text:"slide to adjust center of left and right",size:28,color:So.dark,align:"center",valign:"center"}).center(E).pos({y:50,reg:!0}),M=E.close=new So.Rectangle(50,50,So.light,null,null,null,null,null,!1).addTo(E).mov(E.width-70,26),(j=new So.Shape(-40,-40,80,80,null,!1)).graphics.f(So.dark).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),j.center(M).sca(.3),M.cursor="pointer",M.on((zns?"mousedown"==So.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){p.hideAdjuster(),_.currentValue=(_.max-_.min)/2+B,p.dispatchEvent("closed")}),(L=new So.Circle(30,So.dark,null,null,null,null,null,null,!1).center(E).pos({x:E.width/4,reg:!0})).shape.alpha=.2,new So.Circle(12,So.dark,null,null,null,null,null,!1).center(L),(Y=new So.Circle(30,So.dark,null,null,null,null,null,!1).center(E).pos({x:E.width/4*3,reg:!0})).shape.alpha=.2,new So.Circle(12,So.dark,null,null,null,null,null,null,!1).center(Y),(_=E.slider=new So.Slider({min:0,max:30,step:1,useTicks:!0,style:!1}).centerReg(E).pos({y:E.height-40,reg:!0})).currentValue=(_.max-_.min)/2+S,D=new So.Proportion(_.min,_.max,L.x-E.width/4,L.x+E.width/4,-1),X=new So.Proportion(_.min,_.max,Y.x-E.width/4,Y.x+E.width/4),_.on("change",function(){L.x=D.convert(_.currentValue),Y.x=X.convert(_.currentValue)}),new So.Label("closer",24,null,So.silver).centerReg(E).pos({x:_.x-220,y:_.y,reg:!0}),new So.Label("farther",24,null,So.silver).centerReg(E).pos({x:_.x+220,y:_.y,reg:!0}),(p.ok=new So.Button({label:"OK",width:90,height:60,corner:0,backgroundColor:So.blue,rollBackgroundColor:So.green,shadowColor:-1,style:!1}).centerReg(E).sca(.8).pos({x:E.width-58,y:_.y,reg:!0})).on((zns?"mousedown"==So.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){localStorage&&(localStorage.zimEyeAdjust=_.currentValue-(_.max-_.min)/2),Q(),p.hideAdjuster(),p.dispatchEvent("saved"),p.dispatchEvent("closed")}),(p.zero=new So.Button({label:">|<",width:90,height:60,corner:0,backgroundColor:So.yellow,rollBackgroundColor:So.green,shadowColor:-1,style:!1}).centerReg(E).sca(.8).pos({x:58,y:_.y,reg:!0})).on((zns?"mousedown"==So.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){_.currentValue=(_.max-_.min)/2,L.x=D.convert(_.currentValue),Y.x=X.convert(_.currentValue)}),R=new So.Proportion(0,30,-d.width/4,d.width/4),Q(),this.showAdjuster=function(){if(I)return p;I=!0,L.x=D.convert(_.currentValue),Y.x=X.convert(_.currentValue),B=_.currentValue-(_.max-_.min)/2,E.scaleTo(d).center(this),d.stage.update()},this.hideAdjuster=function(){if(!I)return p;I=!1,E.removeFrom(this),d.stage.update()},this.position=function(e,t,o){function n(e){e.vrStartX=t,e.vrParallaxDamp&&e.vrParallaxDamp.immediate(t),e.mov(t,o)}return n(e),n(e.vrMatch),e},this.register=function(e){if(!e.parent||!e.parent.vrMatch)return zon&&zog("ZIM VR() - please only register objects already inside content container"),e;var t=e.clone().addTo(e.parent.vrMatch),o=[],n=[];return H(e,t,o,n),F(o,"left"),F(n,"right"),e},0!=n&&0!=r&&c&&(p.boundaryRight=new So.Container({style:!1}),new So.Circle(24,So.light,null,null,null,null,null,null,!1).addTo(p.boundaryRight).dep(-2),new So.Triangle(16,16,16,So.yellow,So.grey,null,null,-3,null,null,!1).rot(-90).center(p.boundaryRight).dep(-6),p.boundaryRight.center(o).mov(r/2+24),p.boundaryLeft=new So.Container({style:!1}),new So.Circle(24,So.light,null,null,null,null,null,null,!1).addTo(p.boundaryLeft).dep(-2),new So.Triangle(16,16,16,So.yellow,So.grey,null,null,-3,null,null,!1).rot(90).center(p.boundaryLeft).dep(-6),p.boundaryLeft.center(o).mov(-r/2-24),p.register(p.boundaryRight),p.register(p.boundaryLeft)),this.remove=function(e){return So.loop(arguments,function(e,t){o.contains(t)&&(!function t(e){var o=C.indexOf(e);0<=C.indexOf(e)&&(C.splice(o,1),x.splice(o,1)),So.loop(e,function(e){t(e)})}(t),t.parent.removeChild(t),t.vrMatch.parent.removeChild(t.vrMatch))}),p},this.resize=function(){f=d.width,m=d.height,z.getChildAt(0).widthOnly=y.getChildAt(0).widthOnly=f/2,z.getChildAt(0).heightOnly=y.getChildAt(0).heightOnly=m,y.x=f/2,z.setBounds(0,0,f/2,m),y.setBounds(0,0,f/2,m),0!=t?(clearTimeout(w),w=setTimeout(W,100)):W(),E.scaleTo(d).center(this,null,!1)}):zon&&zogy("VR() - please use ZIM Frame")},So.extend(So.VR,So.Container,"clone","zimContainer",!1),So.scaX=1,So.scaY=1,So.Frame=function(m,z,o,i,n,r,a,l,e,t,y,b,v,w,s,c,u,C,d,h,g,x,p,f,k,T,A,P,S){var B;if(B=zob(So.Frame,arguments,"scaling, width, height, color, outerColor, assets, path, progress, rollover, touch, scrollTop, align, valign, canvasID, rollPerSecond, delay, canvasCheck, gpu, gpuObj, nextFrame, nextStage, allowDefault, loadFailObj, sensors, retina, mouseMoveOutside, captureMouse, shim, maxConnections",this))return B;z_d("83"),zon&&zogg("ZIM FRAME"),this.cjsEventDispatcher_constructor(),this.type="Frame",this.startTime=(new Date).getTime();var I,E,Z,O,M,j,L,J,Y,_,D,X,R,W,H,F,V,N,G,q,Q,U,K,$,ee,te,oe,ne,re,ie=this;function ae(){ie.scale=P.stage.scaleX;var e=M.getBoundingClientRect();ie.x=e.x+So.scrollX(),ie.y=e.y+So.scrollY(),So.scaX=createjs.stageTransformable?1:P.stage.scaleX,So.scaY=createjs.stageTransformable?1:P.stage.scaleY}function le(){if(P){var e=J.getBounds();return Y=e.width,_=e.height,void ie.dispatchEvent("resize")}$=Date.now()+c*("s"==E?1e3:1),Q?q||(q=!0,G=So.Ticker.update,So.tickerFrame||(So.Ticker.update=!1,So.tickerFrame=ie),ge(),fe(),clearInterval(ie.frameTime),ie.frameTime=setInterval(function(){return Date.now()>$?(clearInterval(ie.frameTime),q=!1,void(ie==So.tickerFrame&&(So.Ticker.update=G))):(ge(),void fe())},50)):(ge(),fe(),clearInterval(ie.frameTime),ie.frameTime=setInterval(function(){Date.now()>$?clearInterval(ie.frameTime):(ge(),fe())},c*("s"==E?1e3:1)<50?c*("s"==E?1e3:1)+5:50))}function se(){if(!N){if(N=!0,-1==O.indexOf(m)){if(zot(zid(W=m)))return void zog("zim.Frame - scaling: HTML tag with id="+m+" must exist");H=ie.tag=zid(W),m=zot(z)||zot(o)?"tag":"inline",0==w.indexOf("myCanvas")&&(w=W+"Canvas"),"canvas"==H.tagName.toLowerCase()&&(ee=!0,w=W)}var e;ie.canvasID=w,zot(z)&&(z=500),zot(o)&&(o=500),Y=z,_=o,zot(n)||(ie.outerColor=n),ue(),he(),I?(y&&setTimeout(function(){window.scrollTo(0,0)},50),setTimeout(t,100),c*("s"==E?1e3:1)!=100&&setTimeout(t,c*("s"==E?1e3:1))):(F=!0,ce()),zot(r)?(V=!0,ce()):zot(e=r.constructor!={}.constructor||r.audioSprite||r.id||r.data||r.src?ie.loadAssets({assets:r,path:a,progress:l,queueOnly:!0}):ie.loadAssets(So.merge(r,{progress:l,queueOnly:!0})))||!e.on?(zon&&zogy("Frame() - load failed"),V=!0,ce()):e.on("complete",function(){V=!0,ce()})}function t(){ge(),F=!0,ce(),fe(),J&&J.update()}}function ce(){F&&V&&!R&&(!zot(l)&&l.show&&l.hide(),ie.dispatchEvent("ready"),R=!0,fe())}function ue(){var e;ee?e=ie.canvas=ie.tag:(e=ie.canvas=document.createElement("canvas")).setAttribute("id",w),e.setAttribute("tabindex",0);var t=So.windowWidth(),o=So.windowHeight(),n=window.devicePixelRatio||1;"full"==m||"tag"==m?k?(ie.scale=n,e.setAttribute("width",t*ie.scale),e.setAttribute("height",o*ie.scale),"full"==m&&(e.style.width=t+"px",e.style.height=o+"px")):(e.setAttribute("width",t),e.setAttribute("height",o)):(e.setAttribute("width",Y),e.setAttribute("height",_));var r=zid(w+"Alternative");r&&e.appendChild(r),ee||("tag"==m||"inline"==m?H.appendChild(e):document.body.appendChild(e)),zot(i)||(e.style.backgroundColor=i),"full"!=m&&"fit"!=m&&"outside"!=m||(e.style.position="absolute",x||(document.body.style.overflow="hidden"))}function de(){A&&(ie.mouseX=0,ie.mouseY=0,ie.mousedownEvent=J.on("stagemousedown",function(e){ie.mouseX=e.stageX/So.scaX,ie.mouseY=e.stageY/So.scaY}),ie.mousemoveEvent=J.on("stagemousemove",function(e){ie.mouseX=e.stageX/So.scaX,ie.mouseY=e.stageY/So.scaY}))}function he(){ge(),-1==O.indexOf(m)||x||(ie.zil=zil()),ie.mousedownEvent&&J&&J.off("stagemousedown",ie.mousedownEvent),ie.mousemoveEvent&&J&&J.off("stagemousemove",ie.mousemoveEvent),(J=C?new So.StageGL(w,d):new So.Stage(w)).frame=ie,J.mouseMoveOutside=T,!zot(i)&&C&&J.setClearColor(So.convertColor(i)),J.setBounds(0,0,Y,_),J.width=Y,J.height=_,k&&ge(),e&&J.enableMouseOver(s),t&&createjs.Touch.enable(J,!1,x),x&&(J.preventSelection=!1),h&&(J.nextStage=h.stage),g&&(J.nextStage=g),de()}function ge(){if(ie){var e=zid(w),t=So.windowWidth(),o=So.windowHeight();if((D=ie.orientation=o<t?"horizontal":"vertical")!=X&&(X=D,ie.dispatchEvent("orientation")),I&&y&&setTimeout(function(){window.scrollTo(0,0)},100),e){if("fit"==m)ie.scale=Y/_<=t/o?o/_:t/Y;else if("outside"==m)ie.scale=Y/_<=t/o?t/Y:o/_;else{if("full"==m)return e.style.left=e.style.top="0px",e.width=Y=t,e.height=_=o,J&&(J.setBounds(0,0,Y,_),k?(g=window.devicePixelRatio||1,e.width=t*g,e.height=o*g,e.style.width=t+"px",e.style.height=o+"px",ie.scale=g,J.scaleX=J.scaleY=ie.scale):J.scaleX=J.scaleY=1,J.tickOnUpdate=!1,J.update(),J.tickOnUpdate=!0,J.width=Y,J.height=_,C&&J.updateViewport(Y/J.scaleX,_/J.scaleY),So.scaX=createjs.stageTransformable?1:J.scaleX,So.scaY=createjs.stageTransformable?1:J.scaleY),x||(So.scrollX(0),So.scrollY(0)),void pe();if("tag"==m){Y=""==H.style.width?H.getAttribute("width")||H.offsetWidth:H.style.width,_=""==H.style.height?H.getAttribute("height")||H.offsetHeight:H.style.height,k?(e.width=Y*ie.scale,e.height=_*ie.scale,e.style.width=Y+"px",e.style.height=_+"px",J&&(J.scaleX=J.scaleY=ie.scale)):(J&&(J.scaleX=J.scaleY=1),e.width=Y,e.height=_),J&&(J.tickOnUpdate=!1,J.update(),J.tickOnUpdate=!0,J.setBounds(0,0,Y,_),J.width=Y,J.height=_,C&&J.updateViewport(Y/J.scaleX,_/J.scaleY),So.scaX=createjs.stageTransformable?1:J.scaleX,So.scaY=createjs.stageTransformable?1:J.scaleY),H.style.overflow="hidden",e.style.left=e.style.top="0px";var n=e.getBoundingClientRect();return ie.x=n.x+So.scrollX(),ie.y=n.y+So.scrollY(),void pe()}if("inline"==m){if(k){if(document.styleSheets[0])try{for(var r=document.styleSheets[0].rules||document.styleSheets[0].cssRules,i=0;i<r.length;i++){var a,l,s,c=r[i];c.selectorText!="#"+w||(a=c.style.getPropertyValue("width"))&&(l=zum(e.style.width),s=zum(e.style.height),e.style.width=a)}}catch(e){}var u=window.getComputedStyle(e),d=zum(u.getPropertyValue("width"));l&&(e.style.height=s*d/l+"px",u=window.getComputedStyle(e));var h=zum(u.getPropertyValue("height")),g=window.devicePixelRatio||1;ie.scale=d/z*g,e.width=Y*ie.scale,e.height=_*ie.scale,e.style.width=d+"px",e.style.height=h+"px",J&&(J.scaleX=J.scaleY=ie.scale)}else J&&(J.scaleX=J.scaleY=1);J&&(J.tickOnUpdate=!1,J.update(),J.tickOnUpdate=!0,J.setBounds(0,0,Y,_),J.width=Y,J.height=_,C&&J.updateViewport(Y/J.scaleX,_/J.scaleY),So.scaX=createjs.stageTransformable?1:J.scaleX,So.scaY=createjs.stageTransformable?1:J.scaleY),e.style.left=e.style.top="0px";n=e.getBoundingClientRect();return ie.x=n.x+So.scrollX(),ie.y=n.y+So.scrollY(),void pe()}}var p=_*ie.scale,f=Y*ie.scale;k?(g=window.devicePixelRatio||1,ie.scale*=g,e.width=Y*ie.scale,e.height=_*ie.scale,e.style.width=Y*ie.scale/g+"px",e.style.height=_*ie.scale/g+"px",J&&(J.scaleX=J.scaleY=ie.scale)):(J&&(J.scaleX=J.scaleY=1),e.style.width=f+"px",e.style.height=p+"px"),J&&(J.tickOnUpdate=!1,J.update(),J.tickOnUpdate=!0),ie.x="left"==b?0:"right"==b?t-f:(t-f)/2,ie.y="top"==v?0:"bottom"==v?o-p:(o-p)/2,e.style.left=ie.x+"px",e.style.top=ie.y+"px",x||(So.scrollX(0),So.scrollY(0)),pe(),J&&(So.scaX=createjs.stageTransformable?1:J.scaleX,So.scaY=createjs.stageTransformable?1:J.scaleY)}}}function pe(){var e,t;"outside"==m?(e=(zum(ie.canvas.style.width)-So.windowWidth())/2,"left"==b?(ie.visibleLeft=0,ie.visibleRight=So.windowWidth()/(So.windowWidth()+2*e)*Y):"right"==b?(ie.visibleLeft=2*e/(So.windowWidth()+2*e)*Y,ie.visibleRight=Y):(ie.visibleLeft=e/(So.windowWidth()+2*e)*Y,ie.visibleRight=(So.windowWidth()+e)/(So.windowWidth()+2*e)*Y),t=(zum(ie.canvas.style.height)-So.windowHeight())/2,"top"==v?(ie.visibleTop=0,ie.visibleBottom=So.windowHeight()/(So.windowHeight()+2*t)*_):"bottom"==v?(ie.visibleTop=2*t/(So.windowHeight()+2*t)*_,ie.visibleBottom=_):(ie.visibleTop=t/(So.windowHeight()+2*t)*_,ie.visibleBottom=(So.windowHeight()+t)/(So.windowHeight()+2*t)*_)):(ie.visibleLeft=ie.visibleTop=0,ie.visibleRight=Y,ie.visibleBottom=_)}function fe(){var e;R&&ie&&(ie.dispatchEvent("resize"),e=(new Date).getTime(),setTimeout(function(){80<(new Date).getTime()-e&&(ge(),setTimeout(function(){ie.dispatchEvent("resize"),So.OPTIMIZE||!zns&&OPTIMIZE||!J||"full"!=m&&"tag"!=m||J.update()},100))},100),So.OPTIMIZE||!zns&&OPTIMIZE||!J||"full"!=m&&"tag"!=m||J.update())}function me(e){e.remove=ie.eventRemove,ie.altKey=e.altKey,ie.ctrlKey=e.ctrlKey,ie.metaKey=e.metaKey,ie.shiftKey=e.shiftKey,ie.dispatchEvent(e)}function ze(e){ie.altKey=e.altKey,ie.ctrlKey=e.ctrlKey,ie.metaKey=e.metaKey,ie.shiftKey=e.shiftKey,e.remove=ie.eventRemove,ie.dispatchEvent(e)}function ye(e){ie.dispatchEvent(e)}function be(e){e.remove=ie.eventRemove,ie.dispatchEvent(e)}function ve(e){e.remove=ie.eventRemove;var t=360-e.alpha;135<Math.abs(t-ne)&&Math.abs(t-ne)<225&&(re=0==re?180:0),ne=t,e.rotation={x:e.beta,y:e.gamma,z:(t+re)%360},ie.dispatchEvent(e)}void 0!==zdf&&null!=zdf&&zdf.type||(zimDefaultFrame=zdf=this),zot(u)&&(u=!0),!window.HTMLCanvasElement&&u?setTimeout(function(){ie.dispatchEvent("failed")},100):(I=So.mobile(),zot(m)&&(m="full"),zot(e)&&(e=!I),zot(t)&&(t=!0),zot(y)&&(y=!1),zot(b)&&(b="center"),zot(v)&&(v="center"),zot(w)&&(w=zdf!=this?"myCanvas"+So.makeID(5):"myCanvas"),E=Bo(c),zot(s)&&(s=20),zot(c)&&(c=I?"s"==E?1:1e3:"s"==E?.03:30),zot(C)&&(C=!1),zot(x)&&(x=!1),zot(p)&&(p="circles"),this.loadFailObj=p,zot(f)&&(f=!1),zot(k)&&(k=!0),this.retina=k,zot(T)&&(T=!1),zot(A)&&(A=!0),zot(P)&&(P=!1),zot(S)&&(S=10),Z=S,C&&(k=!1),this.retina=k,O=["fit","outside","full"],P?(this.shim=!0,M=(P.stage.frame=this).canvas=P.canvas,this.scale=P.stage.scaleX,setTimeout(function(){ae(),L=function(){ae(),j&&clearTimeout(j),j=setTimeout(ae,50)},window.addEventListener("resize",L)},20),Y=(J=P.stage).getBounds()?J.getBounds().width:M.width/J.scaleX,_=J.getBounds()?J.getBounds().height:M.height/J.scaleY,J.getBounds()||J.setBounds(0,0,Y,_),i=M.style.backgroundColor,de(),ae()):(this.scale=1,this.x=0,this.y=0),N=V=F=R=!1,P||("interactive"===document.readyState||"complete"===document.readyState?setTimeout(function(){se()},200):document.addEventListener("DOMContentLoaded",se)),q=!1,Q="full"==m&&"undefined"!=typeof InstallTrigger,this.swapRotation=!1,I&&!window.parent&&(U=isNaN(window.innerWidth)?window.clientWidth:window.innerWidth,K=isNaN(window.innerHeight)?window.clientHeight:window.innerHeight,this.swapRotation=(0==window.orientation||180==window.orientation)&&K<U||90==Math.abs(window.orientation)&&U<K),window.addEventListener("resize",le),ie.loadAssetsCount=0,zot(So.assets)&&(So.assets={},So.assetIDs={}),ee=!1,this.update=function(){ge(),ie.dispatchEvent("update")},this.loadAssets=function(e,l,t,o,n,r,i,a,s,c,u){if(zot(e))return g();if(zot(e.src)){var d;if(d=zob(ie.loadAssets,arguments,"assets, path, progress, xhr, time, loadTimeout, outputAudioSprite, crossOrigin, fileType, queueOnly, maxConnections"))return d}var h=Bo(n||null);if(!zot(t)&&"ProgressBar"==t.type&&zot(o)&&(o=!0),Array.isArray(e)||(e=[e]),0==e.length)return g();function g(){var e=new So.Queue;return e.isLoading=!1,e.loadAssetsCount=0,setTimeout(function(){e.dispatchEvent("complete"),ie.dispatchEvent("complete")},10),e}zot(n)&&(n=0),zot(r)&&(r="s"==h?8:8e3),zot(i)&&(i=!1),zot(a)&&(a="anonymous"),zot(c)&&(c=!1),zot(u)&&(u=Z);var p,f,m,z,y,b,v,w,C,x,k,T=!1,A=[],P=/\.([^.]+)$/i,S=[],B=[],I=[],E=0,O=!0;for(V=0;V<e.length;V++){if((f=e[V]).assets){var M=[];e.splice(V,1),Array.isArray(f.assets)||(f.assets=[f.assets]);for(var j=0;j<f.assets.length;j++)So.assetIDs[f.assets[j]]?M.push({id:f.path+f.assets[j],src:f.path+f.assets[j],path:null,loadTimeout:f.loadTimeout,maxNum:f.maxNum,noCORSonImage:f.noCORSonImage}):M.push({id:f.assets[j],src:f.assets[j],path:f.path,loadTimeout:f.loadTimeout,maxNum:f.maxNum,noCORSonImage:f.noCORSonImage});for(var L=M.length-1;0<=L;L--)e.splice(V,0,M[L]);f=M[0]}if(f.constructor=={}.constructor)if(f.audioSprite){X(f=(m=So.copy(f)).src);var Y,_=[];for(j=0;j<m.audioSprite.length;j++)Y=m.audioSprite[j],_.push({id:Y[0],startTime:Math.round(1e3*Y[1]),duration:Math.round(1e3*(Y[2]-Y[1]))});delete m.audioSprite,m.data={audioSprite:_},A.push(m)}else{f.data&&f.data.audioSprite?(X(f=(m=So.copy(f)).src),A.push(m)):f.id?(f.path&&(f.path.match(/http/i)?f.src=f.path+f.src:f.path.match(/^\//)?(y=(b=(y=window.location.href).match(/(.*?)([^\/])\/[^\/]/))[1]+b[2],f.src=y+f.src):(z=window.location.pathname,b=((y=window.location.href).split(z)[0]+z).match(/(.*)\//),f.src=b[1]+"/"+f.path+f.src),delete f.path),f.noCORSonImage?(v=new Image,I.push(v),v.src=f.src,v.id=f.id,v.onload=function(){var e=So.assets[v.id]=new So.Bitmap(v).expand(0),t=new createjs.Event("assetload");t.asset=e,R.dispatchEvent(t),c||((t=new createjs.Event("assetload")).asset=e,ie.dispatchEvent(t)),R.loadAssetsCount--,0==R.loadAssetsCount&&K()}):(So.assetIDs[f.id]=f.src,w=f.maxNum,C=f.type,x=zot(f.loadTimeout)?r:f.loadTimeout,X(f=f.src),D={src:f,loadTimeout:x*("s"==h?1e3:1),data:w,type:C},zot(s)||(D.type=s),A.push(D))):f.src.match(/fonts\.googleapis\.com/)?B.push(f):S.push(f)}else{X(f);var D={src:f,loadTimeout:r*("s"==h?1e3:1)};zot(s)||(D.type=s),A.push(D)}T&&O&&((k=document.createElement("audio")).setAttribute("src",(zot(l)||f.match(/^http:\/\/|https:\/\//i)?"":l)+f),document.body.appendChild(k),O=!1)}function X(e){var t;E++,e.split&&(t=e.split("?"),(p=t[0].match(P))&&0<=createjs.Sound.SUPPORTED_EXTENSIONS.indexOf(p[1])&&(T=!0))}ie.loadAssetsCount++,ie.isLoading=!0;var R=new So.Queue;if(R.isLoading=!0,R.loadAssetsCount=0,!zot(t)&&t.show&&(t.zimActiveLoader=R,t.show()),0<S.length){for(var W,H,F=[],V=0;V<S.length;V++)W={src:"url("+(!(H=S[V]).src.match(/^http/i)&&l||"")+H.src+")"+(H.type?" format('"+H.type+"')":""),family:H.font},H.weight&&(W.weight=H.weight),H.style&&(W.style=H.style),F.push(W);(N=new createjs.FontLoader({src:F},!0)).on("complete",G),N.on("error",G),N.load(),R.loadAssetsCount++}if(0<B.length)for(var N,V=0;V<B.length;V++)W={src:(H=B[V]).src,type:"fontcss"},R.loadAssetsCount++,(N=new createjs.FontLoader(W,!0)).on("complete",G),N.on("error",G),N.load();function G(){R.loadAssetsCount--,0==R.loadAssetsCount&&K()}if(0<I.length)for(V=0;V<I.length;V++)R.loadAssetsCount++;var q=Date.now(),Q=new createjs.Event("complete");if(0<E){R.loadAssetsCount++;var U=R.preload=ie.preload=new createjs.LoadQueue(o,l,a);1!=u&&U.setMaxConnections(u),T&&U.installPlugin(createjs.Sound),U.on("progress",function(e){R.dispatchEvent(e),c||ie.dispatchEvent(e)}),U.on("error",function(e){R.dispatchEvent(e),c||ie.dispatchEvent(e)}),U.on("fileload",function(e){var t,o=e.item,n=e.item.type;o.id.match(P);if(n&&"sound"==n){var r=[];if(o.data&&o.data.audioSprite)for(var i=0;i<o.data.audioSprite.length;i++)r.push(o.data.audioSprite[i].id);else r.push(o.id);for(i=0;i<r.length;i++)!function(){var u=r[i];t=So.assets[u]={type:"sound",path:l,id:u,play:function(e,t,o,n,r,i,a){var l;if(l=zob(So.assets[u].play,arguments,"volume, loop, loopCount, pan, offset, delay, interrupt"))return l;var s={volume:e,loop:t,loopCount:o,pan:n,offset:r,delay:i,interrupt:a};"s"==Bo(s.offset,null,30)&&(s.offset&&(s.offset*=1e3),s.delay&&(s.delay*=1e3)),!0===s.loop&&(s.loop=-1),s.loopCount&&(s.loop=s.loopCount,delete s.loopCount);var c=createjs.Sound.play(u,s);return c.getStage=function(){return J},c}}}()}else"image"==n?e.result.width&&(t=So.assets[o.id]=new So.Bitmap(e.result,e.result.width,e.result.height,null,null,o.id),o.avoidCORS&&t.expand(0)):t=So.assets[o.id]=e.result;var a=new createjs.Event("assetload");a.item=o,a.asset=t,R.dispatchEvent(a),c||((a=new createjs.Event("assetload")).item=o,a.asset=t,ie.dispatchEvent(a))}),ie.preloadEvent=U.on("complete",function(e){Q=e,R.loadAssetsCount--,0==R.loadAssetsCount&&K()});try{U.loadManifest(A)}catch(e){}}function K(){var e=Date.now();n=Math.max(0,n-(e-q)),setTimeout(function(){ie.loadAssetsCount--,ie.loadAssetsCount<=0&&(ie.isLoading=!1),R.isLoading=!1,R.dispatchEvent(Q),c||ie.dispatchEvent(Q)},n*("s"==h?1e3:1))}return R},this.ac=function(e,t,o){o?(o.commands||(o.commands=[]),o.commands.push([e,t,o])):(t[0].commands||(t[0].commands=[]),t[0].commands.push([e,t]))},window.asset=So.asset=this.asset=function(o,e,t,n){if(!zot(o)){var r,i=So.assetIDs[o];if(i&&(o=i),So.assets[o])return So.assets[o];if(n)return(r="circles"==ie.loadFailObj?ie.makeCircles(14):ie.loadFailObj)&&(r.type="EmptyAsset",r.id=o,r.play=function(){if(zon)return zog("zim.Frame - asset("+o+") not found"),{}}),r;var a=new So.Container(e,t);return a.type=e&&t?"ACWD":"AC",ie.loadAssets(o).on("complete",function(){var e=ie.asset(o,null,null,!0);if(So.assets[o]=a,e.play)a.play=e.play();else if("Bitmap"==e.type){if(e.addTo(a),a.mouseChildren=!1,a.type="Image",a.bitmap=e,a.image=e.image,a.id=e.id,a.commands)for(var t=0;t<a.commands.length;t++)a.commands[t][2]?a[a.commands[t][0]].apply(a,a.commands[t][1]):So[a.commands[t][0]].apply(a,a.commands[t][1]);a.commands=null,a.stage&&a.stage.update()}else"EmptyAsset"==e.type&&(e.addTo(a),a.mouseChildren=!1,a.type="EmptyAsset",a.stage&&a.stage.update());a.dispatchEvent("assetLoad"),a.dispatchEvent("complete")}),a}},So.asset.getIDs=function(){var e=[];for(name in So.assetIDs)e.push(name);return e},So.image=function(e,t,o,n){return e.match(/^htt/i)&&(e="https://cors.zimjs.com/"+e),So.asset(e,t,o,n)},So.zimObjectIDs={},So.object=this.object=function(e){return So.zimObjectIDs[e]},So.object.getNames=function(){var e=[];for(name in So.zimObjectIDs)e.push(name);return e},window.zns||(window.asset=this.asset,window.image=So.image,window.object=this.object),this.setDefault=function(){return zimDefaultFrame=zdf=ie},Object.defineProperty(ie,"isDefault",{get:function(){return zdf==ie},set:function(e){zog("zim.Frame(): isDefault is read only - see setDefault()")}}),Object.defineProperty(ie,"stage",{get:function(){return J},set:function(e){zog("zim.Frame(): stage is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(ie,"width",{get:function(){return Y},set:function(e){zog("zim.Frame(): width is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(ie,"height",{get:function(){return _},set:function(e){zog("zim.Frame(): height is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(this,"color",{get:function(){return i},set:function(e){zot(i=e)?zid(w).style.backgroundColor="default":!zot(zid(w).style.backgroundColor=i)&&C&&J.setClearColor(So.convertColor(i))}}),Object.defineProperty(this,"outerColor",{get:function(){return te},set:function(e){te=e,zet("body").css({backgroundColor:te})}}),Object.defineProperty(ie,"allowDefault",{get:function(){return x},set:function(e){e?(J.preventSelection=!1,document.body.style.overflow="visible",ie.zil&&(window.removeEventListener("keydown",ie.zil[0]),window.removeEventListener("wheel",ie.zil[1]),window.removeEventListener("DOMMouseScroll",ie.zil[2]),ie.zil=null)):(J.preventSelection=!0,document.body.style.overflow="hidden",zot(ie.zil)&&(ie.zil=zil())),x=e}}),oe=new createjs.Event("keydown"),this.eventRemove=oe.remove,window.addEventListener("keydown",me),window.addEventListener("keyup",ze),window.addEventListener("wheel",ye),f&&window.DeviceMotionEvent&&window.addEventListener("devicemotion",be),f&&window.DeviceOrientationEvent&&(re=ne=0,window.addEventListener("deviceorientation",ve)),this.remakeCanvas=function(e,t){if("full"!=m){zot(e)&&(e=Y),zot(t)&&(t=_),zid(w)&&zid(w).parentNode.removeChild(zid(w)),Y=e,_=t;for(var o=[],n=0;n<ie.stage.numChildren;n++)o.push(ie.stage.getChildAt(n));ue(),he();for(n=0;n<o.length;n++)ie.stage.addChild(o[n])}},this.follow=function(r,e,t,o,i,a,l,s,c,u,d,h,g,p){var n;if(n=zob(ie.follow,arguments,"obj, boundary, damp, dampY, leftOffset, rightOffset, upOffset, downOffset, offsetDamp, offsetDampY, horizontal, vertical, borderLock, lag"))return n;if(ie.followObj=null,ie.followTicker&&So.Ticker.remove(ie.followTicker),!zot(r))return r.dirX=r.dirY=0,(ie.followObj=r).followDampX=null,r.followDampY=null,zot(e)&&(e=new So.Boundary(0,0,ie.stage.width,ie.stage.height)),ie.followBoundary=e,zot(t)&&(t=.05),zot(o)&&(o=t),zot(i)&&(i=0),zot(a)&&(a=0),zot(l)&&(l=0),zot(s)&&(s=0),zot(c)&&(c=.02),zot(u)&&(u=c),zot(d)&&(d=!0),zot(h)&&(h=!0),zot(g)&&(g=!1),zot(p)&&(p=!1),r.parent?f():r.on("added",f),r;function f(){var n=r.parent;ie.frameBorderLock=g,d&&(ie.followDampX=new So.Damp(n.x,t),ie.offsetDampX=new So.Damp(e.x+i+(e.width-i-a)/2,c)),h&&(ie.followDampY=new So.Damp(n.y,o),ie.offsetDampY=new So.Damp(e.y+l+(e.height-l-s)/2,u)),ie.followTicker=So.Ticker.add(function(){var e,t,o=ie.followBoundary;d&&(e=o.x+i+(o.width-i-a)/2,ie.followOffsetX=[p?o.x+o.width-i:e,e,p?o.x+i:e],ie.followObj&&(n.x=ie.followDampX.convert(ie.offsetDampX.convert(ie.followOffsetX[r.motionController?r.motionController.dirX+1:1])-r.x))),h&&(t=o.y+l+(o.height-l-s)/2,ie.followOffsetY=[p?o.y+o.height-s:t,t,p?o.y+l:t],ie.followObj&&(n.y=ie.followDampY.convert(ie.offsetDampY.convert(ie.followOffsetY[r.motionController?r.motionController.dirY+1:1])-r.y))),ie.frameBorderLock&&(n.x>ie.followBoundary.x&&(n.x=ie.followBoundary.x),n.y>ie.followBoundary.y&&(n.y=ie.followBoundary.y),n.x<ie.followBoundary.x+ie.followBoundary.width-n.width&&(n.x=ie.followBoundary.x+ie.followBoundary.width-n.width),n.y<ie.followBoundary.y+ie.followBoundary.height-n.height&&(n.y=ie.followBoundary.y+ie.followBoundary.height-n.height))})}},this.dispose=function(e,t,o){return ie.zil&&ie.zil.length&&(window.removeEventListener("keydown",ie.zil[0]),window.removeEventListener("wheel",ie.zil[1]),window.removeEventListener("DOMMouseScroll",ie.zil[2])),L&&window.removeEventListener("resize",L),window.removeEventListener("resize",le),window.removeEventListener("keydown",me),window.removeEventListener("keyup",ze),window.removeEventListener("wheel",ye),window.removeEventListener("devicemotion",be),window.removeEventListener("deviceorientation",ve),x||(document.body.style.overflow="auto"),function e(t){if(t.dispose)t.dispose();else{if(t.removeAllEventListeners(),t.numChildren)for(var o=t.numChildren-1;0<=o;o--)e(t.getChildAt(o));t.parent&&t.parent.removeChild(t)}}(J),zid(w)&&zid(w).parentNode.removeChild(zid(w)),ie==So.tickerFrame&&(So.tickerFrame=null),ie===zdf&&(zdf=null),!(ie=J=null)},this.orange="#f58e25",this.green="#acd241",this.pink="#e472c4",this.blue="#50c4b7",this.brown="#d1a170",this.yellow="#ebcb35",this.purple="#993399",this.red="#fb4758",this.black="#000000",this.darker="#111111",this.dark="#333333",this.grey="#555555",this.gray="#555555",this.tin="#777777",this.silver="#999999",this.fog="#aaaaaa",this.mist="#bbbbbb",this.light="#cccccc",this.moon="#dddddd",this.lighter="#eeeeee",this.white="#ffffff",this.clear="rgba(0,0,0,0)",this.faint="rgba(0,0,0,.01)",this.makeCircles=function(e,t){zot(e)&&(e=100);var o=[ie.orange,ie.green,ie.pink,ie.blue,ie.brown,ie.dark];if(t){(r=new So.Container({style:!1})).radius=e;for(var n=0;n<o.length;n++)r.addChild(new So.Circle(r.radius/o.length*(o.length-n),o[n],null,null,null,null,null,null,!1))}else{var r,i=(r=new So.Shape({style:!1})).graphics;r.radius=e;for(n=0;n<o.length;n++)i.f(o[n]).dc(0,0,r.radius/o.length*(o.length-n));r.setBounds(-r.radius,-r.radius,2*r.radius,2*r.radius)}return r},this.madeWith=function(e,t,o,n,r,i,a){zot(e)&&(e=So.dark),zot(t)&&(t="Made with ZIM");var l=new So.Container,s=l.icon=ie.makeIcon(o,n,r,i,a).sca(.5).alp(.92).hov(1).addTo(l).tap(function(){s.alp(.92),s.stage.update(),zgo("https://zimjs.com","_blank")});l.label=new So.Label(t,16,null,e).sca(.7).pos(0,-19,So.CENTER,So.BOTTOM,l);return l},this.makeIcon=function(e,t,o,n,r){var i=new So.Container(-20,-13,102,120).reg(-20,-13);zot(e)&&(e=ie.light),zot(t)&&(t=ie.dark),!0===o&&(o=[ie.silver,ie.silver,ie.silver,ie.silver,ie.silver]),new So.Rectangle(i.width,i.height,t,n,r).loc(-20,-13,i);var a=[[o?o[0]:"#E474C3","AieA0IAAgCIAmhlIEXAAIg5Bng",41.7,19.5],[o?o[1]:"#50C5B7","AiSAzIAnhlID+AAIg5Blg",35.3,33.2],[o?o[2]:"#F48E25","AiFA0IAmhnIDlAAIg5Bng",28.9,46.7],[o?o[3]:"#EBCD36","Ah4AzIAmhlIDLAAIg5Blg",22.4,60.5],[o?o[4]:"#ABD140","AhrA0IAAgFIAlhiICxAAIg5Bng",16.1,74.3],[e,"AlGHRIAnhnIH+AAIgbBngAlGlpIAnhnIJmAAIg5Bng",32.7,46.5]];return So.loop(a,function(e){var t=(new So.Shape).addTo(i);t.graphics.f(e[0]).p(e[1]),t.setTransform(e[2],e[3])}),i.mouseChildren=!1,i},this.makeCat=function(e){zot(e)&&(e=246);var o=new So.Container(157.5,246);So.loop([[16.95,241.15,0,"black",[1.5,2,1],"AgKAhIAVhB"],[58.65,244.378,0,"#A7A7A7",[3,2,1],"AmYAAIMxAB"],[105.64,107.14,"#EF7988",0,0,"AAEArQgNAAgjghQgiggAFgIQAFgJBEgCQBEgDAGAGQAHAIgfAkQgfAlgPAAIAAAAg"],[104.84,111.34,0,"black",[1,1,1],"AABA2IAPAYQAJAPAJAGQAKAHAMAAQAbAAAXgWQAQgPAVghQAVghAAgcQAAgnglgYQgbgSgxgCIgrACAAJADIgIAzAhphVQgXAVgMAWQgKAQgIAiQgIAkAFAMQALAfAqAOQAmANAcgIQANgEANgQQALgNAGgT"],[105.05,111.4,"#757B74",0,0,"AheBrQgvgRgQgeQgPgdAQgkQAZg8AEgFQAXgfA8gGQBVgKA+ATQBRAZgYBEQgVA/gnAZQgUAOgZAKQgJAJgVgbQgUgegCAAQgDAAgWAgQgWAUgZAAQgMAAgNgEg"],[86.18,93,"black",0,0,"Aj7g0QiYg0i9AyQA0g3BcgRQBagQBfAaQBkAbBEBBQBNBHASBpQhgiYibg0gAFxiDQAzgdA6AMQA9AMA2A4QgHgBAAACQAAAAgBABQAAAAAAAAQgBAAgBAAQAAAAgBgBQh8gshOAzQhIAvhBCYQALjABzhCg"],[78.5,63.23,"#705F6C","black",[1,1,1],"AHAg5IgNmIIBfGpQgOgQgSgMQgjgXgPASgAKeDZQg2g4g9gMQg6gMgzAdQhzBCgLDBQBBiZBIgvQBNgzB9AsQAEACAAgCQAAgCAHABgAqdBuIAAnsIDmHEQgegMgsgBQhXgChFA3gAoEDzQA0g3BdgRQBagQBeAaQBkAbBFBBQBMBIASBpQhfiYibg1QiYg0i+Ayg"],[86.28,98.01,"black","black",[1,1,1],"AJSh/QgEADgHgDQgFgBgBAFQgNBXhNA9QhTBEhagZQgGgCgPAFQgUAHgEAAQCNAeBchOQBGg7AWhigApRhnQAFABAIAAQAGABAAAAQBFBsCVA7QCpBDCrgzQACAAAHAJQAEAFAFAJQjAAzitg/Qing9g/iHg"],[96.95,97.3,"#0C0436",0,0,"AlZBJQgVgVAAgeQAAgcAVgVQAVgVAeAAQAdAAAVAVQAVAVAAAcQAAAegVAVQgVAVgdAAQgeAAgVgVgAD1AcQgVgVAAgdQAAgdAVgVQAVgVAeAAQAdAAAVAVQAVAVAAAdQAAAdgVAVQgVAVgdAAQgeAAgVgVg"],[96.88,97.2,"#EA9424",0,0,"AlpBYQgbgbAAgnQAAglAbgbQAbgbAnAAQAmAAAbAbQAbAbAAAlQAAAngbAbQgbAbgmAAQgnAAgbgbgADnArQgbgbAAgmQAAgmAbgbQAbgbAmAAQAnAAAbAbQAbAbAAAmQAAAmgbAbQgbAbgnAAQgmAAgbgbg"],[96.88,97.2,"#AFCE3A",0,0,"AlzBiQgggfAAgtQAAgrAggfQAfggAtAAQAsAAAgAgQAfAfAAArQAAAtgfAfQggAggsAAQgtAAgfgggADcA1QgfgfAAgsQAAgsAfgfQAgggAsAAQAtAAAfAgQAgAfAAAsQAAAsggAfQgfAggtAAQgsAAggggg"],[78.5,64.1,0,"black",[1,1,1],"AHAhCIgNmIIBfGpQgOgQgSgMQgjgXgPASgAKeDQQg2g4g9gMQg6gMgzAdQhzBCgLDBQCqAvBlhgQBJhFAGhagAoADiQAlgiBTgOQBYgOBaARQDrAsA0DTQjAAziog/Qihg+hAiIgAqdBlIAAnsIDmHEQgegMgsgBQhXgChFA3g"],[86.375,93.9,"#EACE35",0,0,"AltB+Qiig9g/iIQAkghBTgOQBZgPBaARQDrAtA0DRQhWAXhSAAQhkAAhcgjgADxB2QALjABzhBQAzgeA6AMQA9ANA2A4QgGBYhJBGQhEBAhiAAQgxAAg4gQg"],[73.45,154.83,"black","black",[2,1,1],"AkjjDIByAMQB/ANBEAFQB/AICXgSIgKFzQj4hflLiNQgDgBAFiag"],[79.42,123.62,"#A7A7A7","black",[2,1,1],"AEBpxIgBgBQAYiNAeiQQA8kgAfgMQAggNBLEqQAlCVAfCXIAXARQAbAXAZAcQBQBZAZBnQAZBngUB+QgKA/gPArQgeASgrAWQhYAuhFAXQg8AUh0AWIhoASIAAQzItygCQAvhKA1hoQBqjRAjiXQAri/AOjLIAFimQgegHhTgeQhEgZhgg/IhTg7QgekPgQkUQggonBEgWQBFgWCbEtQAkBGA3B9QAbA9AYA3QASAqAQAmIgjhQIABAAIJmgYIBUACIBQAK"]],function(e){var t=(new So.Shape).f(e[2]).s(e[3]).ss(e[4]?e[4][0]:null,e[4]?e[4][1]:null,e[4]?e[4][2]:null).p(e[5]);t.setTransform(e[0],e[1]),t.addTo(o)},!0);var t=new So.Container;return o.sca(e/246).addTo(t).mov(0,-.4),I&&t.cache(),t.mouseChildren=!1,t})},So.extend(So.Frame,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),So.Queue=function(){this.cjsEventDispatcher_constructor(),this.isLoading=!0},So.extend(So.Queue,createjs.EventDispatcher,null,"cjsEventDispatcher"),So.LEFT="left",So.RIGHT="right",So.CENTER="center",So.MIDDLE="middle",So.TOP="top",So.BOTTOM="bottom",So.HORIZONTAL="horizontal",So.VERTICAL="vertical",So.BOTH="both",So.UP="up",So.DOWN="down",So.GET="get",So.POST="post",So.LOCALSTORAGE="localStorage",So.SOCKET="socket",So.TO="to",So.FROM="from",So.SINE="sine",So.SQUARE="square",So.TRIANGLE="triangle",So.SAW="saw",So.SAWTOOTH="saw",So.ZAP="zap",So.colorsHex=["#f58e25","#acd241","#e472c4","#50c4b7","#d1a170","#ebcb35","#993399","#fb4758","#000000","#111111","#333333","#555555","#555555","#777777","#999999","#aaaaaa","#bbbbbb","#cccccc","#dddddd","#eeeeee","#ffffff","rgba(0,0,0,.01)","rgba(0,0,0,0)"],So.colors=["orange","green","pink","blue","brown","yellow","purple","red","black","darker","dark","grey","gray","tin","silver","fog","mist","light","moon","lighter","white","faint","clear"];for(l=0;l<So.colors.length;l++)So[So.colors[l]]=So.colorsHex[l];String.prototype.darken=function(e){return So.darken(this,e)},String.prototype.lighten=function(e){return So.lighten(this,e)},String.prototype.toColor=function(e,t){return So.toColor(this,e,t)};String.prototype.toAlpha=function(e){return So.toAlpha(this,e)};return So.distillery=[],So.distill=function(){!window.zns&&So&&(So.DISTILL||window.DISTILL)&&So.distillery.push("83.3","83.35"),zog("zim.distill() - go to https://zimjs.com/distill and enter the following:"),zog(0<So.distillery.length?So.distillery.join(" "):"must set zim.DISTILL = true;")},So.parseAudioSprite=function(e,t){if(z_d("83.25"),!(zot(e)||zot(e.resources)||zot(e.spritemap))){var o,n=e.resources[0],r=e.spritemap,i=[],a={src:n,data:{}};for(l in r)o=r[l],i.push({id:l,startTime:Math.round(1e3*o.start),duration:Math.round(1e3*(o.end-o.start))});return a.data.audioSprite=i,t&&zog(JSON.stringify(a)),a}},So.previewAudioSprite=function(e,t,o){if(z_d("83.26"),!zot(e)){if(zot(t)&&(t=3),zot(o)){if(zot(zdf))return;(o=zdf).stage}var n=o.width,r=(o.height,e),i=[],a=[];if(r.constructor=={}.constructor){r.resources&&(r=So.parseAudioSprite(r)),r.audioSprite?So.loop(r.audioSprite,function(e){i.push(e[0].substr(0,t)),a.push(e[0])}):r.data&&r.data.audioSprite&&So.loop(r.data.audioSprite,function(e){i.push(e.id.substr(0,t)),a.push(e.id)});var l=new So.Tabs({tabs:i,width:n,currentEnabled:!0}).addTo();return l.on("change",function(){o.asset(a[l.selectedIndex]).play()}),l}}},So.svgToBitmap=function(e,t,o,n){var r,i,a,l,s,c,u,d,h,g,p;z_d("83.27"),zot(e.draggable)||(r=new DOMParser,e=(e=e.innerHTML?r.parseFromString(e.innerHTML,"text/xml"):e).getElementsByTagName("svg")?e.getElementsByTagName("svg")[0]:null),XMLSerializer||!zon?((i="string"==typeof e?e:(new XMLSerializer).serializeToString(e))&&(1<(a=i.split(">")[0]).length&&1==a.split(/width/i).length&&(s=l=100,1<(c=a.split(/viewBox/i)).length&&(!(u=c[1].split('"')[1])||1<(d=u.split(" ")).length&&(l=d[d.length-2],s=d[d.length-1])),i=i.replace(/svg /i,'svg  width="'+l+'" height="'+s+'" ')),i.match(/xmlns/i)||(i=i.replace(/svg /i,"svg  xmlns='http://www.w3.org/2000/svg' "))),h=self.URL||self.webkitURL||self,(g=new Image).onload=function(){var e=new So.Bitmap(g,o,n);t(e),h.revokeObjectURL(p)},p=h.createObjectURL(new document.Blob([i],{type:"image/svg+xml"})),g.src=p):zog("ZIM svgToBitmap() - sorry, not supported in Browser")},So}(zim||{})).fastFrame=function(e,t){if(z_d("83.355"),createjs=e,zot(zdf))return t.frame=new zim.Frame({shim:{stage:t,canvas:t.canvas}}),zimDefaultFrame=zdf=t.frame,zim.scaX=createjs.stageTransformable?1:t.scaleX,zim.scaY=createjs.stageTransformable?1:t.scaleY,t.frame},zim.addWires=function(e){return z_d("83.365"),e.wire=function(){return Array.prototype.unshift.call(arguments,e),zim.wire.apply(null,arguments),e},e.noWire=function(){return Array.prototype.unshift.call(arguments,e),zim.noWire.apply(null,arguments),e},e.wired=function(){return Array.prototype.unshift.call(arguments,e),zim.wired.apply(null,arguments),e},e.noWired=function(){return Array.prototype.unshift.call(arguments,e),zim.noWired.apply(null,arguments),e},e};var ZIMONON=!(zim.setBlurDetect=function(){z_d("83.36"),zim.blurCheck=!0,zim.pauseAnimateOnBlur=!0,zim.pauseOnBlur=[],zim.blurDetect=function(){var t,o,e={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(t in e)if(t in document){o=e[t];break}return function(e){return e&&document.addEventListener(o,e),!document[t]}}(),zim.blurDetect(function(){if(zim.blurDetect())setTimeout(function(){if(zim.pauseOnBlur)for(var e=0;e<zim.pauseOnBlur.length;e++){(t=zim.pauseOnBlur[e]).pauseOnBlurPaused||t.pause(!1)}if(zim.pauseAnimateOnBlur&&zim.animatedObjects)for(e=0;e<zim.animatedObjects.objects.length;e++){var t=zim.animatedObjects.objects[e],o=zim.copy(t.tweenStates);if(t.tweenStates)if(zot(o.all)||o.all)for(id in t.pauseAnimate(!1),o)"all"!=id&&(o[id]||t.pauseAnimate(!0,id));else for(id in t.pauseAnimate(!0),o)"all"!=id&&o[id]&&t.pauseAnimate(!1,id);else t.pauseAnimate(!1)}},300);else{if(zim.pauseOnBlur)for(var e=0;e<zim.pauseOnBlur.length;e++){var t=zim.pauseOnBlur[e];t.pauseOnBlurPaused=t.paused,t.pause(!0)}zim.pauseAnimateOnBlur&&zim.animatedObjects&&zim.pauseAnimate(!0,"pauseOnBlur")}})}),zim=function(m){return m.ZIMON={stringify:function(i,a){if(z_d("83.39"),!zot(i)){if(ZIMONON)return function o(n,e,t){if(zot(n))return;{var r;Array.isArray(n)?m.loop(n,function(e,t){o(e,n,t)}):n.constructor=={}.constructor?m.loop(n,function(e,t){o(t,n,e)}):n.type?(r={zimon:n.type},n.arguments&&(r.args=Array.prototype.slice.call(n.arguments),o(r.args)),"series"==n.type&&(r.args=Array.prototype.slice.call(n.array),o(r.args)),a&&a[n.type]&&a[n.type].props&&(r.props=[],m.loop(a[n.type].props,function(e){r.props.push(n[e])})),e?e[t]=r:i=r):"string"!=typeof n&&"number"!=typeof n&&"boolean"!=typeof n&&null!==n&&zon&&zogy("ZIMON - potentially bad JSON value"+n)}}(i=m.copy(i)),JSON.stringify({obj:i,key:a,zimon:1,info:"https://zimjs.com/zimon/"});zon&&zogy("ZIMON - set ZIMONON=true before using ZIMON.stringify()")}},parse:function(e,u){if(z_d("83.39"),!zot(e)){var t=JSON.parse(e),d=t.obj,u=t.key;return function o(n,e,t){if(zot(n))return;{function r(t){try{return Function("return("+t+")")()}catch(e){return zon&&zogy("ZIMON: bad function scope or name: "+t),null}}var i,a,l,s,c;Array.isArray(n)?m.loop(n,function(e,t){o(e,n,t)}):zot(n.zimon)&&n.constructor=={}.constructor?m.loop(n,function(e,t){o(t,n,e)}):n.zimon&&(i=n.zimon,a="",u&&(u[i]&&u[i].scope?a=u[i].scope+".":u.scope&&(a=u.scope+".")),l=r(a+i),zot(s=n.args)&&(s=[]),o(s),c="series"==n.type?m.series(s):l?new(l.bind.apply(l,[null].concat(Array.prototype.slice.call(s)))):null,e?e[t]=c:d=c,u&&u[i]&&u[i].props&&c&&m.loop(u[i].props,function(e,t){zot(n.props[t])||(c[e]=n.props[t])}))}}(d),d}}},m.Wonder=function(n,r,i,a,e){var t,o,l,s,c,u,d,h,g;if(t=zob(m.Wonder,arguments,"wid, client, app, notes, server",this))return t;function p(){0<l.length&&(m.async(e+"?wonder="+JSON.stringify(l)),l=[],c++)}function f(e,t){return zot(e)?void zog("zim.Wonder "+t+" - please provide a keyword"):!o[t+"sOff"][e]}z_d("82"),zot(n)?zog("zim.Wonder() - please provide Wonder ID (see https://zimjs.com/wonder/)"):(zot(e)&&(e="https://wonder.zimjs.org/wonder"),o=this,zot(m.wonderSession)&&(m.wonderSession="W"+m.rand(1e5,999999)),l=[],s=setInterval(p,1e3),c=0,d=setInterval(function(){28<c&&(l.push({id:n,c:r,a:i,n:a,k:u,t:"e",v:"frequency max - terminated",s:m.wonderSession}),zog("zim.Wonder() - frequency max - terminated"),o.dispose()),c=0},3e4),this.countsOff={},this.timesOff={},this.ordersOff={},this.count=function(e){f(e,"count")&&(u=e,l.push({id:n,c:r,a:i,n:a,k:e,t:"c",v:1,s:m.wonderSession}))},h={},this.timeStart=function(e){f(e,"time")&&(o.timeEnd(e),h[u=e]=(new Date).getTime())},g={},this.timePause=function(e){f(e,"time")&&(g[e]||(g[e]=(new Date).getTime()))},this.timeUnpause=function(e){var t;f(e,"time")&&g[e]&&(t=(new Date).getTime()-g[e],h[e]&&(h[e]+=t),delete g[e])},this.timeEnd=function(e){var t,o;f(e,"time")&&h[e]&&(t=g[e]?g[e]:(new Date).getTime(),o=Math.round((t-h[e])/1e3),delete g[e],delete h[e],l.push({id:n,c:r,a:i,n:a,k:e,t:"t",v:o,s:m.wonderSession}))},this.order=function(e,t){f(e,"order")&&(u=e,zot(t)?zog("zim.Wonder order() - please provide an item"):l.push({id:n,c:r,a:i,n:a,k:e,t:"o",v:t,s:m.wonderSession}))},this.countOff=function(e){o.countsOff[e]=1},this.countOn=function(e){delete o.countOff[e]},this.timeOff=function(e){o.timesOff[e]=1},this.timeOn=function(e){delete o.timesOff[e]},this.orderOff=function(e){o.ordersOff[e]=1},this.orderOn=function(e){delete o.ordersOff[e]},this.dispose=function(e,t,o){return p(),clearInterval(s),clearInterval(d),!0})},m.VERSION="cat/02/zim",m.getLatestVersions=function(t){z_d("82.2");m.async("https://zimjs.com/live/getLatestVersions.php",function(e){t(JSON.parse(e))},"returnLatestVersions")},m}(zim||{});window.zns||zimplify();